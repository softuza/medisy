import{a as l}from"./chunk-4U6XJCRR.js";import{e as pe}from"./chunk-QV5CRQW6.js";import{a as u,d as ne,e as le,f as se,i as me,j as N}from"./chunk-D3A4DG3E.js";import"./chunk-YGU4JTYS.js";import"./chunk-WW5RFYLV.js";import"./chunk-HWJ6IS6U.js";import{b as ee,f as te,g as ie,h as ae,j as oe,k as re}from"./chunk-SR3I6TMI.js";import{a as Z}from"./chunk-CT6UCPJK.js";import{j as d,k as Y}from"./chunk-4MMSBRWE.js";import{a as k,b as q,d as C,e as x,g as _}from"./chunk-4CSR7EPJ.js";import{c as Q,p as J,q as v,r as K,t as W}from"./chunk-VG3PAYI5.js";import"./chunk-SNT3MO4N.js";import"./chunk-264QKOH6.js";import"./chunk-W4ZBAGNE.js";import"./chunk-AAHDAXVC.js";import"./chunk-IEUIBZ53.js";import{d as I,f as L,g as B,l as y,n as F,q as G,r as $,u as j}from"./chunk-VXNH5PTX.js";import{Y as H,r as w,t as U}from"./chunk-FZKM7RGV.js";import{a as T,e as E}from"./chunk-DNH4OZS2.js";import"./chunk-ELRLVGRO.js";import{ia as X,la as M}from"./chunk-4B53IFHW.js";import"./chunk-UZ765RGE.js";import{Kb as s,Lb as m,Mb as p,Wb as P,Xb as O,bb as c,cb as g,ea as z,ja as r,na as f,oa as R,oc as h,pc as S,qb as D,zb as n}from"./chunk-G33TNFCW.js";import"./chunk-EAIILSS5.js";var de=(()=>{let e=class e extends te{constructor(a,t,i){super(t),this.fb=a,this.dialog=t,this.data=i,this.srptService=r(l),this.baseTemplateVariables=this.srptService.baseTemplates.variables.getAll(this.data.baseTemplateId,{orderBy:["name"],filterBehavior:w.Or,filters:U.create().equalIf("id",this.data.templateVariable?.baseTemplateVariableId).notAny("templates.templateId",this.data.templateId).filters()}),this.form=a.group({enabled:[i.templateVariable?.enabled??!0,[I.required]],description:[i.templateVariable?.description,[]],baseTemplateVariableId:[i.templateVariable?.baseTemplateVariableId,[I.required]],value:[i.templateVariable?.value,[]]});}submit(){this.IsValid()&&(this.data.templateVariable?this.save(this.srptService.templates.variables.update(this.data.templateId,this.data.templateVariable?.id,this.form.value)):this.save(this.srptService.templates.variables.create(this.data.templateId,this.form.value)));}};e.ɵfac=function(t){return new(t||e)(g($),g(k),g(q));},e.ɵcmp=f({type:e,selectors:[["sz-mgmt-reporting-template-variables-save"]],standalone:!0,features:[h([l]),D,S],decls:9,vars:6,consts:()=>{let a;a="Variable";let t;t="Value";let i;return i="Enabled",[i,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","baseTemplateVariableId","label",a,3,"source"],["formControlName","value","label",t],[1,"sz-form-row"],["formControlName","enabled"],[3,"actions"]];},template:function(t,i){t&1&&(p(0,"sz-ui-dialog-header",1),s(1,"mat-dialog-content")(2,"form",2),p(3,"sz-ui-form-field-select",3)(4,"sz-ui-form-field-input",4),s(5,"div",5)(6,"mat-checkbox",6),P(7,0),m()()()(),p(8,"sz-ui-dialog-actions",7)),t&2&&(n("title",i.title)("subtitle",i.subtitle)("alert",i.alert()),c(2),n("formGroup",i.form),c(),n("source",i.baseTemplateVariables),c(5),n("actions",i.actions));},dependencies:[j,y,L,B,F,G,re,ie,ae,_,x,v,J,pe,W,Q,K],encapsulation:2});let o=e;return o;})();var ue=(()=>{let e=class e{constructor(){this.dialog=r(C),this.srptService=r(l),this.route=r(T),this.dataSource=new ne("baseTemplateVariable.name"),this.template=this.route.snapshot.data.template,this.appBarConfig={title:H.variables,subtitle:this.template.name,menu:Y.default().setItems([d.add(this.openSaveComponent.bind(this)),d.menu([d.search()])])},this.dataSource.columnDefs.push(u.uuid("id"),u.string("baseTemplateVariable.name"),u.string("value"),u.date("createdAt").setVisible(!1),u.date("updatedAt").setVisible(!1),u.menu([d.edit(this.openSaveComponent.bind(this)),d.divider(),d.delete(this.openTemplateVariableDeleteComponent.bind(this))])),this.get();}openSaveComponent(a){this.dialog.open(de,{data:{templateId:this.template.id,baseTemplateId:this.template.baseTemplateId,templateVariable:a}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openTemplateVariableDeleteComponent(a){this.dialog.open(oe,{data:ee.delete(this.srptService.templates.variables.delete(a.templateId,a.id),a)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}get(){this.srptService.templates.variables.get(this.template.id,this.dataSource.getQuery()).pipe(le(this.dataSource.state)).subscribe(a=>{this.dataSource.set(a.items,a.count);});}};e.ɵfac=function(t){return new(t||e)();},e.ɵcmp=f({type:e,selectors:[["sz-mgmt-reporting-template-variables"]],standalone:!0,features:[S],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(t,i){t&1&&(s(0,"sz-ui-table-bar",0),O("changed",function(){return i.get();}),m(),s(1,"sz-ui-table",1),O("update",function(){return i.get();}),m()),t&2&&(n("config",i.appBarConfig)("dataSource",i.dataSource),c(),n("dataSource",i.dataSource));},dependencies:[E,N,me,se,v,M],encapsulation:2});let o=e;return o;})();var V=(()=>{let e=class e{constructor(){this.route=r(T),this.dialog=r(C),this.srptService=r(l),this.template=this.route.snapshot.data.template,this.appBarConfig={title:this.template.name,subtitle:this.template.description};}};e.ɵfac=function(t){return new(t||e)();},e.ɵcmp=f({type:e,selectors:[["sz-mgmt-reporting-template"]],standalone:!0,features:[h([]),S],decls:3,vars:1,consts:[[3,"config"],[1,"tw-my-4"]],template:function(t,i){t&1&&(p(0,"sz-ui-app-bar",0),s(1,"div",1),p(2,"sz-mgmt-reporting-template-variables"),m()),t&2&&n("config",i.appBarConfig);},dependencies:[_,M,N,Z,X,ue],encapsulation:2});let o=e;return o;})();var ft=(()=>{let e=class e{};e.ɵfac=function(t){return new(t||e)();},e.ɵmod=R({type:e}),e.ɵinj=z({providers:[l],imports:[E.forChild([{path:"",component:V}]),_,M,V]});let o=e;return o;})();export{ft as TemplatesModule};/**i18n:23b18f90dfad26ae6b830c3e760ecc323aedcfc43eb78549f6a00c2171dce7c8*/