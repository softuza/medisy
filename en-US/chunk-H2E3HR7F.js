import"./chunk-QLZCWWQQ.js";import{c as ae}from"./chunk-U6VB2DHS.js";import{a as Y}from"./chunk-7W4DPCX5.js";import{d as oe,e as y,g as ie,i as re,j as se}from"./chunk-OKHT2ZMW.js";import"./chunk-YSNB3P37.js";import"./chunk-M6VFFTL7.js";import{a as m}from"./chunk-I3W7CTPV.js";import"./chunk-2DOHZQYD.js";import{b as X,f as w,g as $,h as U,j as k,k as h}from"./chunk-JDBQ45YP.js";import{a as V}from"./chunk-ZGUTF2MC.js";import{j as d,k as te}from"./chunk-53DZ6NLX.js";import{a as N,b as A,d as F,e as R,g as T}from"./chunk-7B3GMYBR.js";import{q as B,r as L}from"./chunk-NKLFXX3X.js";import"./chunk-VPIQ5RG6.js";import"./chunk-PYOUUVMA.js";import"./chunk-ODIMT2GD.js";import"./chunk-NBE6QGAD.js";import"./chunk-IT3CNXEP.js";import{d as C,f as M,g as b,l as _,n as v,q as G,r as I,u as E}from"./chunk-QZRJHJEV.js";import{Y as ee,r as Z,t as O}from"./chunk-4QPQ7IQ3.js";import{a as z,c as W,d as D}from"./chunk-WMCOMOML.js";import"./chunk-HNENNTVD.js";import"./chunk-V2COJPJH.js";import{ia as x,la as P}from"./chunk-H2OL5IOU.js";import"./chunk-CYOOLWM5.js";import{Ia as J,Jb as u,Kb as c,Lb as p,Wb as K,bb as n,ea as H,ja as s,mb as g,mc as S,na as l,nc as f,oa as Q,yb as a}from"./chunk-6EDHPT3A.js";import"./chunk-NLUW4JS2.js";var ne=(()=>{let t=class t extends w{constructor(){let e=s(N);super(e),this.mlabService=s(m),this.fb=s(I),this.data=s(A),this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"],filters:O.create().notAny("testGroups.testGroupId",this.data).filters()}),this.testTypeSelectConfig={multiple:!0};let o=this.fb;this.dialog=e,this.form=o.group({testTypeIds:[null,[C.required]]});}submit(){this.IsValid()&&this.save(this.mlabService.testGroups.testTypes.batchCreate(this.data,this.form.value.testTypeIds.map(e=>({testTypeId:e}))));}};t.ɵfac=function(o){return new(o||t)();},t.ɵcmp=l({type:t,selectors:[["sz-medisy-laboratory-test-group-test-types-import"]],standalone:!0,features:[S([]),g,f],decls:5,vars:7,consts:()=>{let e;return e="Type",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeIds","label",e,3,"source","config"],[3,"actions"]];},template:function(o,i){o&1&&(p(0,"sz-ui-dialog-header",0),u(1,"mat-dialog-content")(2,"form",1),p(3,"sz-ui-form-field-select",2),c()(),p(4,"sz-ui-dialog-actions",3)),o&2&&(a("title",i.title)("subtitle",i.subtitle)("alert",i.alert()),n(2),a("formGroup",i.form),n(),a("source",i.testTypes)("config",i.testTypeSelectConfig),n(),a("actions",i.actions));},dependencies:[E,_,M,b,v,G,T,R,B,h,$,U,L],encapsulation:2});let r=t;return r;})();var pe=(()=>{let t=class t extends w{constructor(){let e=s(N);super(e),this.mlabService=s(m),this.fb=s(I),this.data=s(A),this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"],filterBehavior:Z.Or,filters:O.create().equalIf("id",this.data.testGroupTestType?.testTypeId).notAny("testGroups.testGroupId",this.data.testGroupId).filters()});let o=this.fb;this.dialog=e;let i=this.data;this.form=o.group({testTypeId:[i.testGroupTestType?.testTypeId,[C.required]]});}submit(){this.IsValid()&&(this.data.testGroupTestType?this.save(this.mlabService.testGroups.testTypes.update(this.data.testGroupId,this.data.testGroupTestType?.id,this.form.value)):this.save(this.mlabService.testGroups.testTypes.create(this.data.testGroupId,this.form.value)));}};t.ɵfac=function(o){return new(o||t)();},t.ɵcmp=l({type:t,selectors:[["sz-medisy-laboratory-test-group-test-types-save"]],standalone:!0,features:[S([]),g,f],decls:5,vars:6,consts:()=>{let e;return e="Type",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId","label",e,3,"source"],[3,"actions"]];},template:function(o,i){o&1&&(p(0,"sz-ui-dialog-header",0),u(1,"mat-dialog-content")(2,"form",1),p(3,"sz-ui-form-field-select",2),c()(),p(4,"sz-ui-dialog-actions",3)),o&2&&(a("title",i.title)("subtitle",i.subtitle)("alert",i.alert()),n(2),a("formGroup",i.form),n(),a("source",i.testTypes),n(),a("actions",i.actions));},dependencies:[E,_,M,b,v,G,T,R,B,h,$,U,L],encapsulation:2});let r=t;return r;})();var me=(()=>{let t=class t{constructor(){this.dialog=s(F),this.mlabService=s(m),this.route=s(z),this.dataSource=new ie(),this.testGroupId=J.required(),this.card={header:{title:ee.test_types},menu:te.default().setItems([d.add(this.openSaveComponent.bind(this)),d.menu([d.import(this.openImportComponent.bind(this)),d.divider(),d.clear(this.openTestGroupTestTypesClearComponent.bind(this))])])},this.dataSource.columnDefs.push(y.uuid("id"),y.string("testType.nameEn"),y.date("createdAt").setVisible(!1),y.date("updatedAt").setVisible(!1),y.menu([d.edit(this.openSaveComponent.bind(this)),d.divider(),d.delete(this.openTestGroupTestTypeDeleteComponent.bind(this))]));}ngOnInit(){this.get();}openImportComponent(){this.dialog.open(ne,{data:this.testGroupId()}).afterClosed().subscribe(e=>{this.dataSource.add(e);});}openSaveComponent(e){this.dialog.open(pe,{data:{testGroupId:this.testGroupId(),testGroupTestType:e}}).afterClosed().subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openTestGroupTestTypeDeleteComponent(e){this.dialog.open(k,{data:X.delete(this.mlabService.testGroups.testTypes.delete(e.testGroupId,e.id),e)}).afterClosed().subscribe(o=>{this.dataSource.delete(o);});}openTestGroupTestTypesClearComponent(){this.dialog.open(k,{data:X.delete(this.mlabService.testGroups.testTypes.batchDelete(this.testGroupId(),this.dataSource.getData().map(e=>e.id)))}).afterClosed().subscribe(e=>{e&&this.dataSource.clear();});}updateItem(e){this.mlabService.testGroups.testTypes.update(e.testTypeId,e.id,e).subscribe(o=>{this.dataSource.update(o);});}get(){this.mlabService.testGroups.testTypes.get(this.testGroupId(),this.dataSource.getQuery()).pipe(re(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};t.ɵfac=function(o){return new(o||t)();},t.ɵcmp=l({type:t,selectors:[["sz-medisy-laboratory-test-group-test-types"]],inputs:{testGroupId:[1,"testGroupId"]},standalone:!0,features:[f],decls:2,vars:2,consts:[[3,"card"],["content","",3,"update","dataSource"]],template:function(o,i){o&1&&(u(0,"sz-ui-card",0)(1,"sz-ui-table",1),K("update",function(){return i.get();}),c()()),o&2&&(a("card",i.card),n(),a("dataSource",i.dataSource));},dependencies:[D,P,se,oe,Y],encapsulation:2});let r=t;return r;})();var q=(()=>{let t=class t{constructor(){this.dialog=s(F),this.mlabService=s(m),this.route=s(z),this.router=s(W),this.testGroup=this.route.snapshot.data.testGroup,this.tiles=[],this.appBarConfig={title:this.testGroup.name,subtitle:this.testGroup.description,backEnabled:!0};}};t.ɵfac=function(o){return new(o||t)();},t.ɵcmp=l({type:t,selectors:[["sz-medisy-laboratory-test-group"]],standalone:!0,features:[S([]),f],decls:3,vars:2,consts:[[3,"config"],[1,"tw-grid","lg:tw-grid-cols-2","tw-gap-2","tw-mb-2"],[3,"testGroupId"]],template:function(o,i){o&1&&(p(0,"sz-ui-app-bar",0),u(1,"div",1),p(2,"sz-medisy-laboratory-test-group-test-types",2),c()),o&2&&(a("config",i.appBarConfig),n(2),a("testGroupId",i.testGroup.id));},dependencies:[ae,V,me],encapsulation:2});let r=t;return r;})();var de=[{path:"",component:q},{path:"specimen-types",loadComponent:()=>import("./chunk-LWVSWMTH.js").then(r=>r.TestGroupSpecimenTypesComponent)}];var vt=(()=>{let t=class t{};t.ɵfac=function(o){return new(o||t)();},t.ɵmod=Q({type:t}),t.ɵinj=H({providers:[m],imports:[D.forChild(de),T,x,P,V,h,Y,q]});let r=t;return r;})();export{vt as TestGroupModule};/**i18n:71c33448fc84035c6ee56f25f20b16a3c311d1f911de884d4bce9857c4574a16*/