"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[257],{6257:($,P,o)=>{o.r(P),o.d(P,{PersonDocumentsComponent:()=>R});var f=o(2296),p=o(8109),S=o(2191),N=o(5973),C=o(9060),l=o(4110),D=o(5041),u=o(3572),O=o(9598),M=o(8721),E=o(8180),i=o(6223),d=o(7700),T=o(6981),v=o(1646),g=o(9004),e=o(5879),h=o(5348),A=o(5974),I=o(4622),_=o(6091),y=o(6607);let Y=(()=>{class s extends l.Ku{constructor(t,n,a,m){super(a),this.personService=t,this.fb=n,this.dialog=a,this.data=m,this.form=n.group({referenceNumber:[m.personDocument?.referenceNumber,[i.kI.maxLength(128)]],documentType:[m.personDocument?.documentType??v.n.DriverLicense,[i.kI.required]]})}submit(){this.IsValid()&&this.save(this.data.personDocument?this.personService.updatePersonDocument(this.data.personId,this.data.personDocument.id,this.form.value):this.personService.createPersonDocument(this.data.personId,this.form.value))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.R),e.Y36(i.qu),e.Y36(d.so),e.Y36(d.WI))},s.\u0275cmp=e.Xpm({type:s,selectors:[["medisy-people-person-documents-save"]],standalone:!0,features:[e.qOj,e.jDz],decls:6,vars:3,consts:function(){let r;return r="Number",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","referenceNumber","placeholder",r],["formControlName","documentType"],[3,"actions"]]},template:function(t,n){1&t&&(e._UZ(0,"sz-ui-dialog-header",0),e.TgZ(1,"mat-dialog-content")(2,"form",1),e._UZ(3,"sz-ui-form-field-input",2)(4,"medisy-form-field-document-type",3),e.qZA()(),e._UZ(5,"sz-ui-dialog-actions",4)),2&t&&(e.Q6J("header",n.header),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("actions",n.actions))},dependencies:[i.UX,i._Y,i.JJ,i.JL,i.sg,i.u,d.Is,d.xY,g.g,A.g,l.su,I.Y,_.t,T.F,y.$],encapsulation:2}),s})();var L=o(6939),U=o(3144),z=o(2516);let R=(()=>{class s{constructor(t,n,a,m){this.dialog=t,this.personService=n,this.route=a,this.documentTypeI18nPipe=m,this.dataSource=new u.b2(O.J.paged()),this.person=this.route.snapshot.data.person,this.dataSource.columns=[u.UC.text("referenceNumber","Number"),S.h.documentType(c=>this.documentTypeI18nPipe.transform(c.documentType)),S.h.createdAt(),S.h.menu([u.od.edit(c=>this.openSaveComponent(c)),u.od.delete(c=>this.openPersonDocumentDeleteComponent(c))])],this.get()}openSaveComponent(t){this.dialog.open(Y,{data:{personId:this.person.id,personDocument:t}}).afterClosed().pipe((0,E.q)(1)).subscribe(a=>{this.dataSource.updateOrPushItem(a)})}openPersonDocumentDeleteComponent(t){this.dialog.open(l.fN,{data:l.cb.delete(this.personService.deletePersonDocument(t.personId,t.id),t)}).afterClosed().pipe((0,E.q)(1)).subscribe(a=>{this.dataSource.delete(a)})}get(){this.personService.getPersonDocuments(this.person.id,this.dataSource.filterModel).pipe((0,M.sU)(this.dataSource.indicator),(0,E.q)(1)).subscribe(t=>{this.dataSource.set(t.items,t.count)})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(d.uw),e.Y36(h.R),e.Y36(p.gz),e.Y36(N.z))},s.\u0275cmp=e.Xpm({type:s,selectors:[["medisy-people-person-documents"]],standalone:!0,features:[e._Bn([N.z]),e.jDz],decls:12,vars:7,consts:function(){let r,t;return r="Documents",t="Add",[["start",""],[1,"sz-h5"],r,["routerLink","../",1,"tw-underline"],[3,"dataSource","search"],["title","","mat-flat-button","","color","primary","start","",3,"click"],t,[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(t,n){1&t&&(e.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),e.SDv(3,2),e.qZA(),e.TgZ(4,"a",3),e._uU(5),e.ALo(6,"personName"),e.qZA()()(),e.TgZ(7,"sz-ui-table-filter",4),e.NdJ("search",function(){return n.get()}),e.TgZ(8,"button",5),e.NdJ("click",function(){return n.openSaveComponent()}),e.TgZ(9,"span"),e.SDv(10,6),e.qZA()()(),e.TgZ(11,"sz-ui-table",7),e.NdJ("update",function(){return n.get()}),e.qZA()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,5,n.person)),e.xp6(2),e.Q6J("dataSource",n.dataSource),e.xp6(4),e.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",n.dataSource))},dependencies:[p.Bz,p.rH,f.ot,f.lW,u.Vn,L.K,U.f,D.n,z.z,C.Y],encapsulation:2}),s})()}}]);