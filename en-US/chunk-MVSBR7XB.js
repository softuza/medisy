import{a as Z,c as x,e as ee,j as te,k as ie,l as r}from"./chunk-UEYVTK2C.js";import{a as c}from"./chunk-X7MHABBF.js";import{e as H,f as q,g as J,i as K,j as Q,k as W}from"./chunk-VBW76653.js";import{f as g}from"./chunk-2F3BHEDP.js";import{a as j,b as U,d as k,e as w,g as X}from"./chunk-UDDJQSJH.js";import{t as B,z as V}from"./chunk-PLHMF4AU.js";import{Ba as y,Ca as $,J as L,N as F,f as b,g as N,k as v,m as P,p as D,q as I,t as z,ya as G}from"./chunk-76TLQ37S.js";import{Ea as R,Ga as Y}from"./chunk-4F3G4NSL.js";import{Ac as O,Fb as s,Gb as u,Hb as T,M as _,Rb as A,Tb as h,gb as m,hb as p,hc as E,kc as C,la as l,oa as f,ob as M,vb as n}from"./chunk-WEGHM63Q.js";var S=function(i){return i.Created="Created",i.Pending="Pending",i.Started="Started",i.Finished="Finished",i;}(S||{});function oe(i){switch(i){case S.Created:return"description";case S.Pending:return"pending";case S.Started:return"sync";case S.Finished:return"done";default:return"";}}var ae=(()=>{let o=class o extends H{constructor(e,t,a,d){super(a),this.mlabService=e,this.fb=t,this.dialog=a,this.data=d,this.form=t.group({note:[d?.note,[]]});}submit(){this.IsValid()&&this.data&&this.save(this.mlabService.analyses.tests.update(this.data.analysisId,this.data.id,this.form.value));}};o.ɵfac=function(t){return new(t||o)(p(c),p(I),p(j),p(U));},o.ɵcmp=f({type:o,selectors:[["medisy-laboratory-analysis-tests-save"]],standalone:!0,features:[M,C],decls:5,vars:3,consts:()=>{let e;return e="Note",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","note","label",e],[3,"actions"]];},template:function(t,a){t&1&&(T(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),T(3,"sz-ui-form-field-input",2),u()(),T(4,"sz-ui-dialog-actions",3)),t&2&&(n("header",a.header),m(2),n("formGroup",a.form),m(2),n("actions",a.actions));},dependencies:[z,v,b,N,P,D,X,w,Q,q,J,V,B],encapsulation:2});let i=o;return i;})();var Ve=(()=>{let o=class o{constructor(){this.route=l(L),this.dialog=l(k),this.locale=l(O),this.mlabService=l(c),this.dataSource=new x(["testTypeId","-testId"]),this.analysis=this.route.snapshot.data.analysis,this.dataSource.fields.push(r.uuid("id"),r.uuid("analysisId"),r.uuid("testTypeId"),r.uuid("test.testType").setFetchable(!0).setVisibility(!1).setFilterable(!1),r.icon("test.state",e=>oe(e.test?.state)).setContentTooltip(e=>$(e.test?.state)),r.string("testType").setDisplayName(y.testType).setHeaderSortable(!1).setContentFormat(e=>e.test?e.test.testType.name:e.testType.name),r.string("test.referenceGroup.name").setDisplayName(y.referenceGroup),r.string("note"),r.date("createdAt",!1),r.date("updatedAt",!1),Z.menu([g.edit(e=>this.openSaveComponent(e)),g.divider(),g.delete(e=>this.openDeleteComponent(e))])),this.get();}openCreateComponent(){}openSaveComponent(e){this.dialog.open(ae,{data:e}).afterClosed().pipe(_(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openDeleteComponent(e){this.dialog.open(K,{data:W.delete(this.mlabService.analyses.tests.delete(e.analysisId,e.id),e)}).afterClosed().pipe(_(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.mlabService.analyses.tests.get(this.analysis.id,this.dataSource.buildRequest()).pipe(G(this.dataSource.indicator)).pipe(_(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(t){return new(t||o)();},o.ɵcmp=f({type:o,selectors:[["medisy-laboratory-analysis-tests"]],standalone:!0,features:[E([c]),C],decls:5,vars:3,consts:()=>{let e;return e="Add",[[3,"dataSource","changed"],["mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(t,a){t&1&&(s(0,"sz-ui-table-search-filter",0),h("changed",function(){return a.get();}),s(1,"button",1),h("click",function(){return a.openCreateComponent();}),s(2,"span"),A(3,2),u()()(),s(4,"sz-ui-table",3),h("update",function(){return a.get();}),u()),t&2&&(n("dataSource",a.dataSource),m(4),n("stateEnabled",!0)("dataSource",a.dataSource));},dependencies:[F,ie,te,ee,Y,R],encapsulation:2});let i=o;return i;})();export{Ve as a};/**i18n:b6356af15a472d72c43a2a12f81780e7aeabf4debd55cf9990b19b5b7f0f0471*/