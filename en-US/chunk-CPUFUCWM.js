import{a as ie,d as re,e as s,h as ne,i as ae,j as se}from"./chunk-OKHT2ZMW.js";import"./chunk-YSNB3P37.js";import"./chunk-M6VFFTL7.js";import{a as J}from"./chunk-5TNDWLJL.js";import{a as d}from"./chunk-I3W7CTPV.js";import"./chunk-2DOHZQYD.js";import{b as Z,f as x,g as ee,h as te,j as oe,k as C}from"./chunk-JDBQ45YP.js";import{a as W}from"./chunk-ZGUTF2MC.js";import{j as m,k as K}from"./chunk-53DZ6NLX.js";import{a as $,b as P,d as G,e as Y,g}from"./chunk-7B3GMYBR.js";import{q as w,r as q,s as H,t as Q}from"./chunk-NKLFXX3X.js";import"./chunk-VPIQ5RG6.js";import"./chunk-PYOUUVMA.js";import"./chunk-ODIMT2GD.js";import"./chunk-NBE6QGAD.js";import{i as X}from"./chunk-IT3CNXEP.js";import{d as h,f as R,g as v,l as D,n as z,q as L,r as I,t as V,u as E}from"./chunk-QZRJHJEV.js";import{Y as k}from"./chunk-4QPQ7IQ3.js";import{c as F,d as B}from"./chunk-WMCOMOML.js";import"./chunk-HNENNTVD.js";import"./chunk-V2COJPJH.js";import{ia as U,la as j}from"./chunk-H2OL5IOU.js";import"./chunk-CYOOLWM5.js";import{Jb as p,Kb as c,Lb as S,Wb as M,bb as l,ea as y,ja as n,mb as N,mc as O,na as f,nc as _,oa as A,yb as a}from"./chunk-6EDHPT3A.js";import"./chunk-NLUW4JS2.js";var me=(()=>{let o=class o extends x{constructor(){let e=n($);super(e),this.mlabService=n(d),this.fb=n(I),this.data=n(P),this.units=this.mlabService.units.getAll({orderBy:["name"]}),this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"]}),this.unitSelectConfig={emptyOption:!0},this.testTypeSelectConfig={optionSelectedFn:(u,b)=>{b&&this.form.patchValue({unitId:b?.preferedUnitId});}};let i=this.fb;this.dialog=e;let t=this.data;this.form=i.group({description:[t?.description,[h.maxLength(4096)]],testTypeId:[t?.testTypeId,[h.required]],unitId:[t?.unitId,[]]});}submit(){this.IsValid()&&(this.data?this.save(this.mlabService.referenceValues.update(this.data.id,this.form.value)):this.save(this.mlabService.referenceValues.create(this.form.value)));}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=f({type:o,selectors:[["sz-medisy-laboratory-reference-values-save"]],standalone:!0,features:[O([]),N,_],decls:7,vars:9,consts:()=>{let e;e="Test Type";let i;i="Unit";let t;return t="Description",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId","label",e,3,"source","config"],["formControlName","unitId","label",i,3,"source","config"],["formControlName","description","label",t],[3,"actions"]];},template:function(i,t){i&1&&(S(0,"sz-ui-dialog-header",0),p(1,"mat-dialog-content")(2,"form",1),S(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3)(5,"sz-ui-form-field-textarea",4),c()(),S(6,"sz-ui-dialog-actions",5)),i&2&&(a("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),l(2),a("formGroup",t.form),l(),a("source",t.testTypes)("config",t.testTypeSelectConfig),l(),a("source",t.units)("config",t.unitSelectConfig),l(2),a("actions",t.actions));},dependencies:[E,D,R,v,z,L,g,Y,X,w,C,ee,te,Q,H,q],encapsulation:2});let r=o;return r;})();var T=(()=>{let o=class o{constructor(){this.dialog=n(G),this.mlabService=n(d),this.router=n(F),this.dataSource=new ne(),this.appBarConfig={title:k.reference_values,menu:K.default().setItems([m.add(this.openSaveComponent.bind(this)),m.menu([m.search()])])},this.dataSource.columnDefs.push(s.uuid("id"),s.hyperlink("testType.nameEn").setClickFn(e=>this.router.navigate([J.ReferenceValues,e.id,"rules"])).setStacked(s.string("description").setValueClassFontSmall()),s.string("unit").setValueGetter(e=>e.unit?.symbol),s.date("createdAt").setVisible(!1),s.date("updatedAt").setVisible(!1),s.menu([m.edit(this.openSaveComponent.bind(this)),m.divider(),m.delete(this.openReferenceValueDeleteComponent.bind(this))])),this.get();}openSaveComponent(e){this.dialog.open(me,{data:e}).afterClosed().subscribe(i=>{this.dataSource.addOrUpdateItem(i);});}openReferenceValueDeleteComponent(e){this.dialog.open(oe,{data:Z.delete(this.mlabService.referenceValues.delete(e.id),e)}).afterClosed().subscribe(i=>{this.dataSource.delete(i);});}get(){this.mlabService.referenceValues.get(this.dataSource.getQuery()).pipe(ae(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=f({type:o,selectors:[["sz-medisy-laboratory-reference-values"]],standalone:!0,features:[_],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(i,t){i&1&&(p(0,"sz-ui-table-bar",0),M("changed",function(){return t.get();}),c(),p(1,"sz-ui-table",1),M("update",function(){return t.get();}),c()),i&2&&(a("config",t.appBarConfig)("dataSource",t.dataSource),l(),a("dataSource",t.dataSource));},dependencies:[ie,re],encapsulation:2});let r=o;return r;})();var We=(()=>{let o=class o{};o.ɵfac=function(i){return new(i||o)();},o.ɵmod=A({type:o}),o.ɵinj=y({providers:[d],imports:[V,E,B.forChild([{path:"",component:T}]),g,U,j,W,se,C,T]});let r=o;return r;})();export{We as ReferenceValuesModule};/**i18n:71c33448fc84035c6ee56f25f20b16a3c311d1f911de884d4bce9857c4574a16*/