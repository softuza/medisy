import{a as s,d as oe,e as ie,f as re,i as ne,j as ae}from"./chunk-OX75U6S7.js";import"./chunk-YSNB3P37.js";import"./chunk-M6VFFTL7.js";import{a as Q}from"./chunk-5TNDWLJL.js";import{a as d}from"./chunk-I3W7CTPV.js";import"./chunk-2DOHZQYD.js";import{b as W,f as Z,g as x,h as ee,j as te,k as g}from"./chunk-JDBQ45YP.js";import{a as K}from"./chunk-ZGUTF2MC.js";import{j as m,k as J}from"./chunk-53DZ6NLX.js";import{a as U,b as $,d as P,e as G,g as E}from"./chunk-7B3GMYBR.js";import{q as k,r as w,s as q,t as H}from"./chunk-NKLFXX3X.js";import"./chunk-VPIQ5RG6.js";import"./chunk-PYOUUVMA.js";import"./chunk-ODIMT2GD.js";import"./chunk-NBE6QGAD.js";import{i as Y}from"./chunk-IT3CNXEP.js";import{d as M,f as O,g as R,l as v,n as D,q as z,r as L,t as I,u as _}from"./chunk-QZRJHJEV.js";import{Y as j}from"./chunk-4QPQ7IQ3.js";import{c as V,d as F}from"./chunk-WMCOMOML.js";import"./chunk-V2COJPJH.js";import{ia as B,la as X}from"./chunk-H2OL5IOU.js";import"./chunk-CYOOLWM5.js";import{Jb as u,Kb as c,Lb as S,Wb as C,bb as l,ea as T,ja as n,mb as y,mc as A,na as f,nc as N,oa as b,yb as a}from"./chunk-6EDHPT3A.js";import"./chunk-NLUW4JS2.js";var le=(()=>{let o=class o extends Z{constructor(){let e=n(U);super(e),this.mlabService=n(d),this.fb=n(L),this.data=n($),this.units=this.mlabService.units.getAll({orderBy:["name"]}),this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"]}),this.unitSelectConfig={emptyOption:!0},this.testTypeSelectConfig={optionSelectedFn:(p,h)=>{h&&this.form.patchValue({unitId:h?.preferedUnitId});}};let i=this.fb;this.dialog=e;let t=this.data;this.form=i.group({description:[t?.description,[M.maxLength(4096)]],testTypeId:[t?.testTypeId,[M.required]],unitId:[t?.unitId,[]]});}submit(){this.IsValid()&&(this.data?this.save(this.mlabService.referenceValues.update(this.data.id,this.form.value)):this.save(this.mlabService.referenceValues.create(this.form.value)));}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=f({type:o,selectors:[["sz-medisy-laboratory-reference-values-save"]],standalone:!0,features:[A([]),y,N],decls:7,vars:9,consts:()=>{let e;e="Test Type";let i;i="Unit";let t;return t="Description",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId","label",e,3,"source","config"],["formControlName","unitId","label",i,3,"source","config"],["formControlName","description","label",t],[3,"actions"]];},template:function(i,t){i&1&&(S(0,"sz-ui-dialog-header",0),u(1,"mat-dialog-content")(2,"form",1),S(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3)(5,"sz-ui-form-field-textarea",4),c()(),S(6,"sz-ui-dialog-actions",5)),i&2&&(a("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),l(2),a("formGroup",t.form),l(),a("source",t.testTypes)("config",t.testTypeSelectConfig),l(),a("source",t.units)("config",t.unitSelectConfig),l(2),a("actions",t.actions));},dependencies:[_,v,O,R,D,z,E,G,Y,k,g,x,ee,H,q,w],encapsulation:2});let r=o;return r;})();var me=(()=>{let o=class o{constructor(){this.dialog=n(P),this.mlabService=n(d),this.router=n(V),this.dataSource=new oe(),this.appBarConfig={title:j.reference_values,menu:J.default().setItems([m.add(this.openSaveComponent.bind(this)),m.menu([m.search()])])},this.dataSource.columnDefs.push(s.uuid("id"),s.hyperlink("testType.nameEn").setClickFn(e=>this.router.navigate([Q.ReferenceValues,e.id,"rules"])).setStacked(s.string("description").setValueClassFontSmall()),s.string("unit").setValueGetter(e=>e.unit?.symbol),s.date("createdAt").setVisible(!1),s.date("updatedAt").setVisible(!1),s.menu([m.edit(this.openSaveComponent.bind(this)),m.divider(),m.delete(this.openReferenceValueDeleteComponent.bind(this))])),this.get();}openSaveComponent(e){this.dialog.open(le,{data:e}).afterClosed().subscribe(i=>{this.dataSource.addOrUpdateItem(i);});}openReferenceValueDeleteComponent(e){this.dialog.open(te,{data:W.delete(this.mlabService.referenceValues.delete(e.id),e)}).afterClosed().subscribe(i=>{this.dataSource.delete(i);});}get(){this.mlabService.referenceValues.get(this.dataSource.getQuery()).pipe(ie(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=f({type:o,selectors:[["sz-medisy-laboratory-reference-values"]],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(i,t){i&1&&(u(0,"sz-ui-table-bar",0),C("changed",function(){return t.get();}),c(),u(1,"sz-ui-table",1),C("update",function(){return t.get();}),c()),i&2&&(a("config",t.appBarConfig)("dataSource",t.dataSource),l(),a("dataSource",t.dataSource));},dependencies:[ne,re],encapsulation:2});let r=o;return r;})();var xe=(()=>{let o=class o{};o.ɵfac=function(i){return new(i||o)();},o.ɵmod=b({type:o}),o.ɵinj=T({providers:[d],imports:[I,_,F.forChild([{path:"",component:me}]),E,B,X,K,ae,g]});let r=o;return r;})();export{xe as ReferenceValuesModule};/**i18n:71c33448fc84035c6ee56f25f20b16a3c311d1f911de884d4bce9857c4574a16*/