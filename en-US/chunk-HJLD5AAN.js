import{a as k}from"./chunk-GFNSS5JH.js";import{a as d}from"./chunk-BMJ3S5XZ.js";import"./chunk-JSCEI2V4.js";import{h as w}from"./chunk-YUC45UAG.js";import"./chunk-GPAES7OP.js";import"./chunk-DSJR6L5G.js";import"./chunk-XDEHVO3T.js";import"./chunk-2BMNYJ3Z.js";import"./chunk-LUZYQH3A.js";import"./chunk-ODYGSBAJ.js";import{b}from"./chunk-QERRRZIA.js";import{d as E,g as M}from"./chunk-MHLQ5ASK.js";import"./chunk-EMVR6TPU.js";import"./chunk-ZDS23LK5.js";import"./chunk-WX4XW32G.js";import"./chunk-Q4QLTUTU.js";import"./chunk-R425IBES.js";import{a as z,b as s,c as I}from"./chunk-MFJGOIE4.js";import{a as B}from"./chunk-KPHZXQ4R.js";import"./chunk-53QS6UIR.js";import"./chunk-TM26YT7E.js";import{a as l}from"./chunk-XYHX3JVK.js";import"./chunk-FZND2MZR.js";import{p as T}from"./chunk-CVZW7JYW.js";import"./chunk-GBJNACNX.js";import"./chunk-IJWI4VMJ.js";import{Ia as C,La as S}from"./chunk-OKKKBEFN.js";import{Jb as m,Kb as f,Lb as u,ac as h,bc as v,cc as g,gc as y,ja as a,mc as x,na as c,nc as F,yb as p}from"./chunk-K7VHIDZW.js";import"./chunk-VARUJZUG.js";var D=["designer"],A=(()=>{let o=class o{constructor(){this.route=a(T),this.dialog=a(E),this.srptService=a(d),this.snackBar=a(b),this.template=this.route.snapshot.data.template,this.appBarConfig={title:this.template.name,subtitle:this.template.description,menu:I.default().setItems([s.menu([s.divider(),s.default().setTitle(l.test_types).setIcon(z.science).setClickFn(this.createTextInCanvas.bind(this))])])}}ngAfterViewInit(){this.refresh(this.template.content)}refresh(t){try{let e=k.fromString(t);e&&e.fields&&this.addFields(e.fields)}catch(e){console.log("TemplateComponent","refresh",e),this.snackBar.open(e,l.close,{duration:5e3})}}addFields(t){for(let e of t)e.type==="text"?this.addFieldText(e):e.type==="barcode"?this.addFieldBarcode(e):e.type==="table"?this.addFieldTable(e):e.type==="line"?this.addFieldLine(e):e.type==="image"&&this.addFieldImage(e)}addFieldText(t){let e=t.options;if(!e||typeof t.value!="string")return;let i=this.canvasEl.nativeElement.getContext("2d");i&&(i.font=`${e.fontSize??12}px Arial`,i.fillText(t.value??"string",t.x,t.y)),console.log("addFieldText",t)}addFieldBarcode(t){}addFieldTable(t){}addFieldLine(t){let e=t.options;if(!e)return;let i=this.canvasEl.nativeElement.getContext("2d");i&&(i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x2,e.y2),i.strokeStyle=e.lineColor??"black",i.lineWidth=e.lineWidth??1),console.log("addFieldLine",t)}addFieldImage(t){}createTextInCanvas(){let e=this.canvasEl.nativeElement.getContext("2d");e&&(e.font="20px Arial",e.fillText("Hello, World!",50,50))}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=c({type:o,selectors:[["sz-mgmt-reporting-template"]],viewQuery:function(e,n){if(e&1&&h(D,5),e&2){let i;v(i=g())&&(n.canvasEl=i.first)}},standalone:!0,features:[x([d]),F],decls:4,vars:1,consts:[["designer",""],[3,"config"],["width","594","height","420",2,"border","1px solid #c3c3c3"]],template:function(e,n){e&1&&(u(0,"sz-ui-app-bar",1),m(1,"canvas",2,0),y(3,` Your browser does not support the canvas element.
`),f()),e&2&&p("config",n.appBarConfig)},dependencies:[M,S,w,B,C],encapsulation:2});let r=o;return r})();var Z=[{path:"",component:A}];export{Z as default};
/**i18n:7274145596894140ce8dc809ecf6b222e8bea6098fe1553d5bf6245265c46bf4*/
