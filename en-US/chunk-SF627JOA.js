import{c as q}from"./chunk-6SVCME4N.js";import{a as d,b as u}from"./chunk-B6YRJ72V.js";import"./chunk-ZC5VE3PD.js";import{a as y}from"./chunk-53VWZ5ER.js";import{a as l}from"./chunk-PCAOWVUV.js";import{d as B,g as w}from"./chunk-U5WHS54P.js";import"./chunk-USWRGYS2.js";import{a as G}from"./chunk-CFVGD46S.js";import"./chunk-A4RP7L5Q.js";import"./chunk-SIM3MWAY.js";import"./chunk-SYJ5COXL.js";import{b as L}from"./chunk-X7AK5RKT.js";import{a as h,b,c as H}from"./chunk-V4HCCL3Z.js";import"./chunk-A4OPY5TW.js";import"./chunk-37GZDSHT.js";import"./chunk-FJNI2GB6.js";import{v as $}from"./chunk-FEFUQJM2.js";import{a as n}from"./chunk-ESAZXDOZ.js";import"./chunk-UPQBKJGY.js";import{a as c}from"./chunk-NW5OYJVI.js";import{a as f}from"./chunk-CVLFG5YI.js";import{D as x,F as N,H as R,Ta as k,l as F}from"./chunk-RQMADBIK.js";import{Ab as C,L as z,Tb as S,Ub as M,Wb as E,_a as P,cb as m,da as g,db as s,la as I,ma as T,nb as v,vb as j,wb as A,xb as D,yb as p,zb as a}from"./chunk-3PI2VV3G.js";function X(t,e){if(t&1&&C(0,"sz-ui-card",5),t&2){let O=e.$implicit;v("card",O);}}var J=(()=>{let e=class e{constructor(o,i,r,Q,U,V){this.dialog=o,this.route=i,this.router=r,this.mlabService=Q,this.mpplService=U,this.personNamePipe=V,this.alert$=P(void 0),this.testsDataSource=new L(c.pagedSorted("-createdAt")),this.tiles=[],this.analysisMenu=H.more([b.edit(()=>this.openEditComponent),b.print(()=>this.openEditComponent)]),this.analysis=this.route.snapshot.data.analysis,this.getPerson(),this.buildTiles();}buildTiles(){let o={icon:"science",subtitle:"Tests",type:d.Counter,clickFn:()=>this.router.navigate(["tests"],{relativeTo:this.route})},i={icon:"label",subtitle:"Specimens",type:d.Counter,clickFn:()=>this.router.navigate(["specimens"],{relativeTo:this.route})};this.mlabService.analyses.tests.count(this.analysis.id,c.count()).subscribe(r=>{o.title=r;}),this.mlabService.analyses.specimens.count(this.analysis.id,c.count()).subscribe(r=>{i.title=r;}),this.tiles.push(o),this.tiles.push(i);}getPerson(){this.analysis.personId&&this.mpplService.persons.getById(this.analysis.personId).pipe(z(1)).subscribe(o=>{this.tiles.splice(0,0,{icon:"person",type:d.Text,subtitle:"Patient",title:this.personNamePipe.transform(o),clickFn:()=>this.router.navigate([`mppl/persons/${o.id}`])});});}openEditComponent(){}};e.ɵfac=function(i){return new(i||e)(s(B),s(x),s(N),s(n),s(l),s(y));},e.ɵcmp=I({type:e,selectors:[["medisy-laboratory-analysis"]],features:[E([n,l,y])],decls:10,vars:3,consts:[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["end","",3,"menu"],[1,"sz-grid-card"],[3,"card"]],template:function(i,r){i&1&&(p(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),S(3),a(),p(4,"span",2),S(5),a()(),C(6,"sz-ui-menu",3),a(),p(7,"div",4),A(8,X,1,1,"sz-ui-card",5,j),a()),i&2&&(m(3),M(r.analysis.code),m(2),M(r.analysis.note),m(1),v("menu",r.analysisMenu),D(8,r.tiles));},dependencies:[f,u,h],encapsulation:2});let t=e;return t;})();var K=[{path:"",component:J},{path:"tests",loadComponent:()=>import("./chunk-Q5DGHXJO.js").then(t=>t.AnalysisTestsComponent)},{path:"specimens",loadComponent:()=>import("./chunk-RZUSPFYR.js").then(t=>t.AnalysisSpecimensComponent)}];var xe=(()=>{let e=class e{};e.ɵfac=function(i){return new(i||e)();},e.ɵmod=T({type:e}),e.ɵinj=g({providers:[n],imports:[F,R.forChild(K),w,k,$,q,f,u,h,G]});let t=e;return t;})();export{xe as AnalysisModule};/**i18n:c47ea6c8e33fa0c222c20e616e96e45afbcc3267e1e4f83fbed9283c01f003ba*/