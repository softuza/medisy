"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[22],{6022:(U,S,o)=>{o.r(S),o.d(S,{ReferenceValueModule:()=>Re});var C=o(6814),t=o(6223),O=o(4630),g=o(9014),R=o(2296),h=o(5195),N=o(5986),T=o(3680),M=o(8034),f=o(7700),p=o(617),i=o(2032),m=o(9038),u=o(7988),E=o(1476),P=o(5940),Z=o(8525),x=o(3566),X=o(1545),J=o(5313),G=o(2596),I=o(8109),W=o(6981),K=o(465),Q=o(6576),F=o(4485),j=o(4407),H=o(2595),b=o(696),w=o(2169),v=o(5436),q=o(9004),k=o(5041),ee=o(8766),A=o(3572),oe=o(8645),e=o(5879),te=o(2516),D=o(2191),d=o(7263);let L=(()=>{class a{transform(n,r=!1){switch(n){case d.v.Equal:return r?"==":"Equal";case d.v.GreaterThan:return r?">":"GreaterThan";case d.v.GreaterThanOrEqual:return r?">=":"GreaterThanOrEqual";case d.v.LessThan:return r?"<":"LessThan";case d.v.LessThanOrEqual:return r?"<=":"LessThanOrEqual";case d.v.RangeWithBoundaries:return r?"<==>":"RangeWithBoundaries";case d.v.RangeWithoutBoundaries:return r?"<>":"RangeWithoutBoundaries";case d.v.Not:return r?"!=":"Not";default:return""}}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275pipe=e.Yjl({name:"comparisonOperatorI18n",type:a,pure:!0}),a})();var ne=o(9598),re=o(2119),V=o(8180),ae=o(6187),Y=o(6202),le=o(6893),se=o(8930);let $=(()=>{class a extends le.m{constructor(n,r){super(n),this.ngControl=n,this.comparisonOperatorI18nPipe=r,this.items=Object.keys(d.v).map(s=>d.v[s]),this.label="Comparison Operator",this.contentFormat=s=>this.comparisonOperatorI18nPipe.transform(s)}ngOnInit(){this.control=this.ngControl.control}writeValue(n){this.value=n}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(t.a5,10),e.Y36(L))},a.\u0275cmp=e.Xpm({type:a,selectors:[["medisy-form-field-comparison-operator"]],features:[e._Bn([L]),e.qOj],decls:1,vars:7,consts:[[3,"formControl","items","label","placeholder","emptyOption","multiple","contentFn"]],template:function(n,r){1&n&&e._UZ(0,"sz-ui-form-field-select",0),2&n&&e.Q6J("formControl",r.control)("items",r.items)("label",r.label)("placeholder",r.placeholder)("emptyOption",r.emptyOption)("multiple",r.multiple)("contentFn",r.contentFormat)},dependencies:[t.JJ,t.oH,se.E],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),a})();var y=o(4622),z=o(6091);let ie=(()=>{class a extends v.Z2{constructor(n,r,s){super(r),this.fb=n,this.dialog=r,this.data=s,this.form=n.group({referenceGroupId:[s.referenceGroupId],comparisonOperator:[s.comparisonOperator]})}submit(){this.IsValid()&&this.dialog.close(this.form.value)}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(t.qu),e.Y36(f.so),e.Y36(f.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["medisy-laboratory-reference-value-rules-filter"]],features:[e._Bn([ae.T]),e.qOj],decls:6,vars:5,consts:[[3,"header"],[1,"tw-flex","tw-flex-col",3,"formGroup"],["formControlName","comparisonOperator",3,"emptyOption"],["formControlName","referenceGroupId",3,"emptyOption"],[3,"actions"]],template:function(n,r){1&n&&(e._UZ(0,"sz-ui-dialog-header",0),e.TgZ(1,"mat-dialog-content")(2,"form",1),e._UZ(3,"medisy-form-field-comparison-operator",2)(4,"medisy-form-field-reference-gourp",3),e.qZA()(),e._UZ(5,"sz-ui-dialog-actions",4)),2&n&&(e.Q6J("header",r.header),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(1),e.Q6J("emptyOption",!0),e.xp6(1),e.Q6J("emptyOption",!0),e.xp6(1),e.Q6J("actions",r.actions))},dependencies:[t._Y,t.JJ,t.JL,t.sg,t.u,f.xY,Y.P,$,y.Y,z.t],encapsulation:2}),a})();var B=o(8380),ue=o(9157),fe=o(8873);function ce(a,l){1&a&&(e.TgZ(0,"div",8)(1,"mat-form-field",9)(2,"label"),e._UZ(3,"input",10),e.qZA()(),e.TgZ(4,"mat-form-field",9)(5,"label"),e._UZ(6,"input",11),e.qZA()()())}function me(a,l){1&a&&(e.TgZ(0,"mat-form-field",9)(1,"label"),e._UZ(2,"input",12),e.qZA()())}let Ee=(()=>{class a extends v.Ku{constructor(n,r,s,c){super(s),this.referenceValueService=n,this.fb=r,this.dialog=s,this.data=c,this.form=r.group({description:[c.referenceValueRule?.description,[t.kI.maxLength(4096)]],comparisonOperator:[c.referenceValueRule?.comparisonOperator??d.v.Equal,[t.kI.required]],referenceGroupId:[c.referenceValueRule?.referenceGroupId,[t.kI.required]],value:[c.referenceValueRule?.value,[]],start:[c.referenceValueRule?.start,[]],end:[c.referenceValueRule?.end,[]]})}isRange(){return this.form.value.comparisonOperator===d.v.RangeWithBoundaries||this.form.value.comparisonOperator===d.v.RangeWithoutBoundaries}submit(){this.IsValid()&&this.save(this.data.referenceValueRule?this.referenceValueService.updateReferenceValueRule(this.data.referenceValueId,this.data.referenceValueRule.id,this.form.value):this.referenceValueService.createReferenceValueRule(this.data.referenceValueId,this.form.value))}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(B.U),e.Y36(t.qu),e.Y36(f.so),e.Y36(f.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["medisy-laboratory-reference-value-rules-save"]],features:[e._Bn([F.D]),e.qOj],decls:9,vars:5,consts:function(){let l,n,r,s;return l="Description",n="Start",r="End",s="Value",[[3,"header"],[1,"tw-flex","tw-flex-col",3,"formGroup"],["formControlName","description","label",l],["formControlName","comparisonOperator"],["class","tw-flex md:tw-flex-row tw-flex-col md:tw-gap-4",4,"ngIf"],["class","tw-flex-1",4,"ngIf"],["formControlName","referenceGroupId"],[3,"actions"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["autocomplete","off","formControlName","start","matInput","","placeholder",n],["autocomplete","off","formControlName","end","matInput","","placeholder",r],["autocomplete","off","formControlName","value","matInput","","placeholder",s]]},template:function(n,r){1&n&&(e._UZ(0,"sz-ui-dialog-header",0),e.TgZ(1,"mat-dialog-content")(2,"form",1),e._UZ(3,"sz-ui-form-field-textarea",2)(4,"medisy-form-field-comparison-operator",3),e.YNc(5,ce,7,0,"div",4),e.YNc(6,me,3,0,"mat-form-field",5),e._UZ(7,"medisy-form-field-reference-gourp",6),e.qZA()(),e._UZ(8,"sz-ui-dialog-actions",7)),2&n&&(e.Q6J("header",r.header),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(3),e.Q6J("ngIf",r.isRange()),e.xp6(1),e.Q6J("ngIf",!r.isRange()),e.xp6(2),e.Q6J("actions",r.actions))},dependencies:[C.O5,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,f.xY,i.Nt,ue.KE,fe.J,Y.P,$,y.Y,z.t],encapsulation:2}),a})();var de=o(9692),_e=o(9288);let pe=(()=>{class a{constructor(n,r,s,c){this.dialog=n,this.route=r,this.referenceValueService=s,this.comparisonOperatorI18nPipe=c,this.dataSource=new A.b2(ne.J.paged()),this.referenceValue=this.route.snapshot.data.referenceValue,this.dataSource.columns=[A.UC.text("referenceGroup","Reference group",_=>_.referenceGroup.name),D.h.comparisonOperator(_=>c.transform(_.comparisonOperator)),A.UC.text("value","Value",_=>_.value?_.value:`${_.start} - ${_.end}`),D.h.createdAt(),D.h.menu([A.od.edit(_=>this.openSaveComponent(_)),A.od.delete(_=>{this.openReferenceValueRuleDeleteComponent(_)})])],this.get()}openSaveComponent(n){this.dialog.open(Ee,{data:{referenceValueId:this.referenceValue.id,referenceValueRule:n}}).afterClosed().pipe((0,V.q)(1)).subscribe(s=>{this.dataSource.updateOrPushItem(s)})}openFilterComponent(){this.dialog.open(ie,{data:this.dataSource.filterModel}).afterClosed().pipe((0,V.q)(1)).subscribe(r=>{this.dataSource.updateFilterModel(r),this.get()})}openReferenceValueRuleDeleteComponent(n){this.dialog.open(v.fN,{data:v.cb.delete(this.referenceValueService.deleteReferenceValueRule(n.referenceValueId,n.id),n.id)}).afterClosed().pipe((0,V.q)(1)).subscribe(s=>{this.dataSource.delete(s)})}get(){this.referenceValueService.getReferenceValueRules(this.referenceValue.id,this.dataSource.filterModel).pipe((0,re.sU)(this.dataSource.indicator),(0,V.q)(1)).subscribe(n=>{this.dataSource.set(n.items,n.count)})}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(f.uw),e.Y36(I.gz),e.Y36(B.U),e.Y36(L))},a.\u0275cmp=e.Xpm({type:a,selectors:[["medisy-laboratory-reference-value-rules"]],features:[e._Bn([L])],decls:5,vars:4,consts:function(){let l;return l="Add",[[3,"dataSource","search","filter"],["mat-flat-button","","color","primary","start","",3,"click"],l,[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(n,r){1&n&&(e.TgZ(0,"sz-ui-table-filter",0),e.NdJ("search",function(){return r.get()})("filter",function(){return r.openFilterComponent()}),e.TgZ(1,"button",1),e.NdJ("click",function(){return r.openSaveComponent()}),e.TgZ(2,"span"),e.SDv(3,2),e.qZA()()(),e.TgZ(4,"sz-ui-table",3),e.NdJ("update",function(){return r.get()}),e.qZA()),2&n&&(e.Q6J("dataSource",r.dataSource),e.xp6(4),e.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",r.dataSource))},dependencies:[R.lW,de.K,_e.f],encapsulation:2}),a})();const Oe=[{path:"",component:(()=>{class a{constructor(n,r){this.dialog=n,this.route=r,this.alert$=new oe.x,this.referenceValue=this.route.snapshot.data.referenceValue}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(f.uw),e.Y36(I.gz))},a.\u0275cmp=e.Xpm({type:a,selectors:[["medisy-laboratory-reference-value"]],features:[e._Bn([])],decls:7,vars:1,consts:function(){let l;return l="Reference Values",[["start",""],[1,"sz-h5"],["routerLink","../",1,"tw-underline","tw-text-sm"],l]},template:function(n,r){1&n&&(e.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),e._uU(3),e.qZA(),e.TgZ(4,"a",2),e.SDv(5,3),e.qZA()()(),e._UZ(6,"medisy-laboratory-reference-value-rules")),2&n&&(e.xp6(3),e.Oqu(r.referenceValue.testClass.name))},dependencies:[I.rH,te.z,pe],encapsulation:2}),a})()}];let Re=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[F.D],imports:[C.ez,t.u5,t.UX,I.Bz.forChild(Oe),f.Is,O.Bb,i.c,b.S,N.p9,u.Tx,p.Ps,R.ot,Z.LD,X.T5,G.AV,m.ie,h.QW,P.Cq,T.XK,M.FA,J.p0,E.TU,x.JX,j.E,A.Vn,w.c,H.V,ee.h,q.g,W.F,v.su,k.n,K.L,E.TU,f.Is,T.Ng,g.g,Q.f]}),a})()},2595:(U,S,o)=>{o.d(S,{V:()=>f});var C=o(6814),t=o(2296),O=o(5195),g=o(6385),R=o(617),h=o(6007),N=o(2169),T=o(7280),M=o(5879);let f=(()=>{class p{}return p.\u0275fac=function(m){return new(m||p)},p.\u0275mod=M.oAB({type:p}),p.\u0275inj=M.cJS({imports:[C.ez,R.Ps,O.QW,N.c,T.o,h.Cv,g.t,t.ot]}),p})()},8873:(U,S,o)=>{o.d(S,{J:()=>p});var C=o(2757),t=o(5879),O=o(6223),g=o(6814),R=o(9157),h=o(2032);function N(i,m){if(1&i&&(t.TgZ(0,"mat-label"),t._uU(1),t.qZA()),2&i){const u=t.oxw();t.xp6(1),t.Oqu(u.label)}}function T(i,m){1&i&&(t.TgZ(0,"mat-error"),t.SDv(1,3),t.qZA())}function M(i,m){1&i&&(t.TgZ(0,"mat-error"),t.SDv(1,4),t.qZA())}function f(i,m){1&i&&(t.TgZ(0,"mat-error"),t.SDv(1,5),t.qZA())}let p=(()=>{class i extends C.l{constructor(u){super(u),this.ngControl=u}ngOnInit(){this.control=this.ngControl.control}writeValue(u){this.value=u}}return i.\u0275fac=function(u){return new(u||i)(t.Y36(O.a5,10))},i.\u0275cmp=t.Xpm({type:i,selectors:[["sz-ui-form-field-textarea"]],features:[t.qOj],decls:7,vars:7,consts:function(){let m,u,E;return m="This field is required",u="This field has insufficient length",E="This field exceeds the maximum length",[[1,"tw-flex-1"],[4,"ngIf"],["matInput","",3,"formControl","value","placeholder"],m,u,E]},template:function(u,E){1&u&&(t.TgZ(0,"mat-form-field",0),t.YNc(1,N,2,1,"mat-label",1),t.TgZ(2,"textarea",2),t._uU(3,"  "),t.qZA(),t.YNc(4,T,2,0,"mat-error",1),t.YNc(5,M,2,0,"mat-error",1),t.YNc(6,f,2,0,"mat-error",1),t.qZA()),2&u&&(t.xp6(1),t.Q6J("ngIf",E.label),t.xp6(1),t.Q6J("formControl",E.control)("value",E.value)("placeholder",E.placeholder),t.xp6(2),t.Q6J("ngIf",E.control.hasError("required")),t.xp6(1),t.Q6J("ngIf",E.control.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",E.control.hasError("maxlength")))},dependencies:[g.O5,O.Fj,O.JJ,O.oH,R.KE,R.hX,R.TO,h.Nt],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),i})()}}]);