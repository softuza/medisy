import{a as je,b as Ue,c as Xe}from"./chunk-KFWNG5Q7.js";import{a as x}from"./chunk-KDF6IK54.js";import{b as Te}from"./chunk-JSK7E7QW.js";import{b as ve,d as G}from"./chunk-L4JGGTW4.js";import{a as Fe}from"./chunk-GJOLQKBR.js";import{a as A}from"./chunk-727VSYSF.js";import{a as Y}from"./chunk-7LVQWGM4.js";import{a as $}from"./chunk-HDN44XRP.js";import{a as Be,b as Ge,g as h}from"./chunk-7OP2KFWQ.js";import"./chunk-RCF34KUN.js";import"./chunk-675HL3QC.js";import{a as ae,b as se,c as me,d as pe,e as le,f as de,g as _e,h as ce}from"./chunk-7PVYT5AR.js";import"./chunk-WMR7Q26G.js";import"./chunk-Z2RPXGB3.js";import{c as ze,e as $e,o as xe}from"./chunk-7RJ5EIRJ.js";import{c as Oe,h as Re,i as be,j as Le,m as Ye}from"./chunk-AS5U2OT3.js";import{a as Ae,b as he,d as Ie,e as ye,g as L}from"./chunk-GP3W3GGO.js";import{E as Ee,z as Pe}from"./chunk-HSZRRRQX.js";import{g as Q,h as J,l as K,n as W,o as Z,p as ee,s as te}from"./chunk-DOVRWRQU.js";import"./chunk-VLCPYEZN.js";import{a as _}from"./chunk-JFXMSXD3.js";import{b as z}from"./chunk-MDQJK7YC.js";import{a as De}from"./chunk-6ILUQYS3.js";import{a as ie,c as oe,d as ne,e as R,f as Me,g as Ce}from"./chunk-2WUPC45G.js";import{f as ge,i as S,j as Ne}from"./chunk-DESFHGZ3.js";import{a as fe,b as ue}from"./chunk-PLPMFK4N.js";import"./chunk-GNPEYPQP.js";import{Pa as re,Ra as b,Ua as Se,o as q}from"./chunk-26JDY2BM.js";import{Ab as g,Bb as r,Cb as a,Db as p,L as y,Nb as B,Rb as C,Wb as u,Xb as P,Zb as E,_a as D,a as U,ac as N,b as X,cb as s,cc as k,da as H,db as m,ec as T,fc as O,kb as V,la as M,ma as w,nb as d,tb as c,ub as f,zb as v}from"./chunk-J5YYK5S2.js";function qe(e,o){if(e&1&&(r(0,"mat-card-subtitle"),u(1),a()),e&2){let l=C();s(1),P(l.person==null?null:l.person.title);}}function Qe(e,o){e&1&&(r(0,"mat-card-subtitle"),B(1,4),a());}function Je(e,o){if(e&1&&(r(0,"span"),u(1),T(2,"typeI18n"),a()),e&2){let l=C();s(1),P(O(2,1,l.person==null?null:l.person.sex));}}function Ke(e,o){e&1&&(r(0,"span"),u(1," - "),a());}function We(e,o){if(e&1&&(r(0,"span"),u(1),T(2,"personAge"),a()),e&2){let l=C();s(1),P(O(2,1,l.person==null?null:l.person.birthDate));}}function Ze(e,o){e&1&&(r(0,"mat-card-footer"),p(1,"mat-progress-bar",5),a());}var et=e=>[e],F=(()=>{let o=class o{set personId(n){this._personId=n,this.getPerson(n);}get personId(){return this._personId;}constructor(n,i,t){this.mpplService=n,this.typeI18nPipe=i,this.personNamePipe=t,this.indicator=D(!1),this.attributes={items:[]};}addAttributes(n){if(n.phones&&n.phones.length>0){let i=n.phones.find(t=>t.phoneType===Ge.Mobile)?.value;i&&this.attributes.items.push(G.text(i,"phone"));}if(n.emails&&n.emails.length>0){let i=n.emails.find(t=>t.emailType===Be.Private)?.value;i&&this.attributes.items.push(G.text(i,"email"));}}getPerson(n){this.mpplService.persons.getById(n).pipe(y(1),Oe(this.indicator)).subscribe(i=>{this.person=i,this.addAttributes(i);});}};o.ɵfac=function(i){return new(i||o)(m(Y),m(h),m(A));},o.ɵcmp=M({type:o,selectors:[["medisy-people-persons-common-person-card"]],inputs:{personId:"personId"},standalone:!0,features:[E([h]),N],decls:22,vars:13,consts:()=>{let n;n="More";let i;return i="Patient",[[1,"example-card"],[3,"list"],["mat-button","",3,"routerLink"],n,i,["mode","indeterminate"]];},template:function(i,t){i&1&&(r(0,"mat-card",0)(1,"mat-card-header"),c(2,qe,2,1,"mat-card-subtitle")(3,Qe,2,0),r(4,"mat-card-title"),u(5),T(6,"personName"),a(),r(7,"mat-card-subtitle"),c(8,Je,3,3,"span")(9,Ke,2,0,"span")(10,We,3,3,"span"),a()(),r(11,"mat-card-content")(12,"p"),u(13),a()(),r(14,"mat-card-content"),p(15,"sz-ui-list-compact",1),a(),r(16,"mat-card-content"),p(17,"mat-divider"),a(),r(18,"mat-card-actions")(19,"button",2),B(20,3),a()(),c(21,Ze,2,0,"mat-card-footer"),a()),i&2&&(s(2),f(2,t.person!=null&&t.person.title?2:3),s(3),P(O(6,9,t.person)),s(3),f(8,t.person!=null&&t.person.sex?8:-1),s(1),f(9,t.person!=null&&t.person.sex&&t.person!=null&&t.person.birthDate?9:-1),s(1),f(10,t.person!=null&&t.person.birthDate?10:-1),s(3),P(t.person==null?null:t.person.note),s(2),d("list",t.attributes),s(4),d("routerLink",k(11,et,"/mppl/persons/"+t.personId)),s(2),f(21,t.indicator()?21:-1));},dependencies:[R,ne,ce,ae,le,me,_e,de,pe,se,ve,Ce,Me,ue,fe,b,re,xe,h,A,Fe],encapsulation:2});let e=o;return e;})();var He=(()=>{let o=class o extends Re{constructor(n,i,t,I){super(t),this.mlabService=n,this.fb=i,this.dialog=t,this.data=I,this.form=i.group({note:[I?.note,[]]});}submit(){this.IsValid()&&this.data&&this.save(this.mlabService.analyses.update(this.data.id,X(U({},this.data),{note:this.form.value.note})));}};o.ɵfac=function(i){return new(i||o)(m(_),m(ee),m(Ae),m(he));},o.ɵcmp=M({type:o,selectors:[["medisy-analysis-save"]],standalone:!0,features:[E([_]),V,N],decls:5,vars:3,consts:()=>{let n;return n="Note",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","note","label",n],[3,"actions"]];},template:function(i,t){i&1&&(p(0,"sz-ui-dialog-header",0),r(1,"mat-dialog-content")(2,"form",1),p(3,"sz-ui-form-field-input",2),a()(),p(4,"sz-ui-dialog-actions",3)),i&2&&(d("header",t.header),s(2),d("formGroup",t.form),s(2),d("actions",t.actions));},dependencies:[te,K,Q,J,W,Z,L,ye,Ye,be,Le,Ee,Pe],encapsulation:2});let e=o;return e;})();var nt=()=>[$],rt=()=>[x],at=()=>[F];function st(e,o){if(e&1&&p(0,"medisy-people-persons-common-person-card",5),e&2){let l=C(2);d("personId",l.analysis.personId);}}function mt(e,o){e&1&&(c(0,st,1,1),v(1,0,at),g());}function pt(e,o){e&1&&p(0,"medisy-laboratory-analysis-tests");}function lt(e,o){e&1&&p(0,"medisy-laboratory-analysis-specimens");}var we=(()=>{let o=class o{constructor(n,i,t,I){this.dialog=n,this.route=i,this.router=t,this.mlabService=I,this.alert$=D(void 0),this.testsDataSource=new ze(De.pagedSorted("-createdAt")),this.tiles=[],this.analysisMenu=Ne.more([S.edit(()=>this.openSaveComponent()),S.divider(),S.print(()=>this.opendPrintComponent),S.default("Publish","publish",this.openPublishComponent),S.divider(),S.default("QR Code","qr_code",this.openPublishComponent)]),this.analysis=this.route.snapshot.data.analysis;}openSaveComponent(){this.dialog.open(He,{data:this.analysis}).afterClosed().pipe(y(1)).subscribe(n=>{n&&(this.analysis=n);});}opendPrintComponent(){}openPublishComponent(){}};o.ɵfac=function(i){return new(i||o)(m(Ie),m(ie),m(oe),m(_));},o.ɵcmp=M({type:o,selectors:[["medisy-laboratory-analysis"]],features:[E([_,Y,A])],decls:12,vars:4,consts:()=>{let n;n="Tests";let i;return i="Specimens",[[3,"title","subTitle","menu"],[1,"sz-grid-card","tw-my-4"],["mat-stretch-tabs","false"],["label",n],["label",i],[3,"personId"]];},template:function(i,t){i&1&&(p(0,"sz-ui-header-info",0),r(1,"div",1),c(2,mt,3,0),a(),r(3,"mat-tab-group",2)(4,"mat-tab",3),c(5,pt,1,0),v(6,5,nt),g(),a(),r(8,"mat-tab",4),c(9,lt,1,0),v(10,9,rt),g(),a()()),i&2&&(d("title",t.analysis.code)("subTitle",t.analysis.note)("menu",t.analysisMenu),s(2),f(2,t.analysis.personId?2:-1));},dependencies:[je,Ue,z],encapsulation:2});let e=o;return e;})();var Ve=[{path:"",component:we},{path:"tests",loadComponent:()=>import("./chunk-TYVGDJDD.js").then(e=>e.AnalysisTestsComponent)},{path:"specimens",loadComponent:()=>import("./chunk-KEGNGEMG.js").then(e=>e.AnalysisSpecimensComponent)}];var Oi=(()=>{let o=class o{};o.ɵfac=function(i){return new(i||o)();},o.ɵmod=w({type:o}),o.ɵinj=H({providers:[_],imports:[q,R.forChild(Ve),L,Se,b,$e,Xe,z,Te,ge,$,x,F]});let e=o;return e;})();export{Oi as AnalysisModule};/**i18n:5ebc65b24f90b78d556a3a8c188ab6405e20b5534cf6eb00a5dd3e44f73f97d4*/