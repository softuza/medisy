import{c,g}from"./chunk-QLFCEITG.js";import{a as ie}from"./chunk-AGIV3H7X.js";import{b as S,c as W,e as Z,g as ee,s as te,t as oe}from"./chunk-VUMSGYE7.js";import{c as X,h as q,i as x,j as H,l as J,m as K,n as Q}from"./chunk-SYMUEBIF.js";import{a as j,b as w,d as V,e as k,g as U}from"./chunk-RY32KYW7.js";import{D as B,y as $}from"./chunk-DXSUKRZ3.js";import{g as D,h as O,l as b,n as I,o as P,p as R,s as z}from"./chunk-4NL6MOY5.js";import{a as u}from"./chunk-FW7JEP5X.js";import{a as p}from"./chunk-PYG3YJ62.js";import{a as L,e as F}from"./chunk-IF5LYGUI.js";import{i as h}from"./chunk-3LHHJK2J.js";import{Pa as Y,Ra as G}from"./chunk-HMJ5RFBC.js";import{Bb as s,Cb as d,Db as C,L as _,Nb as y,Pb as E,Zb as N,ac as T,cb as l,db as m,ja as n,kb as A,la as M,nb as a,qc as v}from"./chunk-VTJ4Z7TN.js";var re=(()=>{let o=class o extends q{constructor(e,t,i,f){super(i),this.mlabService=e,this.fb=t,this.dialog=i,this.data=f,this.form=t.group({note:[f?.note,[]]});}submit(){this.IsValid()&&this.data&&this.save(this.mlabService.analyses.tests.update(this.data.analysisId,this.data.id,this.form.value));}};o.ɵfac=function(t){return new(t||o)(m(p),m(R),m(j),m(w));},o.ɵcmp=M({type:o,selectors:[["medisy-laboratory-analysis-tests-save"]],standalone:!0,features:[A,T],decls:5,vars:3,consts:()=>{let e;return e="Note",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","note","label",e],[3,"actions"]];},template:function(t,i){t&1&&(C(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),C(3,"sz-ui-form-field-input",2),d()(),C(4,"sz-ui-dialog-actions",3)),t&2&&(a("header",i.header),l(2),a("formGroup",i.form),l(2),a("actions",i.actions));},dependencies:[z,b,D,O,I,P,U,k,K,x,H,B,$],encapsulation:2});let r=o;return r;})();var je=(()=>{let o=class o{constructor(){this.route=n(L),this.dialog=n(V),this.locale=n(v),this.mlabService=n(p),this.typeI18nPipe=n(g),this.dataSource=new Z(),this.analysis=this.route.snapshot.data.analysis,this.dataSource.addRows(W.default([S.icon("test.state",u.state,e=>{switch(e.test.state){case c.Created:return"description";case c.Pending:return"pending";case c.Started:return"sync";case c.Finished:return"done";default:return"";}}).makeCompact(),S.text("test.testClass.name",u.testClass),S.text("test.referenceGroup.name",u.referenceGroup),S.text("test.testResult",u.testResult,e=>e.test.referenceGroup.name),ie.menu([h.edit(e=>this.openSaveComponent(e)),h.divider(),h.delete(e=>this.openDeleteComponent(e))])])),this.get();}openCreateComponent(){}openSaveComponent(e){this.dialog.open(re,{data:e}).afterClosed().pipe(_(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openDeleteComponent(e){this.dialog.open(J,{data:Q.delete(this.mlabService.analyses.tests.delete(e.analysisId,e.id),e)}).afterClosed().pipe(_(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.mlabService.analyses.tests.get(this.analysis.id,this.dataSource.buildRequest()).pipe(X(this.dataSource.indicator)).pipe(_(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(t){return new(t||o)();},o.ɵcmp=M({type:o,selectors:[["medisy-laboratory-analysis-tests"]],standalone:!0,features:[N([p,g]),T],decls:5,vars:3,consts:()=>{let e;return e="Add",[[3,"filter"],["mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(t,i){t&1&&(s(0,"sz-ui-table-filter",0)(1,"button",1),E("click",function(){return i.openCreateComponent();}),s(2,"span"),y(3,2),d()()(),s(4,"sz-ui-table",3),E("update",function(){return i.get();}),d()),t&2&&(a("filter",i.dataSource.filter),l(4),a("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[F,oe,te,ee,G,Y],encapsulation:2});let r=o;return r;})();export{je as a};/**i18n:58cd3b8848ac5782a36a96a60f590b5398c328b80f04dbb1677d4c0de37b393f*/