import{a as M}from"./chunk-JPGPFKCU.js";import{a as C}from"./chunk-QU3YWOWB.js";import{a as r,c as oe,d as ne,f as ae,i as re,j as se}from"./chunk-OK6H7VOQ.js";import{b as Y,f as Z,g as x,h as ee,j as ie,k as te}from"./chunk-SIJZK5WC.js";import{h as O}from"./chunk-C6C6OTDR.js";import{a as G,b as V,d as $,e as B,g as U}from"./chunk-CX4ZIHUA.js";import{c as H,p as Q,q as J,r as K,t as W}from"./chunk-C6YXCRXQ.js";import{i as X}from"./chunk-PVO7NVMK.js";import{d as S,f as R,g as v,l as b,n as F,q as P,r as z,u as D}from"./chunk-MGV73Q32.js";import{Y as q,Z as w}from"./chunk-4AO3EWIG.js";import{a as L,e as y}from"./chunk-5XANXOAJ.js";import{ja as j,la as k}from"./chunk-IM7EI72R.js";import{Fa as h,Kb as l,Lb as m,Mb as p,Wb as u,Xb as N,bb as _,cb as a,na as f,oc as T,pc as I,qb as A,zb as s}from"./chunk-UELVXDXK.js";import{a as E,b as g}from"./chunk-2GMD7R3L.js";var le=(()=>{let n=class n extends Z{constructor(e,i,t,o){super(t),this.sntiService=e,this.fb=i,this.dialog=t,this.data=o,this.notificationTypes=Object.keys(M).map(d=>M[d]),this.form=i.group({name:[o?.notificationRecipient?.name,[S.maxLength(4096)]],enabled:[o?.notificationRecipient?.enabled??!0,[S.required]],identifier:[o?.notificationRecipient?.identifier,[S.required]],notificationType:[o?.notificationRecipient?.notificationType,[S.required]]});}submit(){this.IsValid()&&(this.data&&this.data.notificationRecipient?this.save(this.sntiService.notifications.recipients.update(this.data.notificationId,this.data.notificationRecipient.id,this.form.value)):this.save(this.sntiService.notifications.recipients.create(this.data.notificationId,this.form.value)));}};n.ɵfac=function(i){return new(i||n)(a(C),a(z),a(G),a(V));},n.ɵcmp=f({type:n,selectors:[["sz-mgmt-notification-notification-recipients-save"]],standalone:!0,features:[T([]),A,I],decls:9,vars:7,consts:()=>{let e;e="Name";let i;i="Type";let t;t="Identifier";let o;return o="Enabled",[o,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","notificationType","label",i,3,"source","localizedValue"],["formControlName","identifier","label",t],["formControlName","enabled"],[3,"actions"]];},template:function(i,t){i&1&&(p(0,"sz-ui-dialog-header",1),l(1,"mat-dialog-content")(2,"form",2),p(3,"sz-ui-form-field-input",3)(4,"sz-ui-form-field-select",4)(5,"sz-ui-form-field-input",5),l(6,"mat-checkbox",6),u(7,0),m()()(),p(8,"sz-ui-dialog-actions",7)),i&2&&(s("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),_(2),s("formGroup",t.form),_(2),s("source",t.notificationTypes)("localizedValue",!0),_(4),s("actions",t.actions));},dependencies:[D,b,R,v,F,P,U,B,X,J,Q,te,x,ee,W,H,K],encapsulation:2});let c=n;return c;})();var Qe=(()=>{let n=class n{constructor(e,i,t){this.route=e,this.dialog=i,this.sntiService=t,this.notification=h.required(),this.dataSource=new oe(),this.dataSource.columnDefs.push(r.uuid("id"),r.string("name").setStacked(r.enum("notificationType").setName(q.type).setValueGetter(o=>w(o.notificationType)).setValueClassFontSmall()),r.string("identifier"),r.boolean("enabled").setChangeFn((o,d)=>{this.sntiService.notifications.recipients.update(this.notification().id,o.id,g(E({},o),{enabled:d})).subscribe(ce=>{this.dataSource.addOrUpdateItem(ce);});}),r.date("createdAt").setVisible(!1),r.date("updatedAt").setVisible(!1),r.menu([O.edit(this.openSaveComponent.bind(this)),O.divider(),O.delete(this.openNotificationRecipientDeleteComponent.bind(this))]));}ngOnInit(){this.get();}openNotificationRecipientDeleteComponent(e){this.dialog.open(ie,{data:Y.delete(this.sntiService.notifications.recipients.delete(e.notificationId,e.id),e)}).afterClosed().subscribe(i=>{this.dataSource.delete(i);});}openSaveComponent(e){this.dialog.open(le,{data:{notificationId:this.notification().id,notificationRecipient:e}}).afterClosed().subscribe(i=>{this.dataSource.addOrUpdateItem(i);});}get(){this.sntiService.notifications.recipients.get(this.notification().id,this.dataSource.getQuery()).pipe(ne(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};n.ɵfac=function(i){return new(i||n)(a(L),a($),a(C));},n.ɵcmp=f({type:n,selectors:[["sz-mgmt-notification-notification-recipients"]],inputs:{notification:[1,"notification"]},standalone:!0,features:[T([]),I],decls:5,vars:2,consts:()=>{let e;return e="Add",[e,[3,"changed","dataSource"],["mat-flat-button","","color","primary","start","",3,"click"],[3,"update","dataSource"]];},template:function(i,t){i&1&&(l(0,"sz-ui-table-search-filter",1),N("changed",function(){return t.get();}),l(1,"button",2),N("click",function(){return t.openSaveComponent();}),l(2,"span"),u(3,0),m()()(),l(4,"sz-ui-table",3),N("update",function(){return t.get();}),m()),i&2&&(s("dataSource",t.dataSource),_(4),s("dataSource",t.dataSource));},dependencies:[y,se,re,ae,k,j],encapsulation:2});let c=n;return c;})();export{Qe as a};/**i18n:fe59e4cec730fb22fcad5443103077b4b8cf7932d5cc1616a4c03edd493e1605*/