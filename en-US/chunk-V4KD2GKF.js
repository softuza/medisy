import{a as Ve,b as We,c as qe,e as Qe,f as Ze,g as et,h as tt}from"./chunk-WRX26O6Y.js";import{i as nt,y as ft}from"./chunk-PR2S2BYY.js";import{d as G,g as Xe,h as Be,l as je,n as De,o as ze,q as $e,s as Ge,u as lt,v as ut}from"./chunk-45OHQSO4.js";import{c as j,e as Ke,f as st,g as ct,j as Se}from"./chunk-3X3GB5M2.js";import{a as rt,b as ot}from"./chunk-YSG5RPEZ.js";import{Pa as Ye,Ra as Je,Ta as it,Ua as at,e as Ne,q as ve,r as Pe}from"./chunk-6CDLFCYH.js";import{Bb as z,Cb as $,Db as V,Nb as me,Pb as ge,Wb as Me,Zb as ne,_a as pe,ac as ie,c as Ae,ca as B,cb as Z,d as Re,da as Te,db as P,e as H,f as Ie,ia as A,la as re,ma as Ue,nb as oe,o as Fe,qc as ae,t as He,tb as Le,ub as Oe}from"./chunk-VIEIPKUR.js";var gt=Ae(se=>{"use strict";se.byteLength=Ct;se.toByteArray=Rt;se.fromByteArray=Ht;var N=[],I=[],Et=typeof Uint8Array<"u"?Uint8Array:Array,ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Y=0,pt=ke.length;Y<pt;++Y)N[Y]=ke[Y],I[ke.charCodeAt(Y)]=Y;var Y,pt;I["-".charCodeAt(0)]=62;I["_".charCodeAt(0)]=63;function mt(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var d=r.indexOf("=");d===-1&&(d=e);var o=d===e?0:4-d%4;return[d,o];}function Ct(r){var e=mt(r),d=e[0],o=e[1];return(d+o)*3/4-o;}function At(r,e,d){return(e+d)*3/4-d;}function Rt(r){var e,d=mt(r),o=d[0],a=d[1],n=new Et(At(r,o,a)),m=0,c=a>0?o-4:o,S;for(S=0;S<c;S+=4)e=I[r.charCodeAt(S)]<<18|I[r.charCodeAt(S+1)]<<12|I[r.charCodeAt(S+2)]<<6|I[r.charCodeAt(S+3)],n[m++]=e>>16&255,n[m++]=e>>8&255,n[m++]=e&255;return a===2&&(e=I[r.charCodeAt(S)]<<2|I[r.charCodeAt(S+1)]>>4,n[m++]=e&255),a===1&&(e=I[r.charCodeAt(S)]<<10|I[r.charCodeAt(S+1)]<<4|I[r.charCodeAt(S+2)]>>2,n[m++]=e>>8&255,n[m++]=e&255),n;}function It(r){return N[r>>18&63]+N[r>>12&63]+N[r>>6&63]+N[r&63];}function Ft(r,e,d){for(var o,a=[],n=e;n<d;n+=3)o=(r[n]<<16&16711680)+(r[n+1]<<8&65280)+(r[n+2]&255),a.push(It(o));return a.join("");}function Ht(r){for(var e,d=r.length,o=d%3,a=[],n=16383,m=0,c=d-o;m<c;m+=n)a.push(Ft(r,m,m+n>c?c:m+n));return o===1?(e=r[d-1],a.push(N[e>>2]+N[e<<4&63]+"==")):o===2&&(e=(r[d-2]<<8)+r[d-1],a.push(N[e>>10]+N[e>>4&63]+N[e<<2&63]+"=")),a.join("");}});var vt=Ae((exports,module)=>{"use strict";(function(){"use strict";var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&typeof module=="object"&&module.exports,AMD=typeof define=="function"&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]";}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(r){return typeof r=="object"&&r.buffer&&r.buffer.constructor===ArrayBuffer;});var createOutputMethod=function(r,e){return function(d){return new Sha256(e,!0).update(d)[r]();};},createMethod=function(r){var e=createOutputMethod("hex",r);NODE_JS&&(e=nodeWrap(e,r)),e.create=function(){return new Sha256(r);},e.update=function(a){return e.create().update(a);};for(var d=0;d<OUTPUT_TYPES.length;++d){var o=OUTPUT_TYPES[d];e[o]=createOutputMethod(o,r);}return e;},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(r){if(typeof r=="string")return crypto.createHash(algorithm).update(r,"utf8").digest("hex");if(r==null)throw new Error(ERROR);return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(r)).digest("hex"):method(r);};return nodeMethod;},createHmacOutputMethod=function(r,e){return function(d,o){return new HmacSha256(d,e,!0).update(o)[r]();};},createHmacMethod=function(r){var e=createHmacOutputMethod("hex",r);e.create=function(a){return new HmacSha256(a,r);},e.update=function(a,n){return e.create(a).update(n);};for(var d=0;d<OUTPUT_TYPES.length;++d){var o=OUTPUT_TYPES[d];e[o]=createHmacOutputMethod(o,r);}return e;};function Sha256(r,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=r;}Sha256.prototype.update=function(r){if(!this.finalized){var e,d=typeof r;if(d!=="string"){if(d==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR);}else throw new Error(ERROR);e=!0;}for(var o,a=0,n,m=r.length,c=this.blocks;a<m;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),e)for(n=this.start;a<m&&n<64;++a)c[n>>2]|=r[a]<<SHIFT[n++&3];else for(n=this.start;a<m&&n<64;++a)o=r.charCodeAt(a),o<128?c[n>>2]|=o<<SHIFT[n++&3]:o<2048?(c[n>>2]|=(192|o>>6)<<SHIFT[n++&3],c[n>>2]|=(128|o&63)<<SHIFT[n++&3]):o<55296||o>=57344?(c[n>>2]|=(224|o>>12)<<SHIFT[n++&3],c[n>>2]|=(128|o>>6&63)<<SHIFT[n++&3],c[n>>2]|=(128|o&63)<<SHIFT[n++&3]):(o=65536+((o&1023)<<10|r.charCodeAt(++a)&1023),c[n>>2]|=(240|o>>18)<<SHIFT[n++&3],c[n>>2]|=(128|o>>12&63)<<SHIFT[n++&3],c[n>>2]|=(128|o>>6&63)<<SHIFT[n++&3],c[n>>2]|=(128|o&63)<<SHIFT[n++&3]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=c[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n;}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this;}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var r=this.blocks,e=this.lastByteIndex;r[16]=this.block,r[e>>2]|=EXTRA[e&3],this.block=r[16],e>=56&&(this.hashed||this.hash(),r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),r[14]=this.hBytes<<3|this.bytes>>>29,r[15]=this.bytes<<3,this.hash();}},Sha256.prototype.hash=function(){var r=this.h0,e=this.h1,d=this.h2,o=this.h3,a=this.h4,n=this.h5,m=this.h6,c=this.h7,S=this.blocks,b,w,E,T,k,U,L,C,q,F,J;for(b=16;b<64;++b)k=S[b-15],w=(k>>>7|k<<25)^(k>>>18|k<<14)^k>>>3,k=S[b-2],E=(k>>>17|k<<15)^(k>>>19|k<<13)^k>>>10,S[b]=S[b-16]+w+S[b-7]+E<<0;for(J=e&d,b=0;b<64;b+=4)this.first?(this.is224?(C=300032,k=S[0]-1413257819,c=k-150054599<<0,o=k+24177077<<0):(C=704751109,k=S[0]-210244248,c=k-1521486534<<0,o=k+143694565<<0),this.first=!1):(w=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),E=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),C=r&e,T=C^r&d^J,L=a&n^~a&m,k=c+E+L+K[b]+S[b],U=w+T,c=o+k<<0,o=k+U<<0),w=(o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10),E=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),q=o&r,T=q^o&e^C,L=c&a^~c&n,k=m+E+L+K[b+1]+S[b+1],U=w+T,m=d+k<<0,d=k+U<<0,w=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),E=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),F=d&o,T=F^d&r^q,L=m&c^~m&a,k=n+E+L+K[b+2]+S[b+2],U=w+T,n=e+k<<0,e=k+U<<0,w=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),E=(n>>>6|n<<26)^(n>>>11|n<<21)^(n>>>25|n<<7),J=e&d,T=J^e&o^F,L=n&m^~n&c,k=a+E+L+K[b+3]+S[b+3],U=w+T,a=r+k<<0,r=k+U<<0;this.h0=this.h0+r<<0,this.h1=this.h1+e<<0,this.h2=this.h2+d<<0,this.h3=this.h3+o<<0,this.h4=this.h4+a<<0,this.h5=this.h5+n<<0,this.h6=this.h6+m<<0,this.h7=this.h7+c<<0;},Sha256.prototype.hex=function(){this.finalize();var r=this.h0,e=this.h1,d=this.h2,o=this.h3,a=this.h4,n=this.h5,m=this.h6,c=this.h7,S=HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[d>>28&15]+HEX_CHARS[d>>24&15]+HEX_CHARS[d>>20&15]+HEX_CHARS[d>>16&15]+HEX_CHARS[d>>12&15]+HEX_CHARS[d>>8&15]+HEX_CHARS[d>>4&15]+HEX_CHARS[d&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[m>>28&15]+HEX_CHARS[m>>24&15]+HEX_CHARS[m>>20&15]+HEX_CHARS[m>>16&15]+HEX_CHARS[m>>12&15]+HEX_CHARS[m>>8&15]+HEX_CHARS[m>>4&15]+HEX_CHARS[m&15];return this.is224||(S+=HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[c&15]),S;},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var r=this.h0,e=this.h1,d=this.h2,o=this.h3,a=this.h4,n=this.h5,m=this.h6,c=this.h7,S=[r>>24&255,r>>16&255,r>>8&255,r&255,e>>24&255,e>>16&255,e>>8&255,e&255,d>>24&255,d>>16&255,d>>8&255,d&255,o>>24&255,o>>16&255,o>>8&255,o&255,a>>24&255,a>>16&255,a>>8&255,a&255,n>>24&255,n>>16&255,n>>8&255,n&255,m>>24&255,m>>16&255,m>>8&255,m&255];return this.is224||S.push(c>>24&255,c>>16&255,c>>8&255,c&255),S;},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var r=new ArrayBuffer(this.is224?28:32),e=new DataView(r);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),r;};function HmacSha256(r,e,d){var o,a=typeof r;if(a==="string"){var n=[],m=r.length,c=0,S;for(o=0;o<m;++o)S=r.charCodeAt(o),S<128?n[c++]=S:S<2048?(n[c++]=192|S>>6,n[c++]=128|S&63):S<55296||S>=57344?(n[c++]=224|S>>12,n[c++]=128|S>>6&63,n[c++]=128|S&63):(S=65536+((S&1023)<<10|r.charCodeAt(++o)&1023),n[c++]=240|S>>18,n[c++]=128|S>>12&63,n[c++]=128|S>>6&63,n[c++]=128|S&63);r=n;}else if(a==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR);}else throw new Error(ERROR);r.length>64&&(r=new Sha256(e,!0).update(r).array());var b=[],w=[];for(o=0;o<64;++o){var E=r[o]||0;b[o]=92^E,w[o]=54^E;}Sha256.call(this,e,d),this.update(w),this.oKeyPad=b,this.inner=!0,this.sharedMemory=d;}HmacSha256.prototype=new Sha256(),HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var r=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(r),Sha256.prototype.finalize.call(this);}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define(function(){return exports;}));})();});var dt=[{path:"login",loadComponent:()=>import("./chunk-7YKQBMND.js").then(r=>r.SzAuthLoginComponent)},{path:"redirect",loadComponent:()=>import("./chunk-7YKQBMND.js").then(r=>r.SzAuthRedirectComponent)}];var Mt=(()=>{let e=class e{};e.ɵfac=function(a){return new(a||e)();},e.ɵmod=Ue({type:e}),e.ɵinj=Te({imports:[Ke.forChild(dt)]});let r=e;return r;})();function wt(r,e){r&1&&V(0,"mat-progress-bar",11);}var ar=(()=>{let e=class e{constructor(o,a,n,m){this.locale=o,this.fb=a,this.router=n,this.authService=m,this.alert=pe(void 0),this.indicator=pe(!1),this.loginStorage="medisy-portal-login",this.subscriptions=new Ie();let{email:c,organization:S}=this.loadLoginData();this.form=this.fb.group({email:[c,[G.required,G.minLength(1),G.email]],organization:[S,[G.required,G.minLength(3),G.maxLength(255)]]}),this.subscribeChanges();}ngOnDestroy(){this.subscriptions.unsubscribe();}subscribeChanges(){this.subscriptions.add(this.form.controls.email.valueChanges.subscribe(o=>{this.emailChanged(o);}));}emailChanged(o){let a=o.indexOf("@");if(a>0){let n=o.indexOf(".",a);this.form.controls.organization.setValue(o.substring(a+1,n>0?n:o.length));}}login(){return H(this,null,function*(){if(this.form&&!this.form.valid)return Object.keys(this.form.controls).forEach(a=>{this.form.get(a)?.markAsTouched({onlySelf:!0});}),!1;this.indicator.set(!0);let o=this.authService.setOptions({realm:this.form.value.organization,username:this.form.value.email,clientId:"medisy-portal"});return yield this.authInitialize(o),!0;});}saveLoginData(){localStorage.setItem(this.loginStorage,JSON.stringify({email:this.form.value.email,organization:this.form.value.organization}));}loadLoginData(){try{let o=localStorage.getItem(this.loginStorage);if(o)return JSON.parse(o);}catch(o){console.log(o);}return{email:"",organization:""};}authInitialize(o){return H(this,null,function*(){try{if(yield this.authService.initialize(o)){this.router.navigate(["/"]);return;}this.saveLoginData(),yield this.authService.login({loginHint:o.username,locale:this.locale});}catch{this.indicator.set(!1),this.alert.set({message:"Faield to login",type:lt.Error,timeout:5e3});}});}};e.ɵfac=function(a){return new(a||e)(P(ae),P($e),P(j),P(M));},e.ɵcmp=re({type:e,selectors:[["softuza-auth-login"]],standalone:!0,features:[ne([]),ie],decls:21,vars:4,consts:()=>{let o;o="Login";let a;a="Email";let n;n="Organization";let m;return m="Login",[[1,"content-center"],[2,"font-size","x-large"],["svgIcon","logo",1,"logo"],o,[3,"alert"],[2,"padding","16px"],[3,"formGroup","keyup.enter"],["formControlName","email","label",a],["formControlName","organization","label",n],["mat-button","",1,"button-submit",3,"disabled","click"],m,["mode","indeterminate"]];},template:function(a,n){a&1&&(z(0,"div",0)(1,"h2",1)(2,"strong"),Me(3,"Medisy"),$()(),V(4,"mat-icon",2),z(5,"mat-card")(6,"mat-card-header")(7,"mat-card-title"),me(8,3),$()(),V(9,"sz-ui-alert",4),z(10,"mat-card-content",5)(11,"form",6),ge("keyup.enter",function(){return n.login();}),V(12,"sz-ui-form-field-input",7)(13,"sz-ui-form-field-input",8),$(),V(14,"mat-divider"),$(),z(15,"mat-card-actions")(16,"button",9),ge("click",function(){return n.login();}),z(17,"span"),me(18,10),$()()(),z(19,"mat-card-footer"),Le(20,wt,1,0,"mat-progress-bar",11),$()()()),a&2&&(Z(9),oe("alert",n.alert()),Z(2),oe("formGroup",n.form),Z(5),oe("disabled",n.indicator()),Z(4),Oe(20,n.indicator()?20:-1));},dependencies:[Ge,je,Xe,Be,De,ze,tt,Ve,Qe,qe,et,Ze,We,ct,st,nt,at,it,ot,rt,Je,Ye,ut,ft],styles:[".content-center[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(243 244 246/var(--tw-bg-opacity))}.logo[_ngcontent-%COMP%]{margin:16px}.button-submit[_ngcontent-%COMP%]{width:100%}.actions[_ngcontent-%COMP%]{text-align:center;margin:16px 0;font-size:12px;cursor:pointer}.logo[_ngcontent-%COMP%]{color:#fff;height:64px;width:64px}"]});let r=e;return r;})();var pr=(()=>{let e=class e{constructor(o,a,n){this.locale=o,this.router=a,this.identityService=n;}ngOnInit(){return H(this,null,function*(){let o=this.identityService.getOptions();if(!o){this.router.navigate(["/auth/login"]);return;}if(yield this.identityService.initialize(o)){this.router.navigate(["/"]);return;}yield this.identityService.login({loginHint:o.username,locale:this.locale});});}};e.ɵfac=function(a){return new(a||e)(P(ae),P(j),P(M));},e.ɵcmp=re({type:e,selectors:[["softuza-auth-redirect"]],standalone:!0,features:[ne([]),ie],decls:0,vars:0,template:function(a,n){},encapsulation:2});let r=e;return r;})();var St=Re(gt(),1),xt=Re(vt(),1);if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");function _e(r){if(!(this instanceof _e))throw new Error("The 'Keycloak' constructor must be invoked with 'new'.");for(var e=this,d,o=[],a,n={enable:!0,callbackList:[],interval:5},m=document.getElementsByTagName("script"),c=0;c<m.length;c++)(m[c].src.indexOf("keycloak.js")!==-1||m[c].src.indexOf("keycloak.min.js")!==-1)&&m[c].src.indexOf("version=")!==-1&&(e.iframeVersion=m[c].src.substring(m[c].src.indexOf("version=")+8).split("&")[0]);var S=!0,b=Ce(console.info),w=Ce(console.warn);e.init=function(t){if(e.didInitialize)throw new Error("A 'Keycloak' instance can only be initialized once.");e.didInitialize=!0,e.authenticated=!1,a=yt();var i=["default","cordova","cordova-native"];if(t&&i.indexOf(t.adapter)>-1?d=fe(t.adapter):t&&typeof t.adapter=="object"?d=t.adapter:window.Cordova||window.cordova?d=fe("cordova"):d=fe(),t){if(typeof t.useNonce<"u"&&(S=t.useNonce),typeof t.checkLoginIframe<"u"&&(n.enable=t.checkLoginIframe),t.checkLoginIframeInterval&&(n.interval=t.checkLoginIframeInterval),t.onLoad==="login-required"&&(e.loginRequired=!0),t.responseMode)if(t.responseMode==="query"||t.responseMode==="fragment")e.responseMode=t.responseMode;else throw"Invalid value for responseMode";if(t.flow){switch(t.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow";}e.flow=t.flow;}if(t.timeSkew!=null&&(e.timeSkew=t.timeSkew),t.redirectUri&&(e.redirectUri=t.redirectUri),t.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=t.silentCheckSsoRedirectUri),typeof t.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=t.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,t.pkceMethod){if(t.pkceMethod!=="S256")throw"Invalid value for pkceMethod";e.pkceMethod=t.pkceMethod;}typeof t.enableLogging=="boolean"?e.enableLogging=t.enableLogging:e.enableLogging=!1,typeof t.scope=="string"&&(e.scope=t.scope),typeof t.messageReceiveTimeout=="number"&&t.messageReceiveTimeout>0?e.messageReceiveTimeout=t.messageReceiveTimeout:e.messageReceiveTimeout=1e4;}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var l=y(),h=y();h.promise.then(function(){e.onReady&&e.onReady(e.authenticated),l.setSuccess(e.authenticated);}).catch(function(g){l.setError(g);});var s=J();function p(){var g=function(_){_||(x.prompt="none"),t&&t.locale&&(x.locale=t.locale),e.login(x).then(function(){h.setSuccess();}).catch(function(O){h.setError(O);});},v=function(){var _=document.createElement("iframe"),O=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});_.setAttribute("src",O),_.setAttribute("sandbox","allow-scripts allow-same-origin"),_.setAttribute("title","keycloak-silent-check-sso"),_.style.display="none",document.body.appendChild(_);var X=function(R){if(!(R.origin!==window.location.origin||_.contentWindow!==R.source)){var Q=D(R.data);F(Q,h),document.body.removeChild(_),window.removeEventListener("message",X);}};window.addEventListener("message",X);},x={};switch(t.onLoad){case"check-sso":n.enable?le().then(function(){te().then(function(_){_?h.setSuccess():e.silentCheckSsoRedirectUri?v():g(!1);}).catch(function(_){h.setError(_);});}):e.silentCheckSsoRedirectUri?v():g(!1);break;case"login-required":g(!0);break;default:throw"Invalid value for onLoad";}}function u(){var g=D(window.location.href);if(g&&window.history.replaceState(window.history.state,null,g.newUrl),g&&g.valid)return le().then(function(){F(g,h);}).catch(function(v){h.setError(v);});t?t.token&&t.refreshToken?(ee(t.token,t.refreshToken,t.idToken),n.enable?le().then(function(){te().then(function(v){v?(e.onAuthSuccess&&e.onAuthSuccess(),h.setSuccess(),ue()):h.setSuccess();}).catch(function(v){h.setError(v);});}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),h.setSuccess();}).catch(function(v){e.onAuthError&&e.onAuthError(),t.onLoad?p():h.setError(v);})):t.onLoad?p():h.setSuccess():h.setSuccess();}function f(){var g=y(),v=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",v),g.setSuccess());};return document.addEventListener("readystatechange",v),v(),g.promise;}return s.then(function(){f().then(bt).then(u).catch(function(g){l.setError(g);});}),s.catch(function(g){l.setError(g);}),l.promise;},e.login=function(t){return d.login(t);};function E(t){var i=null,l=window.crypto||window.msCrypto;if(l&&l.getRandomValues&&window.Uint8Array)return i=new Uint8Array(t),l.getRandomValues(i),i;i=new Array(t);for(var h=0;h<i.length;h++)i[h]=Math.floor(256*Math.random());return i;}function T(t){return k(t,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");}function k(t,i){for(var l=E(t),h=new Array(t),s=0;s<t;s++)h[s]=i.charCodeAt(l[s]%i.length);return String.fromCharCode.apply(null,h);}function U(t,i){switch(t){case"S256":var l=new Uint8Array(xt.default.arrayBuffer(i)),h=St.default.fromByteArray(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return h;default:throw"Invalid value for pkceMethod";}}function L(t){var i={id_token:{acr:t}};return JSON.stringify(i);}e.createLoginUrl=function(t){var i=we(),l=we(),h=d.redirectUri(t),s={state:i,nonce:l,redirectUri:encodeURIComponent(h)};t&&t.prompt&&(s.prompt=t.prompt);var p;t&&t.action=="register"?p=e.endpoints.register():p=e.endpoints.authorize();var u=t&&t.scope||e.scope;u?u.indexOf("openid")===-1&&(u="openid "+u):u="openid";var f=p+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(h)+"&state="+encodeURIComponent(i)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(u);if(S&&(f=f+"&nonce="+encodeURIComponent(l)),t&&t.prompt&&(f+="&prompt="+encodeURIComponent(t.prompt)),t&&t.maxAge&&(f+="&max_age="+encodeURIComponent(t.maxAge)),t&&t.loginHint&&(f+="&login_hint="+encodeURIComponent(t.loginHint)),t&&t.idpHint&&(f+="&kc_idp_hint="+encodeURIComponent(t.idpHint)),t&&t.action&&t.action!="register"&&(f+="&kc_action="+encodeURIComponent(t.action)),t&&t.locale&&(f+="&ui_locales="+encodeURIComponent(t.locale)),t&&t.acr){var g=L(t.acr);f+="&claims="+encodeURIComponent(g);}if(e.pkceMethod){var v=T(96);s.pkceCodeVerifier=v;var x=U(e.pkceMethod,v);f+="&code_challenge="+x,f+="&code_challenge_method="+e.pkceMethod;}return a.add(s),f;},e.logout=function(t){return d.logout(t);},e.createLogoutUrl=function(t){var i=e.endpoints.logout()+"?client_id="+encodeURIComponent(e.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(d.redirectUri(t,!1));return e.idToken&&(i+="&id_token_hint="+encodeURIComponent(e.idToken)),i;},e.register=function(t){return d.register(t);},e.createRegisterUrl=function(t){return t||(t={}),t.action="register",e.createLoginUrl(t);},e.createAccountUrl=function(t){var i=C(),l=void 0;return typeof i<"u"&&(l=i+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(d.redirectUri(t))),l;},e.accountManagement=function(){return d.accountManagement();},e.hasRealmRole=function(t){var i=e.realmAccess;return!!i&&i.roles.indexOf(t)>=0;},e.hasResourceRole=function(t,i){if(!e.resourceAccess)return!1;var l=e.resourceAccess[i||e.clientId];return!!l&&l.roles.indexOf(t)>=0;},e.loadUserProfile=function(){var t=C()+"/account",i=new XMLHttpRequest();i.open("GET",t,!0),i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Authorization","bearer "+e.token);var l=y();return i.onreadystatechange=function(){i.readyState==4&&(i.status==200?(e.profile=JSON.parse(i.responseText),l.setSuccess(e.profile)):l.setError());},i.send(),l.promise;},e.loadUserInfo=function(){var t=e.endpoints.userinfo(),i=new XMLHttpRequest();i.open("GET",t,!0),i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Authorization","bearer "+e.token);var l=y();return i.onreadystatechange=function(){i.readyState==4&&(i.status==200?(e.userInfo=JSON.parse(i.responseText),l.setSuccess(e.userInfo)):l.setError());},i.send(),l.promise;},e.isTokenExpired=function(t){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return b("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var i=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(t){if(isNaN(t))throw"Invalid minValidity";i-=t;}return i<0;},e.updateToken=function(t){var i=y();if(!e.refreshToken)return i.setError(),i.promise;t=t||5;var l=function(){var s=!1;if(t==-1?(s=!0,b("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(t))&&(s=!0,b("[KEYCLOAK] Refreshing token: token expired")),!s)i.setSuccess(!1);else{var p="grant_type=refresh_token&refresh_token="+e.refreshToken,u=e.endpoints.token();if(o.push(i),o.length==1){var f=new XMLHttpRequest();f.open("POST",u,!0),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.withCredentials=!0,p+="&client_id="+encodeURIComponent(e.clientId);var g=new Date().getTime();f.onreadystatechange=function(){if(f.readyState==4)if(f.status==200){b("[KEYCLOAK] Token refreshed"),g=(g+new Date().getTime())/2;var v=JSON.parse(f.responseText);ee(v.access_token,v.refresh_token,v.id_token,g),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var x=o.pop();x!=null;x=o.pop())x.setSuccess(!0);}else{w("[KEYCLOAK] Failed to refresh token"),f.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var x=o.pop();x!=null;x=o.pop())x.setError(!0);}},f.send(p);}}};if(n.enable){var h=te();h.then(function(){l();}).catch(function(s){i.setError(s);});}else l();return i.promise;},e.clearToken=function(){e.token&&(ee(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login());};function C(){if(typeof e.authServerUrl<"u")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm);}function q(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");}function F(t,i){var l=t.code,h=t.error,s=t.prompt,p=new Date().getTime();if(t.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(t.kc_action_status),h){if(s!="none"){var u={error:h,error_description:t.error_description};e.onAuthError&&e.onAuthError(u),i&&i.setError(u);}else i&&i.setSuccess();return;}else e.flow!="standard"&&(t.access_token||t.id_token)&&x(t.access_token,null,t.id_token,!0);if(e.flow!="implicit"&&l){var f="code="+l+"&grant_type=authorization_code",g=e.endpoints.token(),v=new XMLHttpRequest();v.open("POST",g,!0),v.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f+="&client_id="+encodeURIComponent(e.clientId),f+="&redirect_uri="+t.redirectUri,t.pkceCodeVerifier&&(f+="&code_verifier="+t.pkceCodeVerifier),v.withCredentials=!0,v.onreadystatechange=function(){if(v.readyState==4)if(v.status==200){var _=JSON.parse(v.responseText);x(_.access_token,_.refresh_token,_.id_token,e.flow==="standard"),ue();}else e.onAuthError&&e.onAuthError(),i&&i.setError();},v.send(f);}function x(_,O,X,R){p=(p+new Date().getTime())/2,ee(_,O,X,p),S&&(e.tokenParsed&&e.tokenParsed.nonce!=t.storedNonce||e.refreshTokenParsed&&e.refreshTokenParsed.nonce!=t.storedNonce||e.idTokenParsed&&e.idTokenParsed.nonce!=t.storedNonce)?(b("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),i&&i.setError()):R&&(e.onAuthSuccess&&e.onAuthSuccess(),i&&i.setSuccess());}}function J(t){var i=y(),l;r?typeof r=="string"&&(l=r):l="keycloak.json";function h(v){v?e.endpoints={authorize:function(){return v.authorization_endpoint;},token:function(){return v.token_endpoint;},logout:function(){if(!v.end_session_endpoint)throw"Not supported by the OIDC server";return v.end_session_endpoint;},checkSessionIframe:function(){if(!v.check_session_iframe)throw"Not supported by the OIDC server";return v.check_session_iframe;},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode';},userinfo:function(){if(!v.userinfo_endpoint)throw"Not supported by the OIDC server";return v.userinfo_endpoint;}}:e.endpoints={authorize:function(){return C()+"/protocol/openid-connect/auth";},token:function(){return C()+"/protocol/openid-connect/token";},logout:function(){return C()+"/protocol/openid-connect/logout";},checkSessionIframe:function(){var x=C()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(x=x+"?version="+e.iframeVersion),x;},thirdPartyCookiesIframe:function(){var x=C()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(x=x+"?version="+e.iframeVersion),x;},register:function(){return C()+"/protocol/openid-connect/registrations";},userinfo:function(){return C()+"/protocol/openid-connect/userinfo";}};}if(l){var s=new XMLHttpRequest();s.open("GET",l,!0),s.setRequestHeader("Accept","application/json"),s.onreadystatechange=function(){if(s.readyState==4)if(s.status==200||ye(s)){var v=JSON.parse(s.responseText);e.authServerUrl=v["auth-server-url"],e.realm=v.realm,e.clientId=v.resource,h(null),i.setSuccess();}else i.setError();},s.send();}else{if(!r.clientId)throw"clientId missing";e.clientId=r.clientId;var p=r.oidcProvider;if(p){if(typeof p=="string"){var g;p.charAt(p.length-1)=="/"?g=p+".well-known/openid-configuration":g=p+"/.well-known/openid-configuration";var s=new XMLHttpRequest();s.open("GET",g,!0),s.setRequestHeader("Accept","application/json"),s.onreadystatechange=function(){if(s.readyState==4)if(s.status==200||ye(s)){var x=JSON.parse(s.responseText);h(x),i.setSuccess();}else i.setError();},s.send();}else h(p),i.setSuccess();}else{if(!r.url){for(var u=document.getElementsByTagName("script"),f=0;f<u.length;f++)if(u[f].src.match(/.*keycloak\.js/)){r.url=u[f].src.substr(0,u[f].src.indexOf("/js/keycloak.js"));break;}}if(!r.realm)throw"realm missing";e.authServerUrl=r.url,e.realm=r.realm,h(null),i.setSuccess();}}return i.promise;}function ye(t){return t.status==0&&t.responseText&&t.responseURL.startsWith("file:");}function ee(t,i,l,h){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),i?(e.refreshToken=i,e.refreshTokenParsed=ce(i)):(delete e.refreshToken,delete e.refreshTokenParsed),l?(e.idToken=l,e.idTokenParsed=ce(l)):(delete e.idToken,delete e.idTokenParsed),t){if(e.token=t,e.tokenParsed=ce(t),e.sessionId=e.tokenParsed.session_state,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,h&&(e.timeSkew=Math.floor(h/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(b("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var s=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;b("[KEYCLOAK] Token expires in "+Math.round(s/1e3)+" s"),s<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,s);}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1;}function ce(t){switch(t=t.split(".")[1],t=t.replace(/-/g,"+"),t=t.replace(/_/g,"/"),t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Invalid token";}return t=decodeURIComponent(escape(atob(t))),t=JSON.parse(t),t;}function we(){var t="0123456789abcdef",i=k(36,t).split("");i[14]="4",i[19]=t.substr(i[19]&3|8,1),i[8]=i[13]=i[18]=i[23]="-";var l=i.join("");return l;}function D(t){var i=kt(t);if(i){var l=a.get(i.state);return l&&(i.valid=!0,i.redirectUri=l.redirectUri,i.storedNonce=l.nonce,i.prompt=l.prompt,i.pkceCodeVerifier=l.pkceCodeVerifier),i;}}function kt(t){var i;switch(e.flow){case"standard":i=["code","state","session_state","kc_action_status","iss"];break;case"implicit":i=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status","iss"];break;case"hybrid":i=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status","iss"];break;}i.push("error"),i.push("error_description"),i.push("error_uri");var l=t.indexOf("?"),h=t.indexOf("#"),s,p;if(e.responseMode==="query"&&l!==-1?(s=t.substring(0,l),p=Ee(t.substring(l+1,h!==-1?h:t.length),i),p.paramsString!==""&&(s+="?"+p.paramsString),h!==-1&&(s+=t.substring(h))):e.responseMode==="fragment"&&h!==-1&&(s=t.substring(0,h),p=Ee(t.substring(h+1),i),p.paramsString!==""&&(s+="#"+p.paramsString)),p&&p.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((p.oauthParams.code||p.oauthParams.error)&&p.oauthParams.state)return p.oauthParams.newUrl=s,p.oauthParams;}else if(e.flow==="implicit"&&(p.oauthParams.access_token||p.oauthParams.error)&&p.oauthParams.state)return p.oauthParams.newUrl=s,p.oauthParams;}}function Ee(t,i){for(var l=t.split("&"),h={paramsString:"",oauthParams:{}},s=0;s<l.length;s++){var p=l[s].indexOf("="),u=l[s].slice(0,p);i.indexOf(u)!==-1?h.oauthParams[u]=l[s].slice(p+1):(h.paramsString!==""&&(h.paramsString+="&"),h.paramsString+=l[s]);}return h;}function y(){var t={setSuccess:function(i){t.resolve(i);},setError:function(i){t.reject(i);}};return t.promise=new Promise(function(i,l){t.resolve=i,t.reject=l;}),t;}function _t(t,i,l){var h=null,s=new Promise(function(p,u){h=setTimeout(function(){u({error:l||"Promise is not settled within timeout of "+i+"ms"});},i);});return Promise.race([t,s]).finally(function(){clearTimeout(h);});}function le(){var t=y();if(!n.enable||n.iframe)return t.setSuccess(),t.promise;var i=document.createElement("iframe");n.iframe=i,i.onload=function(){var s=e.endpoints.authorize();s.charAt(0)==="/"?n.iframeOrigin=q():n.iframeOrigin=s.substring(0,s.indexOf("/",8)),t.setSuccess();};var l=e.endpoints.checkSessionIframe();i.setAttribute("src",l),i.setAttribute("sandbox","allow-scripts allow-same-origin"),i.setAttribute("title","keycloak-session-iframe"),i.style.display="none",document.body.appendChild(i);var h=function(s){if(!(s.origin!==n.iframeOrigin||n.iframe.contentWindow!==s.source)&&(s.data=="unchanged"||s.data=="changed"||s.data=="error")){s.data!="unchanged"&&e.clearToken();for(var p=n.callbackList.splice(0,n.callbackList.length),u=p.length-1;u>=0;--u){var f=p[u];s.data=="error"?f.setError():f.setSuccess(s.data=="unchanged");}}};return window.addEventListener("message",h,!1),t.promise;}function ue(){n.enable&&e.token&&setTimeout(function(){te().then(function(t){t&&ue();});},n.interval*1e3);}function te(){var t=y();if(n.iframe&&n.iframeOrigin){var i=e.clientId+" "+(e.sessionId?e.sessionId:"");n.callbackList.push(t);var l=n.iframeOrigin;n.callbackList.length==1&&n.iframe.contentWindow.postMessage(i,l);}else t.setSuccess();return t.promise;}function bt(){var t=y();if(n.enable||e.silentCheckSsoRedirectUri){var i=document.createElement("iframe");i.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),i.setAttribute("sandbox","allow-scripts allow-same-origin"),i.setAttribute("title","keycloak-3p-check-iframe"),i.style.display="none",document.body.appendChild(i);var l=function(h){i.contentWindow===h.source&&(h.data!=="supported"&&h.data!=="unsupported"||(h.data==="unsupported"&&(w(`[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:

 - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).
 - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).

For more information see: https://www.keycloak.org/docs/latest/securing_apps/#_modern_browsers`),n.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1)),document.body.removeChild(i),window.removeEventListener("message",l),t.setSuccess()));};window.addEventListener("message",l,!1);}else t.setSuccess();return _t(t.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.");}function fe(t){if(!t||t=="default")return{login:function(u){return window.location.assign(e.createLoginUrl(u)),y().promise;},logout:function(u){return window.location.replace(e.createLogoutUrl(u)),y().promise;},register:function(u){return window.location.assign(e.createRegisterUrl(u)),y().promise;},accountManagement:function(){var u=e.createAccountUrl();if(typeof u<"u")window.location.href=u;else throw"Not supported by the OIDC server";return y().promise;},redirectUri:function(u,f){return u&&u.redirectUri?u.redirectUri:e.redirectUri?e.redirectUri:location.href;}};if(t=="cordova"){n.enable=!1;var i=function(u,f,g){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(u,f,g):window.open(u,f,g);},l=function(u){return u&&u.cordovaOptions?Object.keys(u.cordovaOptions).reduce(function(f,g){return f[g]=u.cordovaOptions[g],f;},{}):{};},h=function(u){return Object.keys(u).reduce(function(f,g){return f.push(g+"="+u[g]),f;},[]).join(",");},s=function(u){var f=l(u);return f.location="no",u&&u.prompt=="none"&&(f.hidden="yes"),h(f);},p=e.redirectUri||"http://localhost";return{login:function(u){var f=y(),g=s(u),v=e.createLoginUrl(u),x=i(v,"_blank",g),_=!1,O=!1,X=function(){O=!0,x.close();};return x.addEventListener("loadstart",function(R){if(R.url.indexOf(p)==0){var Q=D(R.url);F(Q,f),X(),_=!0;}}),x.addEventListener("loaderror",function(R){if(!_)if(R.url.indexOf(p)==0){var Q=D(R.url);F(Q,f),X(),_=!0;}else f.setError(),X();}),x.addEventListener("exit",function(R){O||f.setError({reason:"closed_by_user"});}),f.promise;},logout:function(u){var f=y(),g=e.createLogoutUrl(u),v=i(g,"_blank","location=no,hidden=yes,clearcache=yes"),x;return v.addEventListener("loadstart",function(_){_.url.indexOf(p)==0&&v.close();}),v.addEventListener("loaderror",function(_){_.url.indexOf(p)==0||(x=!0),v.close();}),v.addEventListener("exit",function(_){x?f.setError():(e.clearToken(),f.setSuccess());}),f.promise;},register:function(u){var f=y(),g=e.createRegisterUrl(),v=s(u),x=i(g,"_blank",v);return x.addEventListener("loadstart",function(_){if(_.url.indexOf(p)==0){x.close();var O=D(_.url);F(O,f);}}),f.promise;},accountManagement:function(){var u=e.createAccountUrl();if(typeof u<"u"){var f=i(u,"_blank","location=no");f.addEventListener("loadstart",function(g){g.url.indexOf(p)==0&&f.close();});}else throw"Not supported by the OIDC server";},redirectUri:function(u){return p;}};}if(t=="cordova-native")return n.enable=!1,{login:function(u){var f=y(),g=e.createLoginUrl(u);return universalLinks.subscribe("keycloak",function(v){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var x=D(v.url);F(x,f);}),window.cordova.plugins.browsertab.openUrl(g),f.promise;},logout:function(u){var f=y(),g=e.createLogoutUrl(u);return universalLinks.subscribe("keycloak",function(v){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),f.setSuccess();}),window.cordova.plugins.browsertab.openUrl(g),f.promise;},register:function(u){var f=y(),g=e.createRegisterUrl(u);return universalLinks.subscribe("keycloak",function(v){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var x=D(v.url);F(x,f);}),window.cordova.plugins.browsertab.openUrl(g),f.promise;},accountManagement:function(){var u=e.createAccountUrl();if(typeof u<"u")window.cordova.plugins.browsertab.openUrl(u);else throw"Not supported by the OIDC server";},redirectUri:function(u){return u&&u.redirectUri?u.redirectUri:e.redirectUri?e.redirectUri:"http://localhost";}};throw"invalid adapter type: "+t;}var de=function(){if(!(this instanceof de))return new de();localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var t=this;function i(){for(var l=new Date().getTime(),h=0;h<localStorage.length;h++){var s=localStorage.key(h);if(s&&s.indexOf("kc-callback-")==0){var p=localStorage.getItem(s);if(p)try{var u=JSON.parse(p).expires;(!u||u<l)&&localStorage.removeItem(s);}catch{localStorage.removeItem(s);}}}}t.get=function(l){if(l){var h="kc-callback-"+l,s=localStorage.getItem(h);return s&&(localStorage.removeItem(h),s=JSON.parse(s)),i(),s;}},t.add=function(l){i();var h="kc-callback-"+l.state;l.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(h,JSON.stringify(l));};},he=function(){if(!(this instanceof he))return new he();var t=this;t.get=function(s){if(s){var p=l("kc-callback-"+s);if(h("kc-callback-"+s,"",i(-100)),p)return JSON.parse(p);}},t.add=function(s){h("kc-callback-"+s.state,JSON.stringify(s),i(60));},t.removeItem=function(s){h(s,"",i(-100));};var i=function(s){var p=new Date();return p.setTime(p.getTime()+s*60*1e3),p;},l=function(s){for(var p=s+"=",u=document.cookie.split(";"),f=0;f<u.length;f++){for(var g=u[f];g.charAt(0)==" ";)g=g.substring(1);if(g.indexOf(p)==0)return g.substring(p.length,g.length);}return"";},h=function(s,p,u){var f=s+"="+p+"; expires="+u.toUTCString()+"; ";document.cookie=f;};};function yt(){try{return new de();}catch{}return new he();}function Ce(t){return function(){e.enableLogging&&t.apply(console,Array.prototype.slice.call(arguments));};}}var M=(()=>{let e=class e{constructor(o,a,n){this.router=a,this.locationStrategy=n,this._optionsLocation="@authOptions",this._loginPath="/auth/login",this.environment=o;}setOptions(o){return localStorage.setItem(this._optionsLocation,JSON.stringify(o)),o;}getOptions(){let o=localStorage.getItem(this._optionsLocation);if(!o)return null;try{return JSON.parse(o);}catch(a){console.log(a);}return null;}clearOptions(){localStorage.setItem(this._optionsLocation,"");}getBaseUrl(){return`${window.location.origin}${this.locationStrategy.getBaseHref()}`;}login(){return H(this,arguments,function*(o={}){yield this.instance.login(o);});}logout(){return this.clearOptions(),this.instance.logout({redirectUri:`${this.getBaseUrl()}${this._loginPath}`});}refreshToken(){this.instance.updateToken(300).then(o=>{if(!o){this.router.navigate([this._loginPath]);return;}}).catch(o=>{console.log(o);});}loadUserProfile(){return this.instance.loadUserProfile();}initialize(o){return this.instance=new _e({url:this.environment.authUrl,realm:o.realm,clientId:o.clientId}),this.instance.onTokenExpired=this.refreshToken,this.instance.init({onLoad:"check-sso",silentCheckSsoRedirectUri:`${this.getBaseUrl()}/assets/silent-check-sso.html`,enableLogging:!this.environment.production,checkLoginIframe:!0,redirectUri:`${this.getBaseUrl()}/auth/redirect`});}hasResouceRole(o,a){return this.instance.hasResourceRole(a,o);}hasRealmRole(o){return this.instance.hasRealmRole(o);}getRealm(){return this.instance.realm;}getToken(){return this.instance?.token;}isLoggedIn(){return this.instance&&this.instance.authenticated===!0;}};e.ɵfac=function(a){return new(a||e)(A("environment"),A(j),A(Ne));},e.ɵprov=B({token:e,factory:e.ɵfac,providedIn:"root"});let r=e;return r;})();var wr=(()=>{let e=class e{constructor(o,a){this.router=o,this.identityService=a;}canActivate(o,a){return H(this,null,function*(){if(this.identityService.isLoggedIn())return!0;let n=this.identityService.getOptions();if(n){let m=yield this.identityService.initialize(n);if(m)return m;}return this.router.navigate(["/auth/login"]),!1;});}};e.ɵfac=function(a){return new(a||e)(A(j),A(M));},e.ɵprov=B({token:e,factory:e.ɵfac,providedIn:"root"});let r=e;return r;})();var Fr=(()=>{let e=class e{constructor(o){this.authService=o;}intercept(o,a){return o.url.startsWith("assets/")?a.handle(o):Fe(this.handle(o,a));}handle(o,a){return H(this,null,function*(){try{let n=this.authService.getToken();!o.headers.has("Authorization")&&n!==""&&(o=o.clone({headers:o.headers.set("Authorization",`Bearer ${n}`)}));}catch(n){console.log(n);}return yield He(a.handle(o));});}};e.ɵfac=function(a){return new(a||e)(A(M));},e.ɵprov=B({token:e,factory:e.ɵfac});let r=e;return r;})();var Tt=function(r){return r.UPDATE_PASSWORD="UPDATE_PASSWORD",r.UPDATE_PROFILE="UPDATE_PROFILE",r.VERIFY_EMAIL="VERIFY_EMAIL",r.CONFIGURE_TOTP="CONFIGURE_TOTP",r;}(Tt||{});var Br=(()=>{let e=class e{constructor(o,a,n){this.http=a,this.identityService=n,this.environment=o;}getPath(){return`${this.environment.authUrl}/admin/realms/${this.identityService.getRealm()}`;}getUsers(o){return this.http.get(`${this.getPath()}/users`,{params:new ve({fromObject:Se(o)})});}getUserById(o){return this.http.get(`${this.getPath()}/users/${o}`,{});}deleteUser(o){return this.http.delete(`${this.getPath()}/users/${o}`);}updateUser(o,a){return this.http.put(`${this.getPath()}/users/${o}`,a);}createUser(o){return this.http.post(`${this.getPath()}/users`,o);}getUserGroups(o){return this.http.get(`${this.getPath()}/users/${o}/groups`,{});}deleteUserGroup(o,a){return this.http.delete(`${this.getPath()}/users/${o}/groups/${a}`);}addUserGroup(o,a){return this.http.put(`${this.getPath()}/users/${o}/groups/${a}`,{});}getGroups(o){return this.http.get(`${this.getPath()}/groups`,{params:new ve({fromObject:Se(o)})});}};e.ɵfac=function(a){return new(a||e)(A("environment"),A(Pe),A(M));},e.ɵprov=B({token:e,factory:e.ɵfac});let r=e;return r;})();export{Mt as a,ar as b,pr as c,M as d,wr as e,Fr as f,Tt as g,Br as h};/**i18n:ca0c0aaef853f716736db0c306cb0b403cbd4c4309f5c41e82b4683f77b810d2*/