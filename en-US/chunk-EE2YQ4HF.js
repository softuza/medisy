import{a as Ee}from"./chunk-AABLPW5Z.js";import"./chunk-SXC7E5DA.js";import{a as E}from"./chunk-TKL2WJHN.js";import{a as _,b as ge,d as Ae,f as Te,i as Le,j as Ve}from"./chunk-JJ2YZL4E.js";import"./chunk-ZEA7LBAJ.js";import"./chunk-GBHLPDM7.js";import"./chunk-5RQQJWK2.js";import{a as S}from"./chunk-Z2R2E2EV.js";import{e as Me,f as Re,g as Ce,i as Oe,j as L,k as Ne}from"./chunk-DTKAYVTF.js";import"./chunk-BJ3HU3CV.js";import{a as T}from"./chunk-IDGEHIH2.js";import{d as Se,h as I}from"./chunk-UNERZP36.js";import{a as te,b as re,d as N,e as oe,g}from"./chunk-HGSCT6LZ.js";import"./chunk-PONDJRDE.js";import{a as se,b as me,o as A,q as _e,s as pe,t as fe}from"./chunk-CUEJULJL.js";import{c as ue}from"./chunk-WL42IITZ.js";import"./chunk-IIV3DNC7.js";import"./chunk-NI2WGS4X.js";import{d as ce}from"./chunk-FQY32KUQ.js";import{h as ie,i as ae,k as de}from"./chunk-NVTGHHY5.js";import{b as Y,d as C,f as j,g as X,j as w,k,m as q,p as x,q as H,s as W,t as Q}from"./chunk-AVUSO23W.js";import{r as K,t as Z}from"./chunk-XYATSLBH.js";import{a as O,e as J}from"./chunk-CZU2XDE5.js";import"./chunk-MDQAOQVI.js";import{ha as ee,ia as ne,ka as le}from"./chunk-OIJJQZIK.js";import"./chunk-MBD4P57N.js";import{Db as s,Hc as G,Ib as V,Ma as z,Nb as u,Ob as d,Pb as c,Zb as B,_b as R,hb as m,ib as l,ka as b,l as D,pc as f,qc as $,ta as y,ua as p,ub as U,va as F,zb as P}from"./chunk-PL4V4ZV4.js";function Fe(i,t){i&1&&(u(0,"div",4)(1,"mat-form-field",5)(2,"label"),c(3,"input",8),d()(),u(4,"mat-form-field",5)(5,"label"),c(6,"input",9),d()()());}function ze(i,t){i&1&&(u(0,"mat-form-field",5)(1,"label"),c(2,"input",10),d()());}var he=(()=>{let t=class t extends Me{constructor(r,e,o,a){super(o),this.mlabService=r,this.fb=e,this.dialog=o,this.data=a,this.referenceGroups=this.mlabService.referenceGroups.getAll({orderBy:["nameEn"],filterBehavior:K.Or,filters:Z.create().equalIf("id",this.data.referenceValueRule?.referenceGroupId).notAny("referenceValueRules.referenceValueId",[this.data.referenceValueId]).filters()}),this.comparisonOperators=Object.keys(E).map(n=>E[n]),this.form=e.group({description:[a.referenceValueRule?.description,[C.maxLength(4096)]],comparisonOperator:new w(a.referenceValueRule?.comparisonOperator??E.Equal,[C.required]),referenceGroupId:[a.referenceValueRule?.referenceGroupId,[C.required]],value:[a.referenceValueRule?.value,[]],start:[a.referenceValueRule?.start,[]],end:[a.referenceValueRule?.end,[]]});}isRange(){return this.form.value.comparisonOperator===E.RangeWithBoundaries||this.form.value.comparisonOperator===E.RangeWithoutBoundaries;}submit(){this.IsValid()&&(this.data.referenceValueRule?this.save(this.mlabService.referenceValues.rules.update(this.data.referenceValueId,this.data.referenceValueRule.id,this.form.value)):this.save(this.mlabService.referenceValues.rules.create(this.data.referenceValueId,this.form.value)));}};t.ɵfac=function(e){return new(e||t)(l(S),l(H),l(te),l(re));},t.ɵcmp=p({type:t,selectors:[["sz-medisy-laboratory-reference-value-rules-save"]],standalone:!0,features:[f([]),U,$],decls:9,vars:10,consts:()=>{let r;r="Reference Group";let e;e="Comparison Operator";let o;o="Description";let a;a="Start";let n;n="End";let v;return v="Value",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","referenceGroupId","label",r,3,"source"],["formControlName","comparisonOperator","label",e,3,"source","localizedValue"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["formControlName","description","label",o],[3,"actions"],["autocomplete","off","formControlName","start","matInput","","placeholder",a],["autocomplete","off","formControlName","end","matInput","","placeholder",n],["autocomplete","off","formControlName","value","matInput","","placeholder",v]];},template:function(e,o){e&1&&(c(0,"sz-ui-dialog-header",0),u(1,"mat-dialog-content")(2,"form",1),c(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3),P(5,Fe,7,0,"div",4)(6,ze,3,0,"mat-form-field",5),c(7,"sz-ui-form-field-textarea",6),d()(),c(8,"sz-ui-dialog-actions",7)),e&2&&(s("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),m(2),s("formGroup",o.form),m(),s("source",o.referenceGroups),m(),s("source",o.comparisonOperators)("localizedValue",!0),m(),V(5,o.isRange()?5:-1),m(),V(6,o.isRange()?-1:6),m(2),s("actions",o.actions));},dependencies:[Q,k,Y,j,X,q,x,me,se,ie,g,oe,ae,A,L,Re,Ce,fe,pe,_e],encapsulation:2});let i=t;return i;})();var ve=(()=>{let t=class t{constructor(r,e,o,a){this.dialog=r,this.route=e,this.mlabService=o,this.locale=a,this.dataSource=new Ae(),this.referenceValueId=z.required(),this.dataSource.columnDefs.push(_.uuid("id"),_.string("referenceGroup.nameEn").setValueClassFontBold().setStacked(_.string("referenceGroup.description").setStyleSmall()),_.enum("comparisonOperator").setValueGetter(n=>ce(n.comparisonOperator)),_.number("_value").setValueGetter(n=>n.value!==null?n.value:`${n.start} - ${n.end}`).setHeaderSortable(!1),_.date("createdAt").setVisible(!1),_.date("updatedAt").setVisible(!1),ge.menu([I.edit(n=>this.openSaveComponent(n)),I.delete(n=>{this.openReferenceValueRuleDeleteComponent(n);})]));}ngOnInit(){this.get();}openSaveComponent(r){this.dialog.open(he,{data:{referenceValueId:this.referenceValueId(),referenceValueRule:r}}).afterClosed().subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}openReferenceValueRuleDeleteComponent(r){this.dialog.open(Oe,{data:Ne.delete(this.mlabService.referenceValues.rules.delete(r.referenceValueId,r.id),r)}).afterClosed().subscribe(e=>{this.dataSource.delete(e);});}get(){this.mlabService.referenceValues.rules.get(this.referenceValueId(),this.dataSource.getQuery()).pipe(ue(this.dataSource.indicator)).subscribe(r=>{this.dataSource.set(r.items,r.count);});}};t.ɵfac=function(e){return new(e||t)(l(N),l(O),l(S),l(G));},t.ɵcmp=p({type:t,selectors:[["sz-medisy-laboratory-reference-value-rules"]],inputs:{referenceValueId:[y.SignalBased,"referenceValueId"]},features:[f([])],decls:5,vars:3,consts:()=>{let r;return r="Add",[r,[3,"changed","dataSource"],["mat-flat-button","","color","primary","start","",3,"click"],[3,"update","stateEnabled","dataSource"]];},template:function(e,o){e&1&&(u(0,"sz-ui-table-search-filter",1),R("changed",function(){return o.get();}),u(1,"button",2),R("click",function(){return o.openSaveComponent();}),u(2,"span"),B(3,0),d()()(),u(4,"sz-ui-table",3),R("update",function(){return o.get();}),d()),e&2&&(s("dataSource",o.dataSource),m(4),s("stateEnabled",!0)("dataSource",o.dataSource));},dependencies:[ne,Le,Te],encapsulation:2});let i=t;return i;})();var De=(()=>{let t=class t{constructor(r,e){this.dialog=r,this.route=e,this.alert$=new D(),this.referenceValue=this.route.snapshot.data.referenceValue;}};t.ɵfac=function(e){return new(e||t)(l(N),l(O));},t.ɵcmp=p({type:t,selectors:[["sz-medisy-laboratory-reference-value"]],features:[f([])],decls:2,vars:4,consts:[[3,"title","subtitle","backEnabled"],[3,"referenceValueId"]],template:function(e,o){e&1&&c(0,"sz-ui-app-bar",0)(1,"sz-medisy-laboratory-reference-value-rules",1),e&2&&(s("title",o.referenceValue.testType.nameEn)("subtitle",o.referenceValue.description)("backEnabled",!0),m(),s("referenceValueId",o.referenceValue.id));},dependencies:[T,ve],encapsulation:2});let i=t;return i;})();var be=[{path:"",component:De}];var Xt=(()=>{let t=class t{};t.ɵfac=function(e){return new(e||t)();},t.ɵmod=F({type:t}),t.ɵinj=b({providers:[S],imports:[W,J.forChild(be),g,A,Se,ee,le,de,Ve,Ee,L,T]});let i=t;return i;})();export{Xt as ReferenceValueModule};/**i18n:64c1f5f06e8abd83b3efaf45f531fe6f5f4be479271361a7171a066aafa7d48d*/