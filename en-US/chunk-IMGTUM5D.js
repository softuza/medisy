import{a as se}from"./chunk-MM5C472Y.js";import"./chunk-BVDDTOMA.js";import{a as oe}from"./chunk-JVGR3LGR.js";import{b as y,c as K,e as Q,i as W,j as Z,k as ee,u as te,v as ie}from"./chunk-7O2DLPTA.js";import{a as C}from"./chunk-WBYPLE6B.js";import{a as f}from"./chunk-D3DFCTIC.js";import{c as w,h as U,i as X,j as q,l as H,m as x,n as J}from"./chunk-SK6APAT5.js";import{b as V}from"./chunk-AQRFGV44.js";import"./chunk-ARD3O325.js";import{a as $,b as G,d as j,e as k,g as B}from"./chunk-3NLMA3OD.js";import"./chunk-7ERNPK3U.js";import{d as v,f as A,g as I,k as D,m as O,p as P,q as N,t as z,u as R,y as L}from"./chunk-HA3OCK63.js";import{i as h}from"./chunk-UVKSHNQV.js";import"./chunk-QFHU2GEW.js";import"./chunk-SRHI3DNT.js";import{Ea as F,Ga as Y}from"./chunk-T2UVNK6V.js";import{Eb as l,Fb as m,Gb as p,M as c,Qb as u,Sb as T,fb as d,gb as r,gc as M,jc as _,kc as b,lc as g,na as S,nb as E,ub as n}from"./chunk-T2ST7G6M.js";var pe=()=>[],me=a=>[a],ae=(()=>{let o=class o extends U{constructor(e,t,i,s){super(i),this.mlabService=e,this.fb=t,this.dialog=i,this.data=s,this.form=t.group({testClassId:[s.testTypeTestClass?.testClassId,[v.required]],enabled:[s.testTypeTestClass?.enabled??!0,[]]});}submit(){this.IsValid()&&(this.data.testTypeTestClass?this.save(this.mlabService.testTypes.testClasses.update(this.data.testTypeId,this.data.testTypeTestClass?.id,this.form.value)):this.save(this.mlabService.testTypes.testClasses.create(this.data.testTypeId,this.form.value)));}};o.ɵfac=function(t){return new(t||o)(r(f),r(N),r($),r(G));},o.ɵcmp=S({type:o,selectors:[["medisy-test-type-test-classes-save"]],standalone:!0,features:[M([]),E,_],decls:7,vars:7,consts:()=>{let e;return e="Enabled",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","testClassId",3,"excludeTestTypeIds"],["formControlName","enabled"],e,[3,"actions"]];},template:function(t,i){t&1&&(p(0,"sz-ui-dialog-header",0),l(1,"mat-dialog-content")(2,"form",1),p(3,"medisy-form-field-test-class",2),l(4,"mat-checkbox",3),u(5,4),m()()(),p(6,"sz-ui-dialog-actions",5)),t&2&&(n("header",i.header),d(2),n("formGroup",i.form),d(),n("excludeTestTypeIds",i.data.testTypeTestClass?b(4,pe):g(5,me,i.data.testTypeId)),d(3),n("actions",i.actions));},dependencies:[z,D,A,I,O,P,B,k,ee,Z,x,X,q,se],encapsulation:2});let a=o;return a;})();var Ue=(()=>{let o=class o{constructor(e,t,i){this.dialog=e,this.mlabService=t,this.route=i,this.title=C.testClasses,this.dataSource=new Q(),this.testType=this.route.snapshot.data.testType,this.dataSource.addRows(K.default([y.text("testClass.name",C.testClass),oe.createdAt(),y.checkbox("enabled",C.enabled,(s,re)=>{s.enabled=re,this.updateItem(s);}),y.menu([h.edit(s=>this.openSaveComponent(s)),h.delete(s=>this.openTestTypeTestClassDeleteComponent(s))])])),this.get();}openSaveComponent(e){this.dialog.open(ae,{data:{testTypeId:this.testType.id,testTypeTestClass:e}}).afterClosed().pipe(c(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openTestTypeTestClassDeleteComponent(e){this.dialog.open(H,{data:J.delete(this.mlabService.testTypes.testClasses.delete(e.testTypeId,e.id),e)}).afterClosed().pipe(c(1)).subscribe(t=>{this.dataSource.delete(t);});}updateItem(e){this.mlabService.testTypes.testClasses.update(e.testTypeId,e.id,e).subscribe(t=>{this.dataSource.update(t);});}get(){this.mlabService.testTypes.testClasses.get(this.testType.id,this.dataSource.buildRequest()).pipe(w(this.dataSource.indicator),c(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(t){return new(t||o)(r(j),r(f),r(R));},o.ɵcmp=S({type:o,selectors:[["medisy-laboratory-test-type-test-classes"]],standalone:!0,features:[_],decls:6,vars:5,consts:()=>{let e;return e="Add",[[3,"title","subtitle"],[3,"dataSource","changed"],["title","","mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(t,i){t&1&&(p(0,"sz-ui-header-info",0),l(1,"sz-ui-table-search-filter",1),T("changed",function(){return i.get();}),l(2,"button",2),T("click",function(){return i.openSaveComponent();}),l(3,"span"),u(4,3),m()()(),l(5,"sz-ui-table",4),T("update",function(){return i.get();}),m()),t&2&&(n("title",i.title)("subtitle",i.testType.name),d(),n("dataSource",i.dataSource),d(4),n("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[L,Y,F,ie,te,W,V],encapsulation:2});let a=o;return a;})();export{Ue as TestTypeTestClassesComponent};/**i18n:5ad987f33fb36a4bb6d53ec4372590584614aa13df9413297fdfa1032f98b4a2*/