"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[677],{677:(E,l,e)=>{e.r(l),e.d(l,{AnalysisModule:()=>B});var t=e(6814),r=e(2296),s=e(7700),m=e(6385),p=e(617),o=e(7988),y=e(8109),C=e(758),P=e(8308),c=e(5041),i=e(157),n=e(5879),a=e(9060),d=e(6883),A=e(2393),T=e(3562),z=e(9598),O=e(8180),$=e(2516),M=e(6128),D=e(5807);function S(u,L){1&u&&n._UZ(0,"sz-ui-card",6),2&u&&n.Q6J("card",L.$implicit)}const g=[{path:"",component:(()=>{class u{constructor(h,f,v,R,W,I){this.dialog=h,this.route=f,this.router=v,this.mlabService=R,this.mpplService=W,this.personNamePipe=I,this.alert$=(0,n.tdS)(void 0),this.testsDataSource=new T.b2(z.J.pagedSorted("-createdAt")),this.tiles=[],this.analysisMenu=i.Bw.more([i.NT.edit(()=>this.openEditComponent),i.NT.print(()=>this.openEditComponent)]),this.analysis=this.route.snapshot.data.analysis,this.getPerson(),this.buildTiles()}buildTiles(){const h={icon:"science",subtitle:"Tests",type:P.kD.Counter,clickFn:()=>this.router.navigate(["tests"],{relativeTo:this.route})},f={icon:"label",subtitle:"Specimens",type:P.kD.Counter,clickFn:()=>this.router.navigate(["specimens"],{relativeTo:this.route})};this.mlabService.analyses.tests.count(this.analysis.id,z.J.count()).subscribe(v=>{h.title=v}),this.mlabService.analyses.specimens.count(this.analysis.id,z.J.count()).subscribe(v=>{f.title=v}),this.tiles.push(h),this.tiles.push(f)}getPerson(){this.analysis.personId&&this.mpplService.persons.getById(this.analysis.personId).pipe((0,O.q)(1)).subscribe(h=>{this.tiles.splice(0,0,{icon:"person",type:P.kD.Text,subtitle:"Patient",title:this.personNamePipe.transform(h),clickFn:()=>this.router.navigate([`mppl/persons/${h.id}`])})})}openEditComponent(){}static#e=this.\u0275fac=function(f){return new(f||u)(n.Y36(s.uw),n.Y36(y.gz),n.Y36(y.F0),n.Y36(d.t),n.Y36(A.i),n.Y36(a.Y))};static#t=this.\u0275cmp=n.Xpm({type:u,selectors:[["medisy-laboratory-analysis"]],features:[n._Bn([d.t,A.i,a.Y])],decls:9,vars:4,consts:[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["end","",3,"menu"],[1,"sz-grid-card"],[3,"card",4,"ngFor","ngForOf"],[3,"card"]],template:function(f,v){1&f&&(n.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),n._uU(3),n.qZA(),n.TgZ(4,"span",2),n._uU(5),n.qZA()(),n._UZ(6,"sz-ui-menu",3),n.qZA(),n.TgZ(7,"div",4),n.YNc(8,S,1,1,"sz-ui-card",5),n.qZA()),2&f&&(n.xp6(3),n.Oqu(v.analysis.code),n.xp6(2),n.Oqu(v.analysis.note),n.xp6(1),n.Q6J("menu",v.analysisMenu),n.xp6(2),n.Q6J("ngForOf",v.tiles))},dependencies:[t.sg,$.z,M.X,D.i],encapsulation:2})}return u})()},{path:"tests",loadComponent:()=>Promise.resolve().then(e.bind(e,1947)).then(u=>u.AnalysisTestsComponent)},{path:"specimens",loadComponent:()=>e.e(380).then(e.bind(e,2380)).then(u=>u.AnalysisSpecimensComponent)}];var U=e(1947);let B=(()=>{class u{static#e=this.\u0275fac=function(f){return new(f||u)};static#t=this.\u0275mod=n.oAB({type:u});static#s=this.\u0275inj=n.cJS({providers:[d.t],imports:[t.ez,y.Bz.forChild(g),s.Is,C.E3,o.Tx,p.Ps,r.ot,m.t,c.n,P.VH,i.iz,U.AnalysisTestsComponent]})}return u})()},1947:(E,l,e)=>{e.r(l),e.d(l,{AnalysisTestsComponent:()=>a});var t=e(8109),r=e(8262),s=e(365),m=e(6883),p=e(5041),o=e(3562),y=e(9598),C=e(8721),P=e(8180),c=e(5879),i=e(8359),n=e(2516);let a=(()=>{class d{constructor(T,z,O){this.route=T,this.mlabService=z,this.typeI18nPipe=O,this.dataSource=new o.b2(y.J.pagedSorted("test.testClass")),this.analysis=this.route.snapshot.data.analysis,this.dataSource.addRows(o.zP.default([o.UC.text("test.testclass","Test Class",$=>$.test.testClass.name),o.UC.text("test.state","State",$=>O.transform($.test.state)),r.h.menu([])])),this.get()}get(){this.mlabService.analyses.tests.get(this.analysis.id,this.dataSource.filterModel).pipe((0,C.sU)(this.dataSource.indicator)).pipe((0,P.q)(1)).subscribe(T=>{this.dataSource.set(T.items,T.count)})}static#e=this.\u0275fac=function(z){return new(z||d)(c.Y36(t.gz),c.Y36(m.t),c.Y36(s.y))};static#t=this.\u0275cmp=c.Xpm({type:d,selectors:[["medisy-laboratory-analysis-tests"]],standalone:!0,features:[c._Bn([m.t,s.y]),c.jDz],decls:7,vars:4,consts:function(){let T;return T="Tests",[["start",""],[1,"sz-h5"],T,["routerLink","../",1,"tw-underline","tw-text-sm"],[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(z,O){1&z&&(c.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),c.SDv(3,2),c.qZA(),c.TgZ(4,"a",3),c._uU(5),c.qZA()()(),c.TgZ(6,"sz-ui-table",4),c.NdJ("update",function(){return O.get()}),c.qZA()),2&z&&(c.xp6(5),c.Oqu(O.analysis.code),c.xp6(1),c.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",O.dataSource))},dependencies:[t.Bz,t.rH,o.Vn,i.K,p.n,n.z],encapsulation:2})}return d})()},8262:(E,l,e)=>{e.d(l,{h:()=>m});var t=e(3562),r=e(7311);const s={documentType:"Document Type",comparisonType:"Comparison Operator",emailType:"Email Type",phoneType:"Phone Type"};class m{static menu(o){return t.UC.action("menu",o)}static code(){return t.UC.text("code","Code")}static createdAt(){return t.UC.date("createdAt",r.O.createdDate)}static updatedAt(){return t.UC.date("updatedAt",r.O.updatedDate)}static id(){return t.UC.text("id",r.O.id)}static nameHyperlink(o,y,C){return t.UC.hyperlink("name",r.O.name,o,y,C)}static nameText(o){return t.UC.text("name",r.O.name,o)}static phoneType(o){return t.UC.text("phoneType",s.phoneType,o)}static emailType(o){return t.UC.text("emailType",s.emailType,o)}static documentType(o){return t.UC.text("documentType",s.documentType,o)}static comparisonOperator(o){return t.UC.text("comparisonOperator",s.comparisonType,o)}}},7311:(E,l,e)=>{e.d(l,{O:()=>t});const t={id:"Id",name:"Name",description:"Description",updatedDate:"Updated Date",createdDate:"Created Date",tests:"Tests"}},365:(E,l,e)=>{e.d(l,{y:()=>c});var t=e(3712),r=e(1101),s=e(7263),m=function(i){return i.Validated="Validated",i.Returned="Returned",i.Forwarded="Forwarded",i.Destroyed="Destroyed",i.Collected="Collected",i.Accepted="Accepted",i.Created="Created",i}(m||{}),p=function(i){return i.Created="Created",i.Pending="Pending",i.Started="Started",i.Finished="Finished",i}(p||{}),o=e(1646),y=e(9155),C=e(6494),P=e(5879);let c=(()=>{class i{transform(a,d=!1){return a in s.v?this.transformComparisonOperator(a,d):a in p?this.transformTestState(a):a in m?this.transformSpecimenState(a):a in t.V?this.transformEmailType(a):a in r.z?this.transformPhoneType(a):a in y.m?this.transformSex(a):a in o.n?this.transformDocumentType(a):a in C.x?this.transformChannelType(a):""}transformComparisonOperator(a,d){switch(a){case s.v.Equal:return d?"==":"Equal";case s.v.GreaterThan:return d?">":"GreaterThan";case s.v.GreaterThanOrEqual:return d?">=":"GreaterThanOrEqual";case s.v.LessThan:return d?"<":"LessThan";case s.v.LessThanOrEqual:return d?"<=":"LessThanOrEqual";case s.v.RangeWithBoundaries:return d?"<==>":"RangeWithBoundaries";case s.v.RangeWithoutBoundaries:return d?"<>":"RangeWithoutBoundaries";case s.v.Not:return d?"!=":"Not";default:return""}}transformTestState(a){switch(a){case p.Created:return "Created";case p.Started:return "Started";case p.Finished:return "Finished";case p.Pending:return "Pending";default:return""}}transformSpecimenState(a){switch(a){case m.Accepted:return "Accepted";case m.Collected:return "Collected";case m.Destroyed:return "Destroyed";case m.Forwarded:return "Forwarded";case m.Validated:return "Validated";case m.Created:return "Created";default:return""}}transformEmailType(a){switch(a){case t.V.Private:return "Private";case t.V.Public:return "Public";case t.V.Work:return "Work";default:return""}}transformPhoneType(a){switch(a){case r.z.Home:return "Home";case r.z.Mobile:return "Mobile";case r.z.Work:return "Work";default:return""}}transformSex(a){switch(a){case y.m.Female:return "Female";case y.m.Male:return "Male";default:return""}}transformDocumentType(a){switch(a){case o.n.BankCard:return "Bank Card";case o.n.DriverLicense:return "Driver License";case o.n.NationalCard:return "National Card";case o.n.Passport:return "Passport";case o.n.TravelDocument:return "Travel Document";case o.n.Other:return "Other";default:return""}}transformChannelType(a){switch(a){case C.x.Email:return "Email";case C.x.Sms:return "SMS";case C.x.Push:return "Push";default:return""}}static#e=this.\u0275fac=function(d){return new(d||i)};static#t=this.\u0275pipe=P.Yjl({name:"typeI18n",type:i,pure:!0,standalone:!0})}return i})()},3712:(E,l,e)=>{e.d(l,{V:()=>t});var t=function(s){return s.Private="Private",s.Public="Public",s.Work="Work",s}(t||{});Object.keys(t).map(s=>t[s])},1101:(E,l,e)=>{e.d(l,{z:()=>t});var t=function(s){return s.Home="Home",s.Mobile="Mobile",s.Work="Work",s}(t||{});Object.keys(t).map(s=>t[s])},7263:(E,l,e)=>{e.d(l,{v:()=>t});var t=function(r){return r.Equal="Equal",r.GreaterThan="GreaterThan",r.GreaterThanOrEqual="GreaterThanOrEqual",r.LessThan="LessThan",r.LessThanOrEqual="LessThanOrEqual",r.Not="Not",r.RangeWithBoundaries="RangeWithBoundaries",r.RangeWithoutBoundaries="RangeWithoutBoundaries",r}(t||{})},1646:(E,l,e)=>{e.d(l,{n:()=>t});var t=function(s){return s.NationalCard="NationalCard",s.BankCard="BankCard",s.DriverLicense="DriverLicense",s.Passport="Passport",s.TravelDocument="TravelDocument",s.Other="Other",s}(t||{});Object.keys(t).map(s=>t[s])},9155:(E,l,e)=>{e.d(l,{m:()=>t});var t=function(s){return s.Male="Male",s.Female="Female",s}(t||{});Object.keys(t).map(s=>t[s])},6494:(E,l,e)=>{e.d(l,{x:()=>t});var t=function(r){return r.Email="Email",r.Sms="Sms",r.Push="Push",r}(t||{})}}]);