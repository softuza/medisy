import{a as V}from"./chunk-LMS5JMAC.js";import{a as Ce}from"./chunk-JO3R735X.js";import{a as Me}from"./chunk-RCF34KUN.js";import{a as _e}from"./chunk-WMR7Q26G.js";import{a as B}from"./chunk-Z2RPXGB3.js";import{b as G,c as pe,d as de,f as ue,h as ce,r as fe,s as Se}from"./chunk-7RJ5EIRJ.js";import{c as T,g as ae,h as se,i as L,j as P,l as me,m as h,n as le}from"./chunk-AS5U2OT3.js";import{a as A,b as O,d as ne,e as R,g}from"./chunk-GP3W3GGO.js";import{C as oe,D as ie,E as re,i as Z,p as ee,z as te}from"./chunk-HSZRRRQX.js";import{d as Y,f as H,g as E,h as y,l as b,m as q,n as F,o as D,p as I,r as J,s as c}from"./chunk-DOVRWRQU.js";import"./chunk-VLCPYEZN.js";import{a as p}from"./chunk-JFXMSXD3.js";import{b as N}from"./chunk-MDQJK7YC.js";import{a as z}from"./chunk-6ILUQYS3.js";import{e as K}from"./chunk-2WUPC45G.js";import{i as j}from"./chunk-DESFHGZ3.js";import"./chunk-PLPMFK4N.js";import"./chunk-GNPEYPQP.js";import{Pa as Q,Ra as W,Ua as x}from"./chunk-26JDY2BM.js";import{Bb as d,Cb as S,Db as m,L as f,Nb as X,Pb as v,Zb as C,ac as M,cb as s,da as w,db as a,kb as _,la as u,ma as k,nb as n}from"./chunk-J5YYK5S2.js";var U=(()=>{let o=class o extends ee{constructor(i,t){super(i),this.ngControl=i,this.mlabService=t,this.options=[],this.label="Unit",this.optionContent=e=>e.name,this.optionValue=e=>e.id,this.mlabService.units.getItems(z.unpagedSorted("name")).pipe(f(1),T(this.indicator)).subscribe(e=>{this.options=e;});}ngOnInit(){this.control=this.ngControl.control;}};o.ɵfac=function(t){return new(t||o)(a(H,10),a(p));},o.ɵcmp=u({type:o,selectors:[["medisy-form-field-unit"]],standalone:!0,features:[C([p]),_,M],decls:1,vars:9,consts:[[3,"formControl","indicator","options","label","placeholder","emptyOption","multiple","szOptionContentFn","szOptionValueFn"]],template:function(t,e){t&1&&m(0,"sz-ui-form-field-select",0),t&2&&n("formControl",e.control)("indicator",e.indicator)("options",e.options)("label",e.label)("placeholder",e.placeholder)("emptyOption",e.emptyOption)("multiple",e.multiple)("szOptionContentFn",e.optionContent)("szOptionValueFn",e.optionValue);},dependencies:[c,E,q,oe],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]});let r=o;return r;})();var ve=(()=>{let o=class o extends ae{constructor(i,t,e){super(t),this.fb=i,this.dialog=t,this.data=e,this.comparisonOperators=Object.values(Me),this.form=i.group({testClassId:[e.testClassId],unitId:[e.unitId],includeLaboratoryIds:[e.includeLaboratoryIds]});}submit(){this.IsValid()&&this.dialog?.close(this.form.value);}};o.ɵfac=function(t){return new(t||o)(a(I),a(A),a(O));},o.ɵcmp=u({type:o,selectors:[["medisy-reference-values-filter"]],standalone:!0,features:[C([]),_,M],decls:7,vars:6,consts:[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","unitId",3,"emptyOption"],["formControlName","testClassId",3,"emptyOption"],["formControlName","includeLaboratoryIds",3,"multiple"],[3,"actions"]],template:function(t,e){t&1&&(m(0,"sz-ui-dialog-header",0),d(1,"mat-dialog-content")(2,"form",1),m(3,"medisy-form-field-unit",2)(4,"medisy-form-field-test-class",3)(5,"medisy-form-field-laboratory",4),S()(),m(6,"sz-ui-dialog-actions",5)),t&2&&(n("header",e.header),s(2),n("formGroup",e.form),s(1),n("emptyOption",!0),s(1),n("emptyOption",!0),s(1),n("multiple",!0),s(1),n("actions",e.actions));},dependencies:[c,b,E,y,F,D,g,R,h,L,P,V,U,Ce],encapsulation:2});let r=o;return r;})();var ye=(()=>{let o=class o extends se{constructor(i,t,e,l){super(e),this.mlabService=i,this.fb=t,this.dialog=e,this.data=l,this.form=t.group({description:[l?.description,[Y.maxLength(4096)]],testClassId:[l?.testClassId,[Y.required]],unitId:[l?.unitId,[]],multiplier:[l?.multiplier,[]]});}submit(){this.IsValid()&&(this.data?this.save(this.mlabService.referenceValues.update(this.data.id,this.form.value)):this.save(this.mlabService.referenceValues.create(this.form.value)));}};o.ɵfac=function(t){return new(t||o)(a(p),a(I),a(A),a(O));},o.ɵcmp=u({type:o,selectors:[["medisy-laboratory-reference-values-save"]],standalone:!0,features:[C([]),_,M],decls:8,vars:3,consts:()=>{let i;i="Description";let t;return t="Multiplier",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","description","label",i],["formControlName","unitId"],["formControlName","multiplier","label",t],["formControlName","testClassId"],[3,"actions"]];},template:function(t,e){t&1&&(m(0,"sz-ui-dialog-header",0),d(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-textarea",2)(4,"medisy-form-field-unit",3)(5,"sz-ui-form-field-input",4)(6,"medisy-form-field-test-class",5),S()(),m(7,"sz-ui-dialog-actions",6)),t&2&&(n("header",e.header),s(2),n("formGroup",e.form),s(5),n("actions",e.actions));},dependencies:[c,b,E,y,F,D,g,R,Z,ce,h,L,P,re,te,ie,U,V],encapsulation:2});let r=o;return r;})();var be=(()=>{let o=class o{constructor(i,t){this.dialog=i,this.mlabService=t,this.title=_e.referenceValues,this.dataSource=new pe(z.paged()),this.dataSource.addRows(de.default([G.hyperlink("testClass","Test class",e=>e.id,e=>e.testClass.name),G.text("unit","Unit",e=>e.multiplier?`10^${e.multiplier.toExponential(0).split("e").map(l=>Number(l))[1]}/${e.unit?.abbreviation}`:e.unit?.abbreviation),B.createdAt(),B.menu([j.edit(e=>this.openSaveComponent(e)),j.delete(e=>this.openReferenceValueDeleteComponent(e))])])),this.get();}openSaveComponent(i){this.dialog.open(ye,{data:i}).afterClosed().pipe(f(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openFilterComponent(){this.dialog.open(ve,{data:this.dataSource.filterModel}).afterClosed().pipe(f(1)).subscribe(i=>{this.dataSource.updateFilterModel(i),this.get();});}openReferenceValueDeleteComponent(i){this.dialog.open(me,{data:le.delete(this.mlabService.referenceValues.delete(i.id),i)}).afterClosed().pipe(f(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.mlabService.referenceValues.get(this.dataSource.filterModel).pipe(T(this.dataSource.indicator),f(1)).subscribe(i=>{this.dataSource.set(i.items,i.count);});}};o.ɵfac=function(t){return new(t||o)(a(ne),a(p));},o.ɵcmp=u({type:o,selectors:[["medisy-laboratory-reference-values"]],decls:6,vars:5,consts:()=>{let i;return i="Add",[[3,"title"],[3,"dataSource","search","filter"],["mat-flat-button","","color","primary","start","",3,"click"],i,[3,"paginationEnabled","stateEnabled","dataSource","update"]];},template:function(t,e){t&1&&(m(0,"sz-ui-header-info",0),d(1,"sz-ui-table-filter",1),v("search",function(){return e.get();})("filter",function(){return e.openFilterComponent();}),d(2,"button",2),v("click",function(){return e.openSaveComponent();}),d(3,"span"),X(4,3),S()()(),d(5,"sz-ui-table",4),v("update",function(){return e.get();}),S()),t&2&&(n("title",e.title),s(1),n("dataSource",e.dataSource),s(4),n("paginationEnabled",!0)("stateEnabled",!0)("dataSource",e.dataSource));},dependencies:[Q,N,fe,ue],encapsulation:2});let r=o;return r;})();var Fe=[{path:"",component:be}];var jt=(()=>{let o=class o{};o.ɵfac=function(t){return new(t||o)();},o.ɵmod=k({type:o}),o.ɵinj=w({providers:[p],imports:[J,c,K.forChild(Fe),g,x,W,N,Se,h]});let r=o;return r;})();export{jt as ReferenceValuesModule};/**i18n:5ebc65b24f90b78d556a3a8c188ab6405e20b5534cf6eb00a5dd3e44f73f97d4*/