import{a as Ie}from"./chunk-RGKLRKEN.js";import{a as l}from"./chunk-T5UFXBYK.js";import{a as g}from"./chunk-54BW62IN.js";import{a as u,b as Ne,d as Te,e as he,j as ve,k}from"./chunk-3KIO23V7.js";import"./chunk-UDBXG2VS.js";import"./chunk-3EZ7YOIF.js";import"./chunk-6EOVNP6P.js";import"./chunk-EZYZSWQV.js";import"./chunk-PIF3LXPQ.js";import{e as Y,f as w,g as H,i as Me,j as N,k as ge}from"./chunk-MLAHAJFY.js";import{a as X}from"./chunk-3JYLOQ62.js";import{e as W,g as Z,h as E,j}from"./chunk-6WYKIJA5.js";import{a as b,b as F,d as U,e as V,g as M}from"./chunk-AWTFDRVU.js";import"./chunk-EUY4YGUM.js";import{A as Oe,b as B,e as Se,t as ce,u as _e,v as fe,x as Ce,z as Ee}from"./chunk-D4OV432Z.js";import"./chunk-Q6QXXTHO.js";import"./chunk-ZI7LGOZY.js";import{c as C}from"./chunk-AR6ZPEMB.js";import"./chunk-LB6OFIMK.js";import{d as f,f as v,g as I,l as R,n as y,q as A,r as z,u as D}from"./chunk-H6LOKDLY.js";import{r as pe,t as de}from"./chunk-WOEHPYTV.js";import{a as P,c as G,e as L}from"./chunk-7JY5LSGA.js";import"./chunk-G7VNWCRP.js";import{ia as ue,la as $}from"./chunk-TSWXIYWJ.js";import"./chunk-DTCSWDXN.js";import{Fa as oe,Fc as le,Gb as re,Hb as ae,Ib as ne,Jb as p,Kb as d,Lb as m,Wb as se,bb as s,cb as c,ea as ee,hc as me,ja as n,na as S,nc as _,oa as te,ob as ie,oc as O,qb as h,zb as a}from"./chunk-7IDM2VXI.js";import"./chunk-K67PUIM2.js";var Q=(()=>{let i=class i extends Y{constructor(e,t,o){super(t),this.fb=e,this.dialog=t,this.data=o,this.cstnService=n(l),this.form=e.group({name:[o?.teamGroup?.name,[f.required,f.minLength(1)]],description:[o?.teamGroup?.description,[]]});}submit(){this.IsValid()&&(this.data.teamGroup?this.save(this.cstnService.teams.groups.update(this.data.teamId,this.data.teamGroup.id,this.form.value)):this.save(this.cstnService.teams.groups.create(this.data.teamId,this.form.value)));}};i.ɵfac=function(t){return new(t||i)(c(z),c(b),c(F));},i.ɵcmp=S({type:i,selectors:[["sz-constr-groups-save"]],standalone:!0,features:[_([l]),h,O],decls:6,vars:5,consts:()=>{let e;e="Name";let t;return t="Description",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",t],[3,"actions"]];},template:function(t,o){t&1&&(m(0,"sz-ui-dialog-header",0),p(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3),d()(),m(5,"sz-ui-dialog-actions",4)),t&2&&(a("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),s(2),a("formGroup",o.form),s(3),a("actions",o.actions));},dependencies:[D,R,v,I,y,A,M,V,N,w,H,Se,Ee],encapsulation:2});let r=i;return r;})();var Re=(()=>{let i=class i extends Y{constructor(e,t,o){super(t),this.fb=e,this.dialog=t,this.data=o,this.cstnService=n(l),this.employees=this.cstnService.employees.getAll({orderBy:["name"],filterBehavior:pe.Or,filters:de.create().equalIf("id",this.data?.teamEmployee?.employeeId).notAnyIf("teams.teamId",this.data?.teamId).filters()}),this.designations=this.cstnService.designations.getAll({orderBy:["name"]}),this.groups=this.cstnService.teams.groups.getAll(this.data.teamId,{orderBy:["name"]}),this.form=e.group({employeeId:[o?.teamEmployee?.employeeId,[f.required]],designationId:[o?.teamEmployee?.designationId,[f.required]],groupId:[o?.teamEmployee?.groupId,[]],isGroupLeader:[o?.teamEmployee?.isGroupLeader??!1,[f.required]],startDate:[o?.teamEmployee?.startDate??new Date(),[]],endDate:[o?.teamEmployee?.endDate,[]]});}submit(){this.IsValid()&&(this.data?.teamEmployee?this.save(this.cstnService.teams.employees.update(this.data.teamId,this.data.teamEmployee.id,this.form.value)):this.save(this.cstnService.teams.employees.create(this.data.teamId,this.form.value)));}};i.ɵfac=function(t){return new(t||i)(c(z),c(b),c(F));},i.ɵcmp=S({type:i,selectors:[["sz-constr-construction-zones-units-save"]],standalone:!0,features:[_([]),h,O],decls:12,vars:9,consts:()=>{let e;e="Employee";let t;t="Designation";let o;o="Group";let K;K="Start Date";let x;return x="End Date",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","employeeId","label",e,3,"source"],["formControlName","designationId","label",t,3,"source"],["formControlName","groupId","label",o,3,"source","emptyOption"],["formControlName","isGroupLeader"],[1,"sz-form-row"],["formControlName","startDate","label",K],["formControlName","endDate","label",x],[3,"actions"]];},template:function(t,o){t&1&&(m(0,"sz-ui-dialog-header",0),p(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3)(5,"sz-ui-form-field-select",4),p(6,"mat-checkbox",5),me(7,"Group Leader"),d(),p(8,"div",6),m(9,"sz-ui-form-field-date",7)(10,"sz-ui-form-field-date",8),d()()(),m(11,"sz-ui-dialog-actions",9)),t&2&&(a("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),s(2),a("formGroup",o.form),s(),a("source",o.employees),s(),a("source",o.designations),s(),a("source",o.groups)("emptyOption",!0),s(6),a("actions",o.actions));},dependencies:[D,R,v,I,y,A,M,V,fe,_e,N,w,H,Oe,ce,Ce],encapsulation:2});let r=i;return r;})();var J=(()=>{let i=class i{constructor(){this.route=n(P),this.router=n(G),this.dialog=n(U),this.locale=n(le),this.cstnService=n(l),this.team=oe.required(),this.dataSource=new Te([]),this.card={title:C.employees,menu:j.more([E.add(()=>this.openSaveComponent()),W.divider(),E.addGroup(()=>this.openGroupSaveComponent())])},this.dataSource.columnDefs.push(u.uuid("id"),u.icon("group").setHeaderSortable(!1).setStyleSmall().setValueTooltip(e=>e.group&&e.isGroupLeader?C.group_leader:"").setValueGetter(e=>e.group&&e.isGroupLeader?"engineering":""),u.string("employee.name").setStacked(u.string("designation.name").setValueClassFontSmall()),u.string("employee.primaryPhone"),u.date("startDate").setVisible(!1),u.date("endDate").setVisible(!1),u.date("createdAt").setVisible(!1),u.date("updatedAt").setVisible(!1),Ne.menu([E.edit(e=>this.openSaveComponent(e)),W.divider(),E.delete(e=>this.openDeleteComponent(e))])),this.dataSource.groupDefs={key:"groupId",name:C.test_group,nameGetterFn:e=>e.group?.name??""};}ngOnInit(){this.get();}openGroupSaveComponent(e){this.dialog.open(Q,{data:{teamId:this.team().id,group:e}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openSaveComponent(e){this.dialog.open(Re,{data:{teamId:this.team().id,teamEmployee:e}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openDeleteComponent(e){this.dialog.open(Me,{data:ge.delete(this.cstnService.teams.employees.delete(this.team().id,e.id),e)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}get(){this.cstnService.teams.employees.get(this.team().id,this.dataSource.getQuery()).pipe(he(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-constr-construction-team-employees-groups"]],inputs:{team:[1,"team"]},standalone:!0,features:[_([l]),O],decls:2,vars:3,consts:[[3,"card"],["content","",3,"update","paginationEnabled","dataSource"]],template:function(t,o){t&1&&(p(0,"sz-ui-card",0)(1,"sz-ui-table",1),se("update",function(){return o.get();}),d()()),t&2&&(a("card",o.card),s(),a("paginationEnabled",!1)("dataSource",o.dataSource));},dependencies:[L,k,ve,$,g],encapsulation:2});let r=i;return r;})();function be(r,i){if(r&1&&m(0,"sz-ui-card",3),r&2){let Ae=i.$implicit;a("card",Ae);}}var ye=(()=>{let i=class i{constructor(){this.cstnService=n(l),this.router=n(G),this.route=n(P),this.dialog=n(U),this.alert=ie(void 0),this.menu=j.more([E.edit(()=>this.openSaveComponent(this.team))]),this.cards=[],this.team=this.route.snapshot.data.team;}addEmployeesCountCard(){let e={title:0,icon:Z.person,subtitle:C.employees,indicator:!0};this.cards.push(e),this.cstnService.teams.employees.count(this.team.id).subscribe(t=>{e.title=t;});}addGroupsCountCard(){let e={title:0,icon:Z.group,subtitle:C.groups,indicator:!0};this.cards.push(e),this.cstnService.teams.groups.count(this.team.id).subscribe(t=>{e.title=t;});}openSaveComponent(e){this.dialog.open(Ie,{data:e}).afterClosed().subscribe(t=>{t&&(this.team=t);});}openGroupSaveComponent(){this.dialog.open(Q,{data:{teamId:this.team.id}}).afterClosed().subscribe(e=>{});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-constr-construction-team"]],features:[_([])],decls:8,vars:5,consts:[[3,"title","subtitle","menu"],[3,"alert"],[1,"sz-grid-card"],[3,"card"],[1,"tw-my-4"],[3,"team"]],template:function(t,o){t&1&&(m(0,"sz-ui-app-bar",0)(1,"sz-ui-alert",1),p(2,"div",2),ae(3,be,1,1,"sz-ui-card",3,re),d(),p(5,"div",4),m(6,"sz-constr-construction-team-employees-groups",5),d(),m(7,"div",4)),t&2&&(a("title",o.team.name)("subtitle",o.team.description)("menu",o.menu),s(),a("alert",o.alert()),s(2),ne(o.cards),s(3),a("team",o.team));},dependencies:[B,X,g,J],encapsulation:2});let r=i;return r;})();var xt=(()=>{let i=class i{};i.ɵfac=function(t){return new(t||i)();},i.ɵmod=te({type:i}),i.ɵinj=ee({providers:[l],imports:[L.forChild([{path:"",component:ye}]),M,ue,$,B,k,N,X,g,J]});let r=i;return r;})();export{xt as TeamModule};/**i18n:3415fba6ca40c85db6a6c1f427335a940d891078c77c172d8c69b98bbabeac73*/