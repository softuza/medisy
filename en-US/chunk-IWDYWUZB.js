import{a as Se,b as Te,c as Ee,d as de,e as Oe}from"./chunk-CZVACMCC.js";import{a as ie,b as ne,c as S,f as _e,g as se,h as le}from"./chunk-Q6JOD4F7.js";import"./chunk-EI54IRV4.js";import"./chunk-XKXHDOYY.js";import"./chunk-CFNJPKH2.js";import{b as Z,f as ee,g as te,h as oe,j as re,k as ae}from"./chunk-TWR5AO2X.js";import{a as A}from"./chunk-IVJ2NFMZ.js";import"./chunk-BJI27WIG.js";import{a as U,b as X,d as k,e as q,g as w}from"./chunk-XPOR4ANW.js";import{c as H,p as Q,q as c,r as J}from"./chunk-22CF7VI5.js";import"./chunk-H6HLHFPT.js";import"./chunk-PYOUUVMA.js";import"./chunk-OLKWA3AP.js";import{d as u,f as Y,g as B,l as D,n as v,q as V,r as $,t as z}from"./chunk-H2FFMEH6.js";import{a as K,b as O,c as W}from"./chunk-3B2UHMBE.js";import"./chunk-VEA2V6DS.js";import"./chunk-NTRRBKKS.js";import"./chunk-AILLJ5BU.js";import"./chunk-QHVUL2KY.js";import{a as j}from"./chunk-TCPYXQGZ.js";import{p as F,s as G,v as C,x as f}from"./chunk-TW5J4YO6.js";import"./chunk-KRMUG4G6.js";import"./chunk-OEH6HIG5.js";import{La as x}from"./chunk-OIZYHDJE.js";import{Jb as n,Kb as a,Lb as T,Vb as d,Wb as N,bb as s,ja as l,mb as h,na as m,nc as M,yb as i}from"./chunk-GTR6A7KK.js";import"./chunk-NLUW4JS2.js";var pe=(()=>{let r=class r extends ee{constructor(){let e=l(U);super(e),this.mlabService=l(A),this.fb=l($),this.data=l(X),this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"],filterBehavior:C.Or,filters:f.create().equalIf("id",this.data.laboratoryTestType?.testTypeId).notAny("laboratories.laboratoryId",[this.data.laboratoryId]).filters()}),this.laboratories=this.mlabService.laboratories.getAll({orderBy:["name"],filters:f.create().notEqual("id",this.data.laboratoryId).filters()}),this.referenceValueSelectConfig={emptyOption:!0,autoSelect:!0,optionContentFn:p=>p.testType.nameEn},this.testTypeSelectConfig={optionSelectedFn:this.testTypeChnaged.bind(this)},this.transferOutLaboratorySelectConfig={emptyOption:!0},this.referenceValues=null;let o=this.fb;this.dialog=e;let t=this.data;this.form=o.group({enabled:[t.laboratoryTestType?.enabled??!0,[u.required]],transferInPrice:[t.laboratoryTestType?.transferInPrice??0,[]],transferInEnabled:[t.laboratoryTestType?.transferInEnabled??!0,[u.required]],transferOutEnabled:[t.laboratoryTestType?.transferOutEnabled??!0,[u.required]],transferOutLaboratoryId:[t.laboratoryTestType?.transferOutLaboratoryId,[]],price:[t.laboratoryTestType?.price??0,[]],isFavorite:[t.laboratoryTestType?.isFavorite??!1,[u.required]],testTypeId:[t.laboratoryTestType?.testTypeId,[u.required]],referenceValueId:[t.laboratoryTestType?.referenceValueId,[]]}),t.laboratoryTestType&&this.testTypeChnaged(t.laboratoryTestType.testTypeId);}testTypeChnaged(e){this.referenceValues=this.mlabService.referenceValues.getAll({orderBy:["testType.nameEn"],filterBehavior:C.And,filters:f.create().equalIf("testType.id",e).filters()});}submit(){this.IsValid()&&(this.data.laboratoryTestType?this.save(this.mlabService.laboratories.testTypes.update(this.data.laboratoryId,this.data.laboratoryTestType?.id,this.form.value)):this.save(this.mlabService.laboratories.testTypes.create(this.data.laboratoryId,this.form.value)));}};r.ɵfac=function(o){return new(o||r)();},r.ɵcmp=m({type:r,selectors:[["sz-medisy-laboratory-laboratory-test-types-save"]],standalone:!0,features:[h,M],decls:29,vars:13,consts:()=>{let e;e="Test Type";let o;o="Reference Value";let t;t="Price";let p;p="Price";let R;R="Laboratory";let y;y="Enabled";let b;b="Favorite";let L;L="Transfer In";let g;g="Enabled";let I;I="Transfer Out";let P;return P="Enabled",[y,b,L,g,I,P,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId","label",e,3,"source","config"],["formControlName","referenceValueId","label",o,3,"source","config"],[1,"sz-form-row"],["formControlName","enabled"],["formControlName","isFavorite"],["formControlName","price","label",t,3,"type"],["multi","",1,"tw-mb-4"],["formControlName","transferInEnabled"],["formControlName","transferInPrice","label",p,3,"type"],["formControlName","transferOutEnabled"],["formControlName","transferOutLaboratoryId","label",R,3,"source","config"],[3,"actions"]];},template:function(o,t){o&1&&(T(0,"sz-ui-dialog-header",6),n(1,"mat-dialog-content")(2,"form",7),T(3,"sz-ui-form-field-select",8)(4,"sz-ui-form-field-select",9),n(5,"div",10)(6,"mat-checkbox",11),d(7,0),a(),n(8,"mat-checkbox",12),d(9,1),a()(),n(10,"div",10),T(11,"sz-ui-form-field-input",13),a(),T(12,"div",10),n(13,"mat-accordion",14)(14,"mat-expansion-panel")(15,"mat-expansion-panel-header")(16,"mat-panel-title"),d(17,2),a()(),n(18,"mat-checkbox",15),d(19,3),a(),T(20,"sz-ui-form-field-input",16),a(),n(21,"mat-expansion-panel")(22,"mat-expansion-panel-header")(23,"mat-panel-title"),d(24,4),a()(),n(25,"mat-checkbox",17),d(26,5),a(),T(27,"sz-ui-form-field-select",18),a()()()(),T(28,"sz-ui-dialog-actions",19)),o&2&&(i("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),s(2),i("formGroup",t.form),s(),i("source",t.testTypes)("config",t.testTypeSelectConfig),s(),i("source",t.referenceValues)("config",t.referenceValueSelectConfig),s(7),i("type","number"),s(9),i("type","number"),s(7),i("source",t.laboratories)("config",t.transferOutLaboratorySelectConfig),s(),i("actions",t.actions));},dependencies:[z,D,Y,B,v,V,ae,te,oe,w,q,c,Q,Oe,de,Se,Te,Ee,H,J],encapsulation:2});let E=r;return E;})();var Ke=(()=>{let r=class r{constructor(){this.dialog=l(k),this.mlabService=l(A),this.route=l(F),this.dataSource=new _e("testType.nameEn"),this.laboratory=this.route.snapshot.data.laboratory,this.appBarConfig={title:j.test_types,subtitle:this.laboratory.name,backEnabled:!0,menu:W.default().setItems([O.add(this.openSaveComponent.bind(this)),O.menu([O.search()])])},this.dataSource.columnDefs.push(S.uuid("id"),S.uuid("testTypeId"),S.icon("isFavorite").setValueGetter(K.star).setValueStyle(e=>e.isFavorite?"font-variation-settings: 'FILL' 1":"font-variation-settings: 'FILL' 0").setClickFn(e=>{e.isFavorite=!e.isFavorite,this.updateItem(e);}).setResponsive(!0),S.string("testType.nameEn"),S.date("createdAt").setResponsive(!0),S.date("updatedAt").setVisible(!1),S.boolean("enabled").setChangeFn((e,o)=>{e.enabled=o,this.mlabService.laboratories.testTypes.update(e.laboratoryId,e.id,e).subscribe(t=>{e=t;});}).setResponsive(!0),S.menu([O.edit(this.openSaveComponent.bind(this)),O.divider(),O.delete(this.openLaboratoryTestTypeDeleteComponent.bind(this))])),this.get();}openSaveComponent(e){this.dialog.open(pe,{data:{laboratoryId:this.laboratory.id,laboratoryTestType:e}}).afterClosed().subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openLaboratoryTestTypeDeleteComponent(e){this.dialog.open(re,{data:Z.delete(this.mlabService.laboratories.testTypes.delete(e.laboratoryId,e.id),e)}).afterClosed().subscribe(o=>{this.dataSource.delete(o);});}updateItem(e){this.mlabService.laboratories.testTypes.update(e.laboratoryId,e.id,e).subscribe(o=>{this.dataSource.update(o);});}get(){this.mlabService.laboratories.testTypes.get(this.laboratory.id,this.dataSource.getQuery()).pipe(se(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};r.ɵfac=function(o){return new(o||r)();},r.ɵcmp=m({type:r,selectors:[["sz-medisy-laboratory-laboratory-test-types"]],standalone:!0,features:[M],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(o,t){o&1&&(n(0,"sz-ui-table-bar",0),N("changed",function(){return t.get();}),a(),n(1,"sz-ui-table",1),N("update",function(){return t.get();}),a()),o&2&&(i("config",t.appBarConfig)("dataSource",t.dataSource),s(),i("dataSource",t.dataSource));},dependencies:[G,le,ne,ie,c,x],encapsulation:2});let E=r;return E;})();export{Ke as LaboratoryTestTypesComponent};/**i18n:71c33448fc84035c6ee56f25f20b16a3c311d1f911de884d4bce9857c4574a16*/