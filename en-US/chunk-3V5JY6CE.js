import{b as X,c as Y}from"./chunk-KW4JWQNG.js";import"./chunk-SI5N2L2K.js";import"./chunk-BXRRBUXH.js";import{b as _}from"./chunk-6AM7ELCK.js";import{a as f}from"./chunk-ORO6ZTIP.js";import"./chunk-NK5BUI3W.js";import"./chunk-THG7JD2K.js";import"./chunk-V3ZQCSM4.js";import{a as V,d as w}from"./chunk-RPXO4U5R.js";import"./chunk-RZK5BQ6B.js";import{a as r,b as W,d as q,f as H,k as Q,l as U}from"./chunk-ORS6BZGF.js";import"./chunk-XUW55ZPC.js";import"./chunk-3PM74VH6.js";import"./chunk-JQJBUEG5.js";import"./chunk-X2MYQMQG.js";import"./chunk-JDSQU7UA.js";import"./chunk-FJN7IPRV.js";import{b as S}from"./chunk-KQJAPUDF.js";import{g as C,i as G}from"./chunk-UUPTKJ34.js";import{d as R,g as B}from"./chunk-YWX36TB2.js";import"./chunk-75CLL234.js";import{c as F}from"./chunk-AIREYCF6.js";import{b as A}from"./chunk-TLW5FHGJ.js";import"./chunk-T6BCLI2C.js";import{c as d,d as j}from"./chunk-X6BOBCGK.js";import"./chunk-UO2UFEHS.js";import"./chunk-YALI5IZX.js";import"./chunk-34ICKWYC.js";import{c as T,e as N}from"./chunk-MUEZWKIH.js";import"./chunk-U2AKNAEH.js";import{a as L,b as k,c as $}from"./chunk-YEEVKOOT.js";import{ha as D,ia as O}from"./chunk-GAHCHFY3.js";import{n as I}from"./chunk-YR55CBIC.js";import{Hb as s,Ib as u,Jb as v,O as g,Tb as E,Vb as l,gc as y,ha as b,ib as h,jb as p,jc as z,qa as M,ra as P,xb as c}from"./chunk-SOOFBSF3.js";var x=(()=>{let t=class t{constructor(e,i,o,m){this.dialog=e,this.mpplService=i,this.personNamePipe=o,this.router=m,this.title=d.patients,this.dataSource=new q("-createdAt"),this.dataSource.columnDefs.push(r.uuid("id"),r.string("title.abbreviation").setVisibility(!1),r.string("title.name").setVisibility(!1).setName(d.title),r.hyperlink("names",a=>this.router.navigate([`/mppl/persons/${a.id}`])).setValueGetter(a=>o.transform(a)).setName(d.name),r.string("sex").setValueGetter(a=>j(a.sex)),r.date("birthDate"),r.date("createdAt",!1),r.date("updatedAt",!1),W.menu([C.divider(),C.item(d.qr,G.qr,a=>this.openBarcodeWriterComponent(a))])),this.get();}openPersonCreateComponent(){this.dialog.open(X).afterClosed().subscribe(e=>{e&&this.router.navigate([`/mppl/persons/${e.id}`]);});}openPersonScanComponent(){this.dialog.open(Y).afterClosed().subscribe(e=>{if(e){let i=this.dataSource.filtration?.filters.find(o=>o.field==="ssn");i?i.value=e.ssn:this.dataSource.filtration?.filters.push({field:"ssn",op:A.InsensitiveContains,value:e.ssn}),this.get();}});}openBarcodeWriterComponent(e){this.dialog.open(w,{data:{type:V.QR_Code,msg:`personid.${e.id}`}}).afterClosed().subscribe({});}get(){this.mpplService.persons.get(this.dataSource.getQuery()).pipe(F(this.dataSource.indicator),g(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};t.ɵfac=function(i){return new(i||t)(p(R),p(f),p(_),p(T));},t.ɵcmp=M({type:t,selectors:[["sz-medisy-people-persons"]],features:[z([I,_])],decls:9,vars:4,consts:()=>{let e;return e="Add",[[3,"title"],[3,"dataSource","changed"],["mat-flat-button","","color","primary","start","",3,"click"],e,["end","","mat-icon-button","",3,"click"],[3,"stateEnabled","dataSource","update"]];},template:function(i,o){i&1&&(v(0,"sz-ui-header-info",0),s(1,"sz-ui-table-search-filter",1),l("changed",function(){return o.get();}),s(2,"button",2),l("click",function(){return o.openPersonCreateComponent();}),s(3,"span"),E(4,3),u()(),s(5,"button",4),l("click",function(){return o.openPersonScanComponent();}),s(6,"mat-icon"),y(7,"barcode"),u()()(),s(8,"sz-ui-table",5),l("update",function(){return o.get();}),u()),i&2&&(c("title",o.title),h(),c("dataSource",o.dataSource),h(7),c("stateEnabled",!0)("dataSource",o.dataSource));},dependencies:[L,k,Q,H,S,D],encapsulation:2});let n=t;return n;})();var De=(()=>{let t=class t{};t.ɵfac=function(i){return new(i||t)();},t.ɵmod=P({type:t}),t.ɵinj=b({providers:[f],imports:[N.forChild([{path:"",component:x}]),B,$,U,S,O]});let n=t;return n;})();export{De as PersonsModule};/**i18n:3c79f61dd4ae219236c62485f036b897dde9f999c4ae619f8589958cf23779e7*/