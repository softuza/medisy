import{a as _}from"./chunk-MOUVONG3.js";import{a as n,d as ne,e as ae,f as se,i as le,j as Se}from"./chunk-N3YZ3GWE.js";import"./chunk-YGU4JTYS.js";import"./chunk-ALLHSD3Q.js";import"./chunk-LZIUZOQU.js";import{b as ee,f as te,g as oe,h as ie,j as re,k as M}from"./chunk-BQ3MI4NW.js";import{b as T,e as Z}from"./chunk-RNNBY4AW.js";import{h as N}from"./chunk-VP6ZLF3H.js";import{a as J,b as X,d as w,e as k,g as E}from"./chunk-WNUUIGGE.js";import{c as Q,o as x,q as K,s as W,t as Y}from"./chunk-7CXFXQJU.js";import"./chunk-IP3Z2NCN.js";import"./chunk-264QKOH6.js";import"./chunk-W4ZBAGNE.js";import"./chunk-AAHDAXVC.js";import"./chunk-JACASQJP.js";import{d as R,f as v,g as V,l as b,n as $,q as U,r as F,u as B}from"./chunk-VXNH5PTX.js";import{Y as q}from"./chunk-KQ5MQZXD.js";import{c as y,e as G}from"./chunk-DNH4OZS2.js";import"./chunk-ELRLVGRO.js";import{ia as j,la as H}from"./chunk-4B53IFHW.js";import{n as O}from"./chunk-UZ765RGE.js";import{Kb as l,Lb as m,Mb as d,Xb as g,bb as p,cb as c,ea as A,ja as a,na as u,oa as I,oc as f,pc as L,qb as z,zb as s}from"./chunk-G33TNFCW.js";import"./chunk-EAIILSS5.js";var de=(()=>{let o=class o extends te{constructor(e,i,t){super(i),this.fb=e,this.dialog=i,this.data=t,this.cstnService=a(_),this.form=e.group({name:[t?.name,[R.required,R.minLength(1)]],description:[t?.description,[]],code:[t?.code,[]],actualStartDate:[t?.actualStartDate,[]],actualEndDate:[t?.actualEndDate,[]],plannedStartDate:[t?.plannedStartDate,[]],plannedEndDate:[t?.plannedEndDate,[]]});}submit(){this.IsValid()&&(this.data?this.save(this.cstnService.projects.update(this.data.id,this.form.value)):this.save(this.cstnService.projects.create(this.form.value)));}};o.ɵfac=function(i){return new(i||o)(c(F),c(J),c(X));},o.ɵcmp=u({type:o,selectors:[["sz-constr-construction-projects-save"]],standalone:!0,features:[f([]),z,L],decls:13,vars:5,consts:()=>{let e;e="Name";let i;i="Description";let t;t="Code";let C;C="Planned Start Date";let D;D="Planned End Date";let h;h="Actual Start Date";let P;return P="Actual End Date",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",i],["formControlName","code","label",t],[1,"sz-form-row"],["formControlName","plannedStartDate","label",C],["formControlName","plannedEndDate","label",D],["formControlName","actualStartDate","label",h],["formControlName","actualEndDate","label",P],[3,"actions"]];},template:function(i,t){i&1&&(d(0,"sz-ui-dialog-header",0),l(1,"mat-dialog-content")(2,"form",1),d(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"sz-ui-form-field-input",4),l(6,"div",5),d(7,"sz-ui-form-field-date",6)(8,"sz-ui-form-field-date",7),m(),l(9,"div",5),d(10,"sz-ui-form-field-date",8)(11,"sz-ui-form-field-date",9),m()()(),d(12,"sz-ui-dialog-actions",10)),i&2&&(s("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),p(2),s("formGroup",t.form),p(10),s("actions",t.actions));},dependencies:[B,b,v,V,$,U,E,k,K,M,oe,ie,Y,Q,W,x],encapsulation:2});let r=o;return r;})();var _e=(()=>{let o=class o{constructor(){this.cstnService=a(_),this.dialog=a(w),this.router=a(y),this.datePipe=a(O),this.dataSource=new ne("name"),this.appBarConfig={title:q.projects,actions:[T.add(this.openSaveComponent.bind(this)),T.menu([T.search()])]},this.dataSource.columnDefs.push(n.uuid("id"),n.hyperlink("name",e=>e.id).setHeaderSortable(!0),n.string("code"),n.date("actualStartDate").setVisible(!1).setValueFormatter(e=>this.datePipe.transform(e,"mediumDate")),n.date("actualEndDate").setVisible(!1).setValueFormatter(e=>this.datePipe.transform(e,"mediumDate")),n.date("plannedStartDate").setVisible(!0).setValueFormatter(e=>this.datePipe.transform(e,"mediumDate")).setResponsive(!0),n.date("plannedEndDate").setVisible(!0).setValueFormatter(e=>this.datePipe.transform(e,"mediumDate")).setResponsive(!0),n.date("createdAt").setVisible(!1),n.date("updatedAt").setVisible(!1),n.menu([N.edit(this.openSaveComponent.bind(this)),N.divider(),N.delete(this.openProjectDeleteComponent.bind(this))])),this.get();}openSaveComponent(e){this.dialog.open(de,{data:e}).afterClosed().subscribe(i=>{this.dataSource.addOrUpdateItem(i);});}openProjectDeleteComponent(e){this.dialog.open(re,{data:ee.delete(this.cstnService.projects.delete(e.id),e)}).afterClosed().subscribe(i=>{this.dataSource.delete(i);});}get(){this.cstnService.projects.get(this.dataSource.getQuery()).pipe(ae(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=u({type:o,selectors:[["sz-constr-construction-projects"]],features:[f([])],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(i,t){i&1&&(l(0,"sz-ui-table-bar",0),g("changed",function(){return t.get();}),m(),l(1,"sz-ui-table",1),g("update",function(){return t.get();}),m()),i&2&&(s("config",t.appBarConfig)("dataSource",t.dataSource),p(),s("dataSource",t.dataSource));},dependencies:[le,se],encapsulation:2});let r=o;return r;})();var at=(()=>{let o=class o{};o.ɵfac=function(i){return new(i||o)();},o.ɵmod=I({type:o}),o.ɵinj=A({providers:[_,O],imports:[G.forChild([{path:"",component:_e}]),E,j,H,Se,M,Z]});let r=o;return r;})();export{at as ProjectsModule};/**i18n:23b18f90dfad26ae6b830c3e760ecc323aedcfc43eb78549f6a00c2171dce7c8*/