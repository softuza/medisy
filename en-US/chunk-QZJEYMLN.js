import{a as l}from"./chunk-TKDMNCGD.js";import{a as Y}from"./chunk-L4NADUXG.js";import{a,d as te,e as oe,f as ie,i as re,j as ne}from"./chunk-UMQZRE5E.js";import"./chunk-RCVS45O2.js";import"./chunk-PXWWDYTP.js";import{g as ee}from"./chunk-CK7WEH63.js";import"./chunk-R3ZFNPLW.js";import{b as Q,f as J,g as K,h as Z,j as x,k as N}from"./chunk-UXK6PSGI.js";import{a as q}from"./chunk-LLZ7TKB3.js";import{j as n,k}from"./chunk-EVGSYUOK.js";import"./chunk-LOH5CTE4.js";import{a as $,b as F,d as U,e as G,g as M}from"./chunk-M5V3PZRJ.js";import{c as w,q as H,t as W}from"./chunk-VUCYJ2HO.js";import"./chunk-CVH4P2E2.js";import"./chunk-443GWC6S.js";import"./chunk-SYXG226D.js";import"./chunk-J5ICTFNH.js";import"./chunk-D5DHQUZL.js";import{d as E,f as z,g as I,l as R,n as y,q as L,r as P,u as D}from"./chunk-EOQNX5GG.js";import{Y as X}from"./chunk-I2SD3VIP.js";import{c as A,d as B}from"./chunk-TM5JFVB7.js";import"./chunk-NUQX3XTB.js";import{ia as V,la as j}from"./chunk-Y7HMALTZ.js";import"./chunk-HTTNJI4B.js";import{Jb as d,Kb as S,Lb as f,Wb as O,ab as p,bb as _,ea as T,ja as m,mc as C,na as c,nc as v,oa as h,pb as b,yb as s}from"./chunk-PGHKBHIM.js";import"./chunk-7NJ6IGLQ.js";var se=(()=>{let o=class o extends J{constructor(t,e,i){super(e),this.fb=t,this.dialog=e,this.data=i,this.cstnService=m(l),this.form=t.group({name:[i?.name,[E.required,E.minLength(1)]],number:[i?.number,[E.maxLength(24)]],primaryEmail:[i?.primaryEmail,[]],primaryPhone:[i?.primaryPhone,[]]});}submit(){this.IsValid()&&(this.data?this.save(this.cstnService.employees.update(this.data.id,this.form.value)):this.save(this.cstnService.employees.create(this.form.value)));}};o.ɵfac=function(e){return new(e||o)(_(P),_($),_(F));},o.ɵcmp=c({type:o,selectors:[["sz-constr-construction-projects-save"]],standalone:!0,features:[C([]),b,v],decls:8,vars:5,consts:()=>{let t;t="Name";let e;e="Number";let i;i="Phone";let u;return u="Email",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",t],["formControlName","number","label",e],["formControlName","primaryPhone","label",i],["formControlName","primaryEmail","label",u],[3,"actions"]];},template:function(e,i){e&1&&(f(0,"sz-ui-dialog-header",0),d(1,"mat-dialog-content")(2,"form",1),f(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-input",3)(5,"sz-ui-form-field-input",4)(6,"sz-ui-form-field-input",5),S()(),f(7,"sz-ui-dialog-actions",6)),e&2&&(s("title",i.title)("subtitle",i.subtitle)("alert",i.alert()),p(2),s("formGroup",i.form),p(5),s("actions",i.actions));},dependencies:[D,R,z,I,y,L,M,G,H,N,K,Z,W,w],encapsulation:2});let r=o;return r;})();var me=(()=>{let o=class o{constructor(){this.cstnService=m(l),this.dialog=m(U),this.router=m(A),this.dataSource=new te(),this.appBarConfig={title:X.employees,menu:k.default().setItems([n.add(this.openSaveComponent.bind(this)),n.menu([n.search()])])},this.dataSource.columnDefs.push(a.uuid("id"),a.string("name").setHeaderSortable(!0),a.string("number"),a.string("primaryEmail").setVisible(!1),a.string("primaryPhone").setHeaderSortable(!1),a.date("createdAt").setVisible(!1),a.date("updatedAt").setVisible(!1),a.menu([n.edit(this.openSaveComponent.bind(this)),n.divider(),n.barcode(this.openBarcodeWriterComponent.bind(this)),n.divider(),n.delete(this.openProjectDeleteComponent.bind(this))])),this.get();}openSaveComponent(t){this.dialog.open(se,{data:t}).afterClosed().subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}openBarcodeWriterComponent(t){let e=`${document.baseURI}${Y.PageEmployee.replace(":employeeId",t.id)}`;this.dialog.open(ee,{data:{msg:e,share:{title:t.name,enabled:!0},download:{filename:t.name},copyToClipboard:!0}}).afterClosed().subscribe(i=>{});}openProjectDeleteComponent(t){this.dialog.open(x,{data:Q.delete(this.cstnService.employees.delete(t.id),t)}).afterClosed().subscribe(e=>{this.dataSource.delete(e);});}get(){this.cstnService.employees.get(this.dataSource.getQuery()).pipe(oe(this.dataSource.state)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};o.ɵfac=function(e){return new(e||o)();},o.ɵcmp=c({type:o,selectors:[["sz-constr-construction-employees"]],features:[C([])],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(e,i){e&1&&(d(0,"sz-ui-table-bar",0),O("changed",function(){return i.get();}),S(),d(1,"sz-ui-table",1),O("update",function(){return i.get();}),S()),e&2&&(s("config",i.appBarConfig)("dataSource",i.dataSource),p(),s("dataSource",i.dataSource));},dependencies:[re,ie],encapsulation:2});let r=o;return r;})();var xe=(()=>{let o=class o{};o.ɵfac=function(e){return new(e||o)();},o.ɵmod=h({type:o}),o.ɵinj=T({providers:[l],imports:[B.forChild([{path:"",component:me}]),M,V,j,ne,N,q]});let r=o;return r;})();export{xe as EmployeesModule};/**i18n:5a2c0bc94bbf1ef498664455a9d60582c29bc498832d9f320f89c95b436c0516*/