"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[677],{677:(g,S,t)=>{t.r(S),t.d(S,{AnalysisModule:()=>z});var e=t(6814),p=t(2296),a=t(7700),r=t(6385),l=t(617),d=t(7988),T=t(8109),C=t(465),M=t(5738),n=t(758),O=t(2595),v=t(5041),s=t(5879),P=t(9060),_=t(2279),c=t(5348),A=t(2430),y=t(3572),h=t(9598),D=t(7398),f=t(8180),I=t(2516),N=t(6128);function L(o,E){1&o&&s._UZ(0,"sz-ui-card",10),2&o&&s.Q6J("card",E.$implicit)}const Y=[{path:"",component:(()=>{class o{constructor(i,u,m,U,$,B){this.dialog=i,this.route=u,this.router=m,this.analysisService=U,this.personService=$,this.personNamePipe=B,this.alert$=(0,s.tdS)(void 0),this.testsDataSource=new y.b2(h.J.pagedSorted("-createdAt")),this.tiles=[],this.analysis=this.route.snapshot.data.analysis,this.getPerson(),this.buildTiles()}buildTiles(){const i={icon:"science",subtitle:"Tests",type:A.k.Counter,clickFn:()=>this.router.navigate(["tests"],{relativeTo:this.route})},u={icon:"label",subtitle:"Specimens",type:A.k.Counter,clickFn:()=>this.router.navigate(["specimens"],{relativeTo:this.route})};this.analysisService.getTests(this.analysis.id,h.J.count()).pipe((0,D.U)(m=>m.count),(0,f.q)(1)).subscribe(m=>{i.title=m}),this.analysisService.getSpecimens(this.analysis.id,h.J.count()).pipe((0,D.U)(m=>m.count),(0,f.q)(1)).subscribe(m=>{u.title=m}),this.tiles.push(i),this.tiles.push(u)}getPerson(){this.analysis.personId&&this.personService.getPerson(this.analysis.personId).pipe((0,f.q)(1)).subscribe(i=>{this.tiles.splice(0,0,{icon:"person",type:A.k.Text,subtitle:"Patient",title:this.personNamePipe.transform(i),clickFn:()=>this.router.navigate([`mppl/persons/${i.id}`])})})}openEditComponent(){}}return o.\u0275fac=function(i){return new(i||o)(s.Y36(a.uw),s.Y36(T.gz),s.Y36(T.F0),s.Y36(M.K),s.Y36(c.R),s.Y36(P.Y))},o.\u0275cmp=s.Xpm({type:o,selectors:[["medisy-laboratory-analysis"]],features:[s._Bn([M.K,c.R,P.Y,_.C])],decls:24,vars:4,consts:function(){let E,i;return E="Edit",i="Print",[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["mat-icon-button","","end","",3,"matMenuTriggerFor"],["itemMenu","matMenu"],["mat-menu-item","",3,"click"],E,i,[1,"sz-grid-card"],[3,"card",4,"ngFor","ngForOf"],[3,"card"]]},template:function(i,u){if(1&i&&(s.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),s._uU(3),s.qZA(),s.TgZ(4,"span",2),s._uU(5),s.qZA()(),s.TgZ(6,"button",3)(7,"mat-icon"),s._uU(8,"more_vert"),s.qZA()(),s.TgZ(9,"mat-menu",null,4)(11,"button",5),s.NdJ("click",function(){return u.openEditComponent()}),s.TgZ(12,"mat-icon"),s._uU(13,"edit"),s.qZA(),s.TgZ(14,"span"),s.SDv(15,6),s.qZA()(),s._UZ(16,"mat-divider"),s.TgZ(17,"button",5),s.NdJ("click",function(){return u.openEditComponent()}),s.TgZ(18,"mat-icon"),s._uU(19,"print"),s.qZA(),s.TgZ(20,"span"),s.SDv(21,7),s.qZA()()()(),s.TgZ(22,"div",8),s.YNc(23,L,1,1,"sz-ui-card",9),s.qZA()),2&i){const m=s.MAs(10);s.xp6(3),s.Oqu(u.analysis.code),s.xp6(2),s.Oqu(u.analysis.note),s.xp6(1),s.Q6J("matMenuTriggerFor",m),s.xp6(17),s.Q6J("ngForOf",u.tiles)}},dependencies:[e.sg,d.VK,d.OP,d.p6,l.Hw,p.RK,r.d,I.z,N.X],encapsulation:2}),o})()},{path:"tests",loadComponent:()=>Promise.resolve().then(t.bind(t,1947)).then(o=>o.AnalysisTestsComponent)},{path:"specimens",loadComponent:()=>Promise.all([t.e(592),t.e(380)]).then(t.bind(t,2380)).then(o=>o.AnalysisSpecimensComponent)}];var R=t(1947);let z=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=s.oAB({type:o}),o.\u0275inj=s.cJS({providers:[M.K],imports:[e.ez,T.Bz.forChild(Y),a.Is,n.E3,d.Tx,l.Ps,p.ot,r.t,v.n,O.V,C.X,R.AnalysisTestsComponent]}),o})()},1947:(g,S,t)=>{t.r(S),t.d(S,{AnalysisTestsComponent:()=>s});var e=t(8109),p=t(2191),a=t(2279),r=t(5738),l=t(5041),d=t(3572),T=t(9598),C=t(8721),M=t(8180),n=t(5879),O=t(3582),v=t(2516);let s=(()=>{class P{constructor(c,A,y){this.route=c,this.analysisService=A,this.testStatei18nPipe=y,this.dataSource=new d.b2(T.J.pagedSorted("test.testClass")),this.analysis=this.route.snapshot.data.analysis,this.dataSource.columns=[d.UC.text("test.testclass","Test Class",h=>h.test.testClass.name),d.UC.text("test.state","State",h=>y.transform(h.test.state)),p.h.menu([])],this.get()}get(){this.analysisService.getTests(this.analysis.id,this.dataSource.filterModel).pipe((0,C.sU)(this.dataSource.indicator)).pipe((0,M.q)(1)).subscribe(c=>{this.dataSource.set(c.items,c.count)})}}return P.\u0275fac=function(c){return new(c||P)(n.Y36(e.gz),n.Y36(r.K),n.Y36(a.C))},P.\u0275cmp=n.Xpm({type:P,selectors:[["medisy-laboratory-analysis-tests"]],standalone:!0,features:[n._Bn([r.K,a.C]),n.jDz],decls:7,vars:4,consts:function(){let _;return _="Tests",[["start",""],[1,"sz-h5"],_,["routerLink","../",1,"tw-underline","tw-text-sm"],[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(c,A){1&c&&(n.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),n.SDv(3,2),n.qZA(),n.TgZ(4,"a",3),n._uU(5),n.qZA()()(),n.TgZ(6,"sz-ui-table",4),n.NdJ("update",function(){return A.get()}),n.qZA()),2&c&&(n.xp6(5),n.Oqu(A.analysis.code),n.xp6(1),n.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",A.dataSource))},dependencies:[e.Bz,e.rH,d.Vn,O.K,l.n,v.z],encapsulation:2}),P})()},465:(g,S,t)=>{t.d(S,{X:()=>p});var e=t(5879);let p=(()=>{class a{}return a.\u0275fac=function(l){return new(l||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({}),a})()},9060:(g,S,t)=>{t.d(S,{Y:()=>p});var e=t(5879);let p=(()=>{class a{transform(l,d=!1){if(!l.names||0===l.names.length)return`${l.id}`;const T=l.names[0].firstName,C=l.names[0].lastName,M=C?`${T} ${C}`:`${T}`;return d&&l.birthDate?""+(+new Date-+l.birthDate):M}}return a.\u0275fac=function(l){return new(l||a)},a.\u0275pipe=e.Yjl({name:"personName",type:a,pure:!0,standalone:!0}),a})()},2279:(g,S,t)=>{t.d(S,{C:()=>a});var e=(()=>((e=e||{}).Created="Created",e.Pending="Pending",e.Started="Started",e.Finished="Finished",e))(),p=t(5879);let a=(()=>{class r{transform(d){switch(d){case e.Created:return "Created";case e.Started:return "Started";case e.Finished:return "Finished";case e.Pending:return "Pending";default:return""}}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275pipe=p.Yjl({name:"testStateI18n",type:r,pure:!0,standalone:!0}),r})()}}]);