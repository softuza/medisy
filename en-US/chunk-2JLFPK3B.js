import{a as ye,b as be,c as $e}from"./chunk-WLL3ZX6L.js";import{a as j}from"./chunk-RYUMGIVO.js";import{d as Ie,e as Ce,f as G,g as X,i as Ee,j as Y,k as Ae}from"./chunk-GIQHEGBP.js";import{o as pe,s as fe,u as Ne,v as R}from"./chunk-7LSJKDZJ.js";import{a as v,b as L,d as de,e as U,g as O}from"./chunk-XVVRHKJW.js";import"./chunk-5FPHEJQ4.js";import{e as f,f as De}from"./chunk-UIYAEPV5.js";import"./chunk-SIM3MWAY.js";import{b as Z}from"./chunk-FW5ZUJKN.js";import{a as Me,b as Pe,c as w,d as ge,n as he,o as Fe}from"./chunk-FFJZ25PW.js";import{b as q}from"./chunk-CP6SNK6A.js";import"./chunk-S2JVRKMZ.js";import{b as ce}from"./chunk-OI3RYSYI.js";import{E as z,d as p,g,h,l as F,n as D,o as y,p as b,s as $,t as Se,v as me}from"./chunk-WLSYRODT.js";import{e as ue}from"./chunk-424JH55D.js";import{a as Oe}from"./chunk-OFOYSQTQ.js";import{a as V}from"./chunk-6S4N3MHV.js";import{I as le,Ua as Te,o as se}from"./chunk-2EUQTENK.js";import{$b as P,Ab as m,Bb as T,L as I,Lb as B,Ob as A,Qb as M,Yb as d,ca as ie,da as ne,db as s,eb as l,f as te,ia as re,la as N,lb as C,ma as _e,ob as _,ub as ae,vb as E,zb as a}from"./chunk-5RJFZK6E.js";var u=(()=>{let o=class o{constructor(e){this.http=e,this.basePath="softuza-notification",this.notifications=new ue(this.http,`${this.basePath}/v1/notifications`);}};o.ɵfac=function(t){return new(t||o)(re(se));},o.ɵprov=ie({token:o,factory:o.ɵfac});let n=o;return n;})();var ve=(()=>{let o=class o extends Ie{constructor(e,t,i){super(t),this.fb=e,this.dialog=t,this.data=i,this.form=e.group({channelType:[i?.channelType]});}submit(){this.IsValid()&&this.dialog.close(this.form.value);}};o.ɵfac=function(t){return new(t||o)(l(b),l(v),l(L));},o.ɵcmp=N({type:o,selectors:[["softuza-notification-notifications-filter"]],standalone:!0,features:[d([]),C,P],decls:5,vars:3,consts:[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","channelType"],[3,"actions"]],template:function(t,i){t&1&&(T(0,"sz-ui-dialog-header",0),a(1,"mat-dialog-content")(2,"form",1),T(3,"medisy-form-field-channel-type",2),m()(),T(4,"sz-ui-dialog-actions",3)),t&2&&(_("header",i.header),s(2),_("formGroup",i.form),s(2),_("actions",i.actions));},dependencies:[$,F,g,h,D,y,Y,G,X,R,z,pe,O,U,j],encapsulation:2});let n=o;return n;})();function Ze(n,o){if(n&1&&(a(0,"mat-tab",5),T(1,"sz-ui-form-field-input",9)(2,"sz-ui-form-field-input",10)(3,"sz-ui-form-field-input",11),m()),n&2){let c=M();_("formGroup",c.formEmail);}}function je(n,o){if(n&1&&(a(0,"mat-tab",6),T(1,"sz-ui-form-field-input",12)(2,"sz-ui-form-field-textarea",13),m()),n&2){let c=M();_("formGroup",c.formSms);}}function xe(n,o){if(n&1&&(a(0,"mat-tab",7),T(1,"sz-ui-form-field-input",14)(2,"sz-ui-form-field-textarea",15),m()),n&2){let c=M();_("formGroup",c.formPush);}}var Le=(()=>{let o=class o extends Ce{constructor(e,t,i,r){super(i),this.sntiService=e,this.fb=t,this.dialog=i,this.data=r,this.channelTypes=f,this.subscriptions=new te(),this.formEmail=t.group({subject:[r?.email?.subject,[p.required]],replyToEmail:[r?.email?.replyTo.email,[p.email]],replyToName:[r?.email?.replyTo.name,[]]}),this.formSms=t.group({originator:[r?.sms?.originator,[p.required]],body:[r?.sms?.body,[p.required]]}),this.formPush=t.group({title:[r?.push?.title,[p.required]],body:[r?.push?.body,[p.required]]}),this.form=t.group({name:[r?.name,[p.required]],description:[r?.description,[p.maxLength(4096)]],channelTypes:[r?.channelTypes??[],[p.required]]}),this.subscribeChanges();}ngOnDestroy(){this.subscriptions.unsubscribe();}subscribeChanges(){this.subscriptions.add(this.form.controls.channelTypes.valueChanges.subscribe(e=>{this.form.contains("email")?e?.includes(f.Email)||this.form.removeControl("email"):e?.includes(f.Email)&&this.form.addControl("email",this.formEmail),this.form.contains("sms")?e?.includes(f.Sms)||this.form.removeControl("sms"):e?.includes(f.Sms)&&this.form.addControl("sms",this.formSms),this.form.contains("push")?e?.includes(f.Push)||this.form.removeControl("push"):e?.includes(f.Push)&&this.form.addControl("push",this.formPush);}));}hasChannelType(e){return this.form.value.channelTypes?.includes(e);}submit(){this.IsValid()&&(this.data?this.save(this.sntiService.notifications.update(this.data.id,this.form.value)):this.save(this.sntiService.notifications.create(this.form.value)));}};o.ɵfac=function(t){return new(t||o)(l(u),l(b),l(v),l(L));},o.ɵcmp=N({type:o,selectors:[["medisy-laboratory-reference-values-save"]],standalone:!0,features:[d([]),C,P],decls:11,vars:7,consts:()=>{let e;e="Name";let t;t="Description";let i;i="Email";let r;r="SMS";let k;k="Push";let H;H="Subject";let J;J="Email";let K;K="Name";let Q;Q="Originator";let W;W="Body";let ee;ee="Title";let oe;return oe="Body",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",t],["formControlName","channelTypes",3,"multiple"],["label",i,3,"formGroup"],["label",r,3,"formGroup"],["label",k,3,"formGroup"],[3,"actions"],["formControlName","subject","label",H],["formControlName","replyToEmail","label",J],["formControlName","replyToName","label",K],["formControlName","originator","label",Q],["formControlName","body","label",W],["formControlName","title","label",ee],["formControlName","body","label",oe]];},template:function(t,i){t&1&&(T(0,"sz-ui-dialog-header",0),a(1,"mat-dialog-content")(2,"form",1),T(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"medisy-form-field-channel-type",4),a(6,"mat-tab-group"),ae(7,Ze,4,1,"mat-tab",5)(8,je,3,1,"mat-tab",6)(9,xe,3,1,"mat-tab",7),m()()(),T(10,"sz-ui-dialog-actions",8)),t&2&&(_("header",i.header),s(2),_("formGroup",i.form),s(3),_("multiple",!0),s(2),E(7,i.hasChannelType(i.channelTypes.Email)?7:-1),s(1),E(8,i.hasChannelType(i.channelTypes.Sms)?8:-1),s(1),E(9,i.hasChannelType(i.channelTypes.Push)?9:-1),s(1),_("actions",i.actions));},dependencies:[$,F,g,h,D,y,O,U,z,$e,ye,be,Y,G,X,R,fe,Ne,j],encapsulation:2});let n=o;return n;})();var Ue=(()=>{let o=class o{constructor(e,t){this.dialog=e,this.sntiService=t,this.dataSource=new Pe(Oe.paged()),this.dataSource.addRows([w.borderless([Z.nameText(),Z.createdAt(),Z.menu([q.edit(i=>this.openSaveComponent(i)),q.delete(i=>this.openNotificationDeleteComponent(i))])]),w.headerless([Me.text("description")])]),this.get();}openFilterComponent(){this.dialog.open(ve,{data:this.dataSource.filterModel}).afterClosed().pipe(I(1)).subscribe(t=>{this.dataSource.updateFilterModel(t),this.get();});}openSaveComponent(e){this.dialog.open(Le,{data:e}).afterClosed().pipe(I(1)).subscribe(i=>{this.dataSource.updateOrPushItem(i);});}openNotificationDeleteComponent(e){this.dialog.open(Ee,{data:Ae.delete(this.sntiService.notifications.delete(e.id),e)}).afterClosed().pipe(I(1)).subscribe(i=>{this.dataSource.delete(i);});}get(){this.sntiService.notifications.get(this.dataSource.filterModel).pipe(ce(this.dataSource.indicator),I(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(t){return new(t||o)(l(de),l(u));},o.ɵcmp=N({type:o,selectors:[["softuza-notification-notifications"]],features:[d([De])],decls:8,vars:4,consts:()=>{let e;e="Notifications";let t;return t="Add",[["start","",1,"sz-h5"],e,[3,"dataSource","search","filter"],["mat-flat-button","","color","primary","start","",3,"click"],t,[3,"paginationEnabled","stateEnabled","dataSource","update"]];},template:function(t,i){t&1&&(a(0,"sz-ui-header-basic")(1,"h5",0),B(2,1),m()(),a(3,"sz-ui-table-filter",2),A("search",function(){return i.get();})("filter",function(){return i.openFilterComponent();}),a(4,"button",3),A("click",function(){return i.openSaveComponent();}),a(5,"span"),B(6,4),m()()(),a(7,"sz-ui-table",5),A("update",function(){return i.get();}),m()),t&2&&(s(3),_("dataSource",i.dataSource),s(4),_("paginationEnabled",!0)("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[Se,he,ge,V],encapsulation:2});let n=o;return n;})();var Ve=[{path:"",component:Ue}];var Jo=(()=>{let o=class o{};o.ɵfac=function(t){return new(t||o)();},o.ɵmod=_e({type:o}),o.ɵinj=ne({providers:[u],imports:[le.forChild(Ve),O,me,Fe,V,Te]});let n=o;return n;})();export{Jo as NotificationsModule};/**i18n:c47ea6c8e33fa0c222c20e616e96e45afbcc3267e1e4f83fbed9283c01f003ba*/