import{o as P}from"./chunk-L4LDMAQX.js";import{$ as U,Ac as N,C as S,Ca as K,D as d,E,Fa as Z,K as p,Lc as G,M as L,Nc as H,Oa as M,S as j,Y as b,da as v,ea as W,f as D,ga as V,ia as C,kb as _,l as R,m as y,n as k,oa as x,ra as B,s as l,w as F,x as O,yc as $,z as T}from"./chunk-3ZNYUPIG.js";import{a as h,b as A}from"./chunk-CTC3DLAD.js";var I=class{constructor(){this.stateLocation="@state",this.state=_({})}select(e){return G(()=>this.state()[e])}pmutate(e,s){this.state.update(t=>A(h({},t),{[e]:s}))}mutate(e){this.state.update(s=>h(h({},s),e))}set(e){this.state.set(e)}get(){return this.state}load(){let e=localStorage.getItem(this.stateLocation);if(!e)return null;try{let s=JSON.parse(e);return this.set(s),s}catch{return null}}save(e){localStorage.setItem(this.stateLocation,JSON.stringify(e))}listen(){H(()=>{this.save(this.state())})}};var ae=(()=>{let e=class e extends I{constructor(){super(),this.stateLocation="@appState",this.init(),this.listen()}init(){this.load()||this.set({header:{title:"Dashboard"},sidebar:{visible:!0},theme:{selector:void 0}})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let r=e;return r})();var m="Service workers are disabled or not supported by this browser";function X(r){return O(()=>k(new Error(r)))}var f=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=X(m);else{let t=T(e,"controllerchange").pipe(l(()=>e.controller)),n=O(()=>y(e.controller)),i=F(n,t);this.worker=i.pipe(E(u=>!!u)),this.registration=this.worker.pipe(b(()=>e.getRegistration()));let g=T(e,"message").pipe(l(u=>u.data)).pipe(E(u=>u&&u.type)).pipe(j());g.connect(),this.events=g}}postMessage(e,s){return this.worker.pipe(p(1),U(t=>{t.postMessage(h({action:e},s))})).toPromise().then(()=>{})}postMessageWithOperation(e,s,t){let n=this.waitForOperationCompleted(t),i=this.postMessage(e,s);return Promise.all([i,n]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let s;return typeof e=="string"?s=t=>t.type===e:s=t=>e.includes(t.type),this.events.pipe(E(s))}nextEventOfType(e){return this.eventsOfType(e).pipe(p(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(E(s=>s.nonce===e),p(1),l(s=>{if(s.result!==void 0)return s.result;throw new Error(s.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},z=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new D,!t.isEnabled){this.messages=d,this.notificationClicks=d,this.subscription=d;return}this.messages=this.sw.eventsOfType("PUSH").pipe(l(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(l(i=>i.data)),this.pushManager=this.sw.registration.pipe(l(i=>i.pushManager));let n=this.pushManager.pipe(b(i=>i.getSubscription()));this.subscription=S(n,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(m));let n={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return n.applicationServerKey=a,this.pushManager.pipe(b(o=>o.subscribe(n)),p(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(m));let t=n=>{if(n===null)throw new Error("Not subscribed to push notifications.");return n.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(p(1),b(t)).toPromise()}decodeBase64(t){return atob(t)}};e.\u0275fac=function(n){return new(n||e)(C(f))},e.\u0275prov=v({token:e,factory:e.\u0275fac});let r=e;return r})(),Y=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=d,this.unrecoverable=d;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(m));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(m));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}};e.\u0275fac=function(n){return new(n||e)(C(f))},e.\u0275prov=v({token:e,factory:e.\u0275fac});let r=e;return r})();var J=new V("");function ee(r,e,s,t){return()=>{if(!(P(t)&&"serviceWorker"in navigator&&s.enabled!==!1))return;let n=r.get(Z),i=r.get(N);n.runOutsideAngular(()=>{let o=navigator.serviceWorker,c=()=>o.controller?.postMessage({action:"INITIALIZE"});o.addEventListener("controllerchange",c),i.onDestroy(()=>{o.removeEventListener("controllerchange",c)})});let a;if(typeof s.registrationStrategy=="function")a=s.registrationStrategy();else{let[o,...c]=(s.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":a=y(null);break;case"registerWithDelay":a=q(+c[0]||0);break;case"registerWhenStable":let g=R(r.get(N).whenStable());a=c[0]?S(g,q(+c[0])):g;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${s.registrationStrategy}`)}}n.runOutsideAngular(()=>a.pipe(p(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:s.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function q(r){return y(null).pipe(L(r))}function te(r,e){return new f(P(e)&&r.enabled!==!1?navigator.serviceWorker:void 0)}var w=class{};function re(r,e={}){return B([z,Y,{provide:J,useValue:r},{provide:w,useValue:e},{provide:f,useFactory:te,deps:[w,M]},{provide:$,useFactory:ee,deps:[K,J,w,M],multi:!0}])}var ve=(()=>{let e=class e{static register(t,n={}){return{ngModule:e,providers:[re(t,n)]}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=x({type:e}),e.\u0275inj=W({providers:[z,Y]});let r=e;return r})();export{ae as a,z as b,Y as c,ve as d};
/**i18n:883855adb3733727a42e8a26dd864e04f11dfd516c87b10e07ff3899a99df55f*/
