import{a as p}from"./chunk-HJDQIV6N.js";import{a as q}from"./chunk-DSK626R6.js";import{a as n,d as ae,e as se,f as le,i as Se,j as me}from"./chunk-WJJF4QW4.js";import"./chunk-5TVHWUQF.js";import"./chunk-FLYZTQVP.js";import"./chunk-MB447KBV.js";import{b as te,f as oe,g as ie,h as re,j as ne,k as T}from"./chunk-OZNM4F5S.js";import{a as ee}from"./chunk-MOAPW72V.js";import{j as S,k as Z}from"./chunk-LZ3HWPNB.js";import{a as G,b as J,d as X,e as w,g as N}from"./chunk-YEM3GD5L.js";import{c as Q,o as x,q as K,s as W,t as Y}from"./chunk-F6DYKLPX.js";import"./chunk-ZPIO6CFV.js";import"./chunk-264QKOH6.js";import"./chunk-UJCEDBUS.js";import"./chunk-H7W7YGPD.js";import"./chunk-VNEAS3P2.js";import{d as g,f as L,g as v,l as V,n as b,q as $,r as U,u as F}from"./chunk-ER7WHOJP.js";import{Y as H}from"./chunk-6JNKTIUK.js";import{c as B,e as y}from"./chunk-NBEPCNAY.js";import"./chunk-THXYLS24.js";import{ia as j,la as k}from"./chunk-UUEM5JJT.js";import{n as E}from"./chunk-PSZD7437.js";import{Kb as l,Lb as d,Mb as _,Xb as M,bb as u,cb as f,ea as P,ja as a,na as c,nc as O,oa as A,oc as z,qb as I,zb as s}from"./chunk-IKPHE33N.js";import"./chunk-EAIILSS5.js";var _e=(()=>{let o=class o extends oe{constructor(e,i,t){super(i),this.fb=e,this.dialog=i,this.data=t,this.cstnService=a(p),this.form=e.group({name:[t?.name,[g.required,g.minLength(1)]],description:[t?.description,[]],code:[t?.code,[]],actualStartDate:[t?.actualStartDate,[]],actualEndDate:[t?.actualEndDate,[]],plannedStartDate:[t?.plannedStartDate,[]],plannedEndDate:[t?.plannedEndDate,[]]});}submit(){this.IsValid()&&(this.data?this.save(this.cstnService.projects.update(this.data.id,this.form.value)):this.save(this.cstnService.projects.create(this.form.value)));}};o.ɵfac=function(i){return new(i||o)(f(U),f(G),f(J));},o.ɵcmp=c({type:o,selectors:[["sz-constr-construction-projects-save"]],standalone:!0,features:[O([]),I,z],decls:13,vars:5,consts:()=>{let e;e="Name";let i;i="Description";let t;t="Code";let C;C="Planned Start Date";let R;R="Planned End Date";let D;D="Actual Start Date";let h;return h="Actual End Date",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",i],["formControlName","code","label",t],[1,"sz-form-row"],["formControlName","plannedStartDate","label",C],["formControlName","plannedEndDate","label",R],["formControlName","actualStartDate","label",D],["formControlName","actualEndDate","label",h],[3,"actions"]];},template:function(i,t){i&1&&(_(0,"sz-ui-dialog-header",0),l(1,"mat-dialog-content")(2,"form",1),_(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"sz-ui-form-field-input",4),l(6,"div",5),_(7,"sz-ui-form-field-date",6)(8,"sz-ui-form-field-date",7),d(),l(9,"div",5),_(10,"sz-ui-form-field-date",8)(11,"sz-ui-form-field-date",9),d()()(),_(12,"sz-ui-dialog-actions",10)),i&2&&(s("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),u(2),s("formGroup",t.form),u(10),s("actions",t.actions));},dependencies:[F,V,L,v,b,$,N,w,K,T,ie,re,Y,Q,W,x],encapsulation:2});let r=o;return r;})();var pe=(()=>{let o=class o{constructor(){this.cstnService=a(p),this.dialog=a(X),this.router=a(B),this.datePipe=a(E),this.dataSource=new ae("name"),this.appBarConfig={title:H.projects,menu:Z.default().setItems([S.add(this.openSaveComponent.bind(this)),S.menu([S.search()])])},this.dataSource.columnDefs.push(n.uuid("id"),n.hyperlink("name").setClickFn(e=>this.router.navigate([q.Projects,e.id])).setHeaderSortable(!0),n.string("code"),n.date("actualStartDate").setVisible(!1).setValueFormatter(e=>this.datePipe.transform(e,"mediumDate")),n.date("actualEndDate").setVisible(!1).setValueFormatter(e=>this.datePipe.transform(e,"mediumDate")),n.date("plannedStartDate").setVisible(!0).setValueFormatter(e=>this.datePipe.transform(e,"mediumDate")).setResponsive(!0),n.date("plannedEndDate").setVisible(!0).setValueFormatter(e=>this.datePipe.transform(e,"mediumDate")).setResponsive(!0),n.date("createdAt").setVisible(!1),n.date("updatedAt").setVisible(!1),n.menu([S.edit(this.openSaveComponent.bind(this)),S.divider(),S.delete(this.openProjectDeleteComponent.bind(this))])),this.get();}openSaveComponent(e){this.dialog.open(_e,{data:e}).afterClosed().subscribe(i=>{this.dataSource.addOrUpdateItem(i);});}openProjectDeleteComponent(e){this.dialog.open(ne,{data:te.delete(this.cstnService.projects.delete(e.id),e)}).afterClosed().subscribe(i=>{this.dataSource.delete(i);});}get(){this.cstnService.projects.get(this.dataSource.getQuery()).pipe(se(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=c({type:o,selectors:[["sz-constr-construction-projects"]],features:[O([])],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(i,t){i&1&&(l(0,"sz-ui-table-bar",0),M("changed",function(){return t.get();}),d(),l(1,"sz-ui-table",1),M("update",function(){return t.get();}),d()),i&2&&(s("config",t.appBarConfig)("dataSource",t.dataSource),u(),s("dataSource",t.dataSource));},dependencies:[Se,le],encapsulation:2});let r=o;return r;})();var st=(()=>{let o=class o{};o.ɵfac=function(i){return new(i||o)();},o.ɵmod=A({type:o}),o.ɵinj=P({providers:[p,E],imports:[y.forChild([{path:"",component:pe}]),N,j,k,me,T,ee]});let r=o;return r;})();export{st as ProjectsModule};/**i18n:23b18f90dfad26ae6b830c3e760ecc323aedcfc43eb78549f6a00c2171dce7c8*/