import{a as De,b as ye,c as be}from"./chunk-ZTXSPDKN.js";import{a as g}from"./chunk-JVGR3LGR.js";import{b as ue,c as ce,e as Me,f as O,g as Pe,i as ge,u as Fe,v as he}from"./chunk-7O2DLPTA.js";import{a as Oe}from"./chunk-WBYPLE6B.js";import{c as fe,h as Ie,i as de,j as Ee,l as Ce,m as pe,n as Ae}from"./chunk-SK6APAT5.js";import{b as M}from"./chunk-AQRFGV44.js";import{b as Te,c as Ne}from"./chunk-ARD3O325.js";import{a as ae,b as se,d as le,e as me,g as c}from"./chunk-3NLMA3OD.js";import{A as Se,h as ie,v as _e,z as re}from"./chunk-7ERNPK3U.js";import{d as s,f as w,g as k,k as H,m as J,p as K,q as Q,t as W,y as ee}from"./chunk-HA3OCK63.js";import{i as P}from"./chunk-UVKSHNQV.js";import"./chunk-QFHU2GEW.js";import"./chunk-SRHI3DNT.js";import{Ea as oe,Ga as te,Ja as ne,r as q}from"./chunk-T2UVNK6V.js";import{Eb as a,Fb as N,Gb as m,M as d,Qb as x,Sb as p,Ub as A,da as v,ea as G,fb as l,g as V,gb as T,gc as u,ja as X,jc as B,na as E,nb as Z,oa as Y,qb as j,ub as S,zb as C}from"./chunk-T2ST7G6M.js";var f=(()=>{let o=class o extends Ne{constructor(e){super(e,"softuza-notification"),this.notifications=new Te(this.http,`${this.basePath}/v1/notifications`);}};o.ɵfac=function(t){return new(t||o)(X(q));},o.ɵprov=v({token:o,factory:o.ɵfac});let n=o;return n;})();function Ve(n,o){if(n&1&&(a(0,"mat-tab",5),m(1,"sz-ui-form-field-input",9)(2,"sz-ui-form-field-input",10)(3,"sz-ui-form-field-input",11)(4,"sz-ui-form-field-textarea",12),N()),n&2){let I=A();S("formGroup",I.formEmail);}}function ve(n,o){if(n&1&&(a(0,"mat-tab",6),m(1,"sz-ui-form-field-input",13)(2,"sz-ui-form-field-textarea",14),N()),n&2){let I=A();S("formGroup",I.formSms);}}function Ge(n,o){if(n&1&&(a(0,"mat-tab",7),m(1,"sz-ui-form-field-input",15)(2,"sz-ui-form-field-textarea",16),N()),n&2){let I=A();S("formGroup",I.formPush);}}var Re=(()=>{let o=class o extends Ie{constructor(e,t,i,_){super(i),this.sntiService=e,this.fb=t,this.dialog=i,this.data=_,this.notificationTypes=O,this.subscriptions=new V(),this.formEmail=t.group({subject:[_?.email?.subject,[s.required]],replyToEmail:[_?.email?.replyToEmail,[s.email]],replyToName:[_?.email?.replyToName,[]],body:[_?.email?.body,[s.required]]}),this.formSms=t.group({originator:[_?.sms?.originator,[s.required]],body:[_?.sms?.body,[s.required]]}),this.formPush=t.group({title:[_?.push?.title,[s.required]],body:[_?.push?.body,[s.required]]}),this.form=t.group({name:[_?.name,[s.required]],description:[_?.description,[s.maxLength(4096)]],types:[_?.types??[],[s.required]]}),this.subscribeChanges();}ngOnDestroy(){this.subscriptions.unsubscribe();}subscribeChanges(){this.subscriptions.add(this.form.controls.types.valueChanges.subscribe(e=>{this.form.contains("email")?e?.includes(O.Email)||this.form.removeControl("email"):e?.includes(O.Email)&&this.form.addControl("email",this.formEmail),this.form.contains("sms")?e?.includes(O.Sms)||this.form.removeControl("sms"):e?.includes(O.Sms)&&this.form.addControl("sms",this.formSms),this.form.contains("push")?e?.includes(O.Push)||this.form.removeControl("push"):e?.includes(O.Push)&&this.form.addControl("push",this.formPush);}));}hasChannelType(e){return this.form.value.types?.includes(e);}submit(){this.IsValid()&&(this.data?this.save(this.sntiService.notifications.update(this.data.id,this.form.value)):this.save(this.sntiService.notifications.create(this.form.value)));}};o.ɵfac=function(t){return new(t||o)(T(f),T(Q),T(ae),T(se));},o.ɵcmp=E({type:o,selectors:[["medisy-laboratory-reference-values-save"]],standalone:!0,features:[u([]),Z,B],decls:11,vars:7,consts:()=>{let e;e="Name";let t;t="Description";let i;i="Email";let _;_="SMS";let h;h="Push";let D;D="Subject";let y;y="Email";let b;b="Name";let $;$="Body";let R;R="Originator";let z;z="Body";let L;L="Title";let U;return U="Body",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",t],["formControlName","types",3,"multiple"],["label",i,3,"formGroup"],["label",_,3,"formGroup"],["label",h,3,"formGroup"],[3,"actions"],["formControlName","subject","label",D],["formControlName","replyToEmail","label",y],["formControlName","replyToName","label",b],["formControlName","body","label",$],["formControlName","originator","label",R],["formControlName","body","label",z],["formControlName","title","label",L],["formControlName","body","label",U]];},template:function(t,i){t&1&&(m(0,"sz-ui-dialog-header",0),a(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"medisy-form-field-notification-type",4),a(6,"mat-tab-group"),j(7,Ve,5,1,"mat-tab",5)(8,ve,3,1,"mat-tab",6)(9,Ge,3,1,"mat-tab",7),N()()(),m(10,"sz-ui-dialog-actions",8)),t&2&&(S("header",i.header),l(2),S("formGroup",i.form),l(3),S("multiple",!0),l(2),C(7,i.hasChannelType(i.notificationTypes.Email)?7:-1),l(),C(8,i.hasChannelType(i.notificationTypes.Sms)?8:-1),l(),C(9,i.hasChannelType(i.notificationTypes.Push)?9:-1),l(),S("actions",i.actions));},dependencies:[W,H,w,k,J,K,c,me,ie,be,De,ye,pe,de,Ee,Se,_e,re,Pe],encapsulation:2});let n=o;return n;})();var ze=(()=>{let o=class o{constructor(e,t){this.dialog=e,this.sntiService=t,this.title=Oe.notifications,this.dataSource=new Me(),this.dataSource.addRows([ce.borderless([g.nameText(),g.createdAt(),ue.menu([P.edit(i=>this.openSaveComponent(i)),P.delete(i=>this.openNotificationDeleteComponent(i))])])]),this.get();}openSaveComponent(e){this.dialog.open(Re,{data:e}).afterClosed().pipe(d(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openNotificationDeleteComponent(e){this.dialog.open(Ce,{data:Ae.delete(this.sntiService.notifications.delete(e.id),e)}).afterClosed().pipe(d(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.sntiService.notifications.get(this.dataSource.buildRequest()).pipe(fe(this.dataSource.indicator),d(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(t){return new(t||o)(T(le),T(f));},o.ɵcmp=E({type:o,selectors:[["softuza-notification-notifications"]],features:[u([])],decls:6,vars:4,consts:()=>{let e;return e="Add",[[3,"title"],[3,"dataSource","changed"],["mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(t,i){t&1&&(m(0,"sz-ui-header-info",0),a(1,"sz-ui-table-search-filter",1),p("changed",function(){return i.get();}),a(2,"button",2),p("click",function(){return i.openSaveComponent();}),a(3,"span"),x(4,3),N()()(),a(5,"sz-ui-table",4),p("update",function(){return i.get();}),N()),t&2&&(S("title",i.title),l(),S("dataSource",i.dataSource),l(4),S("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[oe,Fe,ge,M],encapsulation:2});let n=o;return n;})();var Le=[{path:"",component:ze}];var Vo=(()=>{let o=class o{};o.ɵfac=function(t){return new(t||o)();},o.ɵmod=Y({type:o}),o.ɵinj=G({providers:[f],imports:[ee.forChild(Le),c,te,he,M,ne]});let n=o;return n;})();export{Vo as NotificationsModule};/**i18n:5ad987f33fb36a4bb6d53ec4372590584614aa13df9413297fdfa1032f98b4a2*/