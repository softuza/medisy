import{a as X}from"./chunk-INUIK7WM.js";import{e as $,g as G,h as q,k as H}from"./chunk-LBDPOYNQ.js";import{a as p}from"./chunk-IVJ2NFMZ.js";import{a as Y,b as R,e as v,g as z}from"./chunk-XPOR4ANW.js";import{j as B,r as P,t as V}from"./chunk-M5NHCKZY.js";import{c as u}from"./chunk-PYOUUVMA.js";import{d as m,f as D,g as h,l as O,n as L,q as C,r as M,t as N}from"./chunk-H2FFMEH6.js";import{x as F}from"./chunk-TW5J4YO6.js";import{Eb as c,Jb as A,Kb as b,Lb as l,Yb as E,bb as n,ja as s,mb as y,mc as g,na as _,nc as I,rb as S,yb as a}from"./chunk-GTR6A7KK.js";import{a as d,b as f}from"./chunk-NLUW4JS2.js";function j(i,o){if(i&1&&l(0,"sz-ui-form-field-select",3),i&2){let T=E();a("source",T.laboratories)("config",T.transferOutLaboratorySelectConfig);}}var ne=(()=>{let o=class o extends ${constructor(){let r=s(Y);super(r),this.fb=s(M),this.mlabService=s(p),this.data=s(R),this.laboratories=null,this.laboratoryOptionValueFn=e=>e,this.testTypesFilters=[],this.laboratoryId=this.data,this.transferOutLaboratorySelectConfig={emptyOption:!0},this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,f(d({query:""},u.minimal()),{orderBy:["-isFavorite","testType.nameEn"]})),this.testTypeAutocompleteConfig={valueChangedFn:e=>{if(typeof e=="string")this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,f(d({query:e},u.minimal()),{orderBy:["-isFavorite","testType.nameEn"]}));else if(typeof e=="object"&&e)return!1;return!0;},optionSelectedFn:e=>{this.form.patchValue({transferOutLaboratoryId:null}),e.transferOutLaboratoryId?this.form.controls.transferOutLaboratoryId.addValidators(m.required):this.form.controls.transferOutLaboratoryId.removeValidators(m.required),e.transferOutEnabled&&(this.laboratories=this.mlabService.laboratories.getAll({orderBy:["name"],filters:F.create().notEqual("id",this.data).equalIf("id",e.transferOutLaboratoryId).any("testTypes.testTypeId",e.testTypeId).any("testTypes.enabled",!0).any("testTypes.transferInEnabled",!0).filters()}));},optionValueFn:e=>e,optionContentFn:e=>e.testType.nameEn,optionDisplayWithFn:e=>e.testType.nameEn};let t=this.fb;this.dialog=r,this.form=t.group({transferOutLaboratoryId:[null,[]],testType:t.control(null,[m.required,X()])});}isTranferOutEnabled(){return this.form.value?.testType?.transferOutEnabled;}submit(){this.IsValid()&&this.dialog.close({laboratoryTestType:this.form.value.testType,transferOutLaboratoryId:this.form.getRawValue().transferOutLaboratoryId});}};o.ɵfac=function(t){return new(t||o)();},o.ɵcmp=_({type:o,selectors:[["sz-medisy-laboratory-analysis-test-type-add"]],standalone:!0,features:[g([p]),y,I],decls:6,vars:8,consts:()=>{let r;r="Test Type";let t;return t="Transfer Out Laboratory",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testType","label",r,3,"source","config"],["formControlName","transferOutLaboratoryId","label",t,3,"source","config"],[3,"actions"]];},template:function(t,e){t&1&&(l(0,"sz-ui-dialog-header",0),A(1,"mat-dialog-content")(2,"form",1),l(3,"sz-ui-form-field-autocomplete",2),S(4,j,1,2,"sz-ui-form-field-select",3),b()(),l(5,"sz-ui-dialog-actions",4)),t&2&&(a("title",e.title)("subtitle",e.subtitle)("alert",e.alert()),n(2),a("formGroup",e.form),n(),a("source",e.testTypes)("config",e.testTypeAutocompleteConfig),n(),c(e.isTranferOutEnabled()?4:-1),n(),a("actions",e.actions));},dependencies:[N,O,D,h,L,C,z,v,H,G,q,V,P,B],encapsulation:2});let i=o;return i;})();export{ne as a};/**i18n:71c33448fc84035c6ee56f25f20b16a3c311d1f911de884d4bce9857c4574a16*/