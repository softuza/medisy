import{a as Me}from"./chunk-6GLV3TIW.js";import"./chunk-UPTRNMDP.js";import{a as Oe,c as Ae,e as Ce,g as h,j as Te,k as Ne,l}from"./chunk-74EPI7KQ.js";import"./chunk-FZ52L27Y.js";import"./chunk-LNJ27UIC.js";import{a as S}from"./chunk-L27V7QHK.js";import{e as fe,f as pe,g as Ee,i as Se,j as g,k as Re}from"./chunk-2OSRE3JT.js";import"./chunk-RYHQSWXO.js";import{b as P}from"./chunk-UU5EOSAA.js";import{d as de,f as V}from"./chunk-GIBK7SER.js";import{a as me,b as _e,d as T,e as ce,g as N}from"./chunk-FYGLJEE6.js";import{g as Z,h as ee,l as re,m as oe,v as ne,x as le,y as se,z as ue}from"./chunk-DOVDX2OK.js";import{Ca as ae,J as C,N as J,b as B,d as A,f as Y,g as w,j,k as q,m as X,p as x,q as W,s as k,t as H,ya as ie}from"./chunk-YEMGMLL5.js";import"./chunk-TXIZFIB6.js";import{Ea as K,Ga as Q,Ja as te}from"./chunk-XSLO4G5W.js";import{Ab as L,Ac as G,Fb as m,Gb as d,Hb as _,M,Rb as z,Tb as O,fa as b,gb as c,hb as n,hc as E,kc as $,l as D,oa as p,ob as F,pa as y,rb as U,vb as s}from"./chunk-WU7ZNUS7.js";var f=function(r){return r.Equal="Equal",r.GreaterThan="GreaterThan",r.GreaterThanOrEqual="GreaterThanOrEqual",r.LessThan="LessThan",r.LessThanOrEqual="LessThanOrEqual",r.NotEqual="NotEqual",r.RangeWithBoundaries="RangeWithBoundaries",r.RangeWithoutBoundaries="RangeWithoutBoundaries",r;}(f||{});function Ie(r,t){r&1&&(m(0,"div",8)(1,"mat-form-field",9)(2,"label"),_(3,"input",10),d()(),m(4,"mat-form-field",9)(5,"label"),_(6,"input",11),d()()());}function De(r,t){r&1&&(m(0,"mat-form-field",9)(1,"label"),_(2,"input",12),d()());}var ge=(()=>{let t=class t extends fe{constructor(o,e,i,a){super(i),this.mlabService=o,this.fb=e,this.dialog=i,this.data=a,this.referenceGroups=this.mlabService.referenceGroups.getAll({orderBy:["name"]}),this.comparisonOperators=Object.keys(f).map(u=>f[u]),this.form=e.group({description:[a.referenceValueRule?.description,[A.maxLength(4096)]],comparisonOperator:new j(a.referenceValueRule?.comparisonOperator??f.Equal,[A.required]),referenceGroupId:[a.referenceValueRule?.referenceGroupId,[A.required]],value:[a.referenceValueRule?.value,[]],start:[a.referenceValueRule?.start,[]],end:[a.referenceValueRule?.end,[]]});}isRange(){return this.form.value.comparisonOperator===f.RangeWithBoundaries||this.form.value.comparisonOperator===f.RangeWithoutBoundaries;}submit(){this.IsValid()&&(this.data.referenceValueRule?this.save(this.mlabService.referenceValues.rules.update(this.data.referenceValueId,this.data.referenceValueRule.id,this.form.value)):this.save(this.mlabService.referenceValues.rules.create(this.data.referenceValueId,this.form.value)));}};t.ɵfac=function(e){return new(e||t)(n(S),n(W),n(me),n(_e));},t.ɵcmp=p({type:t,selectors:[["medisy-laboratory-reference-value-rules-save"]],standalone:!0,features:[E([]),F,$],decls:9,vars:8,consts:()=>{let o;o="Reference Group";let e;e="Comparison Operator";let i;i="Description";let a;a="Start";let u;u="End";let I;return I="Value",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","referenceGroupId","label",o,3,"source"],["formControlName","comparisonOperator","label",e,3,"source","localizedValue"],["class","tw-flex md:tw-flex-row tw-flex-col md:tw-gap-4"],["class","tw-flex-1"],["formControlName","description","label",i],[3,"actions"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["autocomplete","off","formControlName","start","matInput","","placeholder",a],["autocomplete","off","formControlName","end","matInput","","placeholder",u],["autocomplete","off","formControlName","value","matInput","","placeholder",I]];},template:function(e,i){e&1&&(_(0,"sz-ui-dialog-header",0),m(1,"mat-dialog-content")(2,"form",1),_(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3),U(5,Ie,7,0,"div",4)(6,De,3,0,"mat-form-field",5),_(7,"sz-ui-form-field-textarea",6),d()(),_(8,"sz-ui-dialog-actions",7)),e&2&&(s("header",i.header),c(2),s("formGroup",i.form),c(),s("source",i.referenceGroups),c(),s("source",i.comparisonOperators)("localizedValue",!0),c(),L(5,i.isRange()?5:-1),c(),L(6,i.isRange()?-1:6),c(2),s("actions",i.actions));},dependencies:[H,q,B,Y,w,X,x,oe,re,Z,N,ce,ee,h,g,pe,Ee,ue,se,le],encapsulation:2});let r=t;return r;})();var he=(()=>{let t=class t{constructor(o,e,i,a){this.dialog=o,this.route=e,this.mlabService=i,this.locale=a,this.dataSource=new Ae(),this.referenceValue=this.route.snapshot.data.referenceValue,this.dataSource.fields.push(l.uuid("id"),l.uuid("referenceValueId"),l.uuid("referenceGroupId"),l.string("referenceGroup.name"),l.enum("comparisonOperator").setContentFormat(u=>ae(u.comparisonOperator)),l.number("value"),l.number("start"),l.number("end"),l.string("description"),l.date("createdAt",!1),l.date("updatedAt",!1),Oe.menu([V.edit(u=>this.openSaveComponent(u)),V.delete(u=>{this.openReferenceValueRuleDeleteComponent(u);})])),this.get();}openSaveComponent(o){this.dialog.open(ge,{data:{referenceValueId:this.referenceValue.id,referenceValueRule:o}}).afterClosed().pipe(M(1)).subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}openReferenceValueRuleDeleteComponent(o){this.dialog.open(Se,{data:Re.delete(this.mlabService.referenceValues.rules.delete(o.referenceValueId,o.id),o)}).afterClosed().pipe(M(1)).subscribe(e=>{this.dataSource.delete(e);});}get(){this.mlabService.referenceValues.rules.get(this.referenceValue.id,this.dataSource.buildRequest()).pipe(ie(this.dataSource.indicator),M(1)).subscribe(o=>{this.dataSource.set(o.items,o.count);});}};t.ɵfac=function(e){return new(e||t)(n(T),n(C),n(S),n(G));},t.ɵcmp=p({type:t,selectors:[["medisy-laboratory-reference-value-rules"]],features:[E([])],decls:5,vars:3,consts:()=>{let o;return o="Add",[[3,"dataSource","changed"],["mat-flat-button","","color","primary","start","",3,"click"],o,[3,"stateEnabled","dataSource","update"]];},template:function(e,i){e&1&&(m(0,"sz-ui-table-search-filter",0),O("changed",function(){return i.get();}),m(1,"button",1),O("click",function(){return i.openSaveComponent();}),m(2,"span"),z(3,2),d()()(),m(4,"sz-ui-table",3),O("update",function(){return i.get();}),d()),e&2&&(s("dataSource",i.dataSource),c(4),s("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[K,Te,Ce],encapsulation:2});let r=t;return r;})();var Le=(()=>{let t=class t{constructor(o,e){this.dialog=o,this.route=e,this.alert$=new D(),this.referenceValue=this.route.snapshot.data.referenceValue;}};t.ɵfac=function(e){return new(e||t)(n(T),n(C));},t.ɵcmp=p({type:t,selectors:[["medisy-laboratory-reference-value"]],features:[E([])],decls:2,vars:2,consts:[[3,"title","subtitle"]],template:function(e,i){e&1&&_(0,"sz-ui-header-info",0)(1,"medisy-laboratory-reference-value-rules"),e&2&&s("title",i.referenceValue.testType.name)("subtitle",i.referenceValue.description);},dependencies:[P,he],encapsulation:2});let r=t;return r;})();var Ve=[{path:"",component:Le}];var wt=(()=>{let t=class t{};t.ɵfac=function(e){return new(e||t)();},t.ɵmod=y({type:t}),t.ɵinj=b({providers:[S],imports:[k,J.forChild(Ve),N,h,de,te,Q,ne,Ne,Me,g,P]});let r=t;return r;})();export{wt as ReferenceValueModule};/**i18n:f1993a9d8de25a460a4edd4e25b48862b3dd863aec93a795c43b451741326090*/