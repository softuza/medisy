import{a as d}from"./chunk-IUKZROKA.js";import{b as ee}from"./chunk-Z6XMLOHW.js";import"./chunk-RPCR3JOP.js";import{a as x}from"./chunk-TBWCGZQE.js";import"./chunk-XSMQIFVS.js";import{d as oe,e as f,g as ie,i as re,j as ne}from"./chunk-LFBBKJHQ.js";import"./chunk-DJTCXLE6.js";import"./chunk-WR67YADW.js";import"./chunk-DNPEC467.js";import{c as k,g as H,h as Q,i as K,k as W,l as Y}from"./chunk-3VDM3QBA.js";import"./chunk-SH55UZR2.js";import{a as L,b as V,d as C,e as Z,g as G}from"./chunk-NXWHFD5J.js";import{o as q,p as J,s as X}from"./chunk-YE7OGPQO.js";import"./chunk-QPPKO7QS.js";import{b as U}from"./chunk-NHKTZSL7.js";import"./chunk-JDRER5OW.js";import"./chunk-VLFDLUKF.js";import{d as D,f as O,g as y,l as N,o as b,r as E,s as F,u as I}from"./chunk-SZ4JOIPB.js";import{b as z,c as v}from"./chunk-ZKT34U6O.js";import{a as te}from"./chunk-OAHNBXW3.js";import"./chunk-6KLEPFJV.js";import{c as $}from"./chunk-TROKCKRK.js";import"./chunk-I5YU2A2W.js";import{p as h,r as A,s as R,v as P,x as B}from"./chunk-OH3VJFHV.js";import"./chunk-KHQUVCMB.js";import"./chunk-O5U4UK7G.js";import{Ma as w}from"./chunk-IOFQXYPN.js";import{Cc as T,Ia as g,Jb as c,Kb as m,Lb as p,Wb as _,bb as s,ja as i,kb as j,mb as M,mc as S,na as l,nc as u,yb as n}from"./chunk-4TXFHTB5.js";import"./chunk-UD7IN7DC.js";var se=(()=>{let t=class t extends H{constructor(){super(i(L)),this.fb=i(F),this.data=i(V),this.cstnService=i(d),this.zones=this.cstnService.zones.getAll({orderBy:["name"],filterBehavior:P.Or,filters:B.create().equalIf("id",this.data?.projectZone?.zoneId).notAnyIf("projects.projectId",this.data?.projectId).filters()});let o=this.fb,e=this.data;this.form=o.group({zoneId:[e?.projectZone?.zoneId,[D.required]]});}submit(){this.IsValid()&&(this.data?.projectZone?this.save(this.cstnService.projects.zones.update(this.data.projectId,this.data.projectZone.id,this.form.value)):this.save(this.cstnService.projects.zones.create(this.data.projectId,this.form.value)));}};t.ɵfac=function(e){return new(e||t)();},t.ɵcmp=l({type:t,selectors:[["sz-constr-construction-projects-zones-save"]],standalone:!0,features:[S([]),M,u],decls:5,vars:6,consts:()=>{let o;return o="Zone",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","zoneId","label",o,3,"source"],[3,"actions"]];},template:function(e,r){e&1&&(p(0,"sz-ui-dialog-header",0),c(1,"mat-dialog-content")(2,"form",1),p(3,"sz-ui-form-field-select",2),m()(),p(4,"sz-ui-dialog-actions",3)),e&2&&(n("title",r.title)("subtitle",r.subtitle)("alert",r.alert()),s(2),n("formGroup",r.form),s(),n("source",r.zones),s(),n("actions",r.actions));},dependencies:[I,N,O,y,b,E,G,Z,q,Y,Q,K,X,J],encapsulation:2});let a=t;return a;})();var pe=(()=>{let t=class t{constructor(){this.route=i(h),this.router=i(A),this.dialog=i(C),this.locale=i(T),this.cstnService=i(d),this.project=g.required(),this.dataSource=new ie(["zone.name"]),this.card={header:{title:$.zones},menu:v.more([z.add(()=>this.openSaveComponent())])},this.dataSource.columnDefs.push(f.uuid("id"),f.string("zone.name"),f.date("createdAt").setVisible(!1),f.date("updatedAt").setVisible(!1),f.menu(v.more([z.delete(o=>this.openDeleteComponent(o))])));}ngOnInit(){this.get();}openSaveComponent(o){this.dialog.open(se,{data:{projectId:this.project().id,projectZone:o}}).afterClosed().subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}openDeleteComponent(o){this.dialog.open(W,{data:k.delete(this.cstnService.projects.zones.delete(this.project().id,o.id),o)}).afterClosed().subscribe(e=>{this.dataSource.delete(e);});}get(){this.cstnService.projects.zones.get(this.project().id,this.dataSource.getQuery()).pipe(re(this.dataSource.state)).subscribe(o=>{this.dataSource.set(o.items,o.count);});}};t.ɵfac=function(e){return new(e||t)();},t.ɵcmp=l({type:t,selectors:[["sz-constr-construction-project-zones"]],inputs:{project:[1,"project"]},standalone:!0,features:[S([d]),u],decls:2,vars:2,consts:[[3,"card"],["content","",3,"update","dataSource"]],template:function(e,r){e&1&&(c(0,"sz-ui-card",0)(1,"sz-ui-table",1),_("update",function(){return r.get();}),m()()),e&2&&(n("card",r.card),s(),n("dataSource",r.dataSource));},dependencies:[R,ne,oe,w,x],encapsulation:2});let a=t;return a;})();var ce=(()=>{let t=class t{constructor(){this.cstnService=i(d),this.route=i(h),this.dialog=i(C),this.project=this.route.snapshot.data.project,this.alert=j(void 0),this.appBarConfig={title:this.project.name,subtitle:this.project.description};}};t.ɵfac=function(e){return new(e||t)();},t.ɵcmp=l({type:t,selectors:[["sz-constr-construction-project"]],standalone:!0,features:[u],decls:6,vars:3,consts:[[3,"config"],[3,"alert"],[1,"tw-my-4"],[3,"project"]],template:function(e,r){e&1&&(p(0,"sz-ui-app-bar",0)(1,"sz-ui-alert",1),c(2,"div",2),p(3,"sz-constr-construction-project-map"),m(),c(4,"div",2),p(5,"sz-constr-construction-project-zones",3),m()),e&2&&(n("config",r.appBarConfig),s(),n("alert",r.alert()),s(4),n("project",r.project));},dependencies:[te,U,ee,pe],encapsulation:2});let a=t;return a;})();var Ye=[{path:"",component:ce}];export{Ye as default};/**i18n:3baa7a52fa2dfa3c4602a0f5c18b10b468e666f31530cd067c23c1079d9af4f3*/