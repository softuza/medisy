import{e as oe,f as ie,g as ne,i as re,j as se,k as ae}from"./chunk-VT3WYR67.js";import{g as B,s as X,t as q,v as H}from"./chunk-RQNRD2JQ.js";import{a as Se}from"./chunk-O4JAUULY.js";import{a as N}from"./chunk-ZJOQORU4.js";import"./chunk-3UYL57HA.js";import{a as J,b as K,d as Q,e as W,g as Z}from"./chunk-V6FPP55L.js";import"./chunk-U7VPIABE.js";import{c as _,f as p}from"./chunk-3VGQRMVI.js";import"./chunk-SIM3MWAY.js";import{b as O}from"./chunk-M3UESULM.js";import{a as v,b as me,c as pe,d as le,f as de,p as ce,q as ue}from"./chunk-PTJACGQS.js";import"./chunk-UNCYENX6.js";import{b as te}from"./chunk-VRISEVPV.js";import{d as g,f as A,g as D,h as F,l as R,m as L,n as $,o as U,p as j,s as h,t as k,v as V}from"./chunk-GJY7U5GZ.js";import"./chunk-3BVZ364G.js";import{a as x}from"./chunk-PIKBUH2I.js";import{a as ee}from"./chunk-QDC3ZTFW.js";import{I as Y,L as G,M as w}from"./chunk-NC2N2FCX.js";import{Ab as a,Bb as d,Cb as u,L as M,Mb as T,Pb as E,Wb as y,Xb as I,Zb as P,ac as S,eb as l,ec as b,fb as n,fc as z,ma as c,mb as C,pb as s}from"./chunk-3CXVAQY6.js";var _e=(()=>{let i=class i extends B{constructor(t,o){super(t),this.ngControl=t,this.typeI18nPipe=o,this.options=Object.keys(_).map(e=>_[e]),this.label="Document Type",this.optionContent=e=>this.typeI18nPipe.transform(e);}ngOnInit(){this.control=this.ngControl.control;}};i.ɵfac=function(o){return new(o||i)(n(A,10),n(p));},i.ɵcmp=c({type:i,selectors:[["medisy-form-field-document-type"]],standalone:!0,features:[P([p]),C,S],decls:1,vars:7,consts:[[3,"formControl","options","label","placeholder","emptyOption","multiple","szOptionContentFn"]],template:function(o,e){o&1&&u(0,"sz-ui-form-field-select",0),o&2&&s("formControl",e.control)("options",e.options)("label",e.label)("placeholder",e.placeholder)("emptyOption",e.emptyOption)("multiple",e.multiple)("szOptionContentFn",e.optionContent);},dependencies:[h,D,L,q],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]});let r=i;return r;})();var Me=(()=>{let i=class i extends oe{constructor(t,o,e,m){super(e),this.mpplService=t,this.fb=o,this.dialog=e,this.data=m,this.form=o.group({referenceNumber:[m.personDocument?.referenceNumber,[g.maxLength(128)]],documentType:[m.personDocument?.documentType??_.DriverLicense,[g.required]]});}submit(){this.IsValid()&&(this.data.personDocument?this.save(this.mpplService.persons.documents.update(this.data.personId,this.data.personDocument.id,this.form.value)):this.save(this.mpplService.persons.documents.create(this.data.personId,this.form.value)));}};i.ɵfac=function(o){return new(o||i)(n(N),n(j),n(J),n(K));},i.ɵcmp=c({type:i,selectors:[["medisy-people-person-documents-save"]],standalone:!0,features:[C,S],decls:6,vars:3,consts:()=>{let t;return t="Number",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","referenceNumber","placeholder",t],["formControlName","documentType"],[3,"actions"]];},template:function(o,e){o&1&&(u(0,"sz-ui-dialog-header",0),a(1,"mat-dialog-content")(2,"form",1),u(3,"sz-ui-form-field-input",2)(4,"medisy-form-field-document-type",3),d()(),u(5,"sz-ui-dialog-actions",4)),o&2&&(s("header",e.header),l(2),s("formGroup",e.form),l(3),s("actions",e.actions));},dependencies:[h,R,D,F,$,U,Z,W,H,X,se,ie,ne,_e],encapsulation:2});let r=i;return r;})();var at=(()=>{let i=class i{constructor(t,o,e,m){this.dialog=t,this.mpplService=o,this.route=e,this.typeI18nPipe=m,this.dataSource=new pe(x.paged()),this.person=this.route.snapshot.data.person,this.dataSource.addRows(le.default([me.text("referenceNumber","Number"),O.documentType(f=>this.typeI18nPipe.transform(f.documentType)),O.createdAt(),O.menu([v.edit(f=>this.openSaveComponent(f)),v.delete(f=>this.openPersonDocumentDeleteComponent(f))])])),this.get();}openSaveComponent(t){this.dialog.open(Me,{data:{personId:this.person.id,personDocument:t}}).afterClosed().pipe(M(1)).subscribe(e=>{this.dataSource.updateOrPushItem(e);});}openPersonDocumentDeleteComponent(t){this.dialog.open(re,{data:ae.delete(this.mpplService.persons.documents.delete(t.personId,t.id),t)}).afterClosed().pipe(M(1)).subscribe(e=>{this.dataSource.delete(e);});}get(){this.mpplService.persons.documents.get(this.person.id,this.dataSource.filterModel).pipe(te(this.dataSource.indicator),M(1)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};i.ɵfac=function(o){return new(o||i)(n(Q),n(N),n(Y),n(p));},i.ɵcmp=c({type:i,selectors:[["medisy-people-person-documents"]],standalone:!0,features:[P([p]),S],decls:12,vars:7,consts:()=>{let t;t="Documents";let o;return o="Add",[["start",""],[1,"sz-h5"],t,["routerLink","../",1,"tw-underline"],[3,"dataSource","search"],["title","","mat-flat-button","","color","primary","start","",3,"click"],o,[3,"paginationEnabled","stateEnabled","dataSource","update"]];},template:function(o,e){o&1&&(a(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),T(3,2),d(),a(4,"a",3),y(5),b(6,"personName"),d()()(),a(7,"sz-ui-table-filter",4),E("search",function(){return e.get();}),a(8,"button",5),E("click",function(){return e.openSaveComponent();}),a(9,"span"),T(10,6),d()()(),a(11,"sz-ui-table",7),E("update",function(){return e.get();}),d()),o&2&&(l(5),I(z(6,5,e.person)),l(2),s("dataSource",e.dataSource),l(4),s("paginationEnabled",!0)("stateEnabled",!0)("dataSource",e.dataSource));},dependencies:[w,G,V,k,ue,ce,de,ee,Se],encapsulation:2});let r=i;return r;})();export{at as PersonDocumentsComponent};/**i18n:c47ea6c8e33fa0c222c20e616e96e45afbcc3267e1e4f83fbed9283c01f003ba*/