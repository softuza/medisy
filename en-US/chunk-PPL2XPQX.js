import{b as Y}from"./chunk-HNOLKDYZ.js";import"./chunk-KZ44QNQJ.js";import"./chunk-MVJFA7NE.js";import{b as _}from"./chunk-FAMU6DML.js";import{a as f}from"./chunk-LIBMAFPO.js";import"./chunk-XNMNJW6N.js";import"./chunk-4TSHU2Y7.js";import"./chunk-AJJWUTSX.js";import{c as V,e as w,f as W}from"./chunk-AQKIVVKR.js";import"./chunk-FC7HUCFZ.js";import{a as r,b as q,d as H,f as Q,k as U,l as X}from"./chunk-UVMLXONO.js";import"./chunk-FTNCHYDX.js";import"./chunk-AFL3ADGU.js";import"./chunk-5SJEU3L2.js";import"./chunk-SSTCWC45.js";import"./chunk-KPDIYQJX.js";import"./chunk-S5RQD3UV.js";import{b as S}from"./chunk-Y3WZXQLW.js";import{g as C,i as G}from"./chunk-7FZ65DGP.js";import{d as O,g as B}from"./chunk-JWIKHMGN.js";import"./chunk-YAR5RJIL.js";import{c as F}from"./chunk-G2GEZ53K.js";import{b as A}from"./chunk-V4MON7RB.js";import"./chunk-UQBQJAT3.js";import{c as m,d as j}from"./chunk-5SU3SZXE.js";import"./chunk-QZ5JJMGJ.js";import"./chunk-AHBZKNY4.js";import"./chunk-JILNJK24.js";import{c as T,e as N}from"./chunk-ODPX7HSF.js";import"./chunk-RDTRWXEL.js";import{a as k,b as L,c as $}from"./chunk-UWX5FL2R.js";import{ha as R,ia as D}from"./chunk-BEBH5NKF.js";import{n as I}from"./chunk-DZUTJTGH.js";import{Ib as s,Jb as u,Kb as v,O as g,Ub as E,Wb as d,ha as b,hc as y,jb as h,kb as l,kc as z,qa as M,ra as P,yb as c}from"./chunk-E6PHWG6X.js";var x=(()=>{let t=class t{constructor(e,i,o,p){this.dialog=e,this.mpplService=i,this.personNamePipe=o,this.router=p,this.title=m.patients,this.dataSource=new H("-createdAt"),this.dataSource.columnDefs.push(r.uuid("id"),r.string("title.abbreviation").setVisibility(!1),r.string("title.name").setVisibility(!1).setName(m.title),r.hyperlink("names",a=>this.router.navigate([`/mppl/persons/${a.id}`])).setValueGetter(a=>o.transform(a)).setName(m.name).setStacked(r.string("sex").setValueGetter(a=>j(a.sex))),r.date("birthDate"),r.string("ssn").setName(m.ssn).setResponsive(!0),r.date("createdAt",!1),r.date("updatedAt",!1),q.menu([C.divider(),C.item(m.qr,G.qr,a=>this.openBarcodeWriterComponent(a))])),this.get();}openPersonCreateComponent(){this.dialog.open(Y).afterClosed().subscribe(e=>{e&&this.router.navigate([`/mppl/persons/${e.id}`]);});}openPersonScanComponent(){this.dialog.open(w).afterClosed().subscribe(e=>{if(e){let i=this.dataSource.filtration?.filters.find(o=>o.field==="ssn");i?i.value=e.ssn:this.dataSource.filtration?.filters.push({field:"ssn",op:A.InsensitiveContains,value:e.ssn}),this.get();}});}openBarcodeWriterComponent(e){this.dialog.open(W,{data:{type:V.QR_Code,msg:`personid.${e.id}`}}).afterClosed().subscribe({});}get(){this.mpplService.persons.get(this.dataSource.getQuery()).pipe(F(this.dataSource.indicator),g(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};t.ɵfac=function(i){return new(i||t)(l(O),l(f),l(_),l(T));},t.ɵcmp=M({type:t,selectors:[["sz-medisy-people-persons"]],features:[z([I,_])],decls:9,vars:4,consts:()=>{let e;return e="Add",[[3,"title"],[3,"dataSource","changed"],["mat-flat-button","","color","primary","start","",3,"click"],e,["end","","mat-icon-button","",3,"click"],[3,"stateEnabled","dataSource","update"]];},template:function(i,o){i&1&&(v(0,"sz-ui-header-info",0),s(1,"sz-ui-table-search-filter",1),d("changed",function(){return o.get();}),s(2,"button",2),d("click",function(){return o.openPersonCreateComponent();}),s(3,"span"),E(4,3),u()(),s(5,"button",4),d("click",function(){return o.openPersonScanComponent();}),s(6,"mat-icon"),y(7,"barcode"),u()()(),s(8,"sz-ui-table",5),d("update",function(){return o.get();}),u()),i&2&&(c("title",o.title),h(),c("dataSource",o.dataSource),h(7),c("stateEnabled",!0)("dataSource",o.dataSource));},dependencies:[k,L,U,Q,S,R],encapsulation:2});let n=t;return n;})();var Re=(()=>{let t=class t{};t.ɵfac=function(i){return new(i||t)();},t.ɵmod=P({type:t}),t.ɵinj=b({providers:[f],imports:[N.forChild([{path:"",component:x}]),B,$,X,S,D]});let n=t;return n;})();export{Re as PersonsModule};/**i18n:a974d0df197b1d44d5cb2cfc4faa9f46b5a2b49ffb6054814bf84ed24fe1a49d*/