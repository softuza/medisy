import{a as Le}from"./chunk-22Z62QTN.js";import{a as h}from"./chunk-5PNK3W45.js";import{a as L}from"./chunk-5XHGVF2U.js";import{a as k}from"./chunk-PEAEHABN.js";import{b as Z,c as p,e as Ae,f as ye,g as ee,h as he}from"./chunk-6NJMYEG5.js";import"./chunk-HXC6QJ4Y.js";import"./chunk-7CRVLPQQ.js";import"./chunk-IORBDA7O.js";import{b as q,f as j,g as H,h as J,j as K,k as W}from"./chunk-HJCF3HNF.js";import{a as m}from"./chunk-XQ6KMBLS.js";import"./chunk-4Y3DXTZY.js";import{a as B,b as U,d as y,e as G,g as X}from"./chunk-HESHWLJQ.js";import{a as ce,b as Te,c as fe,h as Oe,q as x,r as Me,s as Ne,u as Re}from"./chunk-3Y4CYIVY.js";import"./chunk-WPGASEZJ.js";import"./chunk-H6274ZKL.js";import{h as Se,i as ue}from"./chunk-KVXHYQSU.js";import{b as le,d as C,f as v,g as V,k as pe,l as P,m as _e,o as D,r as z,s as Y,u as F}from"./chunk-UR5GDBT7.js";import{b as E,c as Q}from"./chunk-CRJIWNDX.js";import{a as ge}from"./chunk-YBPPUSEE.js";import"./chunk-NQBOKACW.js";import"./chunk-FWKBPU5L.js";import{a as w,b as Ce}from"./chunk-YJ25L3AZ.js";import"./chunk-NHB37XS6.js";import{p as A,r as $,s as de,x as me}from"./chunk-TN5XOKTF.js";import"./chunk-OFLJSVNS.js";import"./chunk-FGEQFRED.js";import{Ma as Ee}from"./chunk-75V32KEJ.js";import{Eb as R,Ia as re,Jb as _,Kb as d,Lb as l,Wb as b,Yb as g,bb as s,gc as ae,ic as se,ja as r,mb as I,mc as T,na as S,nc as u,rb as N,yb as a}from"./chunk-JPONW3XL.js";import"./chunk-RXNHEMMO.js";function $e(n,i){if(n&1&&l(0,"sz-ui-form-field-select",6),n&2){let f=g();a("source",f.testTypeResultOptions);}}function Be(n,i){n&1&&(_(0,"div",9)(1,"mat-form-field",10)(2,"label"),l(3,"input",11),d()(),_(4,"mat-form-field",10)(5,"label"),l(6,"input",12),d()()());}function Ue(n,i){n&1&&(_(0,"mat-form-field",10)(1,"label"),l(2,"input",13),d()());}function Ge(n,i){if(n&1&&N(0,Be,7,0,"div",9)(1,Ue,3,0,"mat-form-field",10),n&2){let f=g();R(f.isRange()?0:1);}}var Ie=(()=>{let i=class i extends j{constructor(){let e=r(B);super(e),this.mlabService=r(m),this.fb=r(Y),this.data=r(U),this.units=[],this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"]}),this.unitSelectConfig={autoSelect:!0},this.referenceGroups=this.mlabService.referenceGroups.getAll({orderBy:["nameEn"]}),this.testTypeResultOptions=[],this.comparisonOperators=Object.keys(h).map(c=>h[c]),this.isQuantitative=!1;let o=this.fb;this.dialog=e;let t=this.data;console.log(t),this.form=o.group({description:[t.referenceValue?.description,[C.maxLength(4096)]],testTypeId:[t.testType.id,[C.required]],unitId:[t.referenceValue?.unitId,[]],comparisonOperator:new pe(t.referenceValue?.comparisonOperator??h.Range,[C.required]),referenceGroupId:[t.referenceValue?.referenceGroupId,[C.required]],value:[t.referenceValue?.value,[]],start:o.control(t.referenceValue?.start,[]),end:o.control(t.referenceValue?.end,[]),testTypeResultOptionId:[t.referenceValue?.testTypeResultOptionId,[]]}),this.testTypeSelected(t.testType);}testTypeSelected(e){e.unitId&&e.unit?this.getUnits(e.unit):this.units=[],this.testTypeResultOptions=[],e.testResultType===L.Qualitative&&this.mlabService.testTypes.resultOptions.getAllItems(e.id,{orderBy:["nameEn"]}).pipe(Oe(this.indicator)).subscribe(o=>{o&&(this.testTypeResultOptions=o);}),this.isQuantitative=e.testResultType===L.Quantitative;}getUnits(e){this.units=[e],this.form.patchValue({unitId:e?.id}),this.mlabService.unitConverters.getAllItems({filters:me.create().equal("toUnitId",e.id).filters()}).subscribe(o=>{this.units.push(...o.map(t=>t.fromUnit));});}isRange(){return this.form.value.comparisonOperator===h.Range;}submit(){this.IsValid()&&(this.data.referenceValue?this.save(this.mlabService.referenceValues.update(this.data.referenceValue.id,this.form.value)):this.save(this.mlabService.referenceValues.create(this.form.value)));}};i.ɵfac=function(o){return new(o||i)();},i.ɵcmp=S({type:i,selectors:[["sz-medisy-laboratory-reference-values-save"]],standalone:!0,features:[T([m]),I,u],decls:11,vars:11,consts:()=>{let e;e="Reference Group";let o;o="Unit";let t;t="Comparison Operator";let c;c="Value";let M;M="Description";let oe;oe="Start";let ie;ie="End";let ne;return ne="Value",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","referenceGroupId","label",e,3,"source"],[1,"sz-form-row"],["formControlName","unitId","label",o,3,"source","config"],["formControlName","comparisonOperator","label",t,3,"source","localizedValue"],["formControlName","testTypeResultOptionId","label",c,3,"source"],["formControlName","description","label",M],[3,"actions"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["autocomplete","off","formControlName","start","matInput","","placeholder",oe,"type","number"],["autocomplete","off","formControlName","end","matInput","","placeholder",ie,"type","number"],["autocomplete","off","formControlName","value","matInput","","placeholder",ne]];},template:function(o,t){o&1&&(l(0,"sz-ui-dialog-header",0),_(1,"mat-dialog-content")(2,"form",1),l(3,"sz-ui-form-field-select",2),_(4,"div",3),l(5,"sz-ui-form-field-select",4)(6,"sz-ui-form-field-select",5),d(),N(7,$e,1,1,"sz-ui-form-field-select",6)(8,Ge,2,1),l(9,"sz-ui-form-field-textarea",7),d()(),l(10,"sz-ui-dialog-actions",8)),o&2&&(a("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),s(2),a("formGroup",t.form),s(),a("source",t.referenceGroups),s(2),a("source",t.units)("config",t.unitSelectConfig),s(),a("source",t.comparisonOperators)("localizedValue",!0),s(),R(t.isQuantitative?8:7),s(3),a("actions",t.actions));},dependencies:[F,P,le,_e,v,V,D,z,X,G,ue,Se,x,W,H,J,Te,ce,Re,Ne,Me],encapsulation:2});let n=i;return n;})();var be=(()=>{let i=class i{constructor(){this.dialog=r(y),this.mlabService=r(m),this.router=r($),this.route=r(A),this.testType=this.route.snapshot.data.testType,this.dataSource=new ye(),this.card={header:{title:w.reference_values},menu:Q.more([E.add(this.openSaveComponent.bind(this))])},this.dataSource.columnDefs.push(p.uuid("id"),p.hyperlink("referenceGroup.nameEn").setStacked(p.string("description").setValueClassFontSmall()),p.string("unit").setValueGetter(e=>e.unit?.symbol),p.enum("comparisonOperator").setValueGetter(e=>Ce(e.comparisonOperator)),p.number("_value").setValueGetter(e=>e.testTypeResultOption?e.testTypeResultOption.nameEn:e.value!==null?e.value:`${e.start} - ${e.end}`).setHeaderSortable(!1),p.date("createdAt").setVisible(!1),p.date("updatedAt").setVisible(!1),p.menu([E.edit(this.openSaveComponent.bind(this)),E.divider(),E.delete(this.openReferenceValueDeleteComponent.bind(this))])),this.dataSource.filtration?.equal("testTypeId",this.testType.id),this.get();}openSaveComponent(e){this.dialog.open(Ie,{data:{testType:this.testType,referenceValue:e}}).afterClosed().subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openReferenceValueDeleteComponent(e){this.dialog.open(K,{data:q.delete(this.mlabService.referenceValues.delete(e.id),e)}).afterClosed().subscribe(o=>{this.dataSource.delete(o);});}get(){this.mlabService.referenceValues.get(this.dataSource.getQuery()).pipe(ee(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(o){return new(o||i)();},i.ɵcmp=S({type:i,selectors:[["sz-medisy-laboratory-test-type-reference-values"]],standalone:!0,features:[T([m]),u],decls:2,vars:2,consts:[[3,"card"],["content","",3,"update","dataSource"]],template:function(o,t){o&1&&(_(0,"sz-ui-card",0)(1,"sz-ui-table",1),b("update",function(){return t.get();}),d()()),o&2&&(a("card",t.card),s(),a("dataSource",t.dataSource));},dependencies:[Z,k],encapsulation:2});let n=i;return n;})();var ve=(()=>{let i=class i extends j{constructor(){let e=r(B);super(e),this.mlabService=r(m),this.fb=r(Y),this.data=r(U);let o=this.fb;this.dialog=e;let t=this.data;this.form=o.group({nameEn:[t.testTypeResultOption?.nameEn,[C.required]],description:[t.testTypeResultOption?.description,[]],abbreviation:[t.testTypeResultOption?.abbreviation,[]],nameAr:[t.testTypeResultOption?.nameAr,[]]});}submit(){this.IsValid()&&(this.data.testTypeResultOption?this.save(this.mlabService.testTypes.resultOptions.update(this.data.testTypeId,this.data.testTypeResultOption?.id,this.form.value)):this.save(this.mlabService.testTypes.resultOptions.create(this.data.testTypeId,this.form.value)));}};i.ɵfac=function(o){return new(o||i)();},i.ɵcmp=S({type:i,selectors:[["sz-medisy-laboratory-test-type-result-options-save"]],standalone:!0,features:[T([m]),I,u],decls:8,vars:5,consts:()=>{let e;e="English Name";let o;o="Arabic Name";let t;t="Description";let c;return c="Abbreviation",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","nameEn","label",e],["formControlName","nameAr","label",o],["formControlName","description","label",t],["formControlName","abbreviation","label",c],[3,"actions"]];},template:function(o,t){o&1&&(l(0,"sz-ui-dialog-header",0),_(1,"mat-dialog-content")(2,"form",1),l(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-input",3)(5,"sz-ui-form-field-input",4)(6,"sz-ui-form-field-input",5),d()(),l(7,"sz-ui-dialog-actions",6)),o&2&&(a("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),s(2),a("formGroup",t.form),s(5),a("actions",t.actions));},dependencies:[F,P,v,V,D,z,X,G,x,W,H,J,fe],encapsulation:2});let n=i;return n;})();var Ve=(()=>{let i=class i{constructor(){this.dialog=r(y),this.mlabService=r(m),this.route=r(A),this.dataSource=new Ae(),this.testTypeId=re.required(),this.card={header:{title:w.result_options},menu:Q.more([E.add(()=>this.openSaveComponent())])},this.dataSource.columnDefs.push(p.uuid("id"),p.string("nameEn").setStacked(p.string("nameAr").setValueClassFontSmall()),p.string("abbreviation"),p.date("createdAt").setVisible(!1),p.date("updatedAt").setVisible(!1),p.menu([E.edit(this.openSaveComponent.bind(this)),E.divider(),E.delete(this.openTestTypeResultOptionDeleteComponent.bind(this))]));}ngOnInit(){this.get();}openSaveComponent(e){this.dialog.open(ve,{data:{testTypeId:this.testTypeId(),testTypeResultOption:e}}).afterClosed().subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openTestTypeResultOptionDeleteComponent(e){this.dialog.open(K,{data:q.delete(this.mlabService.testTypes.resultOptions.delete(e.testTypeId,e.id),e)}).afterClosed().subscribe(o=>{this.dataSource.delete(o);});}updateItem(e){this.mlabService.testTypes.resultOptions.update(e.testTypeId,e.id,e).subscribe(o=>{this.dataSource.update(o);});}get(){this.mlabService.testTypes.resultOptions.get(this.testTypeId(),this.dataSource.getQuery()).pipe(ee(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(o){return new(o||i)();},i.ɵcmp=S({type:i,selectors:[["sz-medisy-laboratory-test-type-result-options"]],inputs:{testTypeId:[1,"testTypeId"]},standalone:!0,features:[u],decls:2,vars:2,consts:[[3,"card"],["content","",3,"update","dataSource"]],template:function(o,t){o&1&&(_(0,"sz-ui-card",0)(1,"sz-ui-table",1),b("update",function(){return t.get();}),d()()),o&2&&(a("card",t.card),s(),a("dataSource",t.dataSource));},dependencies:[de,Ee,he,Z,k],encapsulation:2});let n=i;return n;})();function Xe(n,i){if(n&1&&(_(0,"p"),ae(1),d()),n&2){let f=g();s(),se(" ",f.testType.description,`
`);}}function we(n,i){if(n&1&&l(0,"sz-medisy-laboratory-test-type-result-options",2),n&2){let f=g();a("testTypeId",f.testType.id);}}var Pe=(()=>{let i=class i{constructor(){this.dialog=r(y),this.mlabService=r(m),this.route=r(A),this.router=r($),this.testType=this.route.snapshot.data.testType,this.appBarConfig={title:this.testType.nameEn,backEnabled:!0},this.isQualitative=this.testType.testResultType===L.Qualitative;}};i.ɵfac=function(o){return new(o||i)();},i.ɵcmp=S({type:i,selectors:[["sz-medisy-laboratory-test-type"]],standalone:!0,features:[T([]),u],decls:6,vars:4,consts:[[3,"config"],[1,"tw-grid","lg:tw-grid-cols-2","tw-gap-2","tw-mb-2"],[3,"testTypeId"]],template:function(o,t){o&1&&(l(0,"sz-ui-app-bar",0),N(1,Xe,2,1,"p"),_(2,"div",1),l(3,"sz-medisy-laboratory-test-type-specimen-types",2),N(4,we,1,1,"sz-medisy-laboratory-test-type-result-options",2),l(5,"sz-medisy-laboratory-test-type-reference-values"),d()),o&2&&(a("config",t.appBarConfig),s(),R(t.testType.description?1:-1),s(2),a("testTypeId",t.testType.id),s(),R(t.isQualitative?4:-1));},dependencies:[ge,Le,Ve,be],encapsulation:2});let n=i;return n;})();var no=[{path:"",component:Pe},{path:"specimen-types",loadComponent:()=>import("./chunk-3GDCMYFZ.js").then(n=>n.TestTypeSpecimenTypesComponent)}];export{no as default};/**i18n:490604af3307a4e77c84ca293db1067566ffe2bc083ef2e1368fbd6dc8c217fd*/