import{a as M}from"./chunk-OTI3BCEF.js";import{a as Ae,b as ge,c as he}from"./chunk-UYAXIF45.js";import{a as I,b as fe,d as ue,f as pe,k as Ee,l as ce}from"./chunk-N7D2VN73.js";import"./chunk-LFSFDEVW.js";import"./chunk-TGYBWL76.js";import{f as Ne,g as Oe,h as Ie,j as Me,k as de,l as Ce}from"./chunk-U5UKCG7J.js";import"./chunk-PY52CIOW.js";import"./chunk-VZFPSQUV.js";import{b as h}from"./chunk-QPFPTRON.js";import{j as L}from"./chunk-ZH7ZWFZL.js";import{a as ee,b as oe,d as ie,e as te,g}from"./chunk-BZQL4EOY.js";import{l as Se,p as le,q as me,r as Te}from"./chunk-BX36AIQ4.js";import{c as ae}from"./chunk-L76KK37M.js";import"./chunk-LXF2HH7Z.js";import"./chunk-JPOFBM3O.js";import{c as se}from"./chunk-EYNTFM7E.js";import{i as ne}from"./chunk-S4TKY4YA.js";import{d as S,f as q,g as k,k as w,m as H,p as Q,q as J,t as K}from"./chunk-LKKWQT5S.js";import"./chunk-6XVULPHD.js";import{c as W,e as Y}from"./chunk-NFMEHFZL.js";import"./chunk-CIDXYEN5.js";import{a as re,c as _e}from"./chunk-MMSLTTDI.js";import{ia as Z}from"./chunk-37WG7HQL.js";import"./chunk-KA2LEAJN.js";import{Cb as p,Hb as s,Ib as O,Jb as N,O as f,Tb as j,Vb as E,Xb as c,g as D,ha as v,ib as m,jb as T,jc as A,mc as x,qa as u,qb as U,ra as B,tb as X,xb as a}from"./chunk-CP3NWJHY.js";var l=function(i){return i.Email="Email",i.Sms="Sms",i.Push="Push",i;}(l||{});function be(i,n){if(i&1&&(s(0,"mat-tab",5),N(1,"sz-ui-form-field-input",9)(2,"sz-ui-form-field-input",10)(3,"sz-ui-form-field-input",11)(4,"sz-ui-form-field-textarea",12),O()),i&2){let d=c();a("formGroup",d.formEmail);}}function Pe(i,n){if(i&1&&(s(0,"mat-tab",6),N(1,"sz-ui-form-field-input",13)(2,"sz-ui-form-field-textarea",14),O()),i&2){let d=c();a("formGroup",d.formSms);}}function Re(i,n){if(i&1&&(s(0,"mat-tab",7),N(1,"sz-ui-form-field-input",15)(2,"sz-ui-form-field-textarea",16),O()),i&2){let d=c();a("formGroup",d.formPush);}}var Fe=(()=>{let n=class n extends Ne{constructor(e,o,t,r){super(t),this.sntiService=e,this.fb=o,this.dialog=t,this.data=r,this.notificationType=l,this.subscriptions=new D(),this.notificationTypes=Object.keys(l).map(C=>l[C]),this.formEmail=o.group({subject:[r?.email?.subject,[S.required]],replyToEmail:[r?.email?.replyToEmail,[S.email]],replyToName:[r?.email?.replyToName,[]],body:[r?.email?.body,[S.required]]}),this.formSms=o.group({originator:[r?.sms?.originator,[S.required]],body:[r?.sms?.body,[S.required]]}),this.formPush=o.group({title:[r?.push?.title,[S.required]],body:[r?.push?.body,[S.required]]}),this.form=o.group({name:[r?.name,[S.required]],description:[r?.description,[S.maxLength(4096)]],types:[r?.types??[],[S.required]]}),this.subscribeChanges();}ngOnDestroy(){this.subscriptions.unsubscribe();}subscribeChanges(){this.subscriptions.add(this.form.controls.types.valueChanges.subscribe(e=>{this.form.contains("email")?e?.includes(l.Email)||this.form.removeControl("email"):e?.includes(l.Email)&&this.form.addControl("email",this.formEmail),this.form.contains("sms")?e?.includes(l.Sms)||this.form.removeControl("sms"):e?.includes(l.Sms)&&this.form.addControl("sms",this.formSms),this.form.contains("push")?e?.includes(l.Push)||this.form.removeControl("push"):e?.includes(l.Push)&&this.form.addControl("push",this.formPush);}));}hasChannelType(e){return this.form.value.types?.includes(e);}submit(){this.IsValid()&&(this.data?this.save(this.sntiService.notifications.update(this.data.id,this.form.value)):this.save(this.sntiService.notifications.create(this.form.value)));}};n.ɵfac=function(o){return new(o||n)(T(M),T(J),T(ee),T(oe));},n.ɵcmp=u({type:n,selectors:[["sz-mgmt-notification-ntofication-save"]],standalone:!0,features:[A([]),U,x],decls:11,vars:9,consts:()=>{let e;e="Name";let o;o="Description";let t;t="Types";let r;r="Email";let C;C="SMS";let F;F="Push";let y;y="Subject";let $;$="Email";let G;G="Name";let b;b="Body";let P;P="Originator";let R;R="Body";let z;z="Title";let V;return V="Body",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",o],["formControlName","types","label",t,3,"source","localizedValue","multiple"],["label",r,3,"formGroup"],["label",C,3,"formGroup"],["label",F,3,"formGroup"],[3,"actions"],["formControlName","subject","label",y],["formControlName","replyToEmail","label",$],["formControlName","replyToName","label",G],["formControlName","body","label",b],["formControlName","originator","label",P],["formControlName","body","label",R],["formControlName","title","label",z],["formControlName","body","label",V]];},template:function(o,t){o&1&&(N(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),N(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"sz-ui-form-field-select",4),s(6,"mat-tab-group"),X(7,be,5,1,"mat-tab",5)(8,Pe,3,1,"mat-tab",6)(9,Re,3,1,"mat-tab",7),O()()(),N(10,"sz-ui-dialog-actions",8)),o&2&&(a("header",t.header),m(2),a("formGroup",t.form),m(3),a("source",t.notificationTypes)("localizedValue",!0)("multiple",!0),m(2),p(7,t.hasChannelType(t.notificationType.Email)?7:-1),m(),p(8,t.hasChannelType(t.notificationType.Sms)?8:-1),m(),p(9,t.hasChannelType(t.notificationType.Push)?9:-1),m(),a("actions",t.actions));},dependencies:[K,w,q,k,H,Q,g,te,ne,he,Ae,ge,de,Oe,Ie,Te,Se,me,le],encapsulation:2});let i=n;return i;})();var ye=(()=>{let n=class n{constructor(e,o,t){this.dialog=e,this.sntiService=o,this.router=t,this.title=se.notifications,this.dataSource=new ue(),this.dataSource.columnDefs.push(I.uuid("id"),I.hyperlink("name",r=>this.router.navigate([`/mlab/notification/${r.id}`])),I.string("description"),I.string("types"),I.date("createdAt",!1),I.date("updatedAt",!1),fe.menu([L.edit(r=>this.openSaveComponent(r)),L.delete(r=>this.openNotificationDeleteComponent(r))])),this.get();}openSaveComponent(e){this.dialog.open(Fe,{data:e}).afterClosed().pipe(f(1)).subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openNotificationDeleteComponent(e){this.dialog.open(Me,{data:Ce.delete(this.sntiService.notifications.delete(e.id),e)}).afterClosed().pipe(f(1)).subscribe(o=>{this.dataSource.delete(o);});}get(){this.sntiService.notifications.get(this.dataSource.getQuery()).pipe(ae(this.dataSource.indicator),f(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};n.ɵfac=function(o){return new(o||n)(T(ie),T(M),T(W));},n.ɵcmp=u({type:n,selectors:[["sz-mgmt-notification-notifications"]],features:[A([])],decls:6,vars:4,consts:()=>{let e;return e="Add",[[3,"title"],[3,"dataSource","changed"],["mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(o,t){o&1&&(N(0,"sz-ui-header-info",0),s(1,"sz-ui-table-search-filter",1),E("changed",function(){return t.get();}),s(2,"button",2),E("click",function(){return t.openSaveComponent();}),s(3,"span"),j(4,3),O()()(),s(5,"sz-ui-table",4),E("update",function(){return t.get();}),O()),o&2&&(a("title",t.title),m(),a("dataSource",t.dataSource),m(4),a("stateEnabled",!0)("dataSource",t.dataSource));},dependencies:[re,Ee,pe,h],encapsulation:2});let i=n;return i;})();var Lo=(()=>{let n=class n{};n.ɵfac=function(o){return new(o||n)();},n.ɵmod=B({type:n}),n.ɵinj=v({providers:[M],imports:[Y.forChild([{path:"",component:ye}]),g,_e,ce,h,Z]});let i=n;return i;})();export{Lo as NotificationsModule};/**i18n:a4535b3079110d8df5f5c221d1d51c34dbcd8c94b76f3a35f790ba996d6c1a07*/