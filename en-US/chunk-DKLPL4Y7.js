import{a as M}from"./chunk-IFWIUAXQ.js";import{a as ce,b as Ae,c as ge}from"./chunk-FU7H7IQB.js";import{a as I,b as de,d as fe,f as ue,i as Ee,j as pe}from"./chunk-7U2WIWHF.js";import"./chunk-IDRLCJEK.js";import"./chunk-6G3NMOEL.js";import"./chunk-RZHQ5QL7.js";import{e as Te,f as Ne,g as Oe,i as Ie,j as Me,k as Ce}from"./chunk-WN2NFEA2.js";import"./chunk-6FUK3GWV.js";import{b as g}from"./chunk-XCAJ3ZHI.js";import{h}from"./chunk-Q5LDCOCY.js";import{a as Z,b as ee,d as oe,e as ie,g as A}from"./chunk-IAMBMKDI.js";import"./chunk-LGJQHWSD.js";import{c as _e,q as le,s as Se,t as me}from"./chunk-3ZKUNSZU.js";import{c as se}from"./chunk-KVZ22XWW.js";import"./chunk-PZABDFIU.js";import"./chunk-K44WW3SG.js";import{c as ae}from"./chunk-LMCANXRL.js";import{i as te}from"./chunk-AIP5TNUP.js";import{d as l,f as x,g as q,k,m as w,p as H,q as Q,t as J}from"./chunk-KAOE4CKM.js";import"./chunk-3K5ERU5F.js";import{c as K,e as W}from"./chunk-4YTU7KIA.js";import"./chunk-5S3D3WJX.js";import{ha as Y,ia as ne,ka as re}from"./chunk-WG6MZMNK.js";import"./chunk-6DPHD5PI.js";import{Db as s,Ib as u,Nb as a,Ob as O,Pb as N,Zb as X,_b as E,ac as p,g as V,hb as m,ib as T,ka as D,pc as c,qc as j,ua as f,ub as B,va as v,zb as U}from"./chunk-WLX3OMWV.js";var S=function(t){return t.Email="Email",t.Sms="Sms",t.Push="Push",t;}(S||{});function $e(t,n){if(t&1&&(a(0,"mat-tab",5),N(1,"sz-ui-form-field-input",9)(2,"sz-ui-form-field-input",10)(3,"sz-ui-form-field-input",11)(4,"sz-ui-form-field-textarea",12),O()),t&2){let C=p();s("formGroup",C.formEmail);}}function Ge(t,n){if(t&1&&(a(0,"mat-tab",6),N(1,"sz-ui-form-field-input",13)(2,"sz-ui-form-field-textarea",14),O()),t&2){let C=p();s("formGroup",C.formSms);}}function Pe(t,n){if(t&1&&(a(0,"mat-tab",7),N(1,"sz-ui-form-field-input",15)(2,"sz-ui-form-field-textarea",16),O()),t&2){let C=p();s("formGroup",C.formPush);}}var Le=(()=>{let n=class n extends Te{constructor(e,o,i,r){super(i),this.sntiService=e,this.fb=o,this.dialog=i,this.data=r,this.notificationType=S,this.subscriptions=new V(),this.notificationTypes=Object.keys(S).map(d=>S[d]),this.formEmail=o.group({subject:[r?.email?.subject,[l.required]],replyToEmail:[r?.email?.replyToEmail,[l.email]],replyToName:[r?.email?.replyToName,[]],body:[r?.email?.body,[l.required]]}),this.formSms=o.group({originator:[r?.sms?.originator,[l.required]],body:[r?.sms?.body,[l.required]]}),this.formPush=o.group({title:[r?.push?.title,[l.required]],body:[r?.push?.body,[l.required]]}),this.form=o.group({name:[r?.name,[l.required]],description:[r?.description,[l.maxLength(4096)]],types:[r?.types??[],[l.required]]}),this.subscribeChanges();}ngOnDestroy(){this.subscriptions.unsubscribe();}subscribeChanges(){this.subscriptions.add(this.form.controls.types.valueChanges.subscribe(e=>{this.form.contains("email")?e?.includes(S.Email)||this.form.removeControl("email"):e?.includes(S.Email)&&this.form.addControl("email",this.formEmail),this.form.contains("sms")?e?.includes(S.Sms)||this.form.removeControl("sms"):e?.includes(S.Sms)&&this.form.addControl("sms",this.formSms),this.form.contains("push")?e?.includes(S.Push)||this.form.removeControl("push"):e?.includes(S.Push)&&this.form.addControl("push",this.formPush);}));}hasChannelType(e){return this.form.value.types?.includes(e);}submit(){this.IsValid()&&(this.data?this.save(this.sntiService.notifications.update(this.data.id,this.form.value)):this.save(this.sntiService.notifications.create(this.form.value)));}};n.ɵfac=function(o){return new(o||n)(T(M),T(Q),T(Z),T(ee));},n.ɵcmp=f({type:n,selectors:[["sz-mgmt-notification-ntofication-save"]],standalone:!0,features:[c([]),B,j],decls:11,vars:11,consts:()=>{let e;e="Name";let o;o="Description";let i;i="Types";let r;r="Email";let d;d="SMS";let L;L="Push";let F;F="Subject";let y;y="Email";let b;b="Name";let $;$="Body";let G;G="Originator";let P;P="Body";let R;R="Title";let z;return z="Body",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",o],["formControlName","types","label",i,3,"source","localizedValue","multiple"],["label",r,3,"formGroup"],["label",d,3,"formGroup"],["label",L,3,"formGroup"],[3,"actions"],["formControlName","subject","label",F],["formControlName","replyToEmail","label",y],["formControlName","replyToName","label",b],["formControlName","body","label",$],["formControlName","originator","label",G],["formControlName","body","label",P],["formControlName","title","label",R],["formControlName","body","label",z]];},template:function(o,i){o&1&&(N(0,"sz-ui-dialog-header",0),a(1,"mat-dialog-content")(2,"form",1),N(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"sz-ui-form-field-select",4),a(6,"mat-tab-group"),U(7,$e,5,1,"mat-tab",5)(8,Ge,3,1,"mat-tab",6)(9,Pe,3,1,"mat-tab",7),O()()(),N(10,"sz-ui-dialog-actions",8)),o&2&&(s("title",i.title)("subtitle",i.subtitle)("alert",i.alert()),m(2),s("formGroup",i.form),m(3),s("source",i.notificationTypes)("localizedValue",!0)("multiple",!0),m(2),u(7,i.hasChannelType(i.notificationType.Email)?7:-1),m(),u(8,i.hasChannelType(i.notificationType.Sms)?8:-1),m(),u(9,i.hasChannelType(i.notificationType.Push)?9:-1),m(),s("actions",i.actions));},dependencies:[J,k,x,q,w,H,A,ie,te,ge,ce,Ae,Me,Ne,Oe,me,_e,Se,le],encapsulation:2});let t=n;return t;})();var Fe=(()=>{let n=class n{constructor(e,o,i){this.dialog=e,this.sntiService=o,this.router=i,this.title=ae.notifications,this.dataSource=new fe(),this.dataSource.columnDefs.push(I.uuid("id"),I.hyperlink("name",r=>`/mlab/notification/${r.id}`).setStacked(I.string("description").setValueClassFontSmall()),I.string("types"),I.date("createdAt").setVisible(!1),I.date("updatedAt").setVisible(!1),de.menu([h.edit(r=>this.openSaveComponent(r)),h.delete(r=>this.openNotificationDeleteComponent(r))])),this.get();}openSaveComponent(e){this.dialog.open(Le,{data:e}).afterClosed().subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openNotificationDeleteComponent(e){this.dialog.open(Ie,{data:Ce.delete(this.sntiService.notifications.delete(e.id),e)}).afterClosed().subscribe(o=>{this.dataSource.delete(o);});}get(){this.sntiService.notifications.get(this.dataSource.getQuery()).pipe(se(this.dataSource.indicator)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};n.ɵfac=function(o){return new(o||n)(T(oe),T(M),T(K));},n.ɵcmp=f({type:n,selectors:[["sz-mgmt-notification-notifications"]],features:[c([])],decls:6,vars:4,consts:()=>{let e;return e="Add",[e,[3,"title"],[3,"changed","dataSource"],["mat-flat-button","","color","primary","start","",3,"click"],[3,"update","stateEnabled","dataSource"]];},template:function(o,i){o&1&&(N(0,"sz-ui-header-info",1),a(1,"sz-ui-table-search-filter",2),E("changed",function(){return i.get();}),a(2,"button",3),E("click",function(){return i.openSaveComponent();}),a(3,"span"),X(4,0),O()()(),a(5,"sz-ui-table",4),E("update",function(){return i.get();}),O()),o&2&&(s("title",i.title),m(),s("dataSource",i.dataSource),m(4),s("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[ne,Ee,ue,g],encapsulation:2});let t=n;return t;})();var go=(()=>{let n=class n{};n.ɵfac=function(o){return new(o||n)();},n.ɵmod=v({type:n}),n.ɵinj=D({providers:[M],imports:[W.forChild([{path:"",component:Fe}]),A,re,pe,g,Y]});let t=n;return t;})();export{go as NotificationsModule};/**i18n:a84518dfaf5206df012bb98d831270fba229ecfbff1c9dff1ac7013a5ea5bd1b*/