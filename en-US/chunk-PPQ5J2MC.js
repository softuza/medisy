import{v as Ee}from"./chunk-XPJ4P4RZ.js";import{c as Ne}from"./chunk-DNH4OZS2.js";import{e as Pe,r as be,s as me}from"./chunk-UZ765RGE.js";import{K as z,da as xe,ia as re}from"./chunk-G33TNFCW.js";import{e as le,g as or,i as pe}from"./chunk-EAIILSS5.js";var De=le(()=>{"use strict"});var Oe=le(we=>{"use strict";we.byteLength=sr;we.toByteArray=ur;we.fromByteArray=lr;var Z=[],Y=[],ar=typeof Uint8Array<"u"?Uint8Array:Array,Se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(oe=0,He=Se.length;oe<He;++oe)Z[oe]=Se[oe],Y[Se.charCodeAt(oe)]=oe;var oe,He;Y[45]=62;Y[95]=63;function je(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function sr(t){var e=je(t),r=e[0],n=e[1];return(r+n)*3/4-n}function cr(t,e,r){return(e+r)*3/4-r}function ur(t){var e,r=je(t),n=r[0],o=r[1],a=new ar(cr(t,n,o)),c=0,b=o>0?n-4:n,u;for(u=0;u<b;u+=4)e=Y[t.charCodeAt(u)]<<18|Y[t.charCodeAt(u+1)]<<12|Y[t.charCodeAt(u+2)]<<6|Y[t.charCodeAt(u+3)],a[c++]=e>>16&255,a[c++]=e>>8&255,a[c++]=e&255;return o===2&&(e=Y[t.charCodeAt(u)]<<2|Y[t.charCodeAt(u+1)]>>4,a[c++]=e&255),o===1&&(e=Y[t.charCodeAt(u)]<<10|Y[t.charCodeAt(u+1)]<<4|Y[t.charCodeAt(u+2)]>>2,a[c++]=e>>8&255,a[c++]=e&255),a}function fr(t){return Z[t>>18&63]+Z[t>>12&63]+Z[t>>6&63]+Z[t&63]}function hr(t,e,r){for(var n,o=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),o.push(fr(n));return o.join("")}function lr(t){for(var e,r=t.length,n=r%3,o=[],a=16383,c=0,b=r-n;c<b;c+=a)o.push(hr(t,c,c+a>b?b:c+a));return n===1?(e=t[r-1],o.push(Z[e>>2]+Z[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],o.push(Z[e>>10]+Z[e>>4&63]+Z[e<<2&63]+"=")),o.join("")}});var $e=le(Ae=>{"use strict";Ae.read=function(t,e,r,n,o){var a,c,b=o*8-n-1,u=(1<<b)-1,T=u>>1,A=-7,I=r?o-1:0,D=r?-1:1,R=t[e+I];for(I+=D,a=R&(1<<-A)-1,R>>=-A,A+=b;A>0;a=a*256+t[e+I],I+=D,A-=8);for(c=a&(1<<-A)-1,a>>=-A,A+=n;A>0;c=c*256+t[e+I],I+=D,A-=8);if(a===0)a=1-T;else{if(a===u)return c?NaN:(R?-1:1)*(1/0);c=c+Math.pow(2,n),a=a-T}return(R?-1:1)*c*Math.pow(2,a-n)};Ae.write=function(t,e,r,n,o,a){var c,b,u,T=a*8-o-1,A=(1<<T)-1,I=A>>1,D=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=n?0:a-1,G=n?1:-1,ce=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(b=isNaN(e)?1:0,c=A):(c=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-c))<1&&(c--,u*=2),c+I>=1?e+=D/u:e+=D*Math.pow(2,1-I),e*u>=2&&(c++,u/=2),c+I>=A?(b=0,c=A):c+I>=1?(b=(e*u-1)*Math.pow(2,o),c=c+I):(b=e*Math.pow(2,I-1)*Math.pow(2,o),c=0));o>=8;t[r+R]=b&255,R+=G,b/=256,o-=8);for(c=c<<o|b,T+=o;T>0;t[r+R]=c&255,R+=G,c/=256,T-=8);t[r+R-G]|=ce*128}});var rr=le(fe=>{"use strict";var Ie=Oe(),ue=$e(),Ke=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;fe.Buffer=f;fe.SlowBuffer=gr;fe.INSPECT_MAX_BYTES=50;var ge=2147483647;fe.kMaxLength=ge;f.TYPED_ARRAY_SUPPORT=pr();!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function pr(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}});Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function te(t){if(t>ge)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,f.prototype),e}function f(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ce(t)}return ze(t,e,r)}f.poolSize=8192;function ze(t,e,r){if(typeof t=="string")return xr(t,e);if(ArrayBuffer.isView(t))return mr(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(ee(t,ArrayBuffer)||t&&ee(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ee(t,SharedArrayBuffer)||t&&ee(t.buffer,SharedArrayBuffer)))return _e(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return f.from(n,e,r);var o=wr(t);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return f.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}f.from=function(t,e,r){return ze(t,e,r)};Object.setPrototypeOf(f.prototype,Uint8Array.prototype);Object.setPrototypeOf(f,Uint8Array);function Ye(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function dr(t,e,r){return Ye(t),t<=0?te(t):e!==void 0?typeof r=="string"?te(t).fill(e,r):te(t).fill(e):te(t)}f.alloc=function(t,e,r){return dr(t,e,r)};function Ce(t){return Ye(t),te(t<0?0:Re(t)|0)}f.allocUnsafe=function(t){return Ce(t)};f.allocUnsafeSlow=function(t){return Ce(t)};function xr(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!f.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=Ge(t,e)|0,n=te(r),o=n.write(t,e);return o!==r&&(n=n.slice(0,o)),n}function Te(t){for(var e=t.length<0?0:Re(t.length)|0,r=te(e),n=0;n<e;n+=1)r[n]=t[n]&255;return r}function mr(t){if(ee(t,Uint8Array)){var e=new Uint8Array(t);return _e(e.buffer,e.byteOffset,e.byteLength)}return Te(t)}function _e(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,f.prototype),n}function wr(t){if(f.isBuffer(t)){var e=Re(t.length)|0,r=te(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Le(t.length)?te(0):Te(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Te(t.data)}function Re(t){if(t>=ge)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ge.toString(16)+" bytes");return t|0}function gr(t){return+t!=t&&(t=0),f.alloc(+t)}f.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==f.prototype};f.compare=function(e,r){if(ee(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),ee(r,Uint8Array)&&(r=f.from(r,r.offset,r.byteLength)),!f.isBuffer(e)||!f.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,o=r.length,a=0,c=Math.min(n,o);a<c;++a)if(e[a]!==r[a]){n=e[a],o=r[a];break}return n<o?-1:o<n?1:0};f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};f.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return f.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var o=f.allocUnsafe(r),a=0;for(n=0;n<e.length;++n){var c=e[n];if(ee(c,Uint8Array))a+c.length>o.length?f.from(c).copy(o,a):Uint8Array.prototype.set.call(o,c,a);else if(f.isBuffer(c))c.copy(o,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=c.length}return o};function Ge(t,e){if(f.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||ee(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Be(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return er(t).length;default:if(o)return n?-1:Be(t).length;e=(""+e).toLowerCase(),o=!0}}f.byteLength=Ge;function yr(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Tr(this,e,r);case"utf8":case"utf-8":return Xe(this,e,r);case"ascii":return Ar(this,e,r);case"latin1":case"binary":return Ir(this,e,r);case"base64":return Ur(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _r(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}f.prototype._isBuffer=!0;function ae(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}f.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)ae(this,r,r+1);return this};f.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)ae(this,r,r+3),ae(this,r+1,r+2);return this};f.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)ae(this,r,r+7),ae(this,r+1,r+6),ae(this,r+2,r+5),ae(this,r+3,r+4);return this};f.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Xe(this,0,e):yr.apply(this,arguments)};f.prototype.toLocaleString=f.prototype.toString;f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:f.compare(this,e)===0};f.prototype.inspect=function(){var e="",r=fe.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Ke&&(f.prototype[Ke]=f.prototype.inspect);f.prototype.compare=function(e,r,n,o,a){if(ee(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),o===void 0&&(o=0),a===void 0&&(a=this.length),r<0||n>e.length||o<0||a>this.length)throw new RangeError("out of range index");if(o>=a&&r>=n)return 0;if(o>=a)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,o>>>=0,a>>>=0,this===e)return 0;for(var c=a-o,b=n-r,u=Math.min(c,b),T=this.slice(o,a),A=e.slice(r,n),I=0;I<u;++I)if(T[I]!==A[I]){c=T[I],b=A[I];break}return c<b?-1:b<c?1:0};function We(t,e,r,n,o){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Le(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0)if(o)r=0;else return-1;if(typeof e=="string"&&(e=f.from(e,n)),f.isBuffer(e))return e.length===0?-1:Je(t,e,r,n,o);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Je(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function Je(t,e,r,n,o){var a=1,c=t.length,b=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;a=2,c/=2,b/=2,r/=2}function u(R,G){return a===1?R[G]:R.readUInt16BE(G*a)}var T;if(o){var A=-1;for(T=r;T<c;T++)if(u(t,T)===u(e,A===-1?0:T-A)){if(A===-1&&(A=T),T-A+1===b)return A*a}else A!==-1&&(T-=T-A),A=-1}else for(r+b>c&&(r=c-b),T=r;T>=0;T--){for(var I=!0,D=0;D<b;D++)if(u(t,T+D)!==u(e,D)){I=!1;break}if(I)return T}return-1}f.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};f.prototype.indexOf=function(e,r,n){return We(this,e,r,n,!0)};f.prototype.lastIndexOf=function(e,r,n){return We(this,e,r,n,!1)};function vr(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;var a=e.length;n>a/2&&(n=a/2);for(var c=0;c<n;++c){var b=parseInt(e.substr(c*2,2),16);if(Le(b))return c;t[r+c]=b}return c}function kr(t,e,r,n){return ye(Be(e,t.length-r),t,r,n)}function Fr(t,e,r,n){return ye(Rr(e),t,r,n)}function br(t,e,r,n){return ye(er(e),t,r,n)}function Er(t,e,r,n){return ye(Lr(e,t.length-r),t,r,n)}f.prototype.write=function(e,r,n,o){if(r===void 0)o="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")o=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,o===void 0&&(o="utf8")):(o=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-r;if((n===void 0||n>a)&&(n=a),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var c=!1;;)switch(o){case"hex":return vr(this,e,r,n);case"utf8":case"utf-8":return kr(this,e,r,n);case"ascii":case"latin1":case"binary":return Fr(this,e,r,n);case"base64":return br(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Er(this,e,r,n);default:if(c)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),c=!0}};f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ur(t,e,r){return e===0&&r===t.length?Ie.fromByteArray(t):Ie.fromByteArray(t.slice(e,r))}function Xe(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var a=t[o],c=null,b=a>239?4:a>223?3:a>191?2:1;if(o+b<=r){var u,T,A,I;switch(b){case 1:a<128&&(c=a);break;case 2:u=t[o+1],(u&192)===128&&(I=(a&31)<<6|u&63,I>127&&(c=I));break;case 3:u=t[o+1],T=t[o+2],(u&192)===128&&(T&192)===128&&(I=(a&15)<<12|(u&63)<<6|T&63,I>2047&&(I<55296||I>57343)&&(c=I));break;case 4:u=t[o+1],T=t[o+2],A=t[o+3],(u&192)===128&&(T&192)===128&&(A&192)===128&&(I=(a&15)<<18|(u&63)<<12|(T&63)<<6|A&63,I>65535&&I<1114112&&(c=I))}}c===null?(c=65533,b=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|c&1023),n.push(c),o+=b}return Sr(n)}var Ve=4096;function Sr(t){var e=t.length;if(e<=Ve)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Ve));return r}function Ar(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]&127);return n}function Ir(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function Tr(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",a=e;a<r;++a)o+=Mr[t[a]];return o}function _r(t,e,r){for(var n=t.slice(e,r),o="",a=0;a<n.length-1;a+=2)o+=String.fromCharCode(n[a]+n[a+1]*256);return o}f.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var o=this.subarray(e,r);return Object.setPrototypeOf(o,f.prototype),o};function H(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||H(e,r,this.length);for(var o=this[e],a=1,c=0;++c<r&&(a*=256);)o+=this[e+c]*a;return o};f.prototype.readUintBE=f.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||H(e,r,this.length);for(var o=this[e+--r],a=1;r>0&&(a*=256);)o+=this[e+--r]*a;return o};f.prototype.readUint8=f.prototype.readUInt8=function(e,r){return e=e>>>0,r||H(e,1,this.length),this[e]};f.prototype.readUint16LE=f.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||H(e,2,this.length),this[e]|this[e+1]<<8};f.prototype.readUint16BE=f.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||H(e,2,this.length),this[e]<<8|this[e+1]};f.prototype.readUint32LE=f.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||H(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};f.prototype.readUint32BE=f.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||H(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};f.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||H(e,r,this.length);for(var o=this[e],a=1,c=0;++c<r&&(a*=256);)o+=this[e+c]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*r)),o};f.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||H(e,r,this.length);for(var o=r,a=1,c=this[e+--o];o>0&&(a*=256);)c+=this[e+--o]*a;return a*=128,c>=a&&(c-=Math.pow(2,8*r)),c};f.prototype.readInt8=function(e,r){return e=e>>>0,r||H(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};f.prototype.readInt16LE=function(e,r){e=e>>>0,r||H(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};f.prototype.readInt16BE=function(e,r){e=e>>>0,r||H(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};f.prototype.readInt32LE=function(e,r){return e=e>>>0,r||H(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};f.prototype.readInt32BE=function(e,r){return e=e>>>0,r||H(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};f.prototype.readFloatLE=function(e,r){return e=e>>>0,r||H(e,4,this.length),ue.read(this,e,!0,23,4)};f.prototype.readFloatBE=function(e,r){return e=e>>>0,r||H(e,4,this.length),ue.read(this,e,!1,23,4)};f.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||H(e,8,this.length),ue.read(this,e,!0,52,8)};f.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||H(e,8,this.length),ue.read(this,e,!1,52,8)};function K(t,e,r,n,o,a){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(e,r,n,o){if(e=+e,r=r>>>0,n=n>>>0,!o){var a=Math.pow(2,8*n)-1;K(this,e,r,n,a,0)}var c=1,b=0;for(this[r]=e&255;++b<n&&(c*=256);)this[r+b]=e/c&255;return r+n};f.prototype.writeUintBE=f.prototype.writeUIntBE=function(e,r,n,o){if(e=+e,r=r>>>0,n=n>>>0,!o){var a=Math.pow(2,8*n)-1;K(this,e,r,n,a,0)}var c=n-1,b=1;for(this[r+c]=e&255;--c>=0&&(b*=256);)this[r+c]=e/b&255;return r+n};f.prototype.writeUint8=f.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||K(this,e,r,1,255,0),this[r]=e&255,r+1};f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||K(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||K(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||K(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||K(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};f.prototype.writeIntLE=function(e,r,n,o){if(e=+e,r=r>>>0,!o){var a=Math.pow(2,8*n-1);K(this,e,r,n,a-1,-a)}var c=0,b=1,u=0;for(this[r]=e&255;++c<n&&(b*=256);)e<0&&u===0&&this[r+c-1]!==0&&(u=1),this[r+c]=(e/b>>0)-u&255;return r+n};f.prototype.writeIntBE=function(e,r,n,o){if(e=+e,r=r>>>0,!o){var a=Math.pow(2,8*n-1);K(this,e,r,n,a-1,-a)}var c=n-1,b=1,u=0;for(this[r+c]=e&255;--c>=0&&(b*=256);)e<0&&u===0&&this[r+c+1]!==0&&(u=1),this[r+c]=(e/b>>0)-u&255;return r+n};f.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||K(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};f.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||K(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};f.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||K(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};f.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||K(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};f.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||K(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function qe(t,e,r,n,o,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Qe(t,e,r,n,o){return e=+e,r=r>>>0,o||qe(t,e,r,4,34028234663852886e22,-34028234663852886e22),ue.write(t,e,r,n,23,4),r+4}f.prototype.writeFloatLE=function(e,r,n){return Qe(this,e,r,!0,n)};f.prototype.writeFloatBE=function(e,r,n){return Qe(this,e,r,!1,n)};function Ze(t,e,r,n,o){return e=+e,r=r>>>0,o||qe(t,e,r,8,17976931348623157e292,-17976931348623157e292),ue.write(t,e,r,n,52,8),r+8}f.prototype.writeDoubleLE=function(e,r,n){return Ze(this,e,r,!0,n)};f.prototype.writeDoubleBE=function(e,r,n){return Ze(this,e,r,!1,n)};f.prototype.copy=function(e,r,n,o){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!o&&o!==0&&(o=this.length),r>=e.length&&(r=e.length),r||(r=0),o>0&&o<n&&(o=n),o===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-r<o-n&&(o=e.length-r+n);var a=o-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,o):Uint8Array.prototype.set.call(e,this.subarray(n,o),r),a};f.prototype.fill=function(e,r,n,o){if(typeof e=="string"){if(typeof r=="string"?(o=r,r=0,n=this.length):typeof n=="string"&&(o=n,n=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!f.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(e.length===1){var a=e.charCodeAt(0);(o==="utf8"&&a<128||o==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var c;if(typeof e=="number")for(c=r;c<n;++c)this[c]=e;else{var b=f.isBuffer(e)?e:f.from(e,o),u=b.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(c=0;c<n-r;++c)this[c+r]=b[c%u]}return this};var Br=/[^+/0-9A-Za-z-_]/g;function Cr(t){if(t=t.split("=")[0],t=t.trim().replace(Br,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Be(t,e){e=e||1/0;for(var r,n=t.length,o=null,a=[],c=0;c<n;++c){if(r=t.charCodeAt(c),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(c+1===n){(e-=3)>-1&&a.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&a.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function Rr(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Lr(t,e){for(var r,n,o,a=[],c=0;c<t.length&&!((e-=2)<0);++c)r=t.charCodeAt(c),n=r>>8,o=r%256,a.push(o),a.push(n);return a}function er(t){return Ie.toByteArray(Cr(t))}function ye(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function ee(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Le(t){return t!==t}var Mr=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=r*16,o=0;o<16;++o)e[n+o]=t[r]+t[o];return e}()});var tr=le((Xr,ve)=>{"use strict";(function(){"use strict";var t="input is invalid type",e=typeof window=="object",r=e?window:{};r.JS_SHA256_NO_WINDOW&&(e=!1);var n=!e&&typeof self=="object",o=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?r=global:n&&(r=self);var a=!r.JS_SHA256_NO_COMMON_JS&&typeof ve=="object"&&ve.exports,c=typeof define=="function"&&define.amd,b=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),T=[-2147483648,8388608,32768,128],A=[24,16,8,0],I=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],D=["hex","array","digest","arrayBuffer"],R=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(h){return Object.prototype.toString.call(h)==="[object Array]"}),b&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(h){return typeof h=="object"&&h.buffer&&h.buffer.constructor===ArrayBuffer});var G=function(h,y){return function(S){return new N(y,!0).update(S)[h]()}},ce=function(h){var y=G("hex",h);o&&(y=W(y,h)),y.create=function(){return new N(h)},y.update=function(F){return y.create().update(F)};for(var S=0;S<D.length;++S){var v=D[S];y[v]=G(v,h)}return y},W=function(h,y){var S=De(),v=rr().Buffer,F=y?"sha224":"sha256",g;v.from&&!r.JS_SHA256_NO_BUFFER_FROM?g=v.from:g=function(x){return new v(x)};var C=function(x){if(typeof x=="string")return S.createHash(F).update(x,"utf8").digest("hex");if(x==null)throw new Error(t);return x.constructor===ArrayBuffer&&(x=new Uint8Array(x)),Array.isArray(x)||ArrayBuffer.isView(x)||x.constructor===v?S.createHash(F).update(g(x)).digest("hex"):h(x)};return C},de=function(h,y){return function(S,v){return new ie(S,y,!0).update(v)[h]()}},q=function(h){var y=de("hex",h);y.create=function(F){return new ie(F,h)},y.update=function(F,g){return y.create(F).update(g)};for(var S=0;S<D.length;++S){var v=D[S];y[v]=de(v,h)}return y};function N(h,y){y?(R[0]=R[16]=R[1]=R[2]=R[3]=R[4]=R[5]=R[6]=R[7]=R[8]=R[9]=R[10]=R[11]=R[12]=R[13]=R[14]=R[15]=0,this.blocks=R):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=h}N.prototype.update=function(h){if(!this.finalized){var y,S=typeof h;if(S!=="string"){if(S==="object"){if(h===null)throw new Error(t);if(b&&h.constructor===ArrayBuffer)h=new Uint8Array(h);else if(!Array.isArray(h)&&(!b||!ArrayBuffer.isView(h)))throw new Error(t)}else throw new Error(t);y=!0}for(var v,F=0,g,C=h.length,x=this.blocks;F<C;){if(this.hashed&&(this.hashed=!1,x[0]=this.block,this.block=x[16]=x[1]=x[2]=x[3]=x[4]=x[5]=x[6]=x[7]=x[8]=x[9]=x[10]=x[11]=x[12]=x[13]=x[14]=x[15]=0),y)for(g=this.start;F<C&&g<64;++F)x[g>>>2]|=h[F]<<A[g++&3];else for(g=this.start;F<C&&g<64;++F)v=h.charCodeAt(F),v<128?x[g>>>2]|=v<<A[g++&3]:v<2048?(x[g>>>2]|=(192|v>>>6)<<A[g++&3],x[g>>>2]|=(128|v&63)<<A[g++&3]):v<55296||v>=57344?(x[g>>>2]|=(224|v>>>12)<<A[g++&3],x[g>>>2]|=(128|v>>>6&63)<<A[g++&3],x[g>>>2]|=(128|v&63)<<A[g++&3]):(v=65536+((v&1023)<<10|h.charCodeAt(++F)&1023),x[g>>>2]|=(240|v>>>18)<<A[g++&3],x[g>>>2]|=(128|v>>>12&63)<<A[g++&3],x[g>>>2]|=(128|v>>>6&63)<<A[g++&3],x[g>>>2]|=(128|v&63)<<A[g++&3]);this.lastByteIndex=g,this.bytes+=g-this.start,g>=64?(this.block=x[16],this.start=g-64,this.hash(),this.hashed=!0):this.start=g}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},N.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var h=this.blocks,y=this.lastByteIndex;h[16]=this.block,h[y>>>2]|=T[y&3],this.block=h[16],y>=56&&(this.hashed||this.hash(),h[0]=this.block,h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0),h[14]=this.hBytes<<3|this.bytes>>>29,h[15]=this.bytes<<3,this.hash()}},N.prototype.hash=function(){var h=this.h0,y=this.h1,S=this.h2,v=this.h3,F=this.h4,g=this.h5,C=this.h6,x=this.h7,B=this.blocks,P,j,O,J,L,X,i,s,p,w,l;for(P=16;P<64;++P)L=B[P-15],j=(L>>>7|L<<25)^(L>>>18|L<<14)^L>>>3,L=B[P-2],O=(L>>>17|L<<15)^(L>>>19|L<<13)^L>>>10,B[P]=B[P-16]+j+B[P-7]+O<<0;for(l=y&S,P=0;P<64;P+=4)this.first?(this.is224?(s=300032,L=B[0]-1413257819,x=L-150054599<<0,v=L+24177077<<0):(s=704751109,L=B[0]-210244248,x=L-1521486534<<0,v=L+143694565<<0),this.first=!1):(j=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),O=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),s=h&y,J=s^h&S^l,i=F&g^~F&C,L=x+O+i+I[P]+B[P],X=j+J,x=v+L<<0,v=L+X<<0),j=(v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10),O=(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7),p=v&h,J=p^v&y^s,i=x&F^~x&g,L=C+O+i+I[P+1]+B[P+1],X=j+J,C=S+L<<0,S=L+X<<0,j=(S>>>2|S<<30)^(S>>>13|S<<19)^(S>>>22|S<<10),O=(C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7),w=S&v,J=w^S&h^p,i=C&x^~C&F,L=g+O+i+I[P+2]+B[P+2],X=j+J,g=y+L<<0,y=L+X<<0,j=(y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10),O=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),l=y&S,J=l^y&v^w,i=g&C^~g&x,L=F+O+i+I[P+3]+B[P+3],X=j+J,F=h+L<<0,h=L+X<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+h<<0,this.h1=this.h1+y<<0,this.h2=this.h2+S<<0,this.h3=this.h3+v<<0,this.h4=this.h4+F<<0,this.h5=this.h5+g<<0,this.h6=this.h6+C<<0,this.h7=this.h7+x<<0},N.prototype.hex=function(){this.finalize();var h=this.h0,y=this.h1,S=this.h2,v=this.h3,F=this.h4,g=this.h5,C=this.h6,x=this.h7,B=u[h>>>28&15]+u[h>>>24&15]+u[h>>>20&15]+u[h>>>16&15]+u[h>>>12&15]+u[h>>>8&15]+u[h>>>4&15]+u[h&15]+u[y>>>28&15]+u[y>>>24&15]+u[y>>>20&15]+u[y>>>16&15]+u[y>>>12&15]+u[y>>>8&15]+u[y>>>4&15]+u[y&15]+u[S>>>28&15]+u[S>>>24&15]+u[S>>>20&15]+u[S>>>16&15]+u[S>>>12&15]+u[S>>>8&15]+u[S>>>4&15]+u[S&15]+u[v>>>28&15]+u[v>>>24&15]+u[v>>>20&15]+u[v>>>16&15]+u[v>>>12&15]+u[v>>>8&15]+u[v>>>4&15]+u[v&15]+u[F>>>28&15]+u[F>>>24&15]+u[F>>>20&15]+u[F>>>16&15]+u[F>>>12&15]+u[F>>>8&15]+u[F>>>4&15]+u[F&15]+u[g>>>28&15]+u[g>>>24&15]+u[g>>>20&15]+u[g>>>16&15]+u[g>>>12&15]+u[g>>>8&15]+u[g>>>4&15]+u[g&15]+u[C>>>28&15]+u[C>>>24&15]+u[C>>>20&15]+u[C>>>16&15]+u[C>>>12&15]+u[C>>>8&15]+u[C>>>4&15]+u[C&15];return this.is224||(B+=u[x>>>28&15]+u[x>>>24&15]+u[x>>>20&15]+u[x>>>16&15]+u[x>>>12&15]+u[x>>>8&15]+u[x>>>4&15]+u[x&15]),B},N.prototype.toString=N.prototype.hex,N.prototype.digest=function(){this.finalize();var h=this.h0,y=this.h1,S=this.h2,v=this.h3,F=this.h4,g=this.h5,C=this.h6,x=this.h7,B=[h>>>24&255,h>>>16&255,h>>>8&255,h&255,y>>>24&255,y>>>16&255,y>>>8&255,y&255,S>>>24&255,S>>>16&255,S>>>8&255,S&255,v>>>24&255,v>>>16&255,v>>>8&255,v&255,F>>>24&255,F>>>16&255,F>>>8&255,F&255,g>>>24&255,g>>>16&255,g>>>8&255,g&255,C>>>24&255,C>>>16&255,C>>>8&255,C&255];return this.is224||B.push(x>>>24&255,x>>>16&255,x>>>8&255,x&255),B},N.prototype.array=N.prototype.digest,N.prototype.arrayBuffer=function(){this.finalize();var h=new ArrayBuffer(this.is224?28:32),y=new DataView(h);return y.setUint32(0,this.h0),y.setUint32(4,this.h1),y.setUint32(8,this.h2),y.setUint32(12,this.h3),y.setUint32(16,this.h4),y.setUint32(20,this.h5),y.setUint32(24,this.h6),this.is224||y.setUint32(28,this.h7),h};function ie(h,y,S){var v,F=typeof h;if(F==="string"){var g=[],C=h.length,x=0,B;for(v=0;v<C;++v)B=h.charCodeAt(v),B<128?g[x++]=B:B<2048?(g[x++]=192|B>>>6,g[x++]=128|B&63):B<55296||B>=57344?(g[x++]=224|B>>>12,g[x++]=128|B>>>6&63,g[x++]=128|B&63):(B=65536+((B&1023)<<10|h.charCodeAt(++v)&1023),g[x++]=240|B>>>18,g[x++]=128|B>>>12&63,g[x++]=128|B>>>6&63,g[x++]=128|B&63);h=g}else if(F==="object"){if(h===null)throw new Error(t);if(b&&h.constructor===ArrayBuffer)h=new Uint8Array(h);else if(!Array.isArray(h)&&(!b||!ArrayBuffer.isView(h)))throw new Error(t)}else throw new Error(t);h.length>64&&(h=new N(y,!0).update(h).array());var P=[],j=[];for(v=0;v<64;++v){var O=h[v]||0;P[v]=92^O,j[v]=54^O}N.call(this,y,S),this.update(j),this.oKeyPad=P,this.inner=!0,this.sharedMemory=S}ie.prototype=new N,ie.prototype.finalize=function(){if(N.prototype.finalize.call(this),this.inner){this.inner=!1;var h=this.array();N.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(h),N.prototype.finalize.call(this)}};var $=ce();$.sha256=$,$.sha224=ce(!0),$.sha256.hmac=q(),$.sha224.hmac=q(!0),a?ve.exports=$:(r.sha256=$.sha256,r.sha224=$.sha224,c&&define(function(){return $}))})()});var Ue=(()=>{let e=class e{};e.Users="iam/users",e.User="iam/users/:userId",e.Groups="iam/groups",e.Group="iam/groups/:groupId",e.login="auth/login",e.logout="auth/logout";let t=e;return t})();var nr=or(tr(),1);var se=class extends Error{};se.prototype.name="InvalidTokenError";function Pr(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function Nr(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Pr(e)}catch{return atob(e)}}function ke(t,e){if(typeof t!="string")throw new se("Invalid token specified: must be a string");e||(e={});let r=e.header===!0?0:1,n=t.split(".")[r];if(typeof n!="string")throw new se(`Invalid token specified: missing part #${r+1}`);let o;try{o=Nr(n)}catch(a){throw new se(`Invalid token specified: invalid base64 for part #${r+1} (${a.message})`)}try{return JSON.parse(o)}catch(a){throw new se(`Invalid token specified: invalid json for part #${r+1} (${a.message})`)}}if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");function Me(t){if(!(this instanceof Me))throw new Error("The 'Keycloak' constructor must be invoked with 'new'.");for(var e=this,r,n=[],o,a={enable:!0,callbackList:[],interval:5},c=document.getElementsByTagName("script"),b=0;b<c.length;b++)(c[b].src.indexOf("keycloak.js")!==-1||c[b].src.indexOf("keycloak.min.js")!==-1)&&c[b].src.indexOf("version=")!==-1&&(e.iframeVersion=c[b].src.substring(c[b].src.indexOf("version=")+8).split("&")[0]);var u=!0,T=X(console.info),A=X(console.warn);e.init=function(i){if(e.didInitialize)throw new Error("A 'Keycloak' instance can only be initialized once.");e.didInitialize=!0,e.authenticated=!1,o=L();var s=["default","cordova","cordova-native"];if(i&&s.indexOf(i.adapter)>-1?r=j(i.adapter):i&&typeof i.adapter=="object"?r=i.adapter:window.Cordova||window.cordova?r=j("cordova"):r=j(),i){if(typeof i.useNonce<"u"&&(u=i.useNonce),typeof i.checkLoginIframe<"u"&&(a.enable=i.checkLoginIframe),i.checkLoginIframeInterval&&(a.interval=i.checkLoginIframeInterval),i.onLoad==="login-required"&&(e.loginRequired=!0),i.responseMode)if(i.responseMode==="query"||i.responseMode==="fragment")e.responseMode=i.responseMode;else throw"Invalid value for responseMode";if(i.flow){switch(i.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=i.flow}if(i.timeSkew!=null&&(e.timeSkew=i.timeSkew),i.redirectUri&&(e.redirectUri=i.redirectUri),i.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=i.silentCheckSsoRedirectUri),typeof i.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=i.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,typeof i.pkceMethod<"u"){if(i.pkceMethod!=="S256"&&i.pkceMethod!==!1)throw new TypeError(`Invalid value for pkceMethod', expected 'S256' or false but got ${i.pkceMethod}.`);e.pkceMethod=i.pkceMethod}else e.pkceMethod="S256";typeof i.enableLogging=="boolean"?e.enableLogging=i.enableLogging:e.enableLogging=!1,i.logoutMethod==="POST"?e.logoutMethod="POST":e.logoutMethod="GET",typeof i.scope=="string"&&(e.scope=i.scope),typeof i.acrValues=="string"&&(e.acrValues=i.acrValues),typeof i.messageReceiveTimeout=="number"&&i.messageReceiveTimeout>0?e.messageReceiveTimeout=i.messageReceiveTimeout:e.messageReceiveTimeout=1e4}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var p=F(),w=F();w.promise.then(function(){e.onReady&&e.onReady(e.authenticated),p.setSuccess(e.authenticated)}).catch(function(U){p.setError(U)});var l=N();function k(){var U=function(M){M||(_.prompt="none"),i&&i.locale&&(_.locale=i.locale),e.login(_).then(function(){w.setSuccess()}).catch(function(Q){w.setError(Q)})},E=function(){var M=document.createElement("iframe"),Q=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});M.setAttribute("src",Q),M.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),M.setAttribute("title","keycloak-silent-check-sso"),M.style.display="none",document.body.appendChild(M);var ne=function(V){if(!(V.origin!==window.location.origin||M.contentWindow!==V.source)){var he=y(V.data);q(he,w),document.body.removeChild(M),window.removeEventListener("message",ne)}};window.addEventListener("message",ne)},_={};switch(i.onLoad){case"check-sso":a.enable?C().then(function(){B().then(function(M){M?w.setSuccess():e.silentCheckSsoRedirectUri?E():U(!1)}).catch(function(M){w.setError(M)})}):e.silentCheckSsoRedirectUri?E():U(!1);break;case"login-required":U(!0);break;default:throw"Invalid value for onLoad"}}function d(){var U=y(window.location.href);if(U&&window.history.replaceState(window.history.state,null,U.newUrl),U&&U.valid)return C().then(function(){q(U,w)}).catch(function(E){w.setError(E)});i?i.token&&i.refreshToken?($(i.token,i.refreshToken,i.idToken),a.enable?C().then(function(){B().then(function(E){E?(e.onAuthSuccess&&e.onAuthSuccess(),w.setSuccess(),x()):w.setSuccess()}).catch(function(E){w.setError(E)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),w.setSuccess()}).catch(function(E){e.onAuthError&&e.onAuthError(),i.onLoad?k():w.setError(E)})):i.onLoad?k():w.setSuccess():w.setSuccess()}function m(){var U=F(),E=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",E),U.setSuccess())};return document.addEventListener("readystatechange",E),E(),U.promise}return l.then(function(){m().then(P).then(d).catch(function(U){p.setError(U)})}),l.catch(function(U){p.setError(U)}),p.promise},e.login=function(i){return r.login(i)};function I(i){var s=null,p=window.crypto||window.msCrypto;if(p&&p.getRandomValues&&window.Uint8Array)return s=new Uint8Array(i),p.getRandomValues(s),s;s=new Array(i);for(var w=0;w<s.length;w++)s[w]=Math.floor(256*Math.random());return s}function D(i){return R(i,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function R(i,s){for(var p=I(i),w=new Array(i),l=0;l<i;l++)w[l]=s.charCodeAt(p[l]%s.length);return String.fromCharCode.apply(null,w)}function G(i,s){if(i!=="S256")throw new TypeError(`Invalid value for 'pkceMethod', expected 'S256' but got '${i}'.`);let p=new Uint8Array(nr.default.arrayBuffer(s));return Dr(p).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function ce(i){var s={id_token:{acr:i}};return JSON.stringify(s)}e.createLoginUrl=function(i){var s=h(),p=h(),w=r.redirectUri(i),l={state:s,nonce:p,redirectUri:encodeURIComponent(w),loginOptions:i};i&&i.prompt&&(l.prompt=i.prompt);var k;i&&i.action=="register"?k=e.endpoints.register():k=e.endpoints.authorize();var d=i&&i.scope||e.scope;d?d.indexOf("openid")===-1&&(d="openid "+d):d="openid";var m=k+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(w)+"&state="+encodeURIComponent(s)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(d);if(u&&(m=m+"&nonce="+encodeURIComponent(p)),i&&i.prompt&&(m+="&prompt="+encodeURIComponent(i.prompt)),i&&i.maxAge&&(m+="&max_age="+encodeURIComponent(i.maxAge)),i&&i.loginHint&&(m+="&login_hint="+encodeURIComponent(i.loginHint)),i&&i.idpHint&&(m+="&kc_idp_hint="+encodeURIComponent(i.idpHint)),i&&i.action&&i.action!="register"&&(m+="&kc_action="+encodeURIComponent(i.action)),i&&i.locale&&(m+="&ui_locales="+encodeURIComponent(i.locale)),i&&i.acr){var U=ce(i.acr);m+="&claims="+encodeURIComponent(U)}if((i&&i.acrValues||e.acrValues)&&(m+="&acr_values="+encodeURIComponent(i.acrValues||e.acrValues)),e.pkceMethod){var E=D(96);l.pkceCodeVerifier=E;var _=G(e.pkceMethod,E);m+="&code_challenge="+_,m+="&code_challenge_method="+e.pkceMethod}return o.add(l),m},e.logout=function(i){return r.logout(i)},e.createLogoutUrl=function(i){if((i?.logoutMethod??e.logoutMethod)==="POST")return e.endpoints.logout();var p=e.endpoints.logout()+"?client_id="+encodeURIComponent(e.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(r.redirectUri(i,!1));return e.idToken&&(p+="&id_token_hint="+encodeURIComponent(e.idToken)),p},e.register=function(i){return r.register(i)},e.createRegisterUrl=function(i){return i||(i={}),i.action="register",e.createLoginUrl(i)},e.createAccountUrl=function(i){var s=W(),p=void 0;return typeof s<"u"&&(p=s+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(r.redirectUri(i))),p},e.accountManagement=function(){return r.accountManagement()},e.hasRealmRole=function(i){var s=e.realmAccess;return!!s&&s.roles.indexOf(i)>=0},e.hasResourceRole=function(i,s){if(!e.resourceAccess)return!1;var p=e.resourceAccess[s||e.clientId];return!!p&&p.roles.indexOf(i)>=0},e.loadUserProfile=function(){var i=W()+"/account",s=new XMLHttpRequest;s.open("GET",i,!0),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Authorization","bearer "+e.token);var p=F();return s.onreadystatechange=function(){s.readyState==4&&(s.status==200?(e.profile=JSON.parse(s.responseText),p.setSuccess(e.profile)):p.setError())},s.send(),p.promise},e.loadUserInfo=function(){var i=e.endpoints.userinfo(),s=new XMLHttpRequest;s.open("GET",i,!0),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Authorization","bearer "+e.token);var p=F();return s.onreadystatechange=function(){s.readyState==4&&(s.status==200?(e.userInfo=JSON.parse(s.responseText),p.setSuccess(e.userInfo)):p.setError())},s.send(),p.promise},e.isTokenExpired=function(i){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return T("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var s=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(i){if(isNaN(i))throw"Invalid minValidity";s-=i}return s<0},e.updateToken=function(i){var s=F();if(!e.refreshToken)return s.setError(),s.promise;i=i||5;var p=function(){var l=!1;if(i==-1?(l=!0,T("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(i))&&(l=!0,T("[KEYCLOAK] Refreshing token: token expired")),!l)s.setSuccess(!1);else{var k="grant_type=refresh_token&refresh_token="+e.refreshToken,d=e.endpoints.token();if(n.push(s),n.length==1){var m=new XMLHttpRequest;m.open("POST",d,!0),m.setRequestHeader("Content-type","application/x-www-form-urlencoded"),m.withCredentials=!0,k+="&client_id="+encodeURIComponent(e.clientId);var U=new Date().getTime();m.onreadystatechange=function(){if(m.readyState==4)if(m.status==200){T("[KEYCLOAK] Token refreshed"),U=(U+new Date().getTime())/2;var E=JSON.parse(m.responseText);$(E.access_token,E.refresh_token,E.id_token,U),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var _=n.pop();_!=null;_=n.pop())_.setSuccess(!0)}else{A("[KEYCLOAK] Failed to refresh token"),m.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var _=n.pop();_!=null;_=n.pop())_.setError(!0)}},m.send(k)}}};if(a.enable){var w=B();w.then(function(){p()}).catch(function(l){s.setError(l)})}else p();return s.promise},e.clearToken=function(){e.token&&($(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};function W(){if(typeof e.authServerUrl<"u")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function de(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function q(i,s){var p=i.code,w=i.error,l=i.prompt,k=new Date().getTime();if(i.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(i.kc_action_status),w){if(l!="none")if(i.error_description&&i.error_description==="authentication_expired")e.login(i.loginOptions);else{var d={error:w,error_description:i.error_description};e.onAuthError&&e.onAuthError(d),s&&s.setError(d)}else s&&s.setSuccess();return}else e.flow!="standard"&&(i.access_token||i.id_token)&&_(i.access_token,null,i.id_token,!0);if(e.flow!="implicit"&&p){var m="code="+p+"&grant_type=authorization_code",U=e.endpoints.token(),E=new XMLHttpRequest;E.open("POST",U,!0),E.setRequestHeader("Content-type","application/x-www-form-urlencoded"),m+="&client_id="+encodeURIComponent(e.clientId),m+="&redirect_uri="+i.redirectUri,i.pkceCodeVerifier&&(m+="&code_verifier="+i.pkceCodeVerifier),E.withCredentials=!0,E.onreadystatechange=function(){if(E.readyState==4)if(E.status==200){var M=JSON.parse(E.responseText);_(M.access_token,M.refresh_token,M.id_token,e.flow==="standard"),x()}else e.onAuthError&&e.onAuthError(),s&&s.setError()},E.send(m)}function _(M,Q,ne,V){k=(k+new Date().getTime())/2,$(M,Q,ne,k),u&&e.idTokenParsed&&e.idTokenParsed.nonce!=i.storedNonce?(T("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),s&&s.setError()):V&&(e.onAuthSuccess&&e.onAuthSuccess(),s&&s.setSuccess())}}function N(i){var s=F(),p;t?typeof t=="string"&&(p=t):p="keycloak.json";function w(E){E?e.endpoints={authorize:function(){return E.authorization_endpoint},token:function(){return E.token_endpoint},logout:function(){if(!E.end_session_endpoint)throw"Not supported by the OIDC server";return E.end_session_endpoint},checkSessionIframe:function(){if(!E.check_session_iframe)throw"Not supported by the OIDC server";return E.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!E.userinfo_endpoint)throw"Not supported by the OIDC server";return E.userinfo_endpoint}}:e.endpoints={authorize:function(){return W()+"/protocol/openid-connect/auth"},token:function(){return W()+"/protocol/openid-connect/token"},logout:function(){return W()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var _=W()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(_=_+"?version="+e.iframeVersion),_},thirdPartyCookiesIframe:function(){var _=W()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(_=_+"?version="+e.iframeVersion),_},register:function(){return W()+"/protocol/openid-connect/registrations"},userinfo:function(){return W()+"/protocol/openid-connect/userinfo"}}}if(p){var l=new XMLHttpRequest;l.open("GET",p,!0),l.setRequestHeader("Accept","application/json"),l.onreadystatechange=function(){if(l.readyState==4)if(l.status==200||ie(l)){var E=JSON.parse(l.responseText);e.authServerUrl=E["auth-server-url"],e.realm=E.realm,e.clientId=E.resource,w(null),s.setSuccess()}else s.setError()},l.send()}else{if(!t.clientId)throw"clientId missing";e.clientId=t.clientId;var k=t.oidcProvider;if(k)if(typeof k=="string"){var U;k.charAt(k.length-1)=="/"?U=k+".well-known/openid-configuration":U=k+"/.well-known/openid-configuration";var l=new XMLHttpRequest;l.open("GET",U,!0),l.setRequestHeader("Accept","application/json"),l.onreadystatechange=function(){if(l.readyState==4)if(l.status==200||ie(l)){var _=JSON.parse(l.responseText);w(_),s.setSuccess()}else s.setError()},l.send()}else w(k),s.setSuccess();else{if(!t.url){for(var d=document.getElementsByTagName("script"),m=0;m<d.length;m++)if(d[m].src.match(/.*keycloak\.js/)){t.url=d[m].src.substr(0,d[m].src.indexOf("/js/keycloak.js"));break}}if(!t.realm)throw"realm missing";e.authServerUrl=t.url,e.realm=t.realm,w(null),s.setSuccess()}}return s.promise}function ie(i){return i.status==0&&i.responseText&&i.responseURL.startsWith("file:")}function $(i,s,p,w){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),s?(e.refreshToken=s,e.refreshTokenParsed=ke(s)):(delete e.refreshToken,delete e.refreshTokenParsed),p?(e.idToken=p,e.idTokenParsed=ke(p)):(delete e.idToken,delete e.idTokenParsed),i){if(e.token=i,e.tokenParsed=ke(i),e.sessionId=e.tokenParsed.sid,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,w&&(e.timeSkew=Math.floor(w/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(T("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var l=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;T("[KEYCLOAK] Token expires in "+Math.round(l/1e3)+" s"),l<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,l)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function h(){var i="0123456789abcdef",s=R(36,i).split("");s[14]="4",s[19]=i.substr(s[19]&3|8,1),s[8]=s[13]=s[18]=s[23]="-";var p=s.join("");return p}function y(i){var s=S(i);if(s){var p=o.get(s.state);return p&&(s.valid=!0,s.redirectUri=p.redirectUri,s.storedNonce=p.nonce,s.prompt=p.prompt,s.pkceCodeVerifier=p.pkceCodeVerifier,s.loginOptions=p.loginOptions),s}}function S(i){var s;switch(e.flow){case"standard":s=["code","state","session_state","kc_action_status","iss"];break;case"implicit":s=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status","iss"];break;case"hybrid":s=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status","iss"];break}s.push("error"),s.push("error_description"),s.push("error_uri");var p=i.indexOf("?"),w=i.indexOf("#"),l,k;if(e.responseMode==="query"&&p!==-1?(l=i.substring(0,p),k=v(i.substring(p+1,w!==-1?w:i.length),s),k.paramsString!==""&&(l+="?"+k.paramsString),w!==-1&&(l+=i.substring(w))):e.responseMode==="fragment"&&w!==-1&&(l=i.substring(0,w),k=v(i.substring(w+1),s),k.paramsString!==""&&(l+="#"+k.paramsString)),k&&k.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((k.oauthParams.code||k.oauthParams.error)&&k.oauthParams.state)return k.oauthParams.newUrl=l,k.oauthParams}else if(e.flow==="implicit"&&(k.oauthParams.access_token||k.oauthParams.error)&&k.oauthParams.state)return k.oauthParams.newUrl=l,k.oauthParams}}function v(i,s){for(var p=i.split("&"),w={paramsString:"",oauthParams:{}},l=0;l<p.length;l++){var k=p[l].indexOf("="),d=p[l].slice(0,k);s.indexOf(d)!==-1?w.oauthParams[d]=p[l].slice(k+1):(w.paramsString!==""&&(w.paramsString+="&"),w.paramsString+=p[l])}return w}function F(){var i={setSuccess:function(s){i.resolve(s)},setError:function(s){i.reject(s)}};return i.promise=new Promise(function(s,p){i.resolve=s,i.reject=p}),i}function g(i,s,p){var w=null,l=new Promise(function(k,d){w=setTimeout(function(){d({error:p})},s)});return Promise.race([i,l]).finally(function(){clearTimeout(w)})}function C(){var i=F();if(!a.enable||a.iframe)return i.setSuccess(),i.promise;var s=document.createElement("iframe");a.iframe=s,s.onload=function(){var l=e.endpoints.authorize();l.charAt(0)==="/"?a.iframeOrigin=de():a.iframeOrigin=l.substring(0,l.indexOf("/",8)),i.setSuccess()};var p=e.endpoints.checkSessionIframe();s.setAttribute("src",p),s.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),s.setAttribute("title","keycloak-session-iframe"),s.style.display="none",document.body.appendChild(s);var w=function(l){if(!(l.origin!==a.iframeOrigin||a.iframe.contentWindow!==l.source)&&(l.data=="unchanged"||l.data=="changed"||l.data=="error")){l.data!="unchanged"&&e.clearToken();for(var k=a.callbackList.splice(0,a.callbackList.length),d=k.length-1;d>=0;--d){var m=k[d];l.data=="error"?m.setError():m.setSuccess(l.data=="unchanged")}}};return window.addEventListener("message",w,!1),i.promise}function x(){a.enable&&e.token&&setTimeout(function(){B().then(function(i){i&&x()})},a.interval*1e3)}function B(){var i=F();if(a.iframe&&a.iframeOrigin){var s=e.clientId+" "+(e.sessionId?e.sessionId:"");a.callbackList.push(i);var p=a.iframeOrigin;a.callbackList.length==1&&a.iframe.contentWindow.postMessage(s,p)}else i.setSuccess();return i.promise}function P(){var i=F();if(a.enable||e.silentCheckSsoRedirectUri){var s=document.createElement("iframe");s.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),s.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),s.setAttribute("title","keycloak-3p-check-iframe"),s.style.display="none",document.body.appendChild(s);var p=function(w){s.contentWindow===w.source&&(w.data!=="supported"&&w.data!=="unsupported"||(w.data==="unsupported"&&(A(`[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:

 - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).
 - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).

For more information see: https://www.keycloak.org/docs/latest/securing_apps/#_modern_browsers`),a.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1)),document.body.removeChild(s),window.removeEventListener("message",p),i.setSuccess()))};window.addEventListener("message",p,!1)}else i.setSuccess();return g(i.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function j(i){if(!i||i=="default")return{login:function(d){return window.location.assign(e.createLoginUrl(d)),F().promise},logout:function(d){return pe(this,null,function*(){if((d?.logoutMethod??e.logoutMethod)==="GET"){window.location.replace(e.createLogoutUrl(d));return}let U=e.createLogoutUrl(d),E=yield fetch(U,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id_token_hint:e.idToken,client_id:e.clientId,post_logout_redirect_uri:r.redirectUri(d,!1)})});if(E.redirected){window.location.href=E.url;return}if(E.ok){window.location.reload();return}throw new Error("Logout failed, request returned an error code.")})},register:function(d){return window.location.assign(e.createRegisterUrl(d)),F().promise},accountManagement:function(){var d=e.createAccountUrl();if(typeof d<"u")window.location.href=d;else throw"Not supported by the OIDC server";return F().promise},redirectUri:function(d,m){return d&&d.redirectUri?d.redirectUri:e.redirectUri?e.redirectUri:location.href}};if(i=="cordova"){a.enable=!1;var s=function(d,m,U){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(d,m,U):window.open(d,m,U)},p=function(d){return d&&d.cordovaOptions?Object.keys(d.cordovaOptions).reduce(function(m,U){return m[U]=d.cordovaOptions[U],m},{}):{}},w=function(d){return Object.keys(d).reduce(function(m,U){return m.push(U+"="+d[U]),m},[]).join(",")},l=function(d){var m=p(d);return m.location="no",d&&d.prompt=="none"&&(m.hidden="yes"),w(m)},k=function(){return e.redirectUri||"http://localhost"};return{login:function(d){var m=F(),U=l(d),E=e.createLoginUrl(d),_=s(E,"_blank",U),M=!1,Q=!1,ne=function(){Q=!0,_.close()};return _.addEventListener("loadstart",function(V){if(V.url.indexOf(k())==0){var he=y(V.url);q(he,m),ne(),M=!0}}),_.addEventListener("loaderror",function(V){if(!M)if(V.url.indexOf(k())==0){var he=y(V.url);q(he,m),ne(),M=!0}else m.setError(),ne()}),_.addEventListener("exit",function(V){Q||m.setError({reason:"closed_by_user"})}),m.promise},logout:function(d){var m=F(),U=e.createLogoutUrl(d),E=s(U,"_blank","location=no,hidden=yes,clearcache=yes"),_;return E.addEventListener("loadstart",function(M){M.url.indexOf(k())==0&&E.close()}),E.addEventListener("loaderror",function(M){M.url.indexOf(k())==0||(_=!0),E.close()}),E.addEventListener("exit",function(M){_?m.setError():(e.clearToken(),m.setSuccess())}),m.promise},register:function(d){var m=F(),U=e.createRegisterUrl(),E=l(d),_=s(U,"_blank",E);return _.addEventListener("loadstart",function(M){if(M.url.indexOf(k())==0){_.close();var Q=y(M.url);q(Q,m)}}),m.promise},accountManagement:function(){var d=e.createAccountUrl();if(typeof d<"u"){var m=s(d,"_blank","location=no");m.addEventListener("loadstart",function(U){U.url.indexOf(k())==0&&m.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(d){return k()}}}if(i=="cordova-native")return a.enable=!1,{login:function(d){var m=F(),U=e.createLoginUrl(d);return universalLinks.subscribe("keycloak",function(E){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var _=y(E.url);q(_,m)}),window.cordova.plugins.browsertab.openUrl(U),m.promise},logout:function(d){var m=F(),U=e.createLogoutUrl(d);return universalLinks.subscribe("keycloak",function(E){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),m.setSuccess()}),window.cordova.plugins.browsertab.openUrl(U),m.promise},register:function(d){var m=F(),U=e.createRegisterUrl(d);return universalLinks.subscribe("keycloak",function(E){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var _=y(E.url);q(_,m)}),window.cordova.plugins.browsertab.openUrl(U),m.promise},accountManagement:function(){var d=e.createAccountUrl();if(typeof d<"u")window.cordova.plugins.browsertab.openUrl(d);else throw"Not supported by the OIDC server"},redirectUri:function(d){return d&&d.redirectUri?d.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+i}var O=function(){if(!(this instanceof O))return new O;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var i=this;function s(){for(var p=new Date().getTime(),w=0;w<localStorage.length;w++){var l=localStorage.key(w);if(l&&l.indexOf("kc-callback-")==0){var k=localStorage.getItem(l);if(k)try{var d=JSON.parse(k).expires;(!d||d<p)&&localStorage.removeItem(l)}catch{localStorage.removeItem(l)}}}}i.get=function(p){if(p){var w="kc-callback-"+p,l=localStorage.getItem(w);return l&&(localStorage.removeItem(w),l=JSON.parse(l)),s(),l}},i.add=function(p){s();var w="kc-callback-"+p.state;p.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(w,JSON.stringify(p))}},J=function(){if(!(this instanceof J))return new J;var i=this;i.get=function(l){if(l){var k=p("kc-callback-"+l);if(w("kc-callback-"+l,"",s(-100)),k)return JSON.parse(k)}},i.add=function(l){w("kc-callback-"+l.state,JSON.stringify(l),s(60))},i.removeItem=function(l){w(l,"",s(-100))};var s=function(l){var k=new Date;return k.setTime(k.getTime()+l*60*1e3),k},p=function(l){for(var k=l+"=",d=document.cookie.split(";"),m=0;m<d.length;m++){for(var U=d[m];U.charAt(0)==" ";)U=U.substring(1);if(U.indexOf(k)==0)return U.substring(k.length,U.length)}return""},w=function(l,k,d){var m=l+"="+k+"; expires="+d.toUTCString()+"; ";document.cookie=m}};function L(){try{return new O}catch{}return new J}function X(i){return function(){e.enableLogging&&i.apply(console,Array.prototype.slice.call(arguments))}}}function Dr(t){let e=String.fromCodePoint(...t);return btoa(e)}var Fe=class{constructor(){this._optionsLocation="@authOptions"}set(e){return localStorage.setItem(this._optionsLocation,JSON.stringify(e)),e}get(){let e=localStorage.getItem(this._optionsLocation);if(!e)return null;try{return JSON.parse(e)}catch(r){console.log(r)}return null}clear(){localStorage.setItem(this._optionsLocation,"")}};var ir=(()=>{let e=class e{constructor(n,o,a,c){this.router=o,this.locationStrategy=a,this.http=c,this.storage=new Fe,this.tokenValiditity=300,this.environment=n}login(){return pe(this,arguments,function*(n={}){let o=new URL(this.instance.createLoginUrl(n));window.location.href=o.toString()})}logout(){return pe(this,null,function*(){this.storage.clear();let n=this.instance.createLogoutUrl({redirectUri:this.getLoginRedirectUri()});window.location.href=n})}isPWA(){return["fullscreen","standalone","minimal-ui"].some(n=>window.matchMedia("(display-mode: "+n+")").matches)}refreshToken(){this.instance.updateToken(this.tokenValiditity).then(n=>{if(!n){this.router.navigate([Ue.login]);return}}).catch(n=>{console.log(n)})}loadUserProfile(){return this.instance.loadUserProfile()}initialize(){return this.instance=new Me({url:this.environment.authUrl,realm:this.environment.realm,clientId:this.getClinetId()}),this.instance.onTokenExpired=()=>{this.refreshToken()},this.instance.init({onLoad:"check-sso",silentCheckSsoRedirectUri:`${this.getBaseUrl()}assets/silent-check-sso.html`,enableLogging:!this.environment.production,checkLoginIframe:!0})}hasResouceRole(n,o){return this.instance.hasResourceRole(o,n)}hasResource(n){return this.instance.resourceAccess?this.instance.resourceAccess[n]!==void 0:!1}getResources(){return Object.keys(this.instance.resourceAccess||{})}hasRealmRole(n){return this.instance.hasRealmRole(n)}getRealm(){return this.instance.realm}getToken(){return this.instance?.token}isAuthenticated(){return this.instance&&this.instance.authenticated===!0}getLoginRedirectUri(){return`${this.getBaseUrl()}${Ue.login}`}getClinetId(){return this.environment.clientId}getBaseUrl(){return`${window.location.origin}${this.locationStrategy.getBaseHref()}`}};e.\u0275fac=function(o){return new(o||e)(re("environment"),re(Ne),re(Pe),re(me))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wt=(()=>{let e=class e{constructor(n,o,a){this.http=o,this.identityService=a,this.environment=n}getPath(){return`${this.environment.authUrl}/admin/realms/${this.identityService.getRealm()}`}getUsers(n){return this.http.get(`${this.getPath()}/users`,{params:new be({fromObject:Ee(n)})}).pipe(z(1))}getUserById(n){if(n===null)throw new Error("resource should not be null");return this.http.get(`${this.getPath()}/users/${n}`,{}).pipe(z(1))}deleteUser(n){return this.http.delete(`${this.getPath()}/users/${n}`).pipe(z(1))}updateUser(n,o){return this.http.put(`${this.getPath()}/users/${n}`,o).pipe(z(1))}createUser(n){return this.http.post(`${this.getPath()}/users`,n).pipe(z(1))}getUserGroups(n){return this.http.get(`${this.getPath()}/users/${n}/groups`,{}).pipe(z(1))}deleteUserGroup(n,o){return this.http.delete(`${this.getPath()}/users/${n}/groups/${o}`).pipe(z(1))}addUserGroup(n,o){return this.http.put(`${this.getPath()}/users/${n}/groups/${o}`,{}).pipe(z(1))}getGroups(n){return this.http.get(`${this.getPath()}/groups`,{params:new be({fromObject:Ee(n)})}).pipe(z(1))}createGroup(n){return this.http.post(`${this.getPath()}/groups`,n)}updateGroup(n,o){return this.http.put(`${this.getPath()}/groups/${n}`,o).pipe(z(1))}deleteGroup(n){return this.http.delete(`${this.getPath()}/groups/${n}`).pipe(z(1))}};e.\u0275fac=function(o){return new(o||e)(re("environment"),re(me),re(ir))},e.\u0275prov=xe({token:e,factory:e.\u0275fac});let t=e;return t})();export{Ue as a,ir as b,wt as c};
/**i18n:23b18f90dfad26ae6b830c3e760ecc323aedcfc43eb78549f6a00c2171dce7c8*/
