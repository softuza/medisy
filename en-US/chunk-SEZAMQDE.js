import{a as x,c as ee,e as te,f as oe,g as C,j as ie,k as re,l as a}from"./chunk-6GJX35JZ.js";import"./chunk-JDX3JOR3.js";import"./chunk-CYWZV7FT.js";import{a as f}from"./chunk-PQ4G2ZTK.js";import{e as H,f as J,g as K,i as Q,j as W,k as Z}from"./chunk-WHMXVBDM.js";import"./chunk-LLDJL6TH.js";import{b as q}from"./chunk-EHVSMQRO.js";import{f as R}from"./chunk-PR6JXWGR.js";import{a as U,b as X,d as k,e as w,g as j}from"./chunk-KYK5YSTZ.js";import{t as V,x as G}from"./chunk-XVJVW3GS.js";import{Ba as N,J as D,N as z,d as M,f as y,g as L,k as g,m as h,p as Y,q as I,t as v,ya as F}from"./chunk-TQ7PHNPM.js";import"./chunk-TB2PBBV5.js";import{Ea as $,Ga as B}from"./chunk-4F3G4NSL.js";import{Fb as s,Gb as d,Hb as p,M as O,Rb as E,Tb as A,gb as S,hb as _,kc as P,oa as u,ob as b,vb as n}from"./chunk-WEGHM63Q.js";var ae=(()=>{let r=class r extends H{constructor(e,o,i,t){super(i),this.mlabService=e,this.fb=o,this.dialog=i,this.data=t,this.testTypes=this.mlabService.testTypes.getAll({orderBy:["latinName"]}),this.form=o.group({enabled:[t.laboratoryTestType?.enabled??!0,[M.required]],retailPrice:[t.laboratoryTestType?.retailPrice??0,[]],costPrice:[t.laboratoryTestType?.costPrice??0,[]],forwardPrice:[t.laboratoryTestType?.forwardPrice??0,[]],isFavorite:[t.laboratoryTestType?.isFavorite??!1,[M.required]],testTypeId:[t.laboratoryTestType?.testTypeId,[M.required]]});}submit(){this.IsValid()&&(this.data.laboratoryTestType?this.save(this.mlabService.laboratories.testTypes.update(this.data.laboratoryId,this.data.laboratoryTestType?.id,this.form.value)):this.save(this.mlabService.laboratories.testTypes.create(this.data.laboratoryId,this.form.value)));}};r.ɵfac=function(o){return new(o||r)(_(f),_(I),_(U),_(X));},r.ɵcmp=u({type:r,selectors:[["medisy-laboratory-test-types-save"]],standalone:!0,features:[b,P],decls:12,vars:4,consts:()=>{let e;e="Test Type";let o;o="Retail Price";let i;i="Cost Price";let t;t="Forward Price";let T;T="Favorite";let c;return c="Enabled",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId","label",e,3,"source"],["formControlName","retailPrice","label",o],["formControlName","costPrice","label",i],["formControlName","forwardPrice","label",t],["formControlName","isFavorite"],T,["formControlName","enabled"],c,[3,"actions"]];},template:function(o,i){o&1&&(p(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),p(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-input",3)(5,"sz-ui-form-field-input",4)(6,"sz-ui-form-field-input",5),s(7,"mat-checkbox",6),E(8,7),d(),s(9,"mat-checkbox",8),E(10,9),d()()(),p(11,"sz-ui-dialog-actions",10)),o&2&&(n("header",i.header),S(2),n("formGroup",i.form),S(),n("source",i.testTypes),S(8),n("actions",i.actions));},dependencies:[v,g,y,L,h,Y,W,J,K,j,w,C,oe,V,G],encapsulation:2});let l=r;return l;})();var Xe=(()=>{let r=class r{constructor(e,o,i){this.dialog=e,this.mlabService=o,this.route=i,this.title=N.testTypes,this.dataSource=new ee(),this.laboratory=this.route.snapshot.data.laboratory,this.dataSource.fields.push(a.uuid("id"),a.uuid("laboratoryId"),a.uuid("testTypeId"),a.string("testType.name"),a.number("costPrice"),a.number("forwardPrice"),a.number("retailPrice"),a.date("createdAt",!1),a.date("updatedAt",!1),a.boolean("isFavorite",(t,T)=>{t.isFavorite=T,this.updateItem(t);}).setDisplayName(N.favorite),a.boolean("enabled",(t,T)=>{t.enabled=T,this.mlabService.laboratories.testTypes.update(t.laboratoryId,t.id,t).pipe(O(1)).subscribe(c=>{t=c;});}),x.menu([R.edit(t=>this.openSaveComponent(t)),R.delete(t=>this.openLaboratoryTestTypeDeleteComponent(t))])),this.get();}openSaveComponent(e){this.dialog.open(ae,{data:{laboratoryId:this.laboratory.id,laboratoryTestType:e}}).afterClosed().pipe(O(1)).subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openLaboratoryTestTypeDeleteComponent(e){this.dialog.open(Q,{data:Z.delete(this.mlabService.laboratories.testTypes.delete(e.laboratoryId,e.id),e)}).afterClosed().pipe(O(1)).subscribe(o=>{this.dataSource.delete(o);});}updateItem(e){this.mlabService.laboratories.testTypes.update(e.laboratoryId,e.id,e).subscribe(o=>{this.dataSource.update(o);});}get(){this.mlabService.laboratories.testTypes.get(this.laboratory.id,this.dataSource.buildRequest()).pipe(F(this.dataSource.indicator)).pipe(O(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};r.ɵfac=function(o){return new(o||r)(_(k),_(f),_(D));},r.ɵcmp=u({type:r,selectors:[["medisy-laboratory-test-types"]],standalone:!0,features:[P],decls:6,vars:5,consts:()=>{let e;return e="Add",[[3,"title","subtitle"],[3,"dataSource","changed"],["title","","mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(o,i){o&1&&(p(0,"sz-ui-header-info",0),s(1,"sz-ui-table-search-filter",1),A("changed",function(){return i.get();}),s(2,"button",2),A("click",function(){return i.openSaveComponent();}),s(3,"span"),E(4,3),d()()(),s(5,"sz-ui-table",4),A("update",function(){return i.get();}),d()),o&2&&(n("title",i.title)("subtitle",i.laboratory.name),S(),n("dataSource",i.dataSource),S(4),n("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[z,q,re,ie,te,C,B,$],encapsulation:2});let l=r;return l;})();export{Xe as LaboratoryTestTypesComponent};/**i18n:b6356af15a472d72c43a2a12f81780e7aeabf4debd55cf9990b19b5b7f0f0471*/