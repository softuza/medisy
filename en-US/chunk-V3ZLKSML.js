import{a as Ie}from"./chunk-DAXSJ46J.js";import{a as d}from"./chunk-6QBJYIBM.js";import{a as Ee,b as Te,c as Ne}from"./chunk-REUSU3QE.js";import"./chunk-4SZIFRWS.js";import{a as O}from"./chunk-KBCE4TCO.js";import{h as ne}from"./chunk-QNM6XM36.js";import{a as Me,b as he,d as ge,f as Ce,i as ve,j as De}from"./chunk-TI3KPOR7.js";import"./chunk-6476LBLO.js";import"./chunk-PT75MKNF.js";import{e as le,f as ce,g as fe,i as Se,j as z,k as _e}from"./chunk-OPST3HSR.js";import"./chunk-QUJGTYPR.js";import{b}from"./chunk-EPNV7HRZ.js";import{d as pe,h as ue,j as I,l as de}from"./chunk-JHC5R5G3.js";import{a as Z,b as ee,d as E,e as te,g as T}from"./chunk-5MAY3I4F.js";import{p as se,q as me}from"./chunk-RZLFWLWK.js";import{c as ae}from"./chunk-4GL34ATX.js";import"./chunk-VQDUMFVZ.js";import"./chunk-D5DPYT77.js";import"./chunk-OPRLBPJZ.js";import{a as ie,h as oe}from"./chunk-C77Q6E22.js";import{d as w,f as V,g as x,k as H,m as q,p as J,q as K,t as Q}from"./chunk-ZBCFQZ6O.js";import"./chunk-GMGFC4G7.js";import{a as v,c as W,e as D}from"./chunk-IWB7BCZA.js";import"./chunk-RJKTLLZK.js";import{a as re,c as N}from"./chunk-FBMLFETS.js";import{$ as Y}from"./chunk-VGXLPPL2.js";import"./chunk-K7SXQZKF.js";import{Bb as a,Hb as B,Ib as j,Ja as S,Jb as _,Kb as M,Lb as s,Mb as p,Nb as l,Xb as h,Yb as R,gb as u,hb as m,hc as X,ic as k,na as c,nc as g,oa as U,oc as C,sb as F,xb as L,yb as P,za as y,zb as $}from"./chunk-75X3YXCS.js";function Ae(o,t){if(o&1&&(s(0,"mat-option",5),X(1),p()),o&2){let f=t.$implicit;a("value",f.id),u(),k(f.name);}}var be=(()=>{let t=class t extends le{constructor(e,i,r,n){super(r),this.adminService=e,this.fb=i,this.dialog=r,this.user=n,this.groups=[],this.form=i.group({groupId:[null,[w.required]]}),this.getGroups();}flattenGroups(e){let i=[];function r(n){i.push({id:n.id,name:n.name,path:n.path,subGroups:[]}),n.subGroups&&n.subGroups.forEach(r);}return e.forEach(r),i;}getGroups(){this.adminService.getGroups().subscribe(e=>{this.groups=this.flattenGroups(e);});}submit(){this.IsValid()&&this.adminService.addUserGroup(this.user.id,this.form.value.groupId).subscribe(()=>{this.dialog.close(!0);});}};t.ɵfac=function(i){return new(i||t)(m(d),m(K),m(Z),m(ee));},t.ɵcmp=c({type:t,selectors:[["sz-admin-users-user-group-add"]],standalone:!0,features:[F,C],decls:10,vars:3,consts:()=>{let e;return e="Groups",[[3,"header"],[1,"sz-form",3,"formGroup"],e,["formControlName","groupId"],[3,"actions"],[3,"value"]];},template:function(i,r){i&1&&(l(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1)(3,"mat-form-field")(4,"mat-label"),h(5,2),p(),s(6,"mat-select",3),_(7,Ae,2,2,"mat-option",5,B),p()()()(),l(9,"sz-ui-dialog-actions",4)),i&2&&(a("header",r.header),u(2),a("formGroup",r.form),u(5),M(r.groups),u(2),a("actions",r.actions));},dependencies:[Q,H,V,x,q,J,T,te,z,ce,fe,me,oe,ie,se,Y],encapsulation:2});let o=t;return o;})();var G=(()=>{let t=class t{constructor(){this.route=S(v),this.dialog=S(E),this.adminService=S(d),this.dataSource=new ge(),this.user=this.route.snapshot.data.user,this.dataSource.columnDefs.push(Me.string("name").setValueGetter(e=>e.name),he.menu([I.delete(e=>this.openDeleteComponent(e))])),this.get();}openDeleteComponent(e){this.dialog.open(Se,{data:_e.delete(this.adminService.deleteUserGroup(this.user.id,e.id),e)}).afterClosed().subscribe(i=>{this.dataSource.delete(i);});}openAddComponent(){this.dialog.open(be,{data:this.user}).afterClosed().subscribe(e=>{e&&this.get();});}get(){this.adminService.getUserGroups(this.user.id).pipe(ae(this.dataSource.indicator)).subscribe(e=>{this.dataSource.set(e,e.length);});}};t.ɵfac=function(i){return new(i||t)();},t.ɵcmp=c({type:t,selectors:[["sz-admin-users-user-groups"]],standalone:!0,features:[g([]),C],decls:5,vars:3,consts:()=>{let e;return e="Add",[[3,"dataSource"],["mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(i,r){i&1&&(s(0,"sz-ui-table-search-filter",0)(1,"button",1),R("click",function(){return r.openAddComponent();}),s(2,"span"),h(3,2),p()()(),s(4,"sz-ui-table",3),R("update",function(){return r.get();}),p()),i&2&&(a("dataSource",r.dataSource),u(4),a("stateEnabled",!0)("dataSource",r.dataSource));},dependencies:[D,De,ve,Ce,N,re],encapsulation:2});let o=t;return o;})();var ye=()=>[G];function Fe(o,t){if(o&1&&l(0,"sz-ui-card",4),o&2){let f=t.$implicit;a("card",f);}}function Le(o,t){o&1&&l(0,"sz-admin-users-user-groups");}var Oe=(()=>{let t=class t{constructor(e,i,r,n){this.dialog=e,this.adminService=i,this.route=r,this.router=n,this.items=[],this.userMenu=de.more([I.edit(()=>this.openSaveComponent())]),this.user=this.route.snapshot.data.user;}openSaveComponent(){this.dialog.open(Ie,{data:this.user}).afterClosed().subscribe(()=>{this.getUser();});}getUser(){this.adminService.getUserById(this.user.id).subscribe(e=>{this.user=e;});}navigate(e){this.router.navigate([e],{relativeTo:this.route});}};t.ɵfac=function(i){return new(i||t)(m(E),m(d),m(v),m(W));},t.ɵcmp=c({type:t,selectors:[["sz-admin-users-user"]],features:[g([d])],decls:9,vars:2,consts:()=>{let e;return e="Groups",[[3,"title","menu"],[1,"sz-grid-card"],["mat-stretch-tabs","false"],["label",e],[3,"card"]];},template:function(i,r){i&1&&(l(0,"sz-ui-header-info",0),s(1,"div",1),_(2,Fe,1,1,"sz-ui-card",4,j),p(),s(4,"mat-tab-group",2)(5,"mat-tab",3),L(6,Le,1,0),P(7,6,ye),$(),p()()),i&2&&(a("title",r.user.username)("menu",r.userMenu),u(2),M(r.items));},dependencies:[O,b,Ee,Te],encapsulation:2});let o=t;return o;})();var ze=[{path:"",component:Oe}];var Lt=(()=>{let t=class t{};t.ɵfac=function(i){return new(i||t)();},t.ɵmod=U({type:t}),t.ɵinj=y({imports:[D.forChild(ze),ne,O,z,b,pe,T,N,ue,Ne,G]});let o=t;return o;})();export{Lt as UserModule};/**i18n:1c5a057012127d5b8d089498ac661b5227d0455136ea3b9f25a2d8940ec324d8*/