import{a as je,b as Ue,c as Xe}from"./chunk-KKUUJPER.js";import{a as x}from"./chunk-IAS2DZRG.js";import{b as Te}from"./chunk-RVIXF2NS.js";import{b as Ne,d as B}from"./chunk-YQJRDIE2.js";import{a as Fe}from"./chunk-KZQP3VMU.js";import{a as A}from"./chunk-UR62DX7K.js";import{a as b}from"./chunk-OFMPEXF4.js";import{a as z}from"./chunk-LSZKT7OX.js";import"./chunk-5FJFGYFF.js";import"./chunk-ESSVKAV5.js";import{a as Be,b as Ge,g as h}from"./chunk-CCLL2PQ6.js";import"./chunk-PPO5LMMV.js";import"./chunk-PWAP25HQ.js";import{a as se,b as me,c as pe,d as le,e as de,f as ce,g as _e,h as ue}from"./chunk-I7NN55R5.js";import"./chunk-Z333ZEEM.js";import{b as ze,d as xe,n as $e}from"./chunk-I7TP3TN4.js";import"./chunk-CZ465XL4.js";import{c as Oe,h as Re,i as be,j as Le,m as Ye}from"./chunk-UJAW327Y.js";import{a as he,b as Ie,d as ve,e as ye,g as R}from"./chunk-JW5GSDNP.js";import{E as Ae,z as Ee}from"./chunk-M2QIPGOP.js";import{g as J,h as K,l as W,n as Z,o as ee,p as te,s as ie}from"./chunk-DNMCT3KT.js";import{b as L,c as M,d as De}from"./chunk-ZVQOD7OG.js";import"./chunk-XDA5TPS5.js";import"./chunk-64EDSMYL.js";import"./chunk-FOMYF5QC.js";import{a as _}from"./chunk-TJ6J6WZC.js";import{a as Y}from"./chunk-CSFT2WH3.js";import{a as ge}from"./chunk-OGDXQP2U.js";import{a as oe,c as ne,d as re,e as T,f as Ce,g as Pe}from"./chunk-KYUPPZUX.js";import{a as Se,b as fe}from"./chunk-MOVIZYKO.js";import"./chunk-B5RRONYF.js";import{a as ae,c as O}from"./chunk-M4TKXCQI.js";import{Ra as Me,o as Q}from"./chunk-IPZKDZL6.js";import{Ab as k,Bb as a,Cb as r,Db as p,L as v,Nb as F,Rb as P,Wb as c,Xb as u,Zb as E,_a as y,a as j,ac as g,b as U,cb as s,cc as q,da as X,db as m,ec as N,fc as D,kb as w,la as C,ma as H,nb as d,tb as f,ub as S,zb as V}from"./chunk-3QIFGVJ6.js";function qe(e,o){if(e&1&&(a(0,"mat-card-subtitle"),c(1),r()),e&2){let l=P();s(1),u(l.person==null?null:l.person.title);}}function Qe(e,o){e&1&&(a(0,"mat-card-subtitle"),F(1,4),r());}function Je(e,o){if(e&1&&(a(0,"span"),c(1),N(2,"typeI18n"),r()),e&2){let l=P();s(1),u(D(2,1,l.person==null?null:l.person.sex));}}function Ke(e,o){e&1&&(a(0,"span"),c(1," - "),r());}function We(e,o){if(e&1&&(a(0,"span"),c(1),N(2,"personAge"),r()),e&2){let l=P();s(1),u(D(2,1,l.person==null?null:l.person.birthDate));}}function Ze(e,o){e&1&&(a(0,"mat-card-footer"),p(1,"mat-progress-bar",5),r());}var et=e=>[e],$=(()=>{let o=class o{set personId(n){this._personId=n,this.getPerson(n);}get personId(){return this._personId;}constructor(n,i,t){this.mpplService=n,this.typeI18nPipe=i,this.personNamePipe=t,this.indicator=y(!1),this.attributes={items:[]};}addAttributes(n){if(n.phones&&n.phones.length>0){let i=n.phones.find(t=>t.phoneType===Ge.Mobile)?.value;i&&this.attributes.items.push(B.text(i,"phone"));}if(n.emails&&n.emails.length>0){let i=n.emails.find(t=>t.emailType===Be.Private)?.value;i&&this.attributes.items.push(B.text(i,"email"));}}getPerson(n){this.mpplService.persons.getById(n).pipe(v(1),Oe(this.indicator)).subscribe(i=>{this.person=i,this.addAttributes(i);});}};o.ɵfac=function(i){return new(i||o)(m(b),m(h),m(A));},o.ɵcmp=C({type:o,selectors:[["medisy-people-persons-common-person-card"]],inputs:{personId:"personId"},standalone:!0,features:[E([h]),g],decls:22,vars:13,consts:()=>{let n;n="More";let i;return i="Patient",[[1,"example-card"],[3,"list"],["mat-button","",3,"routerLink"],n,i,["mode","indeterminate"]];},template:function(i,t){i&1&&(a(0,"mat-card",0)(1,"mat-card-header"),f(2,qe,2,1,"mat-card-subtitle")(3,Qe,2,0),a(4,"mat-card-title"),c(5),N(6,"personName"),r(),a(7,"mat-card-subtitle"),f(8,Je,3,3,"span")(9,Ke,2,0,"span")(10,We,3,3,"span"),r()(),a(11,"mat-card-content")(12,"p"),c(13),r()(),a(14,"mat-card-content"),p(15,"sz-ui-list-compact",1),r(),a(16,"mat-card-content"),p(17,"mat-divider"),r(),a(18,"mat-card-actions")(19,"button",2),F(20,3),r()(),f(21,Ze,2,0,"mat-card-footer"),r()),i&2&&(s(2),S(2,t.person!=null&&t.person.title?2:3),s(3),u(D(6,9,t.person)),s(3),S(8,t.person!=null&&t.person.sex?8:-1),s(1),S(9,t.person!=null&&t.person.sex&&t.person!=null&&t.person.birthDate?9:-1),s(1),S(10,t.person!=null&&t.person.birthDate?10:-1),s(3),u(t.person==null?null:t.person.note),s(2),d("list",t.attributes),s(4),d("routerLink",q(11,et,"/mppl/persons/"+t.personId)),s(2),S(21,t.indicator()?21:-1));},dependencies:[T,re,ue,se,de,pe,_e,ce,le,me,Ne,Pe,Ce,fe,Se,O,ae,$e,h,A,Fe],encapsulation:2});let e=o;return e;})();var He=(()=>{let o=class o extends Re{constructor(n,i,t,I){super(t),this.mlabService=n,this.fb=i,this.dialog=t,this.data=I,this.form=i.group({note:[I?.note,[]]});}submit(){this.IsValid()&&this.data&&this.save(this.mlabService.analyses.update(this.data.id,U(j({},this.data),{note:this.form.value.note})));}};o.ɵfac=function(i){return new(i||o)(m(_),m(te),m(he),m(Ie));},o.ɵcmp=C({type:o,selectors:[["medisy-analysis-save"]],standalone:!0,features:[E([_]),w,g],decls:5,vars:3,consts:()=>{let n;return n="Note",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","note","label",n],[3,"actions"]];},template:function(i,t){i&1&&(p(0,"sz-ui-dialog-header",0),a(1,"mat-dialog-content")(2,"form",1),p(3,"sz-ui-form-field-input",2),r()(),p(4,"sz-ui-dialog-actions",3)),i&2&&(d("header",t.header),s(2),d("formGroup",t.form),s(2),d("actions",t.actions));},dependencies:[ie,W,J,K,Z,ee,R,ye,Ye,be,Le,Ae,Ee],encapsulation:2});let e=o;return e;})();var nt=()=>[x];function rt(e,o){if(e&1&&p(0,"medisy-people-persons-common-person-card",5),e&2){let l=P();d("personId",l.analysis.personId);}}function at(e,o){e&1&&p(0,"medisy-laboratory-analysis-specimens");}var we=(()=>{let o=class o{constructor(n,i,t,I){this.dialog=n,this.route=i,this.router=t,this.mlabService=I,this.alert$=y(void 0),this.testsDataSource=new ze(ge.pagedSorted("-createdAt")),this.tiles=[],this.analysisMenu=De.more([M.edit(()=>this.openSaveComponent()),M.divider(),M.print(()=>this.opendPrintComponent),M.default("Publish","publish",this.openPublishComponent),M.divider(),M.default("QR Code","qr_code",this.openPublishComponent)]),this.analysis=this.route.snapshot.data.analysis;}openSaveComponent(){this.dialog.open(He,{data:this.analysis}).afterClosed().pipe(v(1)).subscribe(n=>{n&&(this.analysis=n);});}opendPrintComponent(){}openPublishComponent(){}};o.ɵfac=function(i){return new(i||o)(m(ve),m(oe),m(ne),m(_));},o.ɵcmp=C({type:o,selectors:[["medisy-laboratory-analysis"]],features:[E([_,b,A])],decls:16,vars:4,consts:()=>{let n;n="Tests";let i;return i="Specimens",[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["end","",3,"menu"],[1,"sz-grid-card","tw-my-4"],[3,"personId"],["mat-stretch-tabs","false"],["label",n],["label",i]];},template:function(i,t){i&1&&(a(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),c(3),r(),a(4,"span",2),c(5),r()(),p(6,"sz-ui-menu",3),r(),a(7,"div",4),f(8,rt,1,1,"medisy-people-persons-common-person-card",5),r(),a(9,"mat-tab-group",6)(10,"mat-tab",7),p(11,"medisy-laboratory-analysis-tests"),r(),a(12,"mat-tab",8),f(13,at,1,0),V(14,13,nt),k(),r()()),i&2&&(s(3),u(t.analysis.code),s(2),u(t.analysis.note),s(1),d("menu",t.analysisMenu),s(2),S(8,t.analysis.personId?8:-1));},dependencies:[je,Ue,Y,L,z,$],encapsulation:2});let e=o;return e;})();var Ve=[{path:"",component:we},{path:"tests",loadComponent:()=>import("./chunk-VQL6EJAF.js").then(e=>e.AnalysisTestsComponent)},{path:"specimens",loadComponent:()=>import("./chunk-FITFNADT.js").then(e=>e.AnalysisSpecimensComponent)}];var Ti=(()=>{let o=class o{};o.ɵfac=function(i){return new(i||o)();},o.ɵmod=H({type:o}),o.ɵinj=X({providers:[_],imports:[Q,T.forChild(Ve),R,Me,O,xe,Xe,Y,Te,L,z,x,$]});let e=o;return e;})();export{Ti as AnalysisModule};/**i18n:419148c294ae56579e504a43f00a8e71eb3633c9912a0864afd0e0662e47e985*/