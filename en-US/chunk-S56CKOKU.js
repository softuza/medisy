import{a as Oe}from"./chunk-LOMGHMUK.js";import{a as S}from"./chunk-FZDVZWXQ.js";import{a as $}from"./chunk-VO3RIH52.js";import"./chunk-PJ4ZDOCC.js";import{d as ce,e as l,g as fe,i as Ce,j as Ee}from"./chunk-6VFR2BLG.js";import"./chunk-KYZGSJVK.js";import"./chunk-257F3KUX.js";import"./chunk-A6CHLAGJ.js";import{b as Se,f as B,g as X,h as H,j as ue,k as Y}from"./chunk-TDTPOOYH.js";import"./chunk-VU2DRYWU.js";import{a as z,b as G,d as L,e as b,g as U}from"./chunk-QHAXF6DJ.js";import{c as ne,o as se,q as me,r as le,s as F,t as de,v as V}from"./chunk-NNTGN3JU.js";import{b as ae}from"./chunk-UT7TBJTS.js";import"./chunk-U3SGEYQ6.js";import"./chunk-2VIOUMQX.js";import{d as C,f as M,g as h,l as R,o as v,r as A,s as I,u as y}from"./chunk-4NISFW37.js";import{a as pe,b as u,c as N}from"./chunk-RY6DPLLN.js";import{a as _e}from"./chunk-ENGVK46T.js";import"./chunk-WGE6F22R.js";import"./chunk-3GJSQYSM.js";import{a as O}from"./chunk-F37COHBJ.js";import"./chunk-TNUAHDWW.js";import{p as P,r as D,s as te,v as oe,x as ie}from"./chunk-E3MHHXGD.js";import"./chunk-MBIUC3OC.js";import"./chunk-OBZLRKTI.js";import{Na as re}from"./chunk-PR5SF5XM.js";import{Hb as J,Ia as j,Ib as K,Jb as W,Jc as ee,Kb as d,Lb as p,Mb as m,Xb as Z,cb as s,hc as x,ja as r,lb as Q,na as _,nb as T,qc as c,rc as f,zb as a}from"./chunk-M4TXNJKT.js";import"./chunk-KEWWYOLQ.js";var w=(()=>{let i=class i extends B{constructor(){super(r(z)),this.fb=r(I),this.data=r(G),this.cstnService=r(S),this.orderPositions=[1,2,3,4,5,6,7,8,9,10,11,12],this.orderSelectConfig={emptyOption:!0};let t=this.fb,e=this.data;this.form=t.group({name:[e?.teamGroup?.name,[C.required,C.minLength(1)]],description:[e?.teamGroup?.description,[]],orderPosition:[e?.teamGroup?.orderPosition,[]]});}submit(){this.IsValid()&&(this.data.teamGroup?this.save(this.cstnService.teams.groups.update(this.data.teamId,this.data.teamGroup.id,this.form.value)):this.save(this.cstnService.teams.groups.create(this.data.teamId,this.form.value)));}};i.ɵfac=function(e){return new(e||i)();},i.ɵcmp=_({type:i,selectors:[["sz-constr-groups-save"]],standalone:!0,features:[c([S]),T,f],decls:7,vars:7,consts:()=>{let t;t="Name";let e;e="Description";let o;return o="Order",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",t],["formControlName","description","label",e],["formControlName","orderPosition","label",o,3,"source","config"],[3,"actions"]];},template:function(e,o){e&1&&(m(0,"sz-ui-dialog-header",0),d(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-input-text",2)(4,"sz-ui-form-field-textarea",3)(5,"sz-ui-form-field-select",4),p()(),m(6,"sz-ui-dialog-actions",5)),e&2&&(a("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),s(2),a("formGroup",o.form),s(3),a("source",o.orderPositions)("config",o.orderSelectConfig),s(),a("actions",o.actions));},dependencies:[y,R,M,h,v,A,U,b,Y,X,H,V,ne,de,F],encapsulation:2});let n=i;return n;})();var Ne=(()=>{let i=class i extends B{constructor(){super(r(z)),this.fb=r(I),this.data=r(G),this.cstnService=r(S),this.employees=this.cstnService.employees.getAll({orderBy:["name"],filterBehavior:oe.Or,filters:ie.create().equalIf("id",this.data?.teamEmployee?.employeeId).notAnyIf("teams.teamId",this.data?.teamId).filters()}),this.designations=this.cstnService.designations.getAll({orderBy:["name"]}),this.groups=this.cstnService.teams.groups.getAll(this.data.teamId,{orderBy:["name"]}),this.groupSelectConfig={emptyOption:!0};let t=this.fb,e=this.data;this.form=t.group({employeeId:[e?.teamEmployee?.employeeId,[C.required]],designationId:[e?.teamEmployee?.designationId,[C.required]],groupId:[e?.teamEmployee?.groupId,[]],isGroupLeader:[e?.teamEmployee?.isGroupLeader??!1,[C.required]],startDate:[e?.teamEmployee?.startDate??new Date(),[]],endDate:[e?.teamEmployee?.endDate,[]]});}submit(){this.IsValid()&&(this.data?.teamEmployee?this.save(this.cstnService.teams.employees.update(this.data.teamId,this.data.teamEmployee.id,this.form.value)):this.save(this.cstnService.teams.employees.create(this.data.teamId,this.form.value)));}};i.ɵfac=function(e){return new(e||i)();},i.ɵcmp=_({type:i,selectors:[["sz-constr-construction-zones-units-save"]],standalone:!0,features:[c([]),T,f],decls:12,vars:9,consts:()=>{let t;t="Employee";let e;e="Designation";let o;o="Group";let E;E="Start Date";let q;return q="End Date",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","employeeId","label",t,3,"source"],["formControlName","designationId","label",e,3,"source"],["formControlName","groupId","label",o,3,"source","config"],["formControlName","isGroupLeader"],[1,"sz-form-row"],["formControlName","startDate","label",E],["formControlName","endDate","label",q],[3,"actions"]];},template:function(e,o){e&1&&(m(0,"sz-ui-dialog-header",0),d(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3)(5,"sz-ui-form-field-select",4),d(6,"mat-checkbox",5),x(7,"Group Leader"),p(),d(8,"div",6),m(9,"sz-ui-form-field-date",7)(10,"sz-ui-form-field-date",8),p()()(),m(11,"sz-ui-dialog-actions",9)),e&2&&(a("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),s(2),a("formGroup",o.form),s(),a("source",o.employees),s(),a("source",o.designations),s(),a("source",o.groups)("config",o.groupSelectConfig),s(6),a("actions",o.actions));},dependencies:[y,R,M,h,v,A,U,b,le,me,Y,X,H,V,se,F],encapsulation:2});let n=i;return n;})();var ge=(()=>{let i=class i{constructor(){this.route=r(P),this.router=r(D),this.dialog=r(L),this.locale=r(ee),this.cstnService=r(S),this.team=j.required(),this.dataSource=new fe(["group.orderPosition"]),this.card={header:{title:O.employees},menu:N.more([u.add(this.openSaveComponent.bind(this)),u.divider(),u.addGroup(()=>this.openGroupSaveComponent())])},this.dataSource.columnDefs.push(l.uuid("id"),l.icon("group.orderPosition").setHeaderName(O.group).setHeaderSortable(!0).setStyleSmall().setValueTooltip(t=>t.group&&t.isGroupLeader?O.group_leader:"").setValueGetter(t=>t.group&&t.isGroupLeader?pe.supervisor_account:"").setResponsive(!0),l.string("employee.name").setStacked(l.string("designation.name").setValueClassFontSmall()),l.string("employee.primaryPhone").setResponsive(!0),l.date("startDate").setVisible(!1),l.date("endDate").setVisible(!1),l.date("createdAt").setVisible(!1),l.date("updatedAt").setVisible(!1),l.menu(N.more([u.edit(this.openSaveComponent.bind(this)),u.divider(),u.delete(this.openDeleteComponent.bind(this))]))),this.dataSource.groupDefs={key:"groupId",name:O.test_group,columnDefs:[l.string("group.name").setValueGetter(t=>t.group?.name??"")]};}ngOnInit(){this.get();}openGroupSaveComponent(t){this.dialog.open(w,{data:{teamId:this.team().id,group:t}}).afterClosed().subscribe(e=>{});}openSaveComponent(t){this.dialog.open(Ne,{data:{teamId:this.team().id,teamEmployee:t}}).afterClosed().subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}openDeleteComponent(t){this.dialog.open(ue,{data:Se.delete(this.cstnService.teams.employees.delete(this.team().id,t.id),t)}).afterClosed().subscribe(e=>{this.dataSource.delete(e);});}get(){this.cstnService.teams.employees.get(this.team().id,this.dataSource.getQuery()).pipe(Ce(this.dataSource.state)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};i.ɵfac=function(e){return new(e||i)();},i.ɵcmp=_({type:i,selectors:[["sz-constr-construction-team-employees-groups"]],inputs:{team:[1,"team"]},standalone:!0,features:[c([S]),f],decls:2,vars:2,consts:[[3,"card"],["content","",3,"update","dataSource"]],template:function(e,o){e&1&&(d(0,"sz-ui-card",0)(1,"sz-ui-table",1),Z("update",function(){return o.get();}),p()()),e&2&&(a("card",o.card),s(),a("dataSource",o.dataSource));},dependencies:[te,Ee,ce,re,$],encapsulation:2});let n=i;return n;})();function ye(n,i){if(n&1&&m(0,"sz-ui-card",3),n&2){let Me=i.$implicit;a("card",Me);}}var Te=(()=>{let i=class i{constructor(){this.cstnService=r(S),this.router=r(D),this.route=r(P),this.dialog=r(L),this.team=this.route.snapshot.data.team,this.alert=Q(void 0),this.cards=[],this.appBarConfig={title:this.team.name,menu:N.default([u.menu([u.edit(this.openSaveComponent.bind(this))])])};}openSaveComponent(){this.dialog.open(Oe,{data:this.team}).afterClosed().subscribe(t=>{t&&(this.team=t);});}openGroupSaveComponent(){this.dialog.open(w,{data:{teamId:this.team.id}}).afterClosed().subscribe(t=>{});}};i.ɵfac=function(e){return new(e||i)();},i.ɵcmp=_({type:i,selectors:[["sz-constr-construction-team"]],standalone:!0,features:[c([]),f],decls:8,vars:3,consts:[[3,"config"],[3,"alert"],[1,"sz-grid-card"],[3,"card"],[1,"tw-my-4"],[3,"team"]],template:function(e,o){e&1&&(m(0,"sz-ui-app-bar",0)(1,"sz-ui-alert",1),d(2,"div",2),K(3,ye,1,1,"sz-ui-card",3,J),p(),d(5,"div",4),m(6,"sz-constr-construction-team-employees-groups",5),p(),m(7,"div",4)),e&2&&(a("config",o.appBarConfig),s(),a("alert",o.alert()),s(2),W(o.cards),s(3),a("team",o.team));},dependencies:[_e,ae,$,ge],encapsulation:2});let n=i;return n;})();var yt=[{path:"",component:Te}];export{yt as default};/**i18n:ce69e7cdd9e538a311e7abe07bc265439d0d15e144a8f5967a13442a6141f53a*/