import{a as s}from"./chunk-TSMWRB3H.js";import{e as re}from"./chunk-CZVACMCC.js";import{a as te,b as ae,c as u,f as ie,g as oe,h as C}from"./chunk-F37TLDOJ.js";import"./chunk-EI54IRV4.js";import"./chunk-XKXHDOYY.js";import"./chunk-CFNJPKH2.js";import{b as Q,f as J,g as K,h as W,j as Y,k as Z}from"./chunk-ZUXIOQ5W.js";import"./chunk-BJI27WIG.js";import{a as $,b as U,d as T,e as w,g as h}from"./chunk-XPOR4ANW.js";import{c as k,p as j,q as E,r as q,t as x}from"./chunk-XJQPGDXO.js";import"./chunk-H6HLHFPT.js";import"./chunk-PYOUUVMA.js";import"./chunk-OLKWA3AP.js";import{d as N,f as V,g as I,l as z,n as R,q as P,r as D,t as L}from"./chunk-H2FFMEH6.js";import{b as d,c as H}from"./chunk-Y3WFFMAX.js";import{a as ee}from"./chunk-HFWKIQYR.js";import"./chunk-NTRRBKKS.js";import"./chunk-AILLJ5BU.js";import"./chunk-QHVUL2KY.js";import{a as X}from"./chunk-TCPYXQGZ.js";import{p as b,s as B,v as y,x as G}from"./chunk-TW5J4YO6.js";import"./chunk-KRMUG4G6.js";import"./chunk-OEH6HIG5.js";import{Ia as F,La as g}from"./chunk-OIZYHDJE.js";import{Jb as n,Kb as m,Lb as p,Vb as A,Wb as v,bb as f,ja as o,mb as O,mc as M,na as S,nc as c,yb as l}from"./chunk-GTR6A7KK.js";import"./chunk-NLUW4JS2.js";var ne=(()=>{let a=class a extends J{constructor(){let i=o($);super(i),this.fb=o(D),this.data=o(U),this.srptService=o(s),this.baseTemplateVariables=this.srptService.baseTemplates.variables.getAll(this.data.baseTemplateId,{orderBy:["name"],filterBehavior:y.Or,filters:G.create().equalIf("id",this.data.templateVariable?.baseTemplateVariableId).notAny("templates.templateId",this.data.templateId).filters()});let e=this.fb;this.dialog=i;let t=this.data;this.form=e.group({enabled:[t.templateVariable?.enabled??!0,[N.required]],description:[t.templateVariable?.description,[]],baseTemplateVariableId:[t.templateVariable?.baseTemplateVariableId,[N.required]],value:[t.templateVariable?.value,[]]});}submit(){this.IsValid()&&(this.data.templateVariable?this.save(this.srptService.templates.variables.update(this.data.templateId,this.data.templateVariable?.id,this.form.value)):this.save(this.srptService.templates.variables.create(this.data.templateId,this.form.value)));}};a.ɵfac=function(e){return new(e||a)();},a.ɵcmp=S({type:a,selectors:[["sz-mgmt-reporting-template-variables-save"]],standalone:!0,features:[M([s]),O,c],decls:9,vars:6,consts:()=>{let i;i="Variable";let e;e="Value";let t;return t="Enabled",[t,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","baseTemplateVariableId","label",i,3,"source"],["formControlName","value","label",e],[1,"sz-form-row"],["formControlName","enabled"],[3,"actions"]];},template:function(e,t){e&1&&(p(0,"sz-ui-dialog-header",1),n(1,"mat-dialog-content")(2,"form",2),p(3,"sz-ui-form-field-select",3)(4,"sz-ui-form-field-input",4),n(5,"div",5)(6,"mat-checkbox",6),A(7,0),m()()()(),p(8,"sz-ui-dialog-actions",7)),e&2&&(l("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),f(2),l("formGroup",t.form),f(),l("source",t.baseTemplateVariables),f(5),l("actions",t.actions));},dependencies:[L,z,V,I,R,P,Z,K,W,h,w,E,j,re,x,k,q],encapsulation:2});let r=a;return r;})();var se=(()=>{let a=class a{constructor(){this.dialog=o(T),this.srptService=o(s),this.route=o(b),this.dataSource=new ie("baseTemplateVariable.name"),this.template=this.route.snapshot.data.template,this.appBarConfig={title:X.variables,subtitle:this.template.name,menu:H.default().setItems([d.add(this.openSaveComponent.bind(this)),d.menu([d.search()])])},this.dataSource.columnDefs.push(u.uuid("id"),u.string("baseTemplateVariable.name"),u.string("value"),u.date("createdAt").setVisible(!1),u.date("updatedAt").setVisible(!1),u.menu([d.edit(this.openSaveComponent.bind(this)),d.divider(),d.delete(this.openTemplateVariableDeleteComponent.bind(this))])),this.get();}openSaveComponent(i){this.dialog.open(ne,{data:{templateId:this.template.id,baseTemplateId:this.template.baseTemplateId,templateVariable:i}}).afterClosed().subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}openTemplateVariableDeleteComponent(i){this.dialog.open(Y,{data:Q.delete(this.srptService.templates.variables.delete(i.templateId,i.id),i)}).afterClosed().subscribe(e=>{this.dataSource.delete(e);});}get(){this.srptService.templates.variables.get(this.template.id,this.dataSource.getQuery()).pipe(oe(this.dataSource.state)).subscribe(i=>{this.dataSource.set(i.items,i.count);});}};a.ɵfac=function(e){return new(e||a)();},a.ɵcmp=S({type:a,selectors:[["sz-mgmt-reporting-template-variables"]],standalone:!0,features:[c],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(e,t){e&1&&(n(0,"sz-ui-table-bar",0),v("changed",function(){return t.get();}),m(),n(1,"sz-ui-table",1),v("update",function(){return t.get();}),m()),e&2&&(l("config",t.appBarConfig)("dataSource",t.dataSource),f(),l("dataSource",t.dataSource));},dependencies:[B,C,ae,te,E,g],encapsulation:2});let r=a;return r;})();var me=(()=>{let a=class a{constructor(){this.route=o(b),this.dialog=o(T),this.srptService=o(s),this.template=this.route.snapshot.data.template,this.appBarConfig={title:this.template.name,subtitle:this.template.description};}};a.ɵfac=function(e){return new(e||a)();},a.ɵcmp=S({type:a,selectors:[["sz-mgmt-reporting-template"]],standalone:!0,features:[M([s]),c],decls:3,vars:1,consts:[[3,"config"],[1,"tw-my-4"]],template:function(e,t){e&1&&(p(0,"sz-ui-app-bar",0),n(1,"div",1),p(2,"sz-mgmt-reporting-template-variables"),m()),e&2&&l("config",t.appBarConfig);},dependencies:[h,g,C,ee,F,se],encapsulation:2});let r=a;return r;})();var it=[{path:"",component:me}];export{it as default};/**i18n:71c33448fc84035c6ee56f25f20b16a3c311d1f911de884d4bce9857c4574a16*/