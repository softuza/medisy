import{a as ve}from"./chunk-A2RAJVT5.js";import{a as l}from"./chunk-JYX4FAMI.js";import{a as M}from"./chunk-WO6X2WJ6.js";import{a as u,b as Me,d as Te,e as he,j as Re,k as K}from"./chunk-KDQAQ2ON.js";import"./chunk-JXJYDBQT.js";import"./chunk-H3FOOGF5.js";import"./chunk-7GEYLSOC.js";import"./chunk-UYYWHWBI.js";import{e as q,f as Q,g as J,i as ge,j as T,k as Ne}from"./chunk-PGBMIKKU.js";import{a as k}from"./chunk-NXQ5VREG.js";import{e as ee,g as h,h as E,j as H}from"./chunk-HWSLRHWT.js";import{a as U,b as V,d as $,e as B,g as N}from"./chunk-Z2LVGH3F.js";import{c as _e,p as fe,q as Ce,r as Ee,s as Y,u as Oe,v as w}from"./chunk-RZ24NSRA.js";import{b as j}from"./chunk-WABYONCF.js";import"./chunk-KCMCGJDS.js";import"./chunk-ZSZINKJW.js";import{c as f}from"./chunk-NE5STG6Q.js";import"./chunk-LGG5C546.js";import{d as C,f as I,g as y,l as A,n as P,q as z,r as D,u as G}from"./chunk-WH3JX6YX.js";import{r as ue,t as Se}from"./chunk-HWVQOC2X.js";import{a as L,c as b,e as F}from"./chunk-LCFIH6IT.js";import"./chunk-6BPUQMXP.js";import{ia as ce,la as X}from"./chunk-CKMIAYXP.js";import"./chunk-YNHLE3XH.js";import{Dc as de,Fa as re,Gb as ae,Hb as se,Ib as me,Jb as p,Kb as d,Lb as m,Wb as le,bb as a,cb as c,ea as oe,hc as pe,ja as s,na as S,nc as _,oa as ie,ob as ne,oc as g,qb as v,zb as n}from"./chunk-ID6V6OOS.js";import"./chunk-YPLVL3HC.js";var Z=(()=>{let i=class i extends q{constructor(e,t,o){super(t),this.fb=e,this.dialog=t,this.data=o,this.cstnService=s(l),this.orderPositions=[1,2,3,4,5,6,7,8,9,10,11,12],this.orderSelectConfig={emptyOption:!0},this.form=e.group({name:[o?.teamGroup?.name,[C.required,C.minLength(1)]],description:[o?.teamGroup?.description,[]],orderPosition:[o?.teamGroup?.orderPosition,[]]});}submit(){this.IsValid()&&(this.data.teamGroup?this.save(this.cstnService.teams.groups.update(this.data.teamId,this.data.teamGroup.id,this.form.value)):this.save(this.cstnService.teams.groups.create(this.data.teamId,this.form.value)));}};i.ɵfac=function(t){return new(t||i)(c(D),c(U),c(V));},i.ɵcmp=S({type:i,selectors:[["sz-constr-groups-save"]],standalone:!0,features:[_([l]),v,g],decls:7,vars:7,consts:()=>{let e;e="Name";let t;t="Description";let o;return o="Order",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",t],["formControlName","orderPosition","label",o,3,"source","config"],[3,"actions"]];},template:function(t,o){t&1&&(m(0,"sz-ui-dialog-header",0),p(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"sz-ui-form-field-select",4),d()(),m(6,"sz-ui-dialog-actions",5)),t&2&&(n("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),a(2),n("formGroup",o.form),a(3),n("source",o.orderPositions)("config",o.orderSelectConfig),a(),n("actions",o.actions));},dependencies:[G,A,I,y,P,z,N,B,T,Q,J,w,_e,Oe,Y],encapsulation:2});let r=i;return r;})();var Ie=(()=>{let i=class i extends q{constructor(e,t,o){super(t),this.fb=e,this.dialog=t,this.data=o,this.cstnService=s(l),this.employees=this.cstnService.employees.getAll({orderBy:["name"],filterBehavior:ue.Or,filters:Se.create().equalIf("id",this.data?.teamEmployee?.employeeId).notAnyIf("teams.teamId",this.data?.teamId).filters()}),this.designations=this.cstnService.designations.getAll({orderBy:["name"]}),this.groups=this.cstnService.teams.groups.getAll(this.data.teamId,{orderBy:["name"]}),this.groupSelectConfig={emptyOption:!0},this.form=e.group({employeeId:[o?.teamEmployee?.employeeId,[C.required]],designationId:[o?.teamEmployee?.designationId,[C.required]],groupId:[o?.teamEmployee?.groupId,[]],isGroupLeader:[o?.teamEmployee?.isGroupLeader??!1,[C.required]],startDate:[o?.teamEmployee?.startDate??new Date(),[]],endDate:[o?.teamEmployee?.endDate,[]]});}submit(){this.IsValid()&&(this.data?.teamEmployee?this.save(this.cstnService.teams.employees.update(this.data.teamId,this.data.teamEmployee.id,this.form.value)):this.save(this.cstnService.teams.employees.create(this.data.teamId,this.form.value)));}};i.ɵfac=function(t){return new(t||i)(c(D),c(U),c(V));},i.ɵcmp=S({type:i,selectors:[["sz-constr-construction-zones-units-save"]],standalone:!0,features:[_([]),v,g],decls:12,vars:9,consts:()=>{let e;e="Employee";let t;t="Designation";let o;o="Group";let O;O="Start Date";let te;return te="End Date",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","employeeId","label",e,3,"source"],["formControlName","designationId","label",t,3,"source"],["formControlName","groupId","label",o,3,"source","config"],["formControlName","isGroupLeader"],[1,"sz-form-row"],["formControlName","startDate","label",O],["formControlName","endDate","label",te],[3,"actions"]];},template:function(t,o){t&1&&(m(0,"sz-ui-dialog-header",0),p(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3)(5,"sz-ui-form-field-select",4),p(6,"mat-checkbox",5),pe(7,"Group Leader"),d(),p(8,"div",6),m(9,"sz-ui-form-field-date",7)(10,"sz-ui-form-field-date",8),d()()(),m(11,"sz-ui-dialog-actions",9)),t&2&&(n("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),a(2),n("formGroup",o.form),a(),n("source",o.employees),a(),n("source",o.designations),a(),n("source",o.groups)("config",o.groupSelectConfig),a(6),n("actions",o.actions));},dependencies:[G,A,I,y,P,z,N,B,Ee,Ce,T,Q,J,w,fe,Y],encapsulation:2});let r=i;return r;})();var x=(()=>{let i=class i{constructor(){this.route=s(L),this.router=s(b),this.dialog=s($),this.locale=s(de),this.cstnService=s(l),this.team=re.required(),this.dataSource=new Te(["group.orderPosition"]),this.card={title:f.employees,menu:H.more([E.add(()=>this.openSaveComponent()),ee.divider(),E.addGroup(()=>this.openGroupSaveComponent())])},this.dataSource.columnDefs.push(u.uuid("id"),u.icon("group.orderPosition").setName(f.group).setHeaderSortable(!0).setStyleSmall().setValueTooltip(e=>e.group&&e.isGroupLeader?f.group_leader:"").setValueGetter(e=>e.group&&e.isGroupLeader?h.supervisor_account:"").setResponsive(!0),u.string("employee.name").setStacked(u.string("designation.name").setValueClassFontSmall()),u.string("employee.primaryPhone").setResponsive(!0),u.date("startDate").setVisible(!1),u.date("endDate").setVisible(!1),u.date("createdAt").setVisible(!1),u.date("updatedAt").setVisible(!1),Me.menu([E.edit(e=>this.openSaveComponent(e)),ee.divider(),E.delete(e=>this.openDeleteComponent(e))])),this.dataSource.groupDefs={key:"groupId",name:f.test_group,nameGetterFn:e=>e.group?.name??""};}ngOnInit(){this.get();}openGroupSaveComponent(e){this.dialog.open(Z,{data:{teamId:this.team().id,group:e}}).afterClosed().subscribe(t=>{});}openSaveComponent(e){this.dialog.open(Ie,{data:{teamId:this.team().id,teamEmployee:e}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openDeleteComponent(e){this.dialog.open(ge,{data:Ne.delete(this.cstnService.teams.employees.delete(this.team().id,e.id),e)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}get(){this.cstnService.teams.employees.get(this.team().id,this.dataSource.getQuery()).pipe(he(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-constr-construction-team-employees-groups"]],inputs:{team:[1,"team"]},standalone:!0,features:[_([l]),g],decls:2,vars:3,consts:[[3,"card"],["content","",3,"update","paginationEnabled","dataSource"]],template:function(t,o){t&1&&(p(0,"sz-ui-card",0)(1,"sz-ui-table",1),le("update",function(){return o.get();}),d()()),t&2&&(n("card",o.card),a(),n("paginationEnabled",!1)("dataSource",o.dataSource));},dependencies:[F,K,Re,X,M],encapsulation:2});let r=i;return r;})();function Fe(r,i){if(r&1&&m(0,"sz-ui-card",3),r&2){let Ae=i.$implicit;n("card",Ae);}}var ye=(()=>{let i=class i{constructor(){this.cstnService=s(l),this.router=s(b),this.route=s(L),this.dialog=s($),this.team=this.route.snapshot.data.team,this.alert=ne(void 0),this.cards=[],this.appBarConfig={title:this.team.name,menu:H.more([E.edit(()=>this.openSaveComponent(this.team))])};}addEmployeesCountCard(){let e={title:0,icon:h.person,subtitle:f.employees,indicator:!0};this.cards.push(e),this.cstnService.teams.employees.count(this.team.id).subscribe(t=>{e.title=t;});}addGroupsCountCard(){let e={title:0,icon:h.group,subtitle:f.groups,indicator:!0};this.cards.push(e),this.cstnService.teams.groups.count(this.team.id).subscribe(t=>{e.title=t;});}openSaveComponent(e){this.dialog.open(ve,{data:e}).afterClosed().subscribe(t=>{t&&(this.team=t);});}openGroupSaveComponent(){this.dialog.open(Z,{data:{teamId:this.team.id}}).afterClosed().subscribe(e=>{});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-constr-construction-team"]],features:[_([])],decls:8,vars:3,consts:[[3,"config"],[3,"alert"],[1,"sz-grid-card"],[3,"card"],[1,"tw-my-4"],[3,"team"]],template:function(t,o){t&1&&(m(0,"sz-ui-app-bar",0)(1,"sz-ui-alert",1),p(2,"div",2),se(3,Fe,1,1,"sz-ui-card",3,ae),d(),p(5,"div",4),m(6,"sz-constr-construction-team-employees-groups",5),d(),m(7,"div",4)),t&2&&(n("config",o.appBarConfig),a(),n("alert",o.alert()),a(2),me(o.cards),a(3),n("team",o.team));},dependencies:[j,k,M,x],encapsulation:2});let r=i;return r;})();var to=(()=>{let i=class i{};i.ɵfac=function(t){return new(t||i)();},i.ɵmod=ie({type:i}),i.ɵinj=oe({providers:[l],imports:[F.forChild([{path:"",component:ye}]),N,ce,X,j,K,T,k,M,x]});let r=i;return r;})();export{to as TeamModule};/**i18n:4821e1b9962cdddbef9c2ff89937dbb197b2343c5ff627ac1e6724c8725e235e*/