import{a as O}from"./chunk-GXGVW2RF.js";import{h as J}from"./chunk-EYGAI5PJ.js";import{a as ue}from"./chunk-RCEBIYRE.js";import{a as Se}from"./chunk-LTYLJZW4.js";import{a as g}from"./chunk-YE52B2IF.js";import"./chunk-6YOHHL4Q.js";import"./chunk-5PWIWZS6.js";import{a as C}from"./chunk-BAY27WLL.js";import{e as pe,f as de,g as _e,j as N}from"./chunk-T3RP4KFO.js";import"./chunk-OWH277FG.js";import{b as h}from"./chunk-7FMKABPI.js";import{d as se,e as me,f as l,g as le}from"./chunk-EY4A56HO.js";import{a as ie,b as re,d as ne,e as ae,g as M}from"./chunk-DX3CVY22.js";import{t as Z,u as ee,x as te,z as oe}from"./chunk-57HXEV2J.js";import{Ca as d,J as w,L as q,N as x,P as K,d as A,f as b,g as G,k as j,m as U,p as X,q as Y,s as B,t as k,za as W}from"./chunk-HC44CUFJ.js";import{Ga as H,Ja as Q}from"./chunk-NQOK3G2M.js";import{Cb as I,Db as L,Eb as z,Fb as u,Gb as _,Hb as s,M as c,a as v,b as T,fa as y,gb as p,hb as a,hc as E,kc as F,oa as P,ob as R,oc as $,pa as D,pc as V,vb as m}from"./chunk-XEAZENSO.js";var ce=(()=>{let t=class t extends pe{constructor(i,o,r,n){super(r),this.mpplService=i,this.fb=o,this.dialog=r,this.data=n,this.nationalities=this.mpplService.nationalities.getAll({orderBy:["name"]}),this.languages=this.mpplService.languages.getAll({orderBy:["name"]}),this.form=o.group({sex:[n.sex,[A.required]],languageId:[n.languageId,[A.required]],title:[n.title,[]],ssn:[n.ssn,[]],nationalityId:[n.nationalityId,[]],birthDate:[n.birthDate,[]]});}submit(){if(!this.IsValid())return;let i=this.form.value;if(i.title&&typeof i.title=="string"){this.mpplService.titles.create({name:i.title}).pipe(W(this.indicator),c(1)).subscribe(o=>{this.form.controls.title.setValue(o);});return;}this.save(this.mpplService.persons.update(this.data.id,T(v({},this.form.value),{titleId:this.form.value.title?.id})));}};t.ɵfac=function(o){return new(o||t)(a(g),a(Y),a(ie),a(re));},t.ɵcmp=P({type:t,selectors:[["medisy-people-person-save"]],standalone:!0,features:[E([]),R,F],decls:12,vars:5,consts:()=>{let i;i="Nationality";let o;o="SSN";let r;r="Language";let n;n="Title";let S;return S="BirthDate",[[3,"header"],[1,"sz-form",3,"formGroup"],[1,"sz-form-row"],["formControlName","nationalityId","label",i,3,"source"],["formControlName","ssn","label",o],["formControlName","languageId","label",r,3,"source"],["formControlName","sex"],["formControlName","title","label",n],["formControlName","birthDate","label",S],[3,"actions"]];},template:function(o,r){o&1&&(s(0,"sz-ui-dialog-header",0),u(1,"mat-dialog-content")(2,"form",1)(3,"div",2),s(4,"sz-ui-form-field-select",3)(5,"sz-ui-form-field-input",4),_(),s(6,"sz-ui-form-field-select",5),u(7,"div",2),s(8,"medisy-form-field-sex",6)(9,"medisy-form-field-title-search",7),_(),s(10,"sz-ui-form-field-date",8),_()(),s(11,"sz-ui-dialog-actions",9)),o&2&&(m("header",r.header),p(2),m("formGroup",r.form),p(2),m("source",r.nationalities),p(2),m("source",r.languages),p(5),m("actions",r.actions));},dependencies:[k,j,b,G,U,X,N,de,_e,oe,ee,M,ae,Z,ue,te],encapsulation:2});let e=t;return e;})();function ge(e,t){if(e&1&&s(0,"sz-ui-card",2),e&2){let Me=t.$implicit;m("card",Me);}}var Pe=(()=>{let t=class t{constructor(i,o,r,n){this.dialog=i,this.mlabService=o,this.route=r,this.router=n,this.items=[],this.personMenu=le.more([l.edit(()=>this.openSaveComponent()),l.divider(),l.default(d.names,"info",()=>this.navigate("names")),l.default(d.phones,"phone",()=>this.navigate("phones")),l.default(d.emails,"alternate_email",()=>this.navigate("emails")),l.default(d.addresses,"home",()=>this.navigate("addresses")),l.default(d.documents,"badge",()=>this.navigate("documents"))]),this.person=this.route.snapshot.data.person;let S={title:0,icon:"science",subtitle:d.analyses,indicator:!0,clickFn:()=>this.router.navigate(["/mlab/analyses"],{queryParams:{personIds:[this.person.id]}})};this.items.push(S),this.getAnalysisCount(S);}navigate(i){this.router.navigate([i],{relativeTo:this.route});}getAnalysisCount(i){this.mlabService.analyses.count().subscribe(o=>{i.title=o;});}openSaveComponent(){this.dialog.open(ce,{data:this.person}).afterClosed().pipe(c(1)).subscribe(i=>{i&&(this.person=i);});}};t.ɵfac=function(o){return new(o||t)(a(ne),a(C),a(w),a(q));},t.ɵcmp=P({type:t,selectors:[["medisy-peopel-person"]],features:[E([C])],decls:5,vars:4,consts:[[3,"title","menu"],[1,"sz-grid-card"],[3,"card"]],template:function(o,r){o&1&&(s(0,"sz-ui-header-info",0),$(1,"personName"),u(2,"div",1),L(3,ge,1,1,"sz-ui-card",2,I),_()),o&2&&(m("title",V(1,2,r.person))("menu",r.personMenu),p(3),z(r.items));},dependencies:[O,h,Se],encapsulation:2});let e=t;return e;})();var Ee=[{path:"",component:Pe},{path:"names",loadComponent:()=>import("./chunk-AECCPMMI.js").then(e=>e.PersonNamesComponent)},{path:"phones",loadComponent:()=>import("./chunk-TJHMUMYC.js").then(e=>e.PersonPhonesComponent)},{path:"emails",loadComponent:()=>import("./chunk-MJJFOVF3.js").then(e=>e.PersonEmailsComponent)},{path:"documents",loadComponent:()=>import("./chunk-QIPIBKMD.js").then(e=>e.PersonDocumentsComponent)},{path:"addresses",loadComponent:()=>import("./chunk-RJXT4WRU.js").then(e=>e.PersonAddressesComponent)}];var Pt=(()=>{let t=class t{};t.ɵfac=function(o){return new(o||t)();},t.ɵmod=D({type:t}),t.ɵinj=y({providers:[g],imports:[B,x.forChild(Ee),J,Q,O,N,h,se,K,M,H,me]});let e=t;return e;})();export{Pt as PersonModule};/**i18n:f1993a9d8de25a460a4edd4e25b48862b3dd863aec93a795c43b451741326090*/