import{a as p,b as ie,d as oe,e as re,g as ne,j as ae,k as se}from"./chunk-4TZOFLQA.js";import"./chunk-I4DB5R2A.js";import"./chunk-4IJFJQYN.js";import{a as c}from"./chunk-5IHQNMKH.js";import"./chunk-HAWQZ3DL.js";import{e as W,f as Z,g as x,i as ee,j as g,k as te}from"./chunk-CZ3NOAZC.js";import{a as M}from"./chunk-4APH4GGR.js";import{h}from"./chunk-3HX3ISKW.js";import{a as P,b as Y,d as G,e as j,g as C}from"./chunk-T2IQKITO.js";import{r as H,s as Q,u as J,v as K}from"./chunk-OAP2OGZI.js";import"./chunk-6CUNSDAY.js";import"./chunk-VTM5G3BH.js";import"./chunk-3CG52MMS.js";import{c as q}from"./chunk-K3B67OJW.js";import{i as X}from"./chunk-SNWVCYUD.js";import{d as T,f as L,g as b,l as I,n as D,q as z,r as F,t as V,u as E}from"./chunk-SVCJK6WQ.js";import"./chunk-74AZXQY6.js";import"./chunk-PN4M3V23.js";import{c as B,e as U}from"./chunk-U4LXFUUA.js";import"./chunk-36FAVIBG.js";import{ia as $,ja as k,la as w}from"./chunk-UJOOHETU.js";import"./chunk-VUVL2XHK.js";import{Jb as m,Kb as S,Lb as u,Vb as N,Wb as _,bb as l,cb as s,ea as y,na as f,nc as O,oa as R,oc as v,qb as A,zb as a}from"./chunk-RCLXGW2A.js";import"./chunk-7I3LHTBF.js";var me=(()=>{let o=class o extends W{constructor(i,e,t,r){super(t),this.mlabService=i,this.fb=e,this.dialog=t,this.data=r,this.testTypeUnits=null,this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"]}),this.testTypeUnitSelectConfig={emptyOption:!0,optionContentFn:d=>d.unit.name,optionValueFn:d=>d.unitId},this.testTypeSelectConfig={optionSelectedFn:d=>{d&&(this.testTypeUnits=this.mlabService.testTypes.units.getAll(d,{orderBy:["unit.name"]}));}},this.form=e.group({description:[r?.description,[T.maxLength(4096)]],testTypeId:[r?.testTypeId,[T.required]],unitId:[r?.unitId,[]]}),this.data?.testTypeId&&(this.testTypeUnits=this.mlabService.testTypes.units.getAll(this.data.testTypeId,{orderBy:["unit.name"]}));}submit(){this.IsValid()&&(this.data?this.save(this.mlabService.referenceValues.update(this.data.id,this.form.value)):this.save(this.mlabService.referenceValues.create(this.form.value)));}};o.ɵfac=function(e){return new(e||o)(s(c),s(F),s(P),s(Y));},o.ɵcmp=f({type:o,selectors:[["sz-medisy-laboratory-reference-values-save"]],standalone:!0,features:[O([]),A,v],decls:7,vars:9,consts:()=>{let i;i="Test Type";let e;e="Unit";let t;return t="Description",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId","label",i,3,"source","config"],["formControlName","unitId","label",e,3,"source","config"],["formControlName","description","label",t],[3,"actions"]];},template:function(e,t){e&1&&(u(0,"sz-ui-dialog-header",0),m(1,"mat-dialog-content")(2,"form",1),u(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3)(5,"sz-ui-form-field-textarea",4),S()(),u(6,"sz-ui-dialog-actions",5)),e&2&&(a("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),l(2),a("formGroup",t.form),l(),a("source",t.testTypes)("config",t.testTypeSelectConfig),l(),a("source",t.testTypeUnits)("config",t.testTypeUnitSelectConfig),l(2),a("actions",t.actions));},dependencies:[E,I,L,b,D,z,C,j,X,H,g,Z,x,K,J,Q],encapsulation:2});let n=o;return n;})();var pe=(()=>{let o=class o{constructor(i,e,t){this.dialog=i,this.mlabService=e,this.router=t,this.dataSource=new oe(),this.appBarConfig={title:q.reference_values},this.dataSource.columnDefs.push(p.uuid("id"),p.hyperlink("testType.nameEn",r=>`/mlab/reference-values/${r.id}`).setStacked(p.string("description").setValueClassFontSmall()),p.string("unit").setValueGetter(r=>r.unit?.symbol),p.date("createdAt").setVisible(!1),p.date("updatedAt").setVisible(!1),ie.menu([h.edit(r=>this.openSaveComponent(r)),h.delete(r=>this.openReferenceValueDeleteComponent(r))])),this.get();}openSaveComponent(i){this.dialog.open(me,{data:i}).afterClosed().subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}openReferenceValueDeleteComponent(i){this.dialog.open(ee,{data:te.delete(this.mlabService.referenceValues.delete(i.id),i)}).afterClosed().subscribe(e=>{this.dataSource.delete(e);});}get(){this.mlabService.referenceValues.get(this.dataSource.getQuery()).pipe(re(this.dataSource.state)).subscribe(i=>{this.dataSource.set(i.items,i.count);});}};o.ɵfac=function(e){return new(e||o)(s(G),s(c),s(B));},o.ɵcmp=f({type:o,selectors:[["sz-medisy-laboratory-reference-values"]],decls:6,vars:3,consts:()=>{let i;return i="Add",[i,[3,"config"],[3,"changed","dataSource"],["mat-flat-button","","color","primary","start","",3,"click"],[3,"update","dataSource"]];},template:function(e,t){e&1&&(u(0,"sz-ui-app-bar",1),m(1,"sz-ui-table-search-filter",2),_("changed",function(){return t.get();}),m(2,"button",3),_("click",function(){return t.openSaveComponent();}),m(3,"span"),N(4,0),S()()(),m(5,"sz-ui-table",4),_("update",function(){return t.get();}),S()),e&2&&(a("config",t.appBarConfig),l(),a("dataSource",t.dataSource),l(4),a("dataSource",t.dataSource));},dependencies:[k,M,ae,ne],encapsulation:2});let n=o;return n;})();var tt=(()=>{let o=class o{};o.ɵfac=function(e){return new(e||o)();},o.ɵmod=R({type:o}),o.ɵinj=y({providers:[c],imports:[V,E,U.forChild([{path:"",component:pe}]),C,$,w,M,se,g]});let n=o;return n;})();export{tt as ReferenceValuesModule};/**i18n:ee05a22f3822c113da725777965dd561774d6cc6a2deb7b3b35335df23b29b27*/