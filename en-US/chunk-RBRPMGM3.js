import{a as nt}from"./chunk-FJ3IMPZA.js";import{a as A,b as at}from"./chunk-PEHEAS3J.js";import{a as rt}from"./chunk-BY2XVBCE.js";import{d as Ue,f as Xe,g as je,j as k}from"./chunk-VT3WYR67.js";import{a as Te,b as Ie,c as Re,d as De,e as ye,f as Fe,j as Le,k as ve,l as be,m as ze,n as Ye,o as $e}from"./chunk-RQNRD2JQ.js";import{a as O}from"./chunk-O4JAUULY.js";import{a as G}from"./chunk-ZJOQORU4.js";import"./chunk-3UYL57HA.js";import{a as Ge,b as we,d as Be,e as ke,g as Y}from"./chunk-V6FPP55L.js";import"./chunk-U7VPIABE.js";import{b as j}from"./chunk-M3UESULM.js";import{b as Ve,c as qe,d as Ke,f as Qe,i as We,k as Je,m as Ze,n as et,o as tt,p as it,q as ot}from"./chunk-PTJACGQS.js";import{d as He}from"./chunk-UNCYENX6.js";import{b as B,c as xe}from"./chunk-VRISEVPV.js";import{D as v,E as b,b as D,f as me,g as y,h as pe,l as de,m as _e,n as ce,o as ue,p as Se,s as F,t as ge,v as Pe,w as L,x as Ae,z as Oe}from"./chunk-GJY7U5GZ.js";import{a as $}from"./chunk-B3ZGKPUK.js";import"./chunk-3BVZ364G.js";import{a as P}from"./chunk-PIKBUH2I.js";import{a as w}from"./chunk-QDC3ZTFW.js";import{I as fe,L as Me,M as Ee,Pa as Ce,Sa as he,Va as Ne,Wa as z,q as E}from"./chunk-NC2N2FCX.js";import{$a as ee,Ab as a,Bb as s,Cb as f,Gb as oe,L as C,Mb as _,Pb as u,Rb as re,Vb as h,Wb as g,Xb as X,Yb as ne,Zb as M,ac as T,ea as Q,eb as l,ec as I,fb as p,fc as R,jc as ae,kc as se,ma as S,mb as N,mc as le,na as W,pb as m,ra as J,sa as Z,vb as te,wb as ie,xb as H,yb as x,zb as U}from"./chunk-3CXVAQY6.js";var ct=["input"];function ut(r,o){if(r&1){let d=oe();a(0,"mat-chip-row",7),u("removed",function(){let i=J(d).$implicit,n=re();return Z(n.remove(i));}),g(1),I(2,"personName"),a(3,"button",8)(4,"mat-icon"),g(5,"cancel"),s()()();}if(r&2){let d=o.$implicit;l(1),ne(" ",R(2,1,d)," ");}}function St(r,o){if(r&1&&(a(0,"mat-option",9)(1,"div",10)(2,"span"),g(3),I(4,"personName"),s(),a(5,"small"),g(6),I(7,"personAge"),s()()()),r&2){let d=o.$implicit;m("value",d),l(3),X(R(4,3,d)),l(3),X(R(7,5,d==null?null:d.birthDate));}}function ft(r,o){r&1&&(a(0,"mat-error"),_(1,11),s());}var st=(()=>{let o=class o extends Fe{constructor(t,e,i,n){super(t),this.ngControl=t,this.mpplService=e,this.personNamePipe=i,this.personAgePipe=n,this.items=[],this.selections=[],this.separatorKeysCodes=[13,188],this.indicator=ee(!0),this.filter=P.paged(1,10),this.totalPages=-1,this.displayFn=c=>{if(!c)return"";let q=this.personNamePipe.transform(c),K=this.personAgePipe.transform(c?.birthDate);return K?`${q}, ${K}`:`${q}`;};}ngOnInit(){this.control=this.ngControl.control,this.listenChanges();}listenChanges(){this.control.valueChanges.pipe(xe(400)).subscribe(t=>{this.handleValueChanged(t);});}handleValueChanged(t){if(this.reset(),typeof t=="string"){let e=t.split(" ");e.length===2?(this.filter.query=e[0],this.filter.lastName=e[1]):this.filter.query=e[0];}this.get();}add(){this.control.setValue(this.selections.map(t=>t.id));}remove(t){let e=this.selections.indexOf(t);e>=0&&this.selections.splice(e,1);}optionSelected(t){this.selections.push(t.option.value),this.input.nativeElement.value="",this.control.setValue(this.selections.map(e=>e.id));}scroll(){this.filter.pageIndex<this.totalPages&&(++this.filter.pageIndex,this.get());}reset(){this.filter=P.paged(1,10),this.totalPages=-1,this.items=[];}get(){this.mpplService.persons.get(this.filter).pipe(C(1),B(this.indicator)).subscribe(t=>{this.items.push(...t.items),this.totalPages=t.totalPages;});}};o.ɵfac=function(e){return new(e||o)(p(me,10),p(G),p(O),p(A));},o.ɵcmp=S({type:o,selectors:[["medisy-form-field-persons-search"]],viewQuery:function(e,i){if(e&1&&se(ct,5),e&2){let n;ae(n=le())&&(i.input=n.first);}},standalone:!0,features:[M([G,A,O]),N,T],decls:14,vars:7,consts:()=>{let t;t="Name, phone, or email";let e;return e="This field is required",[t,["aria-label","Fruit selection"],["chipGrid",""],["matInput","",3,"matAutocomplete","formControl","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["input",""],[3,"displayWith","szOptionsScrollIgnored","optionSelected","optionsScroll"],["auto","matAutocomplete"],[3,"removed"],["matChipRemove",""],[3,"value"],[1,"sz-form"],e];},template:function(e,i){if(e&1&&(a(0,"mat-form-field")(1,"mat-label"),_(2,0),s(),a(3,"mat-chip-grid",1,2),x(5,ut,6,3,"mat-chip-row",null,H),s(),a(7,"input",3,4),u("matChipInputTokenEnd",function(){return i.add();}),s(),a(9,"mat-autocomplete",5,6),u("optionSelected",function(c){return i.optionSelected(c);})("optionsScroll",function(){return i.scroll();}),x(11,St,8,7,"mat-option",9,H),s(),te(13,ft,2,0,"mat-error"),s()),e&2){let n=h(4),c=h(10);U(5,i.selections),l(7),m("matAutocomplete",c)("formControl",i.control)("matChipInputFor",n)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes),l(2),m("displayWith",i.displayFn)("szOptionsScrollIgnored",i.indicator()),U(11,i.items),l(4),ie(13,i.control.hasError("required")?13:-1);}},dependencies:[E,F,D,y,_e,b,v,L,Ae,Re,Te,Ce,Ie,ye,De,he,tt,Ze,et,We,Je,z,Ne,at,A,O],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]});let r=o;return r;})();var lt=(()=>{let o=class o extends Ue{constructor(t,e,i){super(e),this.fb=t,this.dialog=e,this.data=i,this.form=t.group({testGroupIds:[i.testGroupIds],laboratoryIds:[i.laboratoryIds],personIds:[i.personIds],startDate:[i.startDate],endDate:[i.endDate]});}submit(){this.IsValid()&&this.dialog?.close(this.form.value);}};o.ɵfac=function(e){return new(e||o)(p(Se),p(Ge),p(we));},o.ɵcmp=S({type:o,selectors:[["medisy-laboratory-analyses-filter"]],standalone:!0,features:[M([]),N,T],decls:16,vars:9,consts:()=>{let t;t="Date";let e;e="Start date";let i;return i="End date",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","testGroupIds",3,"multiple"],["formControlName","laboratoryIds",3,"multiple"],["formControlName","personIds"],[1,"tw-flex-1"],t,["startView","year",3,"rangePicker","comparisonStart","comparisonEnd"],["matStartDate","","placeholder",e,"formControlName","startDate"],["matEndDate","","placeholder",i,"formControlName","endDate"],["matSuffix","",3,"for"],["datePicker",""],[3,"actions"]];},template:function(e,i){if(e&1&&(f(0,"sz-ui-dialog-header",0),a(1,"mat-dialog-content")(2,"form",1),f(3,"medisy-form-field-test-group-select",2)(4,"medisy-form-field-laboratory",3)(5,"medisy-form-field-persons-search",4),a(6,"mat-form-field",5)(7,"mat-label"),_(8,6),s(),a(9,"mat-date-range-input",7),f(10,"input",8)(11,"input",9),s(),f(12,"mat-datepicker-toggle",10)(13,"mat-date-range-picker",null,11),s()()(),f(15,"sz-ui-dialog-actions",12)),e&2){let n=h(14);m("header",i.header),l(2),m("formGroup",i.form),l(1),m("multiple",!0),l(1),m("multiple",!0),l(5),m("rangePicker",n)("comparisonStart",i.form.controls.startDate.value)("comparisonEnd",i.form.controls.endDate.value),l(3),m("for",n),l(3),m("actions",i.actions);}},dependencies:[E,F,de,D,y,pe,ce,ue,Y,ke,b,v,L,Oe,k,Xe,je,nt,rt,st,$e,Le,ze,ve,be,Ye],encapsulation:2});let r=o;return r;})();var mt=(()=>{let o=class o{constructor(t,e,i){this.dialog=t,this.mlabService=e,this.route=i,this.dataSource=new qe(P.pagedSorted("-createdAt")),this.dataSource.addRows([Ke.default([Ve.hyperlink("code","Code",n=>n.id),j.createdAt(),j.menu([])])]),this.dataSource.updateFilterModel(this.route.snapshot.queryParams),this.get();}openFilterComponent(){this.dialog.open(lt,{data:this.dataSource.filterModel}).afterClosed().pipe(C(1)).subscribe(t=>{this.dataSource.updateFilterModel(t),this.get();});}get(){this.mlabService.analyses.get(this.dataSource.filterModel).pipe(B(this.dataSource.indicator),C(1)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};o.ɵfac=function(e){return new(e||o)(p(Be),p($),p(fe));},o.ɵcmp=S({type:o,selectors:[["medisy-laboratory-analyses"]],features:[M([])],decls:8,vars:4,consts:()=>{let t;t="Analyses";let e;return e="Add",[["start","",1,"sz-h5"],t,[3,"dataSource","search","filter"],["title","","mat-flat-button","","routerLink","create","color","primary","start",""],e,[3,"paginationEnabled","stateEnabled","dataSource","update"]];},template:function(e,i){e&1&&(a(0,"sz-ui-header-basic")(1,"h5",0),_(2,1),s()(),a(3,"sz-ui-table-filter",2),u("search",function(){return i.get();})("filter",function(){return i.openFilterComponent();}),a(4,"button",3)(5,"span"),_(6,4),s()()(),a(7,"sz-ui-table",5),u("update",function(){return i.get();}),s()),e&2&&(l(3),m("dataSource",i.dataSource),l(4),m("paginationEnabled",!0)("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[Me,it,Qe,w,ge],styles:[".column-status[_ngcontent-%COMP%], .mat-column-detail-status[_ngcontent-%COMP%], .mat-column-status[_ngcontent-%COMP%]:not(mat-header-cell){max-width:4px;margin-left:24px}.mat-column-status[_ngcontent-%COMP%]:not(mat-header-cell){background-color:#13a311}.mat-column-detail-status[_ngcontent-%COMP%]{background-color:#13a311}.mat-cell[_ngcontent-%COMP%]   .mat-column-status[_ngcontent-%COMP%]{padding-left:0}"]});let r=o;return r;})();var pt=[{path:"",component:mt},{path:"create",loadComponent:()=>import("./chunk-ZBJWXO54.js").then(r=>r.CreateComponent)}];var xi=(()=>{let o=class o{};o.ɵfac=function(e){return new(e||o)();},o.ɵmod=W({type:o}),o.ɵinj=Q({providers:[$],imports:[E,Ee.forChild(pt),Y,ot,k,w,He,z,Pe]});let r=o;return r;})();export{xi as AnalysesModule};/**i18n:c47ea6c8e33fa0c222c20e616e96e45afbcc3267e1e4f83fbed9283c01f003ba*/