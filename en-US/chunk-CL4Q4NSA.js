import{a as K,b as W,c as n,f as Z,g as x}from"./chunk-NZKJWXZK.js";import"./chunk-MASQLJY7.js";import"./chunk-WBSZT2I7.js";import"./chunk-H5EQGLIB.js";import{b as w,f as j,g as q,h as H,j as Q,k as J}from"./chunk-64Z6XY25.js";import{a as m}from"./chunk-VIFJKMXX.js";import"./chunk-CVQGLPWH.js";import{a as L,b as V,d as z,e as F,g as I}from"./chunk-EUNYKPOC.js";import{q as P,r as $,s as G,u as Y}from"./chunk-FG3AVAWO.js";import"./chunk-KMCQXCO3.js";import"./chunk-C4J5TBOU.js";import{i as U}from"./chunk-ZOB3V3TQ.js";import{d as h,f as T,g as b,l as A,n as O,q as R,r as v,t as y}from"./chunk-USQL5QQD.js";import{a as X}from"./chunk-EFOAMC6I.js";import{b as d,c as k}from"./chunk-C5EOLJOL.js";import"./chunk-7K7VA33R.js";import"./chunk-WOJM3U6K.js";import"./chunk-O4KNQSPV.js";import{a as B}from"./chunk-744UEIY4.js";import"./chunk-RSBGIIQJ.js";import{r as N,x as D}from"./chunk-HLIBWIZS.js";import"./chunk-RQBT3Y2P.js";import"./chunk-NUYQF36V.js";import"./chunk-AQ5S2ZT4.js";import{Jb as p,Kb as c,Lb as _,Wb as C,bb as l,ja as r,mb as M,mc as E,na as f,nc as g,yb as a}from"./chunk-AV7NLUC7.js";import"./chunk-KTHPDEKM.js";var ee=(()=>{let o=class o extends j{constructor(){let e=r(L);super(e),this.mlabService=r(m),this.fb=r(v),this.data=r(V),this.units=[],this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"]}),this.unitSelectConfig={autoSelect:!0},this.testTypeSelectConfig={optionSelectedFn:(u,S)=>{S&&(S.unitId&&S.unit?this.getUnits(S.unit):this.units=[]);}};let i=this.fb;this.dialog=e;let t=this.data;this.form=i.group({description:[t?.description,[h.maxLength(4096)]],testTypeId:[t?.testTypeId,[h.required]],unitId:[t?.unitId,[]]});}getUnits(e){this.units=[e],this.form.patchValue({unitId:e?.id}),this.mlabService.unitConverters.getAllItems({filters:D.create().equal("toUnitId",e.id).filters()}).subscribe(i=>{this.units.push(...i.map(t=>t.fromUnit));});}submit(){this.IsValid()&&(this.data?this.save(this.mlabService.referenceValues.update(this.data.id,this.form.value)):this.save(this.mlabService.referenceValues.create(this.form.value)));}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=f({type:o,selectors:[["sz-medisy-laboratory-reference-values-save"]],standalone:!0,features:[E([m]),M,g],decls:7,vars:9,consts:()=>{let e;e="Test Type";let i;i="Unit";let t;return t="Description",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId","label",e,3,"source","config"],["formControlName","unitId","label",i,3,"source","config"],["formControlName","description","label",t],[3,"actions"]];},template:function(i,t){i&1&&(_(0,"sz-ui-dialog-header",0),p(1,"mat-dialog-content")(2,"form",1),_(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3)(5,"sz-ui-form-field-textarea",4),c()(),_(6,"sz-ui-dialog-actions",5)),i&2&&(a("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),l(2),a("formGroup",t.form),l(),a("source",t.testTypes)("config",t.testTypeSelectConfig),l(),a("source",t.units)("config",t.unitSelectConfig),l(2),a("actions",t.actions));},dependencies:[y,A,T,b,O,R,I,F,U,P,J,q,H,Y,G,$],encapsulation:2});let s=o;return s;})();var te=(()=>{let o=class o{constructor(){this.dialog=r(z),this.mlabService=r(m),this.router=r(N),this.dataSource=new Z(),this.appBarConfig={title:B.reference_values,menu:k.default().setItems([d.add(this.openSaveComponent.bind(this)),d.menu([d.search()])])},this.dataSource.columnDefs.push(n.uuid("id"),n.hyperlink("testType.nameEn").setClickFn(e=>this.router.navigate([X.ReferenceValues,e.id,"rules"])).setStacked(n.string("description").setValueClassFontSmall()),n.string("unit").setValueGetter(e=>e.unit?.symbol),n.date("createdAt").setVisible(!1),n.date("updatedAt").setVisible(!1),n.menu([d.edit(this.openSaveComponent.bind(this)),d.divider(),d.delete(this.openReferenceValueDeleteComponent.bind(this))])),this.get();}openSaveComponent(e){this.dialog.open(ee,{data:e}).afterClosed().subscribe(i=>{this.dataSource.addOrUpdateItem(i);});}openReferenceValueDeleteComponent(e){this.dialog.open(Q,{data:w.delete(this.mlabService.referenceValues.delete(e.id),e)}).afterClosed().subscribe(i=>{this.dataSource.delete(i);});}get(){this.mlabService.referenceValues.get(this.dataSource.getQuery()).pipe(x(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=f({type:o,selectors:[["sz-medisy-laboratory-reference-values"]],standalone:!0,features:[E([m]),g],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(i,t){i&1&&(p(0,"sz-ui-table-bar",0),C("changed",function(){return t.get();}),c(),p(1,"sz-ui-table",1),C("update",function(){return t.get();}),c()),i&2&&(a("config",t.appBarConfig)("dataSource",t.dataSource),l(),a("dataSource",t.dataSource));},dependencies:[K,W],encapsulation:2});let s=o;return s;})();var Fe=[{path:"",component:te}];export{Fe as default};/**i18n:50ea3fe509cd17fae4b4f2681518d0e2046a1e8153a99e97d70deb94a19aa4b2*/