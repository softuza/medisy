"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[108],{2108:(w,h,a)=>{a.r(h),a.d(h,{AnalysesModule:()=>dt});var r=a(6895),N=a(4144),g=a(7392),m=a(4859),T=a(5412),P=a(7957),M=a(7155),J=a(8739),H=a(6709),C=a(4385),l=a(4006),S=a(6257),A=a(8255),q=a(266),k=a(6338),Z=a(6308),$=a(3238),W=a(1572),x=a(3546),y=a(4512),O=a(5698),I=a(9293),se=a(2700),v=a(7579),G=a(9739),L=a(9939),B=a(1155),b=a(8080),Y=a(3835),e=a(4650),U=a(5237),ae=a(515),K=a(8675),V=a(8372),ee=a(3900),F=a(4004),Q=a(6656),ie=a(8893),le=a(5807),j=a(4841),f=a(9549),D=a(9602),re=a(9373),Se=a(585);function Ee(o,_){1&o&&e._UZ(0,"softuza-ui-alert",24),2&o&&e.Q6J("alert",_.ngIf)}function ce(o,_){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&o){const t=_.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Ne(o,_){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.ALo(2,"sexI18n"),e.qZA()),2&o){const t=_.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,t))}}function Ae(o,_){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.ALo(2,"titleI18n"),e.qZA()),2&o){const t=_.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,t))}}let Te=(()=>{class o extends Q.E{constructor(t,n,s,i){super(i,s.group({firstName:[null,[]],lastName:[null,[]],middleName:[null,[]],fatherName:[null,[]],motherName:[null,[]],birthDate:[null,[]],languageId:[null,[]],sex:[null,[]],title:[null,[]]})),this.personService=t,this.languageService=n,this.fb=s,this.dialog=i,this.languages$=null,this.sexes=Object.values(ie.m),this.titles=Object.values(le.D),this.getLanguages()}getLanguages(){this.languages$=this.languageService.getLanguages({pageIndex:1,pageSize:50,sortBy:"Name",sortDescending:!1}).pipe((0,F.U)(t=>t.items))}handleSubmit(){this.personService.createPerson(this.form.value).pipe((0,I.sU)(this.indicator$)).pipe((0,I.S3)(this.alert$)).pipe((0,O.q)(1)).subscribe(n=>{this.close(n)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(L.R),e.Y36(j.T),e.Y36(l.qu),e.Y36(T.so))},o.\u0275cmp=e.Xpm({type:o,selectors:[["softuza-medisy-persons-common-person-create"]],features:[e._Bn([L.R,j.T]),e.qOj],decls:53,vars:14,consts:function(){let _,t,n,s,i,E,c,p,u,z,X,d;return _="Create",t="First name",n="Last name",s="Middle name",i="Father name",E="Mother name",c="Language",p="Sex",u="Title",z="BirthDate",X="Close",d=" Save ",[["mat-dialog-title",""],_,[3,"alert",4,"ngIf"],[1,"tw-flex","tw-flex-col",3,"formGroup"],[1,"tw-flex","md:tw-flex-row","md:tw-gap-4","tw-flex-col"],[1,"tw-flex-1"],["autocomplete","off","formControlName","firstName","matInput","","placeholder",t],["autocomplete","off","formControlName","lastName","matInput","","placeholder",n],["autocomplete","off","formControlName","middleName","matInput","","placeholder",s],["autocomplete","off","formControlName","fatherName","matInput","","placeholder",i],["autocomplete","off","formControlName","motherName","matInput","","placeholder",E],["formControlName","languageId","placeholder",c],[3,"value",4,"ngFor","ngForOf"],["formControlName","sex","placeholder",p],["formControlName","title","placeholder",u],z,["matInput","","formControlName","birthDate",3,"matDatepicker"],["picker",""],["matSuffix","",3,"for"],[1,"mat-dialog-actions-end"],["mat-button","",3,"click"],X,["mat-flat-button","","color","primary",3,"disabled","click"],d,[3,"alert"],[3,"value"]]},template:function(t,n){if(1&t&&(e.TgZ(0,"h2",0),e.SDv(1,1),e.qZA(),e.YNc(2,Ee,1,1,"softuza-ui-alert",2),e.ALo(3,"async"),e.TgZ(4,"mat-dialog-content")(5,"form",3)(6,"div",4)(7,"mat-form-field",5)(8,"label"),e._UZ(9,"input",6),e.qZA()(),e.TgZ(10,"mat-form-field",5)(11,"label"),e._UZ(12,"input",7),e.qZA()()(),e.TgZ(13,"mat-form-field",5)(14,"label"),e._UZ(15,"input",8),e.qZA()(),e.TgZ(16,"div",4)(17,"mat-form-field",5)(18,"label"),e._UZ(19,"input",9),e.qZA()(),e.TgZ(20,"mat-form-field",5)(21,"label"),e._UZ(22,"input",10),e.qZA()()(),e.TgZ(23,"mat-form-field",5)(24,"mat-select",11),e.YNc(25,ce,2,2,"mat-option",12),e.ALo(26,"async"),e.qZA()(),e.TgZ(27,"div",4)(28,"mat-form-field",5)(29,"mat-select",13)(30,"mat-option"),e._uU(31,"-"),e.qZA(),e.YNc(32,Ne,3,4,"mat-option",12),e.qZA()(),e.TgZ(33,"mat-form-field",5)(34,"mat-select",14)(35,"mat-option"),e._uU(36,"-"),e.qZA(),e.YNc(37,Ae,3,4,"mat-option",12),e.qZA()()(),e.TgZ(38,"mat-form-field",5)(39,"mat-label"),e.SDv(40,15),e.qZA(),e._UZ(41,"input",16),e.TgZ(42,"mat-hint"),e._uU(43,"MM/DD/YYYY"),e.qZA(),e._UZ(44,"mat-datepicker",null,17)(46,"mat-datepicker-toggle",18),e.qZA()()(),e.TgZ(47,"mat-dialog-actions",19)(48,"button",20),e.NdJ("click",function(){return n.close()}),e.SDv(49,21),e.qZA(),e.TgZ(50,"button",22),e.NdJ("click",function(){return n.submit()}),e.SDv(51,23),e.ALo(52,"async"),e.qZA()()),2&t){const s=e.MAs(45);e.xp6(2),e.Q6J("ngIf",e.lcZ(3,8,n.alert$)),e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(20),e.Q6J("ngForOf",e.lcZ(26,10,n.languages$)),e.xp6(7),e.Q6J("ngForOf",n.sexes),e.xp6(5),e.Q6J("ngForOf",n.titles),e.xp6(4),e.Q6J("matDatepicker",s),e.xp6(5),e.Q6J("for",s),e.xp6(4),e.Q6J("disabled",e.lcZ(52,12,n.indicator$))}},dependencies:[r.sg,r.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,T.uh,T.xY,T.H8,f.KE,f.bx,f.hX,f.R9,N.Nt,m.lW,C.gD,$.ey,D.Mq,D.hl,D.nW,U.w,r.Ov,re.l,Se.r],encapsulation:2}),o})();var me=a(9105),te=a(2494),Me=a(177);const ue=["scanner"];function Pe(o,_){1&o&&e._UZ(0,"softuza-ui-alert",12),2&o&&e.Q6J("alert",_.ngIf)}function pe(o,_){1&o&&e._UZ(0,"mat-spinner")}function Ce(o,_){if(1&o&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&o){const t=_.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.label)}}function de(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"zxing-scanner",14,15),e.NdJ("camerasFound",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.onCamerasFound(s))})("camerasNotFound",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onCamerasNotFound())})("scanSuccess",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.onScanSuccess(s))})("scanError",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.onScanError(s))})("scanFailure",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.onScanFailure(s))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("formats",t.allowedFormats)}}let Oe=(()=>{class o extends Q.E{constructor(t,n){super(n,new l.cw({})),this.personService=t,this.dialog=n,this.allowedFormats=[me.BarcodeFormat.PDF_417],this.personInfo=null,this.mediaDevices=[]}onCamerasFound(t){this.mediaDevices=t}changeMediaDevice(t){!this.scanner||(this.scanner.device=t)}onCamerasNotFound(){this.alert$.next({message:"Camera could not be found",type:te.N.error})}onScanSuccess(t){const n=this.getPersonFromSyrianId(t);!n||(console.log(n),this.personInfo=n)}onScanError(t){}onScanFailure(t){}getPersonFromSyrianId(t){const n=this.toUint8Array(t),s=[];let i=0,E=0;for(;n.length>=i&&n.length>0;)E=n.indexOf(35,i),E<0&&(E=n.length),s.push(n.slice(i,E)),i=E+1;return console.log(s),11!=s.length?null:{firstName:this.decodeUsingISO88591Windows1256(s[0]),lastName:this.decodeUsingISO88591Windows1256(s[1]),fatherFirstName:this.decodeUsingISO88591Windows1256(s[2]),motherName:this.decodeUsingISO88591Windows1256(s[3]),nationalNumber:this.decodeUsingISO88591Windows1256(s[5])}}decodeUsingISO88591Windows1256(t){const s=new TextDecoder("iso-8859-1").decode(t);return new TextDecoder("windows-1256").decode(this.toUint8Array(s))}toUint8Array(t){return Uint8Array.from(t.split("").map(n=>n.charCodeAt()))}findPerson(){this.personService.getPersons({firstName:this.personInfo?.firstName,lastName:this.personInfo?.lastName,pageIndex:1,pageSize:50})}handleSubmit(){this.personInfo?this.personService.createPerson({firstName:this.personInfo.firstName,lastName:this.personInfo.lastName,nationalNumber:this.personInfo.nationalNumber,motherName:this.personInfo.motherName}).pipe((0,I.sU)(this.indicator$)).pipe((0,I.S3)(this.alert$)).pipe((0,O.q)(1)).subscribe(t=>{this.close(t)}):this.alert$.next({message:"Could not read the code",type:te.N.error})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(L.R),e.Y36(T.so))},o.\u0275cmp=e.Xpm({type:o,selectors:[["softuza-medisy-persons-common-person-scan"]],viewQuery:function(t,n){if(1&t&&e.Gf(ue,5),2&t){let s;e.iGM(s=e.CRH())&&(n.scanner=s.first)}},features:[e._Bn([L.R]),e.qOj],decls:15,vars:8,consts:function(){let _,t;return _="Scan",t="Close",[["mat-dialog-title",""],_,[3,"alert",4,"ngIf"],[4,"ngIf"],[1,"device-selector"],[1,"tw-flex-1",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"tw-flex","tw-flex-col"],[3,"formats","camerasFound","camerasNotFound","scanSuccess","scanError","scanFailure",4,"ngIf"],[1,"mat-dialog-actions-end"],["mat-button","",3,"click"],t,[3,"alert"],[3,"value"],[3,"formats","camerasFound","camerasNotFound","scanSuccess","scanError","scanFailure"],["scanner",""]]},template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e.SDv(1,1),e.qZA(),e.YNc(2,Pe,1,1,"softuza-ui-alert",2),e.ALo(3,"async"),e.TgZ(4,"mat-dialog-content"),e.YNc(5,pe,1,0,"mat-spinner",3),e.ALo(6,"async"),e.TgZ(7,"div",4)(8,"mat-select",5),e.NdJ("selectionChange",function(i){return n.changeMediaDevice(i.value)}),e.YNc(9,Ce,2,2,"mat-option",6),e.qZA()(),e.TgZ(10,"div",7),e.YNc(11,de,2,1,"zxing-scanner",8),e.qZA()(),e.TgZ(12,"mat-dialog-actions",9)(13,"button",10),e.NdJ("click",function(){return n.close()}),e.SDv(14,11),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,4,n.alert$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(6,6,n.indicator$)),e.xp6(4),e.Q6J("ngForOf",n.mediaDevices),e.xp6(2),e.Q6J("ngIf",!n.personInfo))},dependencies:[r.sg,r.O5,T.uh,T.xY,T.H8,m.lW,W.Ou,Me.S,C.gD,$.ey,U.w,r.Ov],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center}.mat-dialog-content[_ngcontent-%COMP%]{padding:0}.device-selector[_ngcontent-%COMP%]{padding:16px}"]}),o})();function ge(o,_){1&o&&e._UZ(0,"softuza-ui-alert",14),2&o&&e.Q6J("alert",_.ngIf)}let fe=(()=>{class o extends Q.E{constructor(t,n,s){super(n,s.group({firstName:[null,[]],lastName:[null,[]],middleName:[null,[]],fatherName:[null,[]],motherName:[null,[]],birthDate:[null,[]],languageId:[null,[]],sex:[null,[]],title:[null,[]]})),this.personService=t,this.dialog=n,this.fb=s,this._personId=null,this.person=null}set personId(t){this._personId=t,this.getPerson(t)}getPerson(t){this.personService.getPerson(this.form.value).pipe((0,I.sU)(this.indicator$)).pipe((0,I.S3)(this.alert$)).pipe((0,O.q)(1)).subscribe(n=>{this.person=n})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(L.R),e.Y36(T.so),e.Y36(l.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["softuza-medisy-persons-common-person-search"]],inputs:{personId:"personId"},features:[e._Bn([L.R,j.T]),e.qOj],decls:22,vars:7,consts:function(){let _,t,n,s,i,E;return _="Search",t="First name",n="Last name",s="Middle name",i="Close",E=" Search ",[["mat-dialog-title",""],_,[3,"alert",4,"ngIf"],[1,"tw-flex","tw-flex-col",3,"formGroup"],[1,"tw-flex","md:tw-flex-row","md:tw-gap-4","tw-flex-col"],[1,"tw-flex-1"],["autocomplete","off","formControlName","firstName","matInput","","placeholder",t],["autocomplete","off","formControlName","lastName","matInput","","placeholder",n],["autocomplete","off","formControlName","middleName","matInput","","placeholder",s],[1,"mat-dialog-actions-end"],["mat-button","",3,"click"],i,["mat-flat-button","","color","primary",3,"disabled","click"],E,[3,"alert"]]},template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e.SDv(1,1),e.qZA(),e.YNc(2,ge,1,1,"softuza-ui-alert",2),e.ALo(3,"async"),e.TgZ(4,"mat-dialog-content")(5,"form",3)(6,"div",4)(7,"mat-form-field",5)(8,"label"),e._UZ(9,"input",6),e.qZA()(),e.TgZ(10,"mat-form-field",5)(11,"label"),e._UZ(12,"input",7),e.qZA()()(),e.TgZ(13,"mat-form-field",5)(14,"label"),e._UZ(15,"input",8),e.qZA()()()(),e.TgZ(16,"mat-dialog-actions",9)(17,"button",10),e.NdJ("click",function(){return n.close()}),e.SDv(18,11),e.qZA(),e.TgZ(19,"button",12),e.NdJ("click",function(){return n.submit()}),e.SDv(20,13),e.ALo(21,"async"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,3,n.alert$)),e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(14),e.Q6J("disabled",e.lcZ(21,5,n.indicator$)))},dependencies:[r.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,T.uh,T.xY,T.H8,f.KE,N.Nt,m.lW,U.w,r.Ov],encapsulation:2}),o})();var Re=a(4850);function he(o,_){if(1&o&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&o){const t=_.$implicit,n=e.oxw();e.Q6J("value",t),e.xp6(1),e.hij(" ",n.formatPerson(t)," ")}}function Le(o,_){if(1&o&&(e.TgZ(0,"div",18)(1,"small"),e.SDv(2,19),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"small"),e.SDv(6,20),e.qZA(),e.TgZ(7,"span"),e._uU(8),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(t.formatPerson(t.person)),e.xp6(4),e.Oqu(t.person.birthDate)}}let Ie=(()=>{class o{constructor(t,n,s){this.personService=t,this.dialog=n,this.fb=s,this.analysisTypes$=null,this.persons$=null,this.referenceGroups=[],this.indicator$=new v.x,this.alert$=new v.x,this.person=null,this.onPersonChanged=new e.vpe,this.personForm=this.fb.group({person:this.fb.control(null,[l.kI.required]),note:this.fb.control(null,[])})}ngOnInit(){this.getPersons()}formatPerson(t){if(!t)return"";let n="";if(t.names&&t.names.length>0){const s=t.names[0];n=`${s.firstName} ${s.lastName}`}return`${n}`}getPersons(){this.persons$=this.personForm.controls.person.valueChanges.pipe((0,K.O)(""),(0,V.b)(500),(0,ee.w)(t=>t?this.personService.getPersons({query:t,pageIndex:1,pageSize:20,sortBy:"CreatedAt",sortDescending:!1}).pipe((0,F.U)(n=>n.items)):(this.person=null,ae.E)))}onPersonSelected(t){this.person=t,this.onPersonChanged.emit(t)}openPersonScanComponent(){this.dialog.open(Oe,{autoFocus:!0,width:"480px"}).afterClosed().pipe((0,O.q)(1)).subscribe(n=>{n&&this.personForm.controls.person.setValue(n)})}openPersonCreateComponent(){this.dialog.open(Te,{autoFocus:!0,width:"480px"}).afterClosed().pipe((0,O.q)(1)).subscribe(n=>{n&&this.personForm.controls.person.setValue(n)})}openPersonSearchComponent(){this.dialog.open(fe,{autoFocus:!0,width:"480px"}).afterClosed().pipe((0,O.q)(1)).subscribe(n=>{n&&this.personForm.controls.person.setValue(n)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(L.R),e.Y36(T.uw),e.Y36(l.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["softuza-medisy-analyses-create-step-person"]],outputs:{onPersonChanged:"onPersonChanged"},features:[e._Bn([L.R,b.T])],decls:25,vars:7,consts:function(){let _,t,n,s,i,E,c,p;return _="Person Information",t="write name, phone, or email",n=" Search ",s=" Create ",i="Scan",E="Next",c="Name",p="BirthDate",[[1,"tw-flex-1","tw-flex","tw-flex-col",3,"formGroup"],[1,"tw-flex-1"],_,[1,"tw-flex","tw-flex-col","tw-flex-1"],["formControlName","person","type","text","placeholder",t,"matInput","",1,"tw-flex-1",3,"matAutocomplete"],[3,"displayWith","optionSelected"],["autoPerson","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tw-flex tw-flex-col",4,"ngIf"],["inset",""],[1,"tw-flex","tw-flex-row"],["mat-button","",3,"click"],n,s,i,["mat-button","","matStepperNext","",1,"end"],E,[3,"value"],[1,"tw-flex","tw-flex-col"],c,p]},template:function(t,n){if(1&t&&(e.TgZ(0,"form",0)(1,"mat-card",1)(2,"mat-card-subtitle"),e.SDv(3,2),e.qZA(),e.TgZ(4,"mat-card-content")(5,"div",3)(6,"mat-form-field",1),e._UZ(7,"input",4),e.TgZ(8,"mat-autocomplete",5,6),e.NdJ("optionSelected",function(i){return n.onPersonSelected(i.option.value)}),e.YNc(10,he,2,2,"mat-option",7),e.ALo(11,"async"),e.qZA()()(),e.YNc(12,Le,9,2,"div",8),e.qZA(),e._UZ(13,"mat-divider",9),e.TgZ(14,"mat-card-actions")(15,"div",10)(16,"div",1)(17,"button",11),e.NdJ("click",function(){return n.openPersonSearchComponent()}),e.SDv(18,12),e.qZA(),e.TgZ(19,"button",11),e.NdJ("click",function(){return n.openPersonCreateComponent()}),e.SDv(20,13),e.qZA(),e.TgZ(21,"button",11),e.NdJ("click",function(){return n.openPersonScanComponent()}),e.SDv(22,14),e.qZA()(),e.TgZ(23,"button",15),e.SDv(24,16),e.qZA()()()()()),2&t){const s=e.MAs(9);e.Q6J("formGroup",n.personForm),e.xp6(7),e.Q6J("matAutocomplete",s),e.xp6(1),e.Q6J("displayWith",n.formatPerson),e.xp6(2),e.Q6J("ngForOf",e.lcZ(11,5,n.persons$)),e.xp6(2),e.Q6J("ngIf",n.person)}},dependencies:[r.sg,r.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,P.XC,P.ZL,$.ey,f.KE,N.Nt,m.lW,S.Ic,Re.d,x.a8,x.dn,x.$j,x.hq,r.Ov],encapsulation:2}),o})();function De(o,_){1&o&&(e.TgZ(0,"mat-header-cell"),e._uU(1," #"),e.qZA())}function Ye(o,_){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const t=_.$implicit;e.xp6(1),e.hij(" ",t.id," ")}}function $e(o,_){1&o&&(e.TgZ(0,"mat-header-cell"),e.SDv(1,23),e.qZA())}function ye(o,_){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const t=_.$implicit;e.xp6(1),e.hij(" ",t.testType.name," ")}}function ve(o,_){1&o&&e._UZ(0,"mat-header-cell",24)}function Ge(o,_){if(1&o&&(e.TgZ(0,"mat-cell",25)(1,"button",26)(2,"mat-icon",27),e._uU(3,"more_vert"),e.qZA()(),e._UZ(4,"mat-menu",null,28),e.qZA()),2&o){const t=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function Ze(o,_){1&o&&e._UZ(0,"mat-header-row")}function xe(o,_){1&o&&e._UZ(0,"mat-row")}function be(o,_){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const t=_.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Ue(o,_){1&o&&e.SDv(0,30)}function Fe(o,_){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const t=_.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.name)}}let ze=(()=>{class o{constructor(t,n,s,i,E,c){this.analysisService=t,this.analysisTypeService=n,this.referenceGroupService=s,this.dialog=i,this.fb=E,this.router=c,this.analysisTypes$=null,this.referenceGroups=[],this.indicator$=new v.x,this.alert$=new v.x,this.tests=[],this.testsColumns=["name","actions"],this.personForm=this.fb.group({person:this.fb.control(null,[l.kI.required]),note:this.fb.control(null,[])}),this.testsForm=this.fb.group({analysisType:[null,[l.kI.required]],referenceGroup:[null,[l.kI.required]]})}ngOnInit(){this.getAnalysisTypes(),this.getReferenceGroups()}displayAnalysisType(t){return t?`${t.name}`:""}updateReferenceGroup(){const t=this.personForm.value.person;if(!t||0==this.referenceGroups.length)return;const n=t.sex;let s=null;t.birthDate&&(s=(Date.now()-new Date(t.birthDate).getTime())/36e5);for(let i=0;i<this.referenceGroups.length;++i){const E=this.referenceGroups[i];if(!n||!E.sex||E.sex===n){if(s){const c=this.calcAgeInHours(E.startAge,E.dataUnit);if(c&&s<c)continue;const p=this.calcAgeInHours(E.endAge,E.dataUnit);if(p&&s>p)continue}this.testsForm.patchValue({referenceGroup:E});break}}}calcAgeInHours(t,n){return t&&n?n==Y.e.Hour?t:n==Y.e.Day?24*t:n==Y.e.Month?30*t*24:n==Y.e.Year?365*t*24:null:null}getAnalysisTypes(){this.analysisTypes$=this.testsForm.controls.analysisType.valueChanges.pipe((0,K.O)(""),(0,V.b)(500),(0,ee.w)(t=>this.analysisTypeService.getAnalysisTypes({query:t,pageIndex:1,pageSize:20,sortBy:"Name",sortDescending:!1}).pipe((0,O.q)(1)).pipe((0,F.U)(n=>n.items))))}getReferenceGroups(){this.referenceGroupService.getReferenceGroups({pageIndex:1,pageSize:50,sortBy:"Name",sortDescending:!1}).pipe((0,F.U)(t=>t.items)).pipe((0,O.q)(1)).subscribe(t=>{this.referenceGroups=t,this.updateReferenceGroup()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(G.K),e.Y36(B.c),e.Y36(b.T),e.Y36(T.uw),e.Y36(l.qu),e.Y36(y.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["softuza-medisy-analyses-create-step-tests"]],features:[e._Bn([G.K,B.c,b.T])],decls:32,vars:11,consts:function(){let _,t,n,s,i,E;return _="Add Analysis Type",t="Add Test",n="Analysis Type",s="Reference Group",i="Name",E="Reference Group",[[1,"tw-flex","tw-flex-col",3,"formGroup"],[1,"tw-flex-1"],[1,"tw-flex-1","tw-flex","tw-flex-row","tw-gap-2"],["mat-flat-button",""],_,t,[3,"dataSource"],["matColumnDef","id"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","actions"],["class","table-column-small",4,"matHeaderCellDef"],["class","table-column-small table-column-end",4,"matCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["formControlName","analysisType","type","text","placeholder",n,"matInput","",3,"matAutocomplete"],[3,"displayWith"],["autoAnalysisType","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matStepLabel",""],[1,"tw-flex","tw-flex-col"],["formControlName","referenceGroup","placeholder",s],i,[1,"table-column-small"],[1,"table-column-small","table-column-end"],["mat-icon-button","",3,"matMenuTriggerFor"],["fontSet","material-symbols-outlined"],["itemMenu","matMenu"],[3,"value"],E]},template:function(t,n){if(1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span"),e.SDv(5,4),e.qZA()(),e.TgZ(6,"button",3)(7,"span"),e.SDv(8,5),e.qZA()()(),e.TgZ(9,"mat-table",6),e.ynx(10,7),e.YNc(11,De,2,0,"mat-header-cell",8),e.YNc(12,Ye,2,1,"mat-cell",9),e.BQk(),e.ynx(13,10),e.YNc(14,$e,2,0,"mat-header-cell",8),e.YNc(15,ye,2,1,"mat-cell",9),e.BQk(),e.ynx(16,11),e.YNc(17,ve,1,0,"mat-header-cell",12),e.YNc(18,Ge,6,1,"mat-cell",13),e.BQk(),e.YNc(19,Ze,1,0,"mat-header-row",14),e.YNc(20,xe,1,0,"mat-row",15),e.qZA(),e.TgZ(21,"mat-form-field",1),e._UZ(22,"input",16),e.TgZ(23,"mat-autocomplete",17,18),e.YNc(25,be,2,2,"mat-option",19),e.ALo(26,"async"),e.qZA()()(),e.YNc(27,Ue,1,0,"ng-template",20),e.TgZ(28,"div",21)(29,"mat-form-field",1)(30,"mat-select",22),e.YNc(31,Fe,2,2,"mat-option",19),e.qZA()()()()),2&t){const s=e.MAs(24);e.Q6J("formGroup",n.testsForm),e.xp6(9),e.Q6J("dataSource",n.tests),e.xp6(10),e.Q6J("matHeaderRowDef",n.testsColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.testsColumns),e.xp6(2),e.Q6J("matAutocomplete",s),e.xp6(1),e.Q6J("displayWith",n.displayAnalysisType),e.xp6(2),e.Q6J("ngForOf",e.lcZ(26,9,n.analysisTypes$)),e.xp6(6),e.Q6J("ngForOf",n.referenceGroups)}},dependencies:[r.sg,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,P.XC,P.ZL,$.ey,M.BZ,M.fO,M.as,M.w1,M.Dz,M.nj,M.ge,M.ev,M.XQ,M.Gk,f.KE,N.Nt,A.VK,A.p6,g.Hw,m.lW,C.gD,S.VY,r.Ov],encapsulation:2}),o})();function Xe(o,_){1&o&&e._UZ(0,"softuza-ui-alert",27),2&o&&e.Q6J("alert",_.ngIf)}function we(o,_){1&o&&e.SDv(0,28)}function Je(o,_){1&o&&e.SDv(0,29)}function He(o,_){1&o&&e.SDv(0,30)}function Be(o,_){1&o&&e.SDv(0,31)}function Qe(o,_){if(1&o&&(e.TgZ(0,"div",34)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA()()),2&o){const t=_.$implicit;e.xp6(2),e.Oqu(t.key),e.xp6(2),e.Oqu(t.value)}}function qe(o,_){if(1&o&&(e.TgZ(0,"div",32)(1,"h4"),e._uU(2),e.qZA(),e.YNc(3,Qe,5,2,"div",33),e.qZA()),2&o){const t=_.$implicit;e.xp6(2),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngForOf",t.items)}}let ne=(()=>{class o{constructor(t,n,s,i,E,c,p){this.analysisService=t,this.analysisTypeService=n,this.personService=s,this.referenceGroupService=i,this.dialog=E,this.fb=c,this.router=p,this.analysisTypes$=null,this.referenceGroups=[],this.indicator$=new v.x,this.alert$=new v.x,this.tests=[],this.testsColumns=["name","actions"],this.personForm=this.fb.group({person:this.fb.control(null,[l.kI.required]),note:this.fb.control(null,[])}),this.testsForm=this.fb.group({analysisType:[null,[l.kI.required]],referenceGroup:[null,[l.kI.required]]})}ngOnInit(){}onPersonChanged(t){console.log(t),this.personForm.controls.person.setValue(t)}review(){const t=[];return t.push({title:"Person",items:this.generatePersonReview()}),t}displayAnalysisType(t){return t?`${t.name}`:""}updateReferenceGroup(){const t=this.personForm.value.person;if(!t||0==this.referenceGroups.length)return;const n=t.sex;let s=null;t.birthDate&&(s=(Date.now()-new Date(t.birthDate).getTime())/36e5);for(let i=0;i<this.referenceGroups.length;++i){const E=this.referenceGroups[i];if(!n||!E.sex||E.sex===n){if(s){const c=this.calcAgeInHours(E.startAge,E.dataUnit);if(c&&s<c)continue;const p=this.calcAgeInHours(E.endAge,E.dataUnit);if(p&&s>p)continue}this.testsForm.patchValue({referenceGroup:E});break}}}calcAgeInHours(t,n){return t&&n?n==Y.e.Hour?t:n==Y.e.Day?24*t:n==Y.e.Month?30*t*24:n==Y.e.Year?365*t*24:null:null}validate(t){return!(t&&!t.valid&&(Object.keys(t.controls).forEach(n=>{t?.get(n)?.markAsTouched({onlySelf:!0})}),1))}generatePersonReview(){return[{key:"Name",value:this.personForm.value.person?.firstName}]}submit(){return!(!this.validate(this.personForm)||!this.validate(this.testsForm))&&(this.analysisService.createAnalysis({personId:this.personForm.value.person.id,note:this.personForm.value.note,referenceGroupId:this.testsForm.value.referenceGroup.id,analysisTypeId:this.testsForm.value.analysisType.id}).pipe((0,I.sU)(this.indicator$)).pipe((0,I.S3)(this.alert$)).pipe((0,O.q)(1)).subscribe(()=>{this.router.navigate(["/analysis-management/analyses"])}),!1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(G.K),e.Y36(B.c),e.Y36(L.R),e.Y36(b.T),e.Y36(T.uw),e.Y36(l.qu),e.Y36(y.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["softuza-medisy-analyses-create"]],features:[e._Bn([G.K,B.c,L.R,b.T])],decls:43,vars:14,consts:function(){let _,t,n,s,i,E,c,p,u,z,X;return _="Create a new anlysis",t="Back",n="Next",s="Back",i="Next",E=" Cancel ",c=" Create ",p="Person",u="Tests",z="Bill",X="Review",[[1,"header-main"],[1,"title"],_,[1,"spacer"],["mat-icon-button","","routerLink","/analysis-management/analyses"],["fontSet","material-symbols-outlined"],[3,"alert",4,"ngIf"],[1,"mat-stepper-transparent",3,"linear"],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[3,"onPersonChanged"],[1,"tw-flex","tw-flex-col",3,"formGroup"],[1,"end"],["mat-button","","matStepperPrevious",""],t,["mat-button","","matStepperNext",""],n,[1,"tw-flex","tw-flex-col"],s,i,["class","list",4,"ngFor","ngForOf"],["routerLink","/analyses","mat-button","","type","button"],E,["mat-raised-button","","color","primary",3,"disabled","click"],c,[3,"alert"],p,u,z,X,[1,"list"],["class","list-item-horizontal",4,"ngFor","ngForOf"],[1,"list-item-horizontal"]]},template:function(t,n){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"span",1),e.SDv(3,2),e.qZA(),e._UZ(4,"span",3),e.TgZ(5,"button",4)(6,"mat-icon",5),e._uU(7,"arrow_back"),e.qZA()()(),e.YNc(8,Xe,1,1,"softuza-ui-alert",6),e.ALo(9,"async"),e.TgZ(10,"mat-vertical-stepper",7,8)(12,"mat-step",9)(13,"form",10),e.YNc(14,we,1,0,"ng-template",11),e.TgZ(15,"softuza-medisy-analyses-create-step-person",12),e.NdJ("onPersonChanged",function(i){return n.onPersonChanged(i)}),e.qZA()()(),e.TgZ(16,"mat-step",9)(17,"form",13),e.YNc(18,Je,1,0,"ng-template",11),e._UZ(19,"softuza-medisy-analyses-create-step-tests"),e.TgZ(20,"div",14)(21,"button",15),e.SDv(22,16),e.qZA(),e.TgZ(23,"button",17),e.SDv(24,18),e.qZA()()()(),e.TgZ(25,"mat-step",9)(26,"form",10),e.YNc(27,He,1,0,"ng-template",11),e._UZ(28,"div",19),e.TgZ(29,"div",14)(30,"button",15),e.SDv(31,20),e.qZA(),e.TgZ(32,"button",17),e.SDv(33,21),e.qZA()()()(),e.TgZ(34,"mat-step"),e.YNc(35,Be,1,0,"ng-template",11),e.YNc(36,qe,4,2,"div",22),e.TgZ(37,"div",14)(38,"button",23),e.SDv(39,24),e.qZA(),e.TgZ(40,"button",25),e.NdJ("click",function(){return n.submit()}),e.SDv(41,26),e.ALo(42,"async"),e.qZA()()()()()),2&t&&(e.xp6(8),e.Q6J("ngIf",e.lcZ(9,10,n.alert$)),e.xp6(2),e.Q6J("linear",!0),e.xp6(2),e.Q6J("stepControl",n.personForm),e.xp6(1),e.Q6J("formGroup",n.personForm),e.xp6(3),e.Q6J("stepControl",n.testsForm),e.xp6(1),e.Q6J("formGroup",n.testsForm),e.xp6(8),e.Q6J("stepControl",n.testsForm),e.xp6(1),e.Q6J("formGroup",n.testsForm),e.xp6(10),e.Q6J("ngForOf",n.review()),e.xp6(4),e.Q6J("disabled",e.lcZ(42,12,n.indicator$)))},dependencies:[r.sg,r.O5,l._Y,l.JL,l.sg,y.rH,U.w,g.Hw,m.lW,S.C0,S.VY,S.Vq,S.Ic,S.fd,Ie,ze,r.Ov],encapsulation:2}),o})();var oe=a(535);function ke(o,_){1&o&&e._UZ(0,"softuza-ui-alert",20),2&o&&e.Q6J("alert",_.ngIf)}function je(o,_){if(1&o&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&o){const t=_.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}let We=(()=>{class o extends Q.E{constructor(t,n,s,i){super(n,t.group({testTypes:[i.testTypes],startDate:[i.startDate],endDate:[i.endDate]})),this.fb=t,this.dialog=n,this.testTypeService=s,this.data=i,this.testTypes$=null,this.getTestTypes()}getTestTypes(){this.testTypes$=this.testTypeService.getTestTypes({pageIndex:1,pageSize:50,sortBy:"Name",sortDescending:!1}).pipe((0,F.U)(t=>t.items))}handleSubmit(){this.close(this.form.value)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(T.so),e.Y36(oe.D),e.Y36(T.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["softuza-medisy-laboratory-management-analyses-filter"]],features:[e._Bn([oe.D]),e.qOj],decls:31,vars:14,consts:function(){let _,t,n,s,i,E,c,p;return _="Filter Results",t="Type",n="Date",s="Start date",i="End date",E="Reset",c="Close",p=" Save ",[["mat-dialog-title",""],_,[3,"alert",4,"ngIf"],[1,"tw-flex","tw-flex-col",3,"formGroup"],[1,"tw-flex-1"],["formControlName","testTypes","placeholder",t,"multiple",""],[3,"value",4,"ngFor","ngForOf"],n,["startView","year",3,"rangePicker","comparisonStart","comparisonEnd"],["matStartDate","","placeholder",s,"formControlName","endDate"],["matEndDate","","placeholder",i,"formControlName","endDate"],["matSuffix","",3,"for"],["datePicker",""],[1,"mat-dialog-actions-start"],["mat-button","",3,"click"],E,[1,"mat-dialog-actions-end"],c,["mat-flat-button","","color","primary",3,"disabled","click"],p,[3,"alert"],[3,"value"]]},template:function(t,n){if(1&t&&(e.TgZ(0,"h2",0),e.SDv(1,1),e.qZA(),e.YNc(2,ke,1,1,"softuza-ui-alert",2),e.ALo(3,"async"),e.TgZ(4,"mat-dialog-content")(5,"form",3)(6,"mat-form-field",4)(7,"mat-select",5),e.YNc(8,je,2,2,"mat-option",6),e.ALo(9,"async"),e.qZA()(),e.TgZ(10,"mat-form-field",4)(11,"mat-label"),e.SDv(12,7),e.qZA(),e.TgZ(13,"mat-date-range-input",8),e._UZ(14,"input",9)(15,"input",10),e.qZA(),e.TgZ(16,"mat-hint"),e._uU(17,"YYYY-MM-DD - YYYY-MM-DD"),e.qZA(),e._UZ(18,"mat-datepicker-toggle",11)(19,"mat-date-range-picker",null,12),e.qZA()()(),e.TgZ(21,"mat-dialog-actions")(22,"div",13)(23,"button",14),e.NdJ("click",function(){return n.reset()}),e.SDv(24,15),e.qZA()(),e.TgZ(25,"div",16)(26,"button",14),e.NdJ("click",function(){return n.close()}),e.SDv(27,17),e.qZA(),e.TgZ(28,"button",18),e.NdJ("click",function(){return n.submit()}),e.SDv(29,19),e.ALo(30,"async"),e.qZA()()()),2&t){const s=e.MAs(20);e.xp6(2),e.Q6J("ngIf",e.lcZ(3,8,n.alert$)),e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("ngForOf",e.lcZ(9,10,n.testTypes$)),e.xp6(5),e.Q6J("rangePicker",s)("comparisonStart",n.form.controls.startDate.value)("comparisonEnd",n.form.controls.endDate.value),e.xp6(5),e.Q6J("for",s),e.xp6(10),e.Q6J("disabled",e.lcZ(30,12,n.indicator$))}},dependencies:[r.sg,r.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,T.uh,T.xY,T.H8,$.ey,f.KE,f.bx,f.hX,f.R9,U.w,m.lW,C.gD,D.nW,D.wx,D.zY,D.By,D._g,r.Ov],encapsulation:2}),o})();var Ke=a(3104),Ve=a(7885),et=a(3748),_e=a(2673);function tt(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"mat-header-cell",28)(1,"mat-checkbox",29),e.NdJ("change",function(s){e.CHM(t);const i=e.oxw();return e.KtG(s?i.masterToggle():null)}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())}}function nt(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"mat-cell",28)(1,"mat-checkbox",30),e.NdJ("click",function(s){return s.stopPropagation()})("change",function(s){const E=e.CHM(t).$implicit,c=e.oxw();return e.KtG(s?c.selection.toggle(E):null)}),e.qZA()()}if(2&o){const t=_.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selection.isSelected(t))}}function ot(o,_){1&o&&(e.TgZ(0,"mat-header-cell",31),e._uU(1," #"),e.qZA())}function _t(o,_){if(1&o&&(e.TgZ(0,"mat-cell",28),e._uU(1),e.qZA()),2&o){const t=_.$implicit;e.xp6(1),e.hij(" ",t.id," ")}}function st(o,_){1&o&&(e.TgZ(0,"mat-header-cell",32),e._uU(1,"Code"),e.qZA())}function at(o,_){if(1&o&&(e.TgZ(0,"mat-cell")(1,"a",33),e._uU(2),e.qZA()()),2&o){const t=_.$implicit;e.xp6(1),e.s9C("routerLink",t.id),e.xp6(1),e.hij(" ",t.code," ")}}function it(o,_){1&o&&(e.TgZ(0,"mat-header-cell",32),e.SDv(1,34),e.qZA())}function lt(o,_){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=_.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.createdAt,"medium")," ")}}function rt(o,_){1&o&&e._UZ(0,"mat-header-cell",28)}function St(o,_){if(1&o&&(e.TgZ(0,"mat-cell",35)(1,"button",36)(2,"mat-icon",8),e._uU(3,"more_vert"),e.qZA()(),e._UZ(4,"mat-menu",null,37),e.qZA()),2&o){const t=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function Et(o,_){1&o&&e._UZ(0,"mat-header-row")}function ct(o,_){1&o&&e._UZ(0,"mat-row")}function Nt(o,_){if(1&o&&(e._UZ(0,"softuza-ui-table-state",38),e.ALo(1,"async")),2&o){const t=e.oxw();e.Q6J("loading",e.lcZ(1,1,t.indicator$))}}const At=function(){return[10,25,50,100]};function Tt(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"mat-paginator",39),e.NdJ("page",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.onPageChange(s.pageIndex,s.pageSize))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("length",t.count)("pageSize",t.pageSize)("pageSizeOptions",e.DdM(3,At))}}const mt=[{path:"",component:(()=>{class o extends se.a{constructor(t,n){super(),this.dialog=t,this.analysisService=n,this.displayedColumns=["Code","CreatedAt","menu"],this.filter={},this.sortBy="CreatedAt",this.sortDescending=!0,this.get()}openCreateComponent(){this.dialog.open(ne,{autoFocus:!0,width:"480px"}).afterClosed().pipe((0,O.q)(1)).subscribe(n=>{n&&this.add(n)})}openFilterComponent(){this.dialog.open(We,{autoFocus:!0,width:"480px",data:this.filter}).afterClosed().pipe((0,O.q)(1)).subscribe(n=>{n&&(this.filter=n,this.get())})}get(){const t={pageIndex:this.pageIndex,pageSize:this.pageSize,sortBy:this.sortBy,sortDescending:this.sortDescending};this.filter.testTypes&&(t.testTypes=this.filter.testTypes),this.filter.startDate&&(t.startDate=this.filter.startDate.toISOString()),this.filter.endDate&&(t.endDate=this.filter.endDate.toISOString()),this.analysisService.getAnalyses(t).pipe((0,I.sU)(this.indicator$)).pipe((0,O.q)(1)).subscribe(n=>{this.set(n.count,n.items)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.uw),e.Y36(G.K))},o.\u0275cmp=e.Xpm({type:o,selectors:[["softuza-medisy-analysis-management-analyses"]],features:[e.qOj],decls:40,vars:11,consts:function(){let _,t,n;return _="Analyses",t="Add",n="Created Date",[[1,"header-main"],[1,"title"],_,[1,"header-basic"],["mat-flat-button","","routerLink","create","color","primary"],t,[1,"spacer"],["mat-icon-button","",3,"click"],["fontSet","material-symbols-outlined"],["mat-icon-button","","matBadgeSize","small",3,"matBadge","click"],[3,"visible","changed","closed"],[3,"visible"],["multiTemplateDataRows","","matSort","","matSortDisableClear","","matSortDirection","desc",3,"dataSource","matSortActive","matSortChange"],["matColumnDef","select"],["class","table-column-small",4,"matHeaderCellDef"],["class","table-column-small",4,"matCellDef"],["matColumnDef","id"],["mat-sort-header","","class","table-column-small",4,"matHeaderCellDef"],["matColumnDef","Code"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","CreatedAt"],["matColumnDef","menu"],["class","table-column-small table-column-end",4,"matCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[3,"loading",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],[1,"table-column-small"],[3,"checked","indeterminate","change"],[3,"checked","click","change"],["mat-sort-header","",1,"table-column-small"],["mat-sort-header",""],[3,"routerLink"],n,[1,"table-column-small","table-column-end"],["mat-icon-button","",3,"matMenuTriggerFor"],["itemMenu","matMenu"],[3,"loading"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"]]},template:function(t,n){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"span",1),e.SDv(3,2),e.qZA()(),e.TgZ(4,"div",3)(5,"button",4)(6,"span"),e.SDv(7,5),e.qZA()(),e._UZ(8,"span",6),e.TgZ(9,"button",7),e.NdJ("click",function(){return n.search=!0}),e.TgZ(10,"mat-icon",8),e._uU(11,"search"),e.qZA()(),e.TgZ(12,"button",9),e.NdJ("click",function(){return n.openFilterComponent()}),e.TgZ(13,"mat-icon",8),e._uU(14,"filter_list"),e.qZA()(),e.TgZ(15,"softuza-ui-search-bar",10),e.NdJ("changed",function(i){return n.onSearch(i)})("closed",function(){return n.onSearchClose()}),e.qZA()(),e.TgZ(16,"softuza-ui-table-selection",11)(17,"span"),e._uU(18),e.qZA(),e._UZ(19,"span",6),e.qZA(),e.TgZ(20,"mat-table",12),e.NdJ("matSortChange",function(i){return n.onSort(i.active,i.direction)}),e.ynx(21,13),e.YNc(22,tt,2,2,"mat-header-cell",14),e.YNc(23,nt,2,1,"mat-cell",15),e.BQk(),e.ynx(24,16),e.YNc(25,ot,2,0,"mat-header-cell",17),e.YNc(26,_t,2,1,"mat-cell",15),e.BQk(),e.ynx(27,18),e.YNc(28,st,2,0,"mat-header-cell",19),e.YNc(29,at,3,2,"mat-cell",20),e.BQk(),e.ynx(30,21),e.YNc(31,it,2,0,"mat-header-cell",19),e.YNc(32,lt,3,4,"mat-cell",20),e.BQk(),e.ynx(33,22),e.YNc(34,rt,1,0,"mat-header-cell",14),e.YNc(35,St,6,1,"mat-cell",23),e.BQk(),e.YNc(36,Et,1,0,"mat-header-row",24),e.YNc(37,ct,1,0,"mat-row",25),e.qZA(),e.YNc(38,Nt,2,3,"softuza-ui-table-state",26),e.YNc(39,Tt,1,4,"mat-paginator",27),e.qZA()),2&t&&(e.xp6(12),e.s9C("matBadge",n.getFilterCount()),e.xp6(3),e.Q6J("visible",n.search),e.xp6(1),e.Q6J("visible",n.selection.hasValue()),e.xp6(2),e.hij("",n.selection.selected.length," selected"),e.xp6(2),e.s9C("matSortActive",n.sortBy),e.Q6J("dataSource",n.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("ngIf",0===n.count),e.xp6(1),e.Q6J("ngIf",n.count>0))},dependencies:[r.O5,y.rH,y.yS,M.BZ,M.fO,M.as,M.w1,M.Dz,M.nj,M.ge,M.ev,M.XQ,M.Gk,J.NW,Ke.R,Ve.H,et.N,H.oG,A.VK,A.p6,g.Hw,m.lW,Z.YE,Z.nU,_e.k,r.Ov,r.uU],encapsulation:2}),o})()},{path:"create",component:ne}];let Mt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[y.Bz.forChild(mt),y.Bz]}),o})();var ut=a(2579),Pt=a(6220),pt=a(1143),Ct=a(4001);let dt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[G.K],imports:[r.ez,l.u5,l.UX,Mt,T.Is,P.Bb,M.p0,J.TU,N.c,Ct.U,ut.B,pt.n,H.p9,A.Tx,g.Ps,m.ot,C.LD,S.T5,q.AV,k.ie,Z.JX,$.XK,x.QW,_e.g,D.FA,W.Cq,Pt.v]}),o})()},8080:(w,h,a)=>{a.d(h,{T:()=>g});var r=a(529),N=a(4650);let g=(()=>{class m{constructor(P){this.http=P,this.path="analysis-management/v1/reference-groups"}getReferenceGroups(P){return this.http.get(`${this.path}`,{params:new r.LE({fromObject:P})})}}return m.\u0275fac=function(P){return new(P||m)(N.LFG(r.eN))},m.\u0275prov=N.Yz7({token:m,factory:m.\u0275fac}),m})()},535:(w,h,a)=>{a.d(h,{D:()=>g});var r=a(529),N=a(4650);let g=(()=>{class m{constructor(P){this.http=P,this.path="analysis-management/v1/test-types"}getTestTypes(P){return this.http.get(`${this.path}`,{params:new r.LE({fromObject:P})})}}return m.\u0275fac=function(P){return new(P||m)(N.LFG(r.eN))},m.\u0275prov=N.Yz7({token:m,factory:m.\u0275fac}),m})()},3835:(w,h,a)=>{a.d(h,{e:()=>r});var r=(()=>{return(N=r||(r={})).Second="Second",N.Minute="Minute",N.Hour="Hour",N.Day="Day",N.Month="Month",N.Year="Year",N.MicrogramPerMilliliter="MicrogramPerMilliliter",N.MilligramPerMilliliter="MilligramPerMilliliter",N.NanogramPerDeciliter="NanogramPerDeciliter",N.MicrogramPerDeciliter="MicrogramPerDeciliter",N.MilligramPerDeciliter="MilligramPerDeciliter",N.GramPerDeciliter="GramPerDeciliter",N.UnitPerMilliliter="UnitPerMilliliter",N.UnitPerLiter="UnitPerLiter",N.SiMicromolePerLiter="SiMicromolePerLiter",N.SiMillimolePerLiter="SiMillimolePerLiter",N.SiMicrokatalPerLiiter="SiMicrokatalPerLiiter",N.Percent="Percent",r;var N})()},2673:(w,h,a)=>{a.d(h,{g:()=>H,k:()=>J});var r=a(4650),N=a(3238),g=a(2687),m=a(1281);let T=0;const P=(0,N.Id)(class{}),M="mat-badge-content";let J=(()=>{class C extends P{constructor(S,A,q,k,Z){super(),this._ngZone=S,this._elementRef=A,this._ariaDescriber=q,this._renderer=k,this._animationMode=Z,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=T++,this._isInitialized=!1}get color(){return this._color}set color(S){this._setColor(S),this._color=S}get overlap(){return this._overlap}set overlap(S){this._overlap=(0,m.Ig)(S)}get content(){return this._content}set content(S){this._updateRenderedContent(S)}get description(){return this._description}set description(S){this._updateHostAriaDescription(S)}get hidden(){return this._hidden}set hidden(S){this._hidden=(0,m.Ig)(S)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&this._renderer.destroyNode(this._badgeElement),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_createBadgeElement(){const S=this._renderer.createElement("span"),A="mat-badge-active";return S.setAttribute("id",`mat-badge-content-${this._id}`),S.setAttribute("aria-hidden","true"),S.classList.add(M),"NoopAnimations"===this._animationMode&&S.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(S),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{S.classList.add(A)})}):S.classList.add(A),S}_updateRenderedContent(S){const A=`${S??""}`.trim();this._isInitialized&&A&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=A),this._content=A}_updateHostAriaDescription(S){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),S&&this._ariaDescriber.describe(this._elementRef.nativeElement,S),this._description=S}_setColor(S){const A=this._elementRef.nativeElement.classList;A.remove(`mat-badge-${this._color}`),S&&A.add(`mat-badge-${S}`)}_clearExistingBadges(){const S=this._elementRef.nativeElement.querySelectorAll(`:scope > .${M}`);for(const A of Array.from(S))A!==this._badgeElement&&A.remove()}}return C.\u0275fac=function(S){return new(S||C)(r.Y36(r.R0b),r.Y36(r.SBq),r.Y36(g.$s),r.Y36(r.Qsj),r.Y36(r.QbO,8))},C.\u0275dir=r.lG2({type:C,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(S,A){2&S&&r.ekj("mat-badge-overlap",A.overlap)("mat-badge-above",A.isAbove())("mat-badge-below",!A.isAbove())("mat-badge-before",!A.isAfter())("mat-badge-after",A.isAfter())("mat-badge-small","small"===A.size)("mat-badge-medium","medium"===A.size)("mat-badge-large","large"===A.size)("mat-badge-hidden",A.hidden||!A.content)("mat-badge-disabled",A.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],position:["matBadgePosition","position"],content:["matBadge","content"],description:["matBadgeDescription","description"],size:["matBadgeSize","size"],hidden:["matBadgeHidden","hidden"]},features:[r.qOj]}),C})(),H=(()=>{class C{}return C.\u0275fac=function(S){return new(S||C)},C.\u0275mod=r.oAB({type:C}),C.\u0275inj=r.cJS({imports:[g.rt,N.BQ,N.BQ]}),C})()}}]);