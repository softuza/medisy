import{a as E}from"./chunk-KKSCCDKN.js";import{a as T}from"./chunk-Y6DJ4MVW.js";import{a as r,d as oe,e as ne,f as ae,i as re,j as se}from"./chunk-N3YZ3GWE.js";import{b as Y,f as Z,g as x,h as ee,j as ie,k as te}from"./chunk-BQ3MI4NW.js";import{b as I}from"./chunk-RNNBY4AW.js";import{h as C}from"./chunk-VP6ZLF3H.js";import{a as $,b as B,d as U,e as j,g as X}from"./chunk-WNUUIGGE.js";import{c as H,p as Q,q as J,r as K,t as W}from"./chunk-7CXFXQJU.js";import{i as k}from"./chunk-JACASQJP.js";import{d as f,f as z,g as R,l as F,n as P,q as D,r as y,u as L}from"./chunk-VXNH5PTX.js";import{Y as M,Z as w}from"./chunk-KQ5MQZXD.js";import{a as V,e as G}from"./chunk-DNH4OZS2.js";import{la as q}from"./chunk-4B53IFHW.js";import{Fa as A,Kb as m,Lb as p,Mb as u,Wb as b,Xb as O,bb as l,cb as a,na as S,oc as _,pc as N,qb as v,zb as s}from"./chunk-G33TNFCW.js";import{a as g,b as h}from"./chunk-EAIILSS5.js";var ce=(()=>{let n=class n extends Z{constructor(t,e,i,o){super(i),this.sntiService=t,this.fb=e,this.dialog=i,this.data=o,this.notificationTypes=Object.keys(E).map(d=>E[d]),this.form=e.group({name:[o?.notificationRecipient?.name,[f.maxLength(4096)]],enabled:[o?.notificationRecipient?.enabled??!0,[f.required]],identifier:[o?.notificationRecipient?.identifier,[f.required]],notificationType:[o?.notificationRecipient?.notificationType,[f.required]]});}submit(){this.IsValid()&&(this.data&&this.data.notificationRecipient?this.save(this.sntiService.notifications.recipients.update(this.data.notificationId,this.data.notificationRecipient.id,this.form.value)):this.save(this.sntiService.notifications.recipients.create(this.data.notificationId,this.form.value)));}};n.ɵfac=function(e){return new(e||n)(a(T),a(y),a($),a(B));},n.ɵcmp=S({type:n,selectors:[["sz-mgmt-notification-notification-recipients-save"]],standalone:!0,features:[_([]),v,N],decls:9,vars:7,consts:()=>{let t;t="Name";let e;e="Type";let i;i="Identifier";let o;return o="Enabled",[o,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",t],["formControlName","notificationType","label",e,3,"source","localizedValue"],["formControlName","identifier","label",i],["formControlName","enabled"],[3,"actions"]];},template:function(e,i){e&1&&(u(0,"sz-ui-dialog-header",1),m(1,"mat-dialog-content")(2,"form",2),u(3,"sz-ui-form-field-input",3)(4,"sz-ui-form-field-select",4)(5,"sz-ui-form-field-input",5),m(6,"mat-checkbox",6),b(7,0),p()()(),u(8,"sz-ui-dialog-actions",7)),e&2&&(s("title",i.title)("subtitle",i.subtitle)("alert",i.alert()),l(2),s("formGroup",i.form),l(2),s("source",i.notificationTypes)("localizedValue",!0),l(4),s("actions",i.actions));},dependencies:[L,F,z,R,P,D,X,j,k,J,Q,te,x,ee,W,H,K],encapsulation:2});let c=n;return c;})();var Qe=(()=>{let n=class n{constructor(t,e,i){this.route=t,this.dialog=e,this.sntiService=i,this.notification=A.required(),this.dataSource=new oe(),this.appBarConfig={title:M.recipients,subtitle:this.notification().name,backEnabled:!0,actions:[I.add(this.openSaveComponent.bind(this)),I.menu([I.search()])]},this.dataSource.columnDefs.push(r.uuid("id"),r.string("name").setStacked(r.enum("notificationType").setName(M.type).setValueGetter(o=>w(o.notificationType)).setValueClassFontSmall()),r.string("identifier"),r.boolean("enabled").setChangeFn((o,d)=>{this.sntiService.notifications.recipients.update(this.notification().id,o.id,h(g({},o),{enabled:d})).subscribe(de=>{this.dataSource.addOrUpdateItem(de);});}),r.date("createdAt").setVisible(!1),r.date("updatedAt").setVisible(!1),r.menu([C.edit(this.openSaveComponent.bind(this)),C.divider(),C.delete(this.openNotificationRecipientDeleteComponent.bind(this))]));}ngOnInit(){this.get();}openNotificationRecipientDeleteComponent(t){this.dialog.open(ie,{data:Y.delete(this.sntiService.notifications.recipients.delete(t.notificationId,t.id),t)}).afterClosed().subscribe(e=>{this.dataSource.delete(e);});}openSaveComponent(t){this.dialog.open(ce,{data:{notificationId:this.notification().id,notificationRecipient:t}}).afterClosed().subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}get(){this.sntiService.notifications.recipients.get(this.notification().id,this.dataSource.getQuery()).pipe(ne(this.dataSource.state)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};n.ɵfac=function(e){return new(e||n)(a(V),a(U),a(T));},n.ɵcmp=S({type:n,selectors:[["sz-mgmt-notification-notification-recipients"]],inputs:{notification:[1,"notification"]},standalone:!0,features:[_([]),N],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(e,i){e&1&&(m(0,"sz-ui-table-bar",0),O("changed",function(){return i.get();}),p(),m(1,"sz-ui-table",1),O("update",function(){return i.get();}),p()),e&2&&(s("config",i.appBarConfig)("dataSource",i.dataSource),l(),s("dataSource",i.dataSource));},dependencies:[G,se,re,ae,q],encapsulation:2});let c=n;return c;})();export{Qe as a};/**i18n:23b18f90dfad26ae6b830c3e760ecc323aedcfc43eb78549f6a00c2171dce7c8*/