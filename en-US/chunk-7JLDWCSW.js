import{a as j}from"./chunk-DOXPKIGL.js";import{a as be,b as $e,c as ze}from"./chunk-CSXFMR63.js";import{f as p,g as ye}from"./chunk-QLFCEITG.js";import"./chunk-YG6YP2DX.js";import"./chunk-DB5D4RWG.js";import"./chunk-JOBNPPSM.js";import{a as Z}from"./chunk-AGIV3H7X.js";import{b as Pe,c as w,e as ge,g as he,s as Fe,t as De}from"./chunk-VUMSGYE7.js";import{c as ce,g as Ie,h as Ee,i as G,j as X,l as Ae,m as Y,n as Me}from"./chunk-U2NFSQQN.js";import{a as v,b as L,d as Oe,e as U,g as O}from"./chunk-RY32KYW7.js";import{C as de,D as R,i as z,w as pe,y as Ne}from"./chunk-DXSUKRZ3.js";import{d as T,g,h,l as F,n as D,o as y,p as b,s as $}from"./chunk-4NL6MOY5.js";import{a as Ce}from"./chunk-FW7JEP5X.js";import{b as V}from"./chunk-5W7PZILH.js";import{d as ue}from"./chunk-XP7I6OF6.js";import{e as me}from"./chunk-IF5LYGUI.js";import{i as B}from"./chunk-3LHHJK2J.js";import"./chunk-QFXGLSXE.js";import"./chunk-MZZLEOGC.js";import{Pa as Se,Ra as Te,Ua as fe,r as le}from"./chunk-HMJ5RFBC.js";import{Bb as s,Cb as f,Db as l,L as c,Nb as se,Pb as A,Rb as M,Zb as d,ac as P,ca as ie,cb as a,da as ne,db as S,f as te,ia as re,kb as I,la as N,ma as _e,nb as _,tb as ae,ub as E}from"./chunk-VTJ4Z7TN.js";var u=(()=>{let o=class o{constructor(e){this.http=e,this.basePath="softuza-notification",this.notifications=new ue(this.http,`${this.basePath}/v1/notifications`);}};o.ɵfac=function(t){return new(t||o)(re(le));},o.ɵprov=ie({token:o,factory:o.ɵfac});let n=o;return n;})();var Le=(()=>{let o=class o extends Ie{constructor(e,t,i){super(t),this.fb=e,this.dialog=t,this.data=i,this.form=e.group({channelType:[i?.channelType]});}submit(){this.IsValid()&&this.dialog.close(this.form.value);}};o.ɵfac=function(t){return new(t||o)(S(b),S(v),S(L));},o.ɵcmp=N({type:o,selectors:[["softuza-notification-notifications-filter"]],standalone:!0,features:[d([]),I,P],decls:5,vars:3,consts:[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","channelType"],[3,"actions"]],template:function(t,i){t&1&&(l(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),l(3,"medisy-form-field-channel-type",2),f()(),l(4,"sz-ui-dialog-actions",3)),t&2&&(_("header",i.header),a(2),_("formGroup",i.form),a(2),_("actions",i.actions));},dependencies:[$,F,g,h,D,y,Y,G,X,R,z,pe,O,U,j],encapsulation:2});let n=o;return n;})();function je(n,o){if(n&1&&(s(0,"mat-tab",5),l(1,"sz-ui-form-field-input",9)(2,"sz-ui-form-field-input",10)(3,"sz-ui-form-field-input",11)(4,"sz-ui-form-field-textarea",12),f()),n&2){let C=M();_("formGroup",C.formEmail);}}function xe(n,o){if(n&1&&(s(0,"mat-tab",6),l(1,"sz-ui-form-field-input",13)(2,"sz-ui-form-field-textarea",14),f()),n&2){let C=M();_("formGroup",C.formSms);}}function Be(n,o){if(n&1&&(s(0,"mat-tab",7),l(1,"sz-ui-form-field-input",15)(2,"sz-ui-form-field-textarea",16),f()),n&2){let C=M();_("formGroup",C.formPush);}}var Ue=(()=>{let o=class o extends Ee{constructor(e,t,i,r){super(i),this.sntiService=e,this.fb=t,this.dialog=i,this.data=r,this.channelTypes=p,this.subscriptions=new te(),this.formEmail=t.group({subject:[r?.email?.subject,[T.required]],replyToEmail:[r?.email?.replyToEmail,[T.email]],replyToName:[r?.email?.replyToName,[]],body:[r?.email?.body,[T.required]]}),this.formSms=t.group({originator:[r?.sms?.originator,[T.required]],body:[r?.sms?.body,[T.required]]}),this.formPush=t.group({title:[r?.push?.title,[T.required]],body:[r?.push?.body,[T.required]]}),this.form=t.group({name:[r?.name,[T.required]],description:[r?.description,[T.maxLength(4096)]],channelTypes:[r?.channelTypes??[],[T.required]]}),this.subscribeChanges();}ngOnDestroy(){this.subscriptions.unsubscribe();}subscribeChanges(){this.subscriptions.add(this.form.controls.channelTypes.valueChanges.subscribe(e=>{this.form.contains("email")?e?.includes(p.Email)||this.form.removeControl("email"):e?.includes(p.Email)&&this.form.addControl("email",this.formEmail),this.form.contains("sms")?e?.includes(p.Sms)||this.form.removeControl("sms"):e?.includes(p.Sms)&&this.form.addControl("sms",this.formSms),this.form.contains("push")?e?.includes(p.Push)||this.form.removeControl("push"):e?.includes(p.Push)&&this.form.addControl("push",this.formPush);}));}hasChannelType(e){return this.form.value.channelTypes?.includes(e);}submit(){this.IsValid()&&(this.data?this.save(this.sntiService.notifications.update(this.data.id,this.form.value)):this.save(this.sntiService.notifications.create(this.form.value)));}};o.ɵfac=function(t){return new(t||o)(S(u),S(b),S(v),S(L));},o.ɵcmp=N({type:o,selectors:[["medisy-laboratory-reference-values-save"]],standalone:!0,features:[d([]),I,P],decls:11,vars:7,consts:()=>{let e;e="Name";let t;t="Description";let i;i="Email";let r;r="SMS";let k;k="Push";let q;q="Subject";let H;H="Email";let J;J="Name";let K;K="Body";let Q;Q="Originator";let W;W="Body";let ee;ee="Title";let oe;return oe="Body",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",t],["formControlName","channelTypes",3,"multiple"],["label",i,3,"formGroup"],["label",r,3,"formGroup"],["label",k,3,"formGroup"],[3,"actions"],["formControlName","subject","label",q],["formControlName","replyToEmail","label",H],["formControlName","replyToName","label",J],["formControlName","body","label",K],["formControlName","originator","label",Q],["formControlName","body","label",W],["formControlName","title","label",ee],["formControlName","body","label",oe]];},template:function(t,i){t&1&&(l(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),l(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"medisy-form-field-channel-type",4),s(6,"mat-tab-group"),ae(7,je,5,1,"mat-tab",5)(8,xe,3,1,"mat-tab",6)(9,Be,3,1,"mat-tab",7),f()()(),l(10,"sz-ui-dialog-actions",8)),t&2&&(_("header",i.header),a(2),_("formGroup",i.form),a(3),_("multiple",!0),a(2),E(7,i.hasChannelType(i.channelTypes.Email)?7:-1),a(1),E(8,i.hasChannelType(i.channelTypes.Sms)?8:-1),a(1),E(9,i.hasChannelType(i.channelTypes.Push)?9:-1),a(1),_("actions",i.actions));},dependencies:[$,F,g,h,D,y,O,U,z,ze,be,$e,Y,G,X,R,Ne,de,j],encapsulation:2});let n=o;return n;})();var Ve=(()=>{let o=class o{constructor(e,t){this.dialog=e,this.sntiService=t,this.title=Ce.notifications,this.dataSource=new ge(),this.dataSource.addRows([w.borderless([Z.nameText(),Z.createdAt(),Z.menu([B.edit(i=>this.openSaveComponent(i)),B.delete(i=>this.openNotificationDeleteComponent(i))])]),w.headerless([Pe.text("description")])]),this.get();}openFilterComponent(){this.dialog.open(Le,{data:this.dataSource.filter}).afterClosed().pipe(c(1)).subscribe(e=>{e&&(this.dataSource.updateFilter(e),this.get());});}openSaveComponent(e){this.dialog.open(Ue,{data:e}).afterClosed().pipe(c(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openNotificationDeleteComponent(e){this.dialog.open(Ae,{data:Me.delete(this.sntiService.notifications.delete(e.id),e)}).afterClosed().pipe(c(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.sntiService.notifications.get(this.dataSource.buildRequest()).pipe(ce(this.dataSource.indicator),c(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(t){return new(t||o)(S(Oe),S(u));},o.ɵcmp=N({type:o,selectors:[["softuza-notification-notifications"]],features:[d([ye])],decls:6,vars:4,consts:()=>{let e;return e="Add",[[3,"title"],[3,"filter","search","filterClicked"],["mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(t,i){t&1&&(l(0,"sz-ui-header-info",0),s(1,"sz-ui-table-filter",1),A("search",function(){return i.get();})("filterClicked",function(){return i.openFilterComponent();}),s(2,"button",2),A("click",function(){return i.openSaveComponent();}),s(3,"span"),se(4,3),f()()(),s(5,"sz-ui-table",4),A("update",function(){return i.get();}),f()),t&2&&(_("title",i.title),a(1),_("filter",i.dataSource.filter),a(4),_("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[Se,Fe,he,V],encapsulation:2});let n=o;return n;})();var Ge=[{path:"",component:Ve}];var Ko=(()=>{let o=class o{};o.ɵfac=function(t){return new(t||o)();},o.ɵmod=_e({type:o}),o.ɵinj=ne({providers:[u],imports:[me.forChild(Ge),O,Te,De,V,fe]});let n=o;return n;})();export{Ko as NotificationsModule};/**i18n:58cd3b8848ac5782a36a96a60f590b5398c328b80f04dbb1677d4c0de37b393f*/