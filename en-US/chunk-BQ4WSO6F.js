import{a as C}from"./chunk-LFZD73XQ.js";import{a as M}from"./chunk-UZV5LP6K.js";import{c as d,g as T}from"./chunk-ACY3TFT2.js";import{b as te}from"./chunk-7CAN5NDU.js";import{a as m,b as Q,c as W,o as Z,p as ee}from"./chunk-ZXC77473.js";import{c as U,h as k,i as H,j as X,l as q,m as J,n as K}from"./chunk-TZHDOS7D.js";import{a as j,b as w,d as V,e as $,g as B}from"./chunk-MLSRSUWT.js";import{q as G,t as Y}from"./chunk-DPUIQT2Q.js";import{g as E,h as z,l as I,n as N,o as O,p as P,s as R}from"./chunk-UZRVZSRL.js";import{c as y}from"./chunk-VXIMUH5R.js";import{a as l}from"./chunk-KYTCDYCU.js";import{a as x}from"./chunk-HSBTPXYW.js";import{a as F,e as L}from"./chunk-7EL7DJOA.js";import{$b as h,Ab as c,Bb as S,Cb as f,L as p,Ob as b,Yb as A,cb as g,db as n,ja as r,kb as v,la as u,nb as s,pc as D}from"./chunk-MK3KDUIH.js";var oe=(()=>{let o=class o extends k{constructor(e,t,i,_){super(i),this.mlabService=e,this.fb=t,this.dialog=i,this.data=_,this.form=t.group({note:[_?.note,[]]});}submit(){this.IsValid()&&this.data&&this.save(this.mlabService.analyses.tests.update(this.data.analysisId,this.data.id,this.form.value));}};o.ɵfac=function(t){return new(t||o)(n(l),n(P),n(j),n(w));},o.ɵcmp=u({type:o,selectors:[["medisy-laboratory-analysis-tests-save"]],standalone:!0,features:[v,h],decls:5,vars:3,consts:()=>{let e;return e="Note",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","note","label",e],[3,"actions"]];},template:function(t,i){t&1&&(f(0,"sz-ui-dialog-header",0),c(1,"mat-dialog-content")(2,"form",1),f(3,"sz-ui-form-field-input",2),S()(),f(4,"sz-ui-dialog-actions",3)),t&2&&(s("header",i.header),g(2),s("formGroup",i.form),g(2),s("actions",i.actions));},dependencies:[R,I,E,z,N,O,B,$,J,H,X,Y,G],encapsulation:2});let a=o;return a;})();var we=(()=>{let o=class o{constructor(){this.route=r(F),this.dialog=r(V),this.locale=r(D),this.mlabService=r(l),this.typeI18nPipe=r(T),this.dataSource=new Q(x.unpagedSorted("test.testClass")),this.analysis=this.route.snapshot.data.analysis,this.dataSource.addRows(W.default([m.icon("test.state","State",e=>{switch(e.test.state){case d.Created:return"description";case d.Pending:return"pending";case d.Started:return"sync";case d.Finished:return"done";default:return"";}}).makeCompact(),m.text("test.testclass",C.testClass,e=>e.test.testClass.name),m.text("test.referenceGroup",C.referenceGroup,e=>e.test.referenceGroup.name[M(this.locale)]),m.text("test.testResult",C.testResult,e=>e.test.referenceGroup.name[M(this.locale)]),te.menu([y.edit(e=>this.openSaveAnalysisTestComponent(e)),y.divider(),y.delete(e=>this.openDeleteAnalysisTestComponent(e))])])),this.get();}openSaveAnalysisTestComponent(e){this.dialog.open(oe,{data:e}).afterClosed().pipe(p(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openDeleteAnalysisTestComponent(e){this.dialog.open(q,{data:K.delete(this.mlabService.analyses.tests.delete(e.analysisId,e.id),e)}).afterClosed().pipe(p(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.mlabService.analyses.tests.get(this.analysis.id,this.dataSource.filterModel).pipe(U(this.dataSource.indicator)).pipe(p(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(t){return new(t||o)();},o.ɵcmp=u({type:o,selectors:[["medisy-laboratory-analysis-tests"]],standalone:!0,features:[A([l,T]),h],decls:1,vars:3,consts:[[3,"paginationEnabled","stateEnabled","dataSource","update"]],template:function(t,i){t&1&&(c(0,"sz-ui-table",0),b("update",function(){return i.get();}),S()),t&2&&s("paginationEnabled",!1)("stateEnabled",!0)("dataSource",i.dataSource);},dependencies:[L,ee,Z],encapsulation:2});let a=o;return a;})();export{we as a};/**i18n:33360f080214f876987bd0ecc2f51b8308b133d904c534ef8c974004cf54d934*/