import{a as ae}from"./chunk-J65J55RX.js";import"./chunk-63VTERTH.js";import{a as Z,c as x,g as ee,h as te,i as ie,s as se,t as oe,u as a}from"./chunk-TC5CN6G5.js";import{a as U}from"./chunk-ETF3CVHJ.js";import{a as h}from"./chunk-QQWVDBYJ.js";import{c as w,h as q,i as H,j as J,l as K,m as Q,n as W}from"./chunk-47MBZVPY.js";import"./chunk-E3FW4FG3.js";import{b as X}from"./chunk-BENUJSGK.js";import{g as y}from"./chunk-2AKRFP2E.js";import{a as j,b as G,d as k,e as B,g as V}from"./chunk-P4QIA4WM.js";import"./chunk-22KPLFGU.js";import{J as R,L,N as F,d as v,f as I,g as A,k as D,m as O,p as N,q as P,t as z}from"./chunk-BWNHVGBM.js";import"./chunk-IWM4AFTB.js";import{Ea as Y,Ga as $}from"./chunk-I73ZQFGG.js";import{Eb as d,Fb as u,Gb as c,M as S,Qb as _,Sb as f,fb as p,gb as o,gc as M,jc as C,kc as b,lc as g,na as T,nb as E,ub as n}from"./chunk-KN4PZLRS.js";var me=()=>[],ce=r=>[r],re=(()=>{let s=class s extends q{constructor(e,t,i,l){super(i),this.mlabService=e,this.fb=t,this.dialog=i,this.data=l,this.form=t.group({testClassId:[l.testTypeTestClass?.testClassId,[v.required]],enabled:[l.testTypeTestClass?.enabled??!0,[]]});}submit(){this.IsValid()&&(this.data.testTypeTestClass?this.save(this.mlabService.testTypes.testClasses.update(this.data.testTypeId,this.data.testTypeTestClass?.id,this.form.value)):this.save(this.mlabService.testTypes.testClasses.create(this.data.testTypeId,this.form.value)));}};s.ɵfac=function(t){return new(t||s)(o(h),o(P),o(j),o(G));},s.ɵcmp=T({type:s,selectors:[["medisy-test-type-test-classes-save"]],standalone:!0,features:[M([]),E,C],decls:7,vars:7,consts:()=>{let e;return e="Enabled",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","testClassId",3,"excludeTestTypeIds"],["formControlName","enabled"],e,[3,"actions"]];},template:function(t,i){t&1&&(c(0,"sz-ui-dialog-header",0),d(1,"mat-dialog-content")(2,"form",1),c(3,"medisy-form-field-test-class",2),d(4,"mat-checkbox",3),_(5,4),u()()(),c(6,"sz-ui-dialog-actions",5)),t&2&&(n("header",i.header),p(2),n("formGroup",i.form),p(),n("excludeTestTypeIds",i.data.testTypeTestClass?b(4,me):g(5,ce,i.data.testTypeId)),p(3),n("actions",i.actions));},dependencies:[z,D,I,A,O,N,V,B,ie,te,Q,H,J,ae],encapsulation:2});let r=s;return r;})();var qe=(()=>{let s=class s{constructor(e,t,i,l){this.dialog=e,this.mlabService=t,this.route=i,this.router=l,this.title=U.testClasses,this.dataSource=new x(),this.testType=this.route.snapshot.data.testType,this.dataSource.fields.push(a.uuid("id"),a.uuid("testClassId"),a.uuid("testTypeId"),a.string("testClass.name"),a.string("testClass.latinName"),a.string("testClass.code"),a.date("createdAt",!1),a.date("updatedAt",!1),a.checkbox("enabled",(m,ne)=>{m.enabled=ne,this.updateItem(m);}),Z.menu([y.edit(m=>this.openSaveComponent(m)),y.delete(m=>this.openTestTypeTestClassDeleteComponent(m))])),this.get();}openSaveComponent(e){this.dialog.open(re,{data:{testTypeId:this.testType.id,testTypeTestClass:e}}).afterClosed().pipe(S(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openTestTypeTestClassDeleteComponent(e){this.dialog.open(K,{data:W.delete(this.mlabService.testTypes.testClasses.delete(e.testTypeId,e.id),e)}).afterClosed().pipe(S(1)).subscribe(t=>{this.dataSource.delete(t);});}updateItem(e){this.mlabService.testTypes.testClasses.update(e.testTypeId,e.id,e).subscribe(t=>{this.dataSource.update(t);});}get(){this.mlabService.testTypes.testClasses.get(this.testType.id,this.dataSource.buildRequest()).pipe(w(this.dataSource.indicator),S(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};s.ɵfac=function(t){return new(t||s)(o(k),o(h),o(R),o(L));},s.ɵcmp=T({type:s,selectors:[["medisy-laboratory-test-type-test-classes"]],standalone:!0,features:[C],decls:6,vars:5,consts:()=>{let e;return e="Add",[[3,"title","subtitle"],[3,"dataSource","changed"],["title","","mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(t,i){t&1&&(c(0,"sz-ui-header-info",0),d(1,"sz-ui-table-search-filter",1),f("changed",function(){return i.get();}),d(2,"button",2),f("click",function(){return i.openSaveComponent();}),d(3,"span"),_(4,3),u()()(),d(5,"sz-ui-table",4),f("update",function(){return i.get();}),u()),t&2&&(n("title",i.title)("subtitle",i.testType.name),p(),n("dataSource",i.dataSource),p(4),n("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[F,$,Y,oe,se,ee,X],encapsulation:2});let r=s;return r;})();export{qe as TestTypeTestClassesComponent};/**i18n:5ad987f33fb36a4bb6d53ec4372590584614aa13df9413297fdfa1032f98b4a2*/