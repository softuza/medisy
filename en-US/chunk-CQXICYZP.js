import{a as Te}from"./chunk-F4O2B72K.js";import{a as De,b as ze,c as Ie}from"./chunk-A3WCAN3U.js";import{c as d}from"./chunk-VZNRBBBJ.js";import{a as T}from"./chunk-VVBZ6LGN.js";import{a as O,d as he,e as _e,f as Ce,i as ve,j as be}from"./chunk-ARD3YAY2.js";import"./chunk-QV2ZQHMC.js";import"./chunk-IABH27XU.js";import{b as ce,f as fe,g as Se,h as ge,j as Me,k as E}from"./chunk-M637VPZN.js";import{a as I}from"./chunk-EB3NWFUM.js";import{d as de,i as le,j as S,k as z}from"./chunk-V7TLZDA6.js";import{a as oe,b as re,d as v,e as ne,g as b}from"./chunk-LXPLDGFP.js";import"./chunk-QEZI75P7.js";import"./chunk-X34YPVYV.js";import"./chunk-TCCIVYCZ.js";import{h as ue}from"./chunk-7WCYUC4Z.js";import"./chunk-PQYDHBBD.js";import{b as ae,h as se,j as me,k as pe}from"./chunk-JN2TNDGG.js";import{d as q,f as H,g as J,l as K,n as Q,q as W,r as Y,u as Z}from"./chunk-BHO3RGW2.js";import"./chunk-TGOP7ZDO.js";import{a as ee,c as te,d as C}from"./chunk-BMCN66UE.js";import"./chunk-6RTBVNC4.js";import{aa as ie,la as D}from"./chunk-O5CF5VDW.js";import"./chunk-X5L7PWWN.js";import{Fa as B,Fb as $,Gb as w,Hb as g,Ib as M,Jb as m,Kb as p,Lb as l,Vb as x,Wb as N,Yb as V,ab as u,bb as s,ea as R,gc as X,hc as k,ja as A,mc as h,na as f,nc as _,oa as U,pb as F,ub as L,vb as P,wb as j,yb as n}from"./chunk-2TFHNGIL.js";import"./chunk-IL567IQQ.js";function ye(o,t){if(o&1&&(m(0,"mat-option",4),X(1),p()),o&2){let c=t.$implicit;n("value",c.id),u(),k(c.name);}}var Ee=(()=>{let t=class t extends fe{constructor(e,i,r,a){super(r),this.accessManagementService=e,this.fb=i,this.dialog=r,this.user=a,this.groups=[],this.form=i.group({groupId:[null,[q.required]]}),this.getGroups();}flattenGroups(e){let i=[];function r(a){i.push({id:a.id,name:a.name,path:a.path,subGroups:[]}),a.subGroups&&a.subGroups.forEach(r);}return e.forEach(r),i;}getGroups(){this.accessManagementService.getGroups().subscribe(e=>{this.groups=this.flattenGroups(e);});}submit(){this.IsValid()&&this.accessManagementService.addUserGroup(this.user.id,this.form.value.groupId).subscribe(()=>{this.dialog.close(!0);});}};t.ɵfac=function(i){return new(i||t)(s(d),s(Y),s(oe),s(re));},t.ɵcmp=f({type:t,selectors:[["sz-iam-users-user-group-add"]],standalone:!0,features:[F,_],decls:10,vars:5,consts:()=>{let e;return e="Groups",[e,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","groupId"],[3,"value"],[3,"actions"]];},template:function(i,r){i&1&&(l(0,"sz-ui-dialog-header",1),m(1,"mat-dialog-content")(2,"form",2)(3,"mat-form-field")(4,"mat-label"),x(5,0),p(),m(6,"mat-select",3),g(7,ye,2,2,"mat-option",4,$),p()()()(),l(9,"sz-ui-dialog-actions",5)),i&2&&(n("title",r.title)("subtitle",r.subtitle)("alert",r.alert()),u(2),n("formGroup",r.form),u(5),M(r.groups),u(2),n("actions",r.actions));},dependencies:[Z,K,H,J,Q,W,b,ne,E,Se,ge,pe,se,ae,me,ie],encapsulation:2});let o=t;return o;})();var G=(()=>{let t=class t{constructor(){this.dialog=A(v),this.adminService=A(d),this.user=B.required(),this.dataSource=new he(),this.appBarConfig={title:"Groups",menu:z.default().setItems([S.add(this.openAddComponent.bind(this))])},this.dataSource.columnDefs.push(O.string("name").setValueGetter(e=>e.name),O.menu([S.delete(e=>this.openDeleteComponent(e))]));}ngOnInit(){this.get();}openDeleteComponent(e){this.dialog.open(Me,{data:ce.delete(this.adminService.deleteUserGroup(this.user().id,e.id),e)}).afterClosed().subscribe(i=>{this.dataSource.delete(i);});}openAddComponent(){this.dialog.open(Ee,{data:this.user()}).afterClosed().subscribe(e=>{e&&this.get();});}get(){this.adminService.getUserGroups(this.user().id).pipe(_e(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e,e.length);});}};t.ɵfac=function(i){return new(i||t)();},t.ɵcmp=f({type:t,selectors:[["sz-iam-users-user-groups"]],inputs:{user:[1,"user"]},standalone:!0,features:[h([]),_],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(i,r){i&1&&(m(0,"sz-ui-table-bar",0),N("changed",function(){return r.get();}),p(),m(1,"sz-ui-table",1),N("update",function(){return r.get();}),p()),i&2&&(n("config",r.appBarConfig)("dataSource",r.dataSource),u(),n("dataSource",r.dataSource));},dependencies:[C,be,ve,Ce,D],encapsulation:2});let o=t;return o;})();var Ue=()=>[G];function Be(o,t){if(o&1&&l(0,"sz-ui-card",2),o&2){let c=t.$implicit;n("card",c);}}function Fe(o,t){if(o&1&&l(0,"sz-iam-users-user-groups",5),o&2){let c=V();n("user",c.user);}}var Ge=(()=>{let t=class t{constructor(e,i,r,a){this.dialog=e,this.accessManagementService=i,this.route=r,this.router=a,this.items=[],this.user=this.route.snapshot.data.user,this.appBarConfig={title:this.user.username,menu:z.default().setItems([S.menu([S.edit(this.openSaveComponent.bind(this))])])};}openSaveComponent(){this.dialog.open(Te,{data:this.user}).afterClosed().subscribe(()=>{this.getUser();});}getUser(){this.accessManagementService.getUserById(this.user.id).subscribe(e=>{this.user=e;});}navigate(e){this.router.navigate([e],{relativeTo:this.route});}};t.ɵfac=function(i){return new(i||t)(s(v),s(d),s(ee),s(te));},t.ɵcmp=f({type:t,selectors:[["sz-iam-users-user"]],features:[h([d])],decls:9,vars:1,consts:()=>{let e;return e="Groups",[[3,"config"],[1,"sz-grid-card"],[3,"card"],["mat-stretch-tabs","false"],["label",e],[3,"user"]];},template:function(i,r){i&1&&(l(0,"sz-ui-app-bar",0),m(1,"div",1),g(2,Be,1,1,"sz-ui-card",2,w),p(),m(4,"mat-tab-group",3)(5,"mat-tab",4),L(6,Fe,1,1),P(7,6,Ue),j(),p()()),i&2&&(n("config",r.appBarConfig),u(2),M(r.items));},dependencies:[T,I,De,ze],encapsulation:2});let o=t;return o;})();var Ae=[{path:"",component:Ge}];var Ut=(()=>{let t=class t{};t.ɵfac=function(i){return new(i||t)();},t.ɵmod=U({type:t}),t.ɵinj=R({imports:[C.forChild(Ae),ue,T,E,I,de,b,D,le,Ie,G]});let o=t;return o;})();export{Ut as UserModule};/**i18n:254aa6fe1cd18dc65995e6e9397465bfcd88a7e4c31f715b7e9eda5212bf646d*/