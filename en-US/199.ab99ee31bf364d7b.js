"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[199],{677:(T,o,e)=>{e.r(o),e.d(o,{AnalysisModule:()=>M});var t=e(6814),r=e(2296),a=e(7700),d=e(617),u=e(8109),i=e(6883),z=e(3385),y=e(2516),m=e(157),s=e(5879),l=e(9060),$=e(2393),n=e(3562),c=e(9598),C=e(8180),p=e(8210),f=e(5807);function O(h,A){1&h&&s._UZ(0,"sz-ui-card",6),2&h&&s.Q6J("card",A.$implicit)}const g=[{path:"",component:(()=>{class h{constructor(E,v,P,S,U,B){this.dialog=E,this.route=v,this.router=P,this.mlabService=S,this.mpplService=U,this.personNamePipe=B,this.alert$=(0,s.tdS)(void 0),this.testsDataSource=new n.b2(c.J.pagedSorted("-createdAt")),this.tiles=[],this.analysisMenu=m.Bw.more([m.NT.edit(()=>this.openEditComponent),m.NT.print(()=>this.openEditComponent)]),this.analysis=this.route.snapshot.data.analysis,this.getPerson(),this.buildTiles()}buildTiles(){const E={icon:"science",subtitle:"Tests",type:z.kD.Counter,clickFn:()=>this.router.navigate(["tests"],{relativeTo:this.route})},v={icon:"label",subtitle:"Specimens",type:z.kD.Counter,clickFn:()=>this.router.navigate(["specimens"],{relativeTo:this.route})};this.mlabService.analyses.tests.count(this.analysis.id,c.J.count()).subscribe(P=>{E.title=P}),this.mlabService.analyses.specimens.count(this.analysis.id,c.J.count()).subscribe(P=>{v.title=P}),this.tiles.push(E),this.tiles.push(v)}getPerson(){this.analysis.personId&&this.mpplService.persons.getById(this.analysis.personId).pipe((0,C.q)(1)).subscribe(E=>{this.tiles.splice(0,0,{icon:"person",type:z.kD.Text,subtitle:"Patient",title:this.personNamePipe.transform(E),clickFn:()=>this.router.navigate([`mppl/persons/${E.id}`])})})}openEditComponent(){}static#e=this.\u0275fac=function(v){return new(v||h)(s.Y36(a.uw),s.Y36(u.gz),s.Y36(u.F0),s.Y36(i.t),s.Y36($.i),s.Y36(l.Y))};static#t=this.\u0275cmp=s.Xpm({type:h,selectors:[["medisy-laboratory-analysis"]],features:[s._Bn([i.t,$.i,l.Y])],decls:9,vars:4,consts:[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["end","",3,"menu"],[1,"sz-grid-card"],[3,"card",4,"ngFor","ngForOf"],[3,"card"]],template:function(v,P){1&v&&(s.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),s._uU(3),s.qZA(),s.TgZ(4,"span",2),s._uU(5),s.qZA()(),s._UZ(6,"sz-ui-menu",3),s.qZA(),s.TgZ(7,"div",4),s.YNc(8,O,1,1,"sz-ui-card",5),s.qZA()),2&v&&(s.xp6(3),s.Oqu(P.analysis.code),s.xp6(2),s.Oqu(P.analysis.note),s.xp6(1),s.Q6J("menu",P.analysisMenu),s.xp6(2),s.Q6J("ngForOf",P.tiles))},dependencies:[t.sg,y.z,p.X,f.i],encapsulation:2})}return h})()},{path:"tests",loadComponent:()=>Promise.resolve().then(e.bind(e,1947)).then(h=>h.AnalysisTestsComponent)},{path:"specimens",loadComponent:()=>e.e(380).then(e.bind(e,2380)).then(h=>h.AnalysisSpecimensComponent)}];var D=e(1947);let M=(()=>{class h{static#e=this.\u0275fac=function(v){return new(v||h)};static#t=this.\u0275mod=s.oAB({type:h});static#s=this.\u0275inj=s.cJS({providers:[i.t],imports:[t.ez,u.Bz.forChild(g),a.Is,d.Ps,r.ot,y.z,z.X,m.iz,D.AnalysisTestsComponent]})}return h})()},1947:(T,o,e)=>{e.r(o),e.d(o,{AnalysisTestsComponent:()=>$});var t=e(8109),r=e(8262),a=e(7076),d=e(6883),u=e(2516),i=e(3562),z=e(9598),y=e(8721),m=e(8180),s=e(5879),l=e(8359);let $=(()=>{class n{constructor(C,p,f){this.route=C,this.mlabService=p,this.typeI18nPipe=f,this.dataSource=new i.b2(z.J.pagedSorted("test.testClass")),this.analysis=this.route.snapshot.data.analysis,this.dataSource.addRows(i.zP.default([i.UC.text("test.testclass","Test Class",O=>O.test.testClass.name),i.UC.text("test.state","State",O=>f.transform(O.test.state)),r.h.menu([])])),this.get()}get(){this.mlabService.analyses.tests.get(this.analysis.id,this.dataSource.filterModel).pipe((0,y.sU)(this.dataSource.indicator)).pipe((0,m.q)(1)).subscribe(C=>{this.dataSource.set(C.items,C.count)})}static#e=this.\u0275fac=function(p){return new(p||n)(s.Y36(t.gz),s.Y36(d.t),s.Y36(a.y))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["medisy-laboratory-analysis-tests"]],standalone:!0,features:[s._Bn([d.t,a.y]),s.jDz],decls:7,vars:4,consts:function(){let C;return C="Tests",[["start",""],[1,"sz-h5"],C,["routerLink","../",1,"tw-underline","tw-text-sm"],[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(p,f){1&p&&(s.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),s.SDv(3,2),s.qZA(),s.TgZ(4,"a",3),s._uU(5),s.qZA()()(),s.TgZ(6,"sz-ui-table",4),s.NdJ("update",function(){return f.get()}),s.qZA()),2&p&&(s.xp6(5),s.Oqu(f.analysis.code),s.xp6(1),s.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",f.dataSource))},dependencies:[t.Bz,t.rH,i.Vn,l.K,u.z],encapsulation:2})}return n})()},8262:(T,o,e)=>{e.d(o,{h:()=>d});var t=e(3562),r=e(7311);const a={documentType:"Document Type",comparisonType:"Comparison Operator",emailType:"Email Type",phoneType:"Phone Type"};class d{static menu(i){return t.UC.action("menu",i)}static code(){return t.UC.text("code","Code")}static createdAt(){return t.UC.date("createdAt",r.O.createdDate)}static updatedAt(){return t.UC.date("updatedAt",r.O.updatedDate)}static id(){return t.UC.text("id",r.O.id)}static nameHyperlink(i,z,y){return t.UC.hyperlink("name",r.O.name,i,z,y)}static nameText(i){return t.UC.text("name",r.O.name,i)}static phoneType(i){return t.UC.text("phoneType",a.phoneType,i)}static emailType(i){return t.UC.text("emailType",a.emailType,i)}static documentType(i){return t.UC.text("documentType",a.documentType,i)}static comparisonOperator(i){return t.UC.text("comparisonOperator",a.comparisonType,i)}}},7311:(T,o,e)=>{e.d(o,{O:()=>t});const t={id:"Id",name:"Name",description:"Description",updatedDate:"Updated Date",createdDate:"Created Date",tests:"Tests"}},7076:(T,o,e)=>{e.d(o,{y:()=>s});var t=e(3712),r=e(1101),a=e(7263),d=function(l){return l.Validated="Validated",l.Returned="Returned",l.Forwarded="Forwarded",l.Destroyed="Destroyed",l.Collected="Collected",l.Accepted="Accepted",l.Created="Created",l}(d||{}),u=function(l){return l.Created="Created",l.Pending="Pending",l.Started="Started",l.Finished="Finished",l}(u||{}),i=e(1646),z=e(9155),y=e(6494),m=e(5879);let s=(()=>{class l{transform(n,c=!1){return n in a.v?this.transformComparisonOperator(n,c):n in u?this.transformTestState(n):n in d?this.transformSpecimenState(n):n in t.V?this.transformEmailType(n):n in r.z?this.transformPhoneType(n):n in z.m?this.transformSex(n):n in i.n?this.transformDocumentType(n):n in y.x?this.transformChannelType(n):""}transformComparisonOperator(n,c){switch(n){case a.v.Equal:return c?"==":"Equal";case a.v.GreaterThan:return c?">":"GreaterThan";case a.v.GreaterThanOrEqual:return c?">=":"GreaterThanOrEqual";case a.v.LessThan:return c?"<":"LessThan";case a.v.LessThanOrEqual:return c?"<=":"LessThanOrEqual";case a.v.RangeWithBoundaries:return c?"<==>":"RangeWithBoundaries";case a.v.RangeWithoutBoundaries:return c?"<>":"RangeWithoutBoundaries";case a.v.Not:return c?"!=":"Not";default:return""}}transformTestState(n){switch(n){case u.Created:return "Created";case u.Started:return "Started";case u.Finished:return "Finished";case u.Pending:return "Pending";default:return""}}transformSpecimenState(n){switch(n){case d.Accepted:return "Accepted";case d.Collected:return "Collected";case d.Destroyed:return "Destroyed";case d.Forwarded:return "Forwarded";case d.Validated:return "Validated";case d.Created:return "Created";default:return""}}transformEmailType(n){switch(n){case t.V.Private:return "Private";case t.V.Public:return "Public";case t.V.Work:return "Work";default:return""}}transformPhoneType(n){switch(n){case r.z.Home:return "Home";case r.z.Mobile:return "Mobile";case r.z.Work:return "Work";default:return""}}transformSex(n){switch(n){case z.m.Female:return "Female";case z.m.Male:return "Male";default:return""}}transformDocumentType(n){switch(n){case i.n.BankCard:return "Bank Card";case i.n.DriverLicense:return "Driver License";case i.n.NationalCard:return "National Card";case i.n.Passport:return "Passport";case i.n.TravelDocument:return "Travel Document";case i.n.Other:return "Other";default:return""}}transformChannelType(n){switch(n){case y.x.Email:return "Email";case y.x.Sms:return "SMS";case y.x.Push:return "Push";default:return""}}static#e=this.\u0275fac=function(c){return new(c||l)};static#t=this.\u0275pipe=m.Yjl({name:"typeI18n",type:l,pure:!0,standalone:!0})}return l})()},3712:(T,o,e)=>{e.d(o,{V:()=>t});var t=function(a){return a.Private="Private",a.Public="Public",a.Work="Work",a}(t||{});Object.keys(t).map(a=>t[a])},1101:(T,o,e)=>{e.d(o,{z:()=>t});var t=function(a){return a.Home="Home",a.Mobile="Mobile",a.Work="Work",a}(t||{});Object.keys(t).map(a=>t[a])},7263:(T,o,e)=>{e.d(o,{v:()=>t});var t=function(r){return r.Equal="Equal",r.GreaterThan="GreaterThan",r.GreaterThanOrEqual="GreaterThanOrEqual",r.LessThan="LessThan",r.LessThanOrEqual="LessThanOrEqual",r.Not="Not",r.RangeWithBoundaries="RangeWithBoundaries",r.RangeWithoutBoundaries="RangeWithoutBoundaries",r}(t||{})},1646:(T,o,e)=>{e.d(o,{n:()=>t});var t=function(a){return a.NationalCard="NationalCard",a.BankCard="BankCard",a.DriverLicense="DriverLicense",a.Passport="Passport",a.TravelDocument="TravelDocument",a.Other="Other",a}(t||{});Object.keys(t).map(a=>t[a])},9155:(T,o,e)=>{e.d(o,{m:()=>t});var t=function(a){return a.Male="Male",a.Female="Female",a}(t||{});Object.keys(t).map(a=>t[a])},6494:(T,o,e)=>{e.d(o,{x:()=>t});var t=function(r){return r.Email="Email",r.Sms="Sms",r.Push="Push",r}(t||{})},2516:(T,o,e)=>{e.d(o,{z:()=>u});var t=e(6814),r=e(5879);const a=[[["","start",""]],[["","end",""]]],d=["[start]","[end]"];let u=(()=>{class i{constructor(){this.cls="sz-header-basic"}static#e=this.\u0275fac=function(m){return new(m||i)};static#t=this.\u0275cmp=r.Xpm({type:i,selectors:[["sz-ui-header-basic"]],inputs:{cls:"cls"},standalone:!0,features:[r.jDz],ngContentSelectors:d,decls:4,vars:1,consts:[[1,"container",3,"ngClass"],[1,"spacer"]],template:function(m,s){1&m&&(r.F$t(a),r.TgZ(0,"div",0),r.Hsn(1),r._UZ(2,"span",1),r.Hsn(3,1),r.qZA()),2&m&&r.Q6J("ngClass",s.cls)},dependencies:[t.ez,t.mk],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;border-radius:4px}.sz-header-basic[_ngcontent-%COMP%]{margin:4px 0 8px;height:64px;padding:8px}"]})}return i})()},1599:(T,o,e)=>{e.d(o,{R:()=>t});const t={close:"Close",save:"Save",reset:"Reset",delete:"Delete",confirm:"Confirm",filter:"Filter",edit:"Edit",print:"Print"}},4085:(T,o,e)=>{e.d(o,{R:()=>t.R});var t=e(1599)},8721:(T,o,e)=>{e.d(o,{S3:()=>$,sU:()=>s,BI:()=>l});var t=e(1749),r=e(4911),a=e(4716),d=e(7921),u=e(3620),i=e(3997),z=e(6306),y=e(8504);const m=n=>c=>(0,r.P)(()=>(n(),c)),s=n=>c=>c.pipe(m(()=>n.set(!0)),(0,a.x)(()=>n.set(!1))),l=n=>c=>c.pipe((0,d.O)(null),(0,u.b)(n),(0,i.x)()),$=(n,c=void 0)=>C=>C.pipe(m(()=>{n&&n.set(void 0)}),(0,z.K)(p=>{let f="";return p.error instanceof ErrorEvent?f=p.error.message:p&&(f=p.error?p.error.message:p.statusText),n&&n.set({message:c||f,type:t.N.Error}),(0,y._)(()=>f)}))}}]);