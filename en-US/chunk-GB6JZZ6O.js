import{a as Te,b as Ee,c as Oe,d as de,e as pe}from"./chunk-SYC4QJAZ.js";import{a as d,b as ne,d as _e,f as se,i as le,j as Se}from"./chunk-JVPTXS5K.js";import"./chunk-VTLVGF2Z.js";import"./chunk-TVVDBI5W.js";import"./chunk-Y7UUP46L.js";import{a as C}from"./chunk-XQHKRK6L.js";import{e as ee,f as te,g as oe,i as re,j as ie,k as ae}from"./chunk-RXJCJ6DU.js";import"./chunk-LLD2ZUEU.js";import{a as Z}from"./chunk-BYTIRDSX.js";import{h as b}from"./chunk-POKYVS3O.js";import{a as X,b as k,d as q,e as j,g as w}from"./chunk-IDA3DJDY.js";import"./chunk-L73C4IKA.js";import{c as Q,n as K,o as f,q as W}from"./chunk-GKKLWW6E.js";import{c as J}from"./chunk-IAFQZILE.js";import"./chunk-FIREYTYE.js";import"./chunk-EHH3UBE6.js";import{c as y}from"./chunk-JQFBSSR6.js";import"./chunk-YKI6444X.js";import{d as m,f as B,g as D,k as v,m as V,p as $,q as z,t as F}from"./chunk-ZVOQKQF7.js";import{r as R,t as N}from"./chunk-IQJDHXDR.js";import{a as G,e as U}from"./chunk-JHCHZOPJ.js";import"./chunk-W6ENNWK7.js";import{ja as x,la as H}from"./chunk-BC4NCYN6.js";import"./chunk-UQI5C6OQ.js";import{Db as _,Nb as i,Ob as a,Pb as T,Zb as O,_b as M,hb as s,ib as E,qc as A,ua as c,ub as h}from"./chunk-R6OEYYKK.js";var me=(()=>{let n=class n extends ee{constructor(t,r,o,e){super(o),this.mlabService=t,this.fb=r,this.dialog=o,this.data=e,this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"],filterBehavior:R.Or,filters:N.create().equalIf("id",this.data.laboratoryTestType?.testTypeId).notAny("laboratories.laboratoryId",[this.data.laboratoryId]).filters()}),this.laboratories=this.mlabService.laboratories.getAll({orderBy:["name"],filters:N.create().notEqual("id",this.data.laboratoryId).filters()}),this.referenceValues=null,this.referenceValueContentFormat=l=>l.testType.nameEn,this.form=r.group({enabled:[e.laboratoryTestType?.enabled??!0,[m.required]],transferInPrice:[e.laboratoryTestType?.transferInPrice??0,[]],transferInEnabled:[e.laboratoryTestType?.transferInEnabled??!0,[m.required]],transferOutEnabled:[e.laboratoryTestType?.transferOutEnabled??!0,[m.required]],transferOutLaboratoryId:[e.laboratoryTestType?.transferOutLaboratoryId,[]],price:[e.laboratoryTestType?.price??0,[]],isFavorite:[e.laboratoryTestType?.isFavorite??!1,[m.required]],testTypeId:[e.laboratoryTestType?.testTypeId,[m.required]],referenceValueId:[e.laboratoryTestType?.referenceValueId,[m.required]]}),e.laboratoryTestType&&this.testTypeChnaged(e.laboratoryTestType.testTypeId);}testTypeChnaged(t){this.referenceValues=this.mlabService.referenceValues.getAll({orderBy:["testType.nameEn"],filterBehavior:R.And,filters:N.create().equalIf("testType.id",t).filters()});}submit(){this.IsValid()&&(this.data.laboratoryTestType?this.save(this.mlabService.laboratories.testTypes.update(this.data.laboratoryId,this.data.laboratoryTestType?.id,this.form.value)):this.save(this.mlabService.laboratories.testTypes.create(this.data.laboratoryId,this.form.value)));}};n.ɵfac=function(r){return new(r||n)(E(C),E(z),E(X),E(k));},n.ɵcmp=c({type:n,selectors:[["sz-medisy-laboratory-laboratory-test-types-save"]],standalone:!0,features:[h,A],decls:29,vars:13,consts:()=>{let t;t="Test Type";let r;r="Reference Value";let o;o="Price";let e;e="Price";let l;l="Laboratory";let u;u="Enabled";let L;L="Favorite";let I;I="Transfer In";let g;g="Enabled";let P;P="Transfer Out";let Y;return Y="Enabled",[u,L,I,g,P,Y,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId","label",t,3,"szOptionSelected","source"],["formControlName","referenceValueId","label",r,3,"source","szAutoSelect","szOptionContentFn"],[1,"sz-form-row"],["formControlName","enabled"],["formControlName","isFavorite"],["formControlName","price","label",o,3,"type"],["multi",""],["formControlName","transferInEnabled"],["formControlName","transferInPrice","label",e,3,"type"],["formControlName","transferOutEnabled"],["formControlName","transferOutLaboratoryId","label",l,3,"source","emptyOption"],[3,"actions"]];},template:function(r,o){r&1&&(T(0,"sz-ui-dialog-header",6),i(1,"mat-dialog-content")(2,"form",7)(3,"sz-ui-form-field-select",8),M("szOptionSelected",function(l){return o.testTypeChnaged(l);}),a(),T(4,"sz-ui-form-field-select",9),i(5,"div",10)(6,"mat-checkbox",11),O(7,0),a(),i(8,"mat-checkbox",12),O(9,1),a()(),i(10,"div",10),T(11,"sz-ui-form-field-input",13),a(),T(12,"div",10),i(13,"mat-accordion",14)(14,"mat-expansion-panel")(15,"mat-expansion-panel-header")(16,"mat-panel-title"),O(17,2),a()(),i(18,"mat-checkbox",15),O(19,3),a(),T(20,"sz-ui-form-field-input",16),a(),i(21,"mat-expansion-panel")(22,"mat-expansion-panel-header")(23,"mat-panel-title"),O(24,4),a()(),i(25,"mat-checkbox",17),O(26,5),a(),T(27,"sz-ui-form-field-select",18),a()()()(),T(28,"sz-ui-dialog-actions",19)),r&2&&(_("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),s(2),_("formGroup",o.form),s(),_("source",o.testTypes),s(),_("source",o.referenceValues)("szAutoSelect",!0)("szOptionContentFn",o.referenceValueContentFormat),s(7),_("type","number"),s(9),_("type","number"),s(7),_("source",o.laboratories)("emptyOption",!0),s(),_("actions",o.actions));},dependencies:[F,v,B,D,V,$,ie,te,oe,w,j,f,K,pe,de,Te,Ee,Oe,Q,W],encapsulation:2});let p=n;return p;})();var et=(()=>{let n=class n{constructor(t,r,o){this.dialog=t,this.mlabService=r,this.route=o,this.title=y.test_types,this.dataSource=new _e(),this.laboratory=this.route.snapshot.data.laboratory,this.dataSource.columnDefs.push(d.uuid("id"),d.uuid("testTypeId"),d.string("testType.nameEn"),d.date("createdAt").setVisible(!1),d.date("updatedAt").setVisible(!1),d.boolean("isFavorite",(e,l)=>{e.isFavorite=l,this.updateItem(e);}).setName(y.favorite).setResponsive(!0),d.boolean("enabled",(e,l)=>{e.enabled=l,this.mlabService.laboratories.testTypes.update(e.laboratoryId,e.id,e).subscribe(u=>{e=u;});}).setResponsive(!0),ne.menu([b.edit(e=>this.openSaveComponent(e)),b.delete(e=>this.openLaboratoryTestTypeDeleteComponent(e))])),this.get();}openSaveComponent(t){this.dialog.open(me,{data:{laboratoryId:this.laboratory.id,laboratoryTestType:t}}).afterClosed().subscribe(r=>{this.dataSource.addOrUpdateItem(r);});}openLaboratoryTestTypeDeleteComponent(t){this.dialog.open(re,{data:ae.delete(this.mlabService.laboratories.testTypes.delete(t.laboratoryId,t.id),t)}).afterClosed().subscribe(r=>{this.dataSource.delete(r);});}updateItem(t){this.mlabService.laboratories.testTypes.update(t.laboratoryId,t.id,t).subscribe(r=>{this.dataSource.update(r);});}get(){this.mlabService.laboratories.testTypes.get(this.laboratory.id,this.dataSource.getQuery()).pipe(J(this.dataSource.indicator)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};n.ɵfac=function(r){return new(r||n)(E(q),E(C),E(G));},n.ɵcmp=c({type:n,selectors:[["sz-medisy-laboratory-laboratory-test-types"]],standalone:!0,features:[A],decls:6,vars:5,consts:()=>{let t;return t="Add",[t,[3,"title","backEnabled"],[3,"changed","dataSource"],["title","","mat-flat-button","","color","primary","start","",3,"click"],[3,"update","stateEnabled","dataSource"]];},template:function(r,o){r&1&&(T(0,"sz-ui-app-bar",1),i(1,"sz-ui-table-search-filter",2),M("changed",function(){return o.get();}),i(2,"button",3),M("click",function(){return o.openSaveComponent();}),i(3,"span"),O(4,0),a()()(),i(5,"sz-ui-table",4),M("update",function(){return o.get();}),a()),r&2&&(_("title",o.title)("backEnabled",!0),s(),_("dataSource",o.dataSource),s(4),_("stateEnabled",!0)("dataSource",o.dataSource));},dependencies:[U,Z,Se,le,se,f,H,x],encapsulation:2});let p=n;return p;})();export{et as LaboratoryTestTypesComponent};/**i18n:d557e35d8fc734d6151249497f9d9ce2c625cbce110bd82ca76d6bd769fb64f8*/