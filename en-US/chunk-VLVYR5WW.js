import{b as Ce}from"./chunk-63VTERTH.js";import{a as ye,c as be,g as Pe,h as ge,i as I,s as he,t as Ae,u as m}from"./chunk-DIE6EPPF.js";import{a as A}from"./chunk-ETF3CVHJ.js";import{a as c}from"./chunk-QQWVDBYJ.js";import{c as N,h as Te,i as ue,j as Ee,l as Me,m as fe,n as Oe}from"./chunk-47MBZVPY.js";import"./chunk-E3FW4FG3.js";import{b as ce}from"./chunk-BENUJSGK.js";import{g as D}from"./chunk-2AKRFP2E.js";import{a as de,b as _e,d as me,e as pe,g as Se}from"./chunk-P4QIA4WM.js";import{a as ee,b as te,g as oe,o as ae,v as ne,w as le,x as se}from"./chunk-22KPLFGU.js";import{J,N as K,Q as ie,R as re,d as C,e as U,f as g,g as X,k,l as j,m as q,p as H,q as w,t as h}from"./chunk-BWNHVGBM.js";import"./chunk-IWM4AFTB.js";import{Ea as W,Ga as Z,ya as Q}from"./chunk-I73ZQFGG.js";import{Bb as z,Cb as $,Db as B,Eb as l,Fb as s,Gb as S,M as T,Qb as p,Sb as M,Ub as v,a as F,b as Y,dc as P,ec as R,fb as n,gb as d,gc as x,jc as f,kc as G,lc as V,na as E,nb as b,qb as O,ub as _,zb as u}from"./chunk-KN4PZLRS.js";function Fe(i,r){if(i&1&&(l(0,"mat-label"),P(1),s()),i&2){let y=v();n(),R(y.label);}}function Ye(i,r){i&1&&(l(0,"mat-option"),P(1,"-"),s());}function ze(i,r){if(i&1&&(l(0,"mat-option",4),P(1),s()),i&2){let y=r.$implicit,e=v();_("value",e.getOptionValue(y)),n(),R(e.getOptionContent(y));}}function $e(i,r){i&1&&(l(0,"mat-error"),p(1,5),s());}function Be(i,r){i&1&&(l(0,"mat-error"),p(1,6),s());}function xe(i,r){i&1&&(l(0,"mat-error"),p(1,7),s());}function Ge(i,r){i&1&&S(0,"mat-progress-bar",3);}var Le=(()=>{let r=class r extends ae{constructor(e,o){super(e),this.ngControl=e,this.mlabService=o,this.label=A.testType,this.includeLaboratoryIds=[],this.excludeLaboratoryIds=[];}ngOnInit(){this.control=this.ngControl.control,this.get();}get(){this.mlabService.testTypes.get(Y(F({},this.pagination),{orderBy:"name",includeLaboratoryIds:this.includeLaboratoryIds,excludeLaboratoryIds:this.excludeLaboratoryIds})).pipe(N(this.indicator),T(1)).subscribe(e=>{this.options.push(...e.items),this.totalPages=e.totalPages;});}};r.ɵfac=function(o){return new(o||r)(d(U,10),d(c));},r.ɵcmp=E({type:r,selectors:[["medisy-form-field-test-type-select"]],inputs:{includeLaboratoryIds:"includeLaboratoryIds",excludeLaboratoryIds:"excludeLaboratoryIds"},standalone:!0,features:[x([c]),b,f],decls:11,vars:10,consts:()=>{let e;e="This field is required";let o;o="This field does not the minimum length";let t;return t="This field exceeds the maximum length",[[1,"container"],[2,"width","100%"],[3,"formControl","multiple","placeholder","szScrollIgnored","szScrolled"],["mode","indeterminate"],[3,"value"],e,o,t];},template:function(o,t){o&1&&(l(0,"div",0)(1,"mat-form-field",1),O(2,Fe,2,1,"mat-label"),l(3,"mat-select",2),M("szScrolled",function(){return t.scroll();}),O(4,Ye,2,0,"mat-option"),$(5,ze,2,2,"mat-option",4,z),s(),O(7,$e,2,0,"mat-error")(8,Be,2,0,"mat-error")(9,xe,2,0,"mat-error"),s(),O(10,Ge,1,0,"mat-progress-bar",3),s()),o&2&&(n(2),u(2,t.label?2:-1),n(),_("formControl",t.control)("multiple",t.multiple)("placeholder",t.placeholder)("szScrollIgnored",t.indicator()),n(),u(4,t.emptyOption?4:-1),n(),B(t.options),n(2),u(7,t.control.hasError("required")?7:-1),n(),u(8,t.control.hasError("min")?8:-1),n(),u(9,t.control.hasError("max")?9:-1),n(),u(10,t.indicator()?10:-1));},dependencies:[h,g,j,se,oe,ee,te,le,Q,re,ie,Ce],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]});let i=r;return i;})();var Ue=()=>[],Xe=i=>[i],ve=(()=>{let r=class r extends Te{constructor(e,o,t,a){super(t),this.mlabService=e,this.fb=o,this.dialog=t,this.data=a,this.form=o.group({enabled:[a.laboratoryTestType?.enabled??!0,[C.required]],price:[a.laboratoryTestType?.price??0,[C.required]],isFavorite:[a.laboratoryTestType?.isFavorite??!1,[C.required]],testTypeId:[a.laboratoryTestType?.testTypeId,[C.required]]});}submit(){this.IsValid()&&(this.data.laboratoryTestType?this.save(this.mlabService.laboratories.testTypes.update(this.data.laboratoryId,this.data.laboratoryTestType?.id,this.form.value)):this.save(this.mlabService.laboratories.testTypes.create(this.data.laboratoryId,this.form.value)));}};r.ɵfac=function(o){return new(o||r)(d(c),d(w),d(de),d(_e));},r.ɵcmp=E({type:r,selectors:[["medisy-laboratory-test-types-save"]],standalone:!0,features:[b,f],decls:10,vars:7,consts:()=>{let e;e="Price";let o;o="Favorite";let t;return t="Enabled",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId",3,"excludeLaboratoryIds"],["formControlName","price","label",e],["formControlName","isFavorite"],o,["formControlName","enabled"],t,[3,"actions"]];},template:function(o,t){o&1&&(S(0,"sz-ui-dialog-header",0),l(1,"mat-dialog-content")(2,"form",1),S(3,"medisy-form-field-test-type-select",2)(4,"sz-ui-form-field-input",3),l(5,"mat-checkbox",4),p(6,5),s(),l(7,"mat-checkbox",6),p(8,7),s()()(),S(9,"sz-ui-dialog-actions",8)),o&2&&(_("header",t.header),n(2),_("formGroup",t.form),n(),_("excludeLaboratoryIds",t.data.laboratoryTestType?G(4,Ue):V(5,Xe,t.data.laboratoryId)),n(6),_("actions",t.actions));},dependencies:[h,k,g,X,q,H,fe,ue,Ee,Se,pe,I,ge,Le,ne],encapsulation:2});let i=r;return i;})();var xt=(()=>{let r=class r{constructor(e,o,t){this.dialog=e,this.mlabService=o,this.route=t,this.title=A.testTypes,this.dataSource=new be(),this.laboratory=this.route.snapshot.data.laboratory,this.dataSource.fields.push(m.uuid("id"),m.uuid("laboratoryId"),m.uuid("testTypeId"),m.string("testType.name"),m.string("price"),m.date("createdAt",!1),m.date("updatedAt",!1),m.checkbox("isFavorite",(a,L)=>{a.isFavorite=L,this.updateItem(a);}),m.checkbox("enabled",(a,L)=>{a.enabled=L,this.mlabService.laboratories.testTypes.update(a.laboratoryId,a.id,a).pipe(T(1)).subscribe(Re=>{a=Re;});}),ye.menu([D.edit(a=>this.openSaveComponent(a)),D.delete(a=>this.openLaboratoryTestTypeDeleteComponent(a))])),this.get();}openSaveComponent(e){this.dialog.open(ve,{data:{laboratoryId:this.laboratory.id,laboratoryTestType:e}}).afterClosed().pipe(T(1)).subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openLaboratoryTestTypeDeleteComponent(e){this.dialog.open(Me,{data:Oe.delete(this.mlabService.laboratories.testTypes.delete(e.laboratoryId,e.id),e)}).afterClosed().pipe(T(1)).subscribe(o=>{this.dataSource.delete(o);});}updateItem(e){this.mlabService.laboratories.testTypes.update(e.laboratoryId,e.id,e).subscribe(o=>{this.dataSource.update(o);});}get(){this.mlabService.laboratories.testTypes.get(this.laboratory.id,this.dataSource.buildRequest()).pipe(N(this.dataSource.indicator)).pipe(T(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};r.ɵfac=function(o){return new(o||r)(d(me),d(c),d(J));},r.ɵcmp=E({type:r,selectors:[["medisy-laboratory-test-types"]],standalone:!0,features:[f],decls:6,vars:5,consts:()=>{let e;return e="Add",[[3,"title","subtitle"],[3,"dataSource","changed"],["title","","mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(o,t){o&1&&(S(0,"sz-ui-header-info",0),l(1,"sz-ui-table-search-filter",1),M("changed",function(){return t.get();}),l(2,"button",2),M("click",function(){return t.openSaveComponent();}),l(3,"span"),p(4,3),s()()(),l(5,"sz-ui-table",4),M("update",function(){return t.get();}),s()),o&2&&(_("title",t.title)("subtitle",t.laboratory.name),n(),_("dataSource",t.dataSource),n(4),_("stateEnabled",!0)("dataSource",t.dataSource));},dependencies:[K,ce,Ae,he,Pe,I,Z,W],encapsulation:2});let i=r;return i;})();export{xt as LaboratoryTestTypesComponent};/**i18n:5ad987f33fb36a4bb6d53ec4372590584614aa13df9413297fdfa1032f98b4a2*/