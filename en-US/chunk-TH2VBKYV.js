import{a as X}from"./chunk-EMOWSOS3.js";import{d as Pe,e as ye,f as B,g as x,i as De,j as v,k as Fe}from"./chunk-VT3WYR67.js";import{d as Me,e as Ce,g as Re,t as Oe,u as he,v as ve}from"./chunk-RQNRD2JQ.js";import{b as Ie}from"./chunk-S376QVGE.js";import"./chunk-PD6EMHNS.js";import"./chunk-KGIHDKZN.js";import"./chunk-3UYL57HA.js";import{a as $,b as G,d as Y,e as w,g as O}from"./chunk-V6FPP55L.js";import"./chunk-U7VPIABE.js";import{f as u}from"./chunk-3VGQRMVI.js";import{a as S}from"./chunk-SIM3MWAY.js";import{b as k}from"./chunk-M3UESULM.js";import{a as W,b as J,c as Ve,d as be,e as Le,f as ze,h as N,p as Ue,q as $e}from"./chunk-PTJACGQS.js";import{d as Ae}from"./chunk-UNCYENX6.js";import{b as Te}from"./chunk-VRISEVPV.js";import{D as de,E as _e,b as ne,d as y,da as ge,f as ae,g as R,h as D,k as F,l as V,m as me,n as b,o as L,p as z,r as le,s as g,t as ue,u as fe,v as ce}from"./chunk-GJY7U5GZ.js";import{a as h}from"./chunk-B3ZGKPUK.js";import"./chunk-3BVZ364G.js";import{a as Ne}from"./chunk-PIKBUH2I.js";import{a as j}from"./chunk-QDC3ZTFW.js";import{I as U,L as se,M as pe,Va as Se,Wa as Ee,j as ie,q as C}from"./chunk-NC2N2FCX.js";import{Ab as s,Bb as c,Cb as p,L as A,Mb as re,Pb as T,Wb as P,Xb as H,Zb as _,ac as M,ea as ee,eb as f,fb as a,k as Z,ma as d,mb as E,na as te,pb as m,vb as oe}from"./chunk-3CXVAQY6.js";var q=(()=>{let o=class o extends Re{constructor(r,e){super(r),this.ngControl=r,this.typeI18nPipe=e,this.options=Object.keys(S).map(t=>S[t]),this.label="Comparison Operator",this.optionContent=t=>this.typeI18nPipe.transform(t);}ngOnInit(){this.control=this.ngControl.control;}};o.ɵfac=function(e){return new(e||o)(a(ae,10),a(u));},o.ɵcmp=d({type:o,selectors:[["medisy-form-field-comparison-operator"]],standalone:!0,features:[_([u]),E,M],decls:1,vars:7,consts:[[3,"formControl","options","label","placeholder","emptyOption","multiple","szOptionContentFn"]],template:function(e,t){e&1&&p(0,"sz-ui-form-field-select",0),e&2&&m("formControl",t.control)("options",t.options)("label",t.label)("placeholder",t.placeholder)("emptyOption",t.emptyOption)("multiple",t.multiple)("szOptionContentFn",t.optionContent);},dependencies:[g,R,me,Oe],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]});let i=o;return i;})();var Ye=(()=>{let o=class o extends Pe{constructor(r,e,t,l){super(e),this.fb=r,this.dialog=e,this.typeI18nPipe=t,this.data=l,this.form=r.group({referenceGroupId:[l.referenceGroupId],comparisonOperator:new F(l.comparisonOperator)});}submit(){this.IsValid()&&this.dialog.close(this.form.value);}};o.ɵfac=function(e){return new(e||o)(a(z),a($),a(u),a(G));},o.ɵcmp=d({type:o,selectors:[["medisy-laboratory-reference-value-rules-filter"]],standalone:!0,features:[_([u]),E,M],decls:6,vars:5,consts:[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","comparisonOperator",3,"emptyOption"],["formControlName","referenceGroupId",3,"emptyOption"],[3,"actions"]],template:function(e,t){e&1&&(p(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),p(3,"medisy-form-field-comparison-operator",2)(4,"medisy-form-field-reference-group",3),c()(),p(5,"sz-ui-dialog-actions",4)),e&2&&(m("header",t.header),f(2),m("formGroup",t.form),f(1),m("emptyOption",!0),f(1),m("emptyOption",!0),f(1),m("actions",t.actions));},dependencies:[C,g,V,R,D,b,L,O,w,N,v,B,x,X,q],encapsulation:2});let i=o;return i;})();function He(i,o){i&1&&(s(0,"div",8)(1,"mat-form-field",9)(2,"label"),p(3,"input",10),c()(),s(4,"mat-form-field",9)(5,"label"),p(6,"input",11),c()()());}function We(i,o){i&1&&(s(0,"mat-form-field",9)(1,"label"),p(2,"input",12),c()());}var we=(()=>{let o=class o extends ye{constructor(r,e,t,l,n){super(l),this.mlabService=r,this.typeI18nPipe=e,this.fb=t,this.dialog=l,this.data=n,this.form=t.group({description:[n.referenceValueRule?.description,[y.maxLength(4096)]],comparisonOperator:new F(n.referenceValueRule?.comparisonOperator??S.Equal,[y.required]),referenceGroupId:[n.referenceValueRule?.referenceGroupId,[y.required]],value:[n.referenceValueRule?.value,[]],start:[n.referenceValueRule?.start,[]],end:[n.referenceValueRule?.end,[]]});}isRange(){return this.form.value.comparisonOperator===S.RangeWithBoundaries||this.form.value.comparisonOperator===S.RangeWithoutBoundaries;}submit(){this.IsValid()&&(this.data.referenceValueRule?this.save(this.mlabService.referenceValues.rules.update(this.data.referenceValueId,this.data.referenceValueRule.id,this.form.value)):this.save(this.mlabService.referenceValues.rules.create(this.data.referenceValueId,this.form.value)));}};o.ɵfac=function(e){return new(e||o)(a(h),a(u),a(z),a($),a(G));},o.ɵcmp=d({type:o,selectors:[["medisy-laboratory-reference-value-rules-save"]],standalone:!0,features:[_([u]),E,M],decls:9,vars:5,consts:()=>{let r;r="Description";let e;e="Start";let t;t="End";let l;return l="Value",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","description","label",r],["formControlName","comparisonOperator"],["class","tw-flex md:tw-flex-row tw-flex-col md:tw-gap-4",4,"ngIf"],["class","tw-flex-1",4,"ngIf"],["formControlName","referenceGroupId"],[3,"actions"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["autocomplete","off","formControlName","start","matInput","","placeholder",e],["autocomplete","off","formControlName","end","matInput","","placeholder",t],["autocomplete","off","formControlName","value","matInput","","placeholder",l]];},template:function(e,t){e&1&&(p(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),p(3,"sz-ui-form-field-textarea",2)(4,"medisy-form-field-comparison-operator",3),oe(5,He,7,0,"div",4)(6,We,3,0,"mat-form-field",5),p(7,"medisy-form-field-reference-group",6),c()(),p(8,"sz-ui-dialog-actions",7)),e&2&&(m("header",t.header),f(2),m("formGroup",t.form),f(3),m("ngIf",t.isRange()),f(1),m("ngIf",!t.isRange()),f(2),m("actions",t.actions));},dependencies:[C,ie,g,V,ne,R,D,b,L,Ce,Me,de,O,w,_e,N,v,B,x,ve,he,X,q],encapsulation:2});let i=o;return i;})();var je=(()=>{let o=class o{constructor(r,e,t,l){this.dialog=r,this.route=e,this.mlabService=t,this.typeI18nPipe=l,this.dataSource=new Ve(Ne.paged()),this.referenceValue=this.route.snapshot.data.referenceValue,this.dataSource.addRows(be.default([J.text("referenceGroup","Reference group",n=>n.referenceGroup.locales[0].name),k.comparisonOperator(n=>l.transform(n.comparisonOperator)),J.text("value","Value",n=>n.value?n.value:`${n.start} - ${n.end}`),k.createdAt(),k.menu([W.edit(n=>this.openSaveComponent(n)),W.delete(n=>{this.openReferenceValueRuleDeleteComponent(n);})])])),this.get();}openSaveComponent(r){this.dialog.open(we,{data:{referenceValueId:this.referenceValue.id,referenceValueRule:r}}).afterClosed().pipe(A(1)).subscribe(t=>{this.dataSource.updateOrPushItem(t);});}openFilterComponent(){this.dialog.open(Ye,{data:this.dataSource.filterModel}).afterClosed().pipe(A(1)).subscribe(e=>{this.dataSource.updateFilterModel(e),this.get();});}openReferenceValueRuleDeleteComponent(r){this.dialog.open(De,{data:Fe.delete(this.mlabService.referenceValues.rules.delete(r.referenceValueId,r.id),r)}).afterClosed().pipe(A(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.mlabService.referenceValues.rules.get(this.referenceValue.id,this.dataSource.filterModel).pipe(Te(this.dataSource.indicator),A(1)).subscribe(r=>{this.dataSource.set(r.items,r.count);});}};o.ɵfac=function(e){return new(e||o)(a(Y),a(U),a(h),a(u));},o.ɵcmp=d({type:o,selectors:[["medisy-laboratory-reference-value-rules"]],features:[_([u])],decls:5,vars:4,consts:()=>{let r;return r="Add",[[3,"dataSource","search","filter"],["mat-flat-button","","color","primary","start","",3,"click"],r,[3,"paginationEnabled","stateEnabled","dataSource","update"]];},template:function(e,t){e&1&&(s(0,"sz-ui-table-filter",0),T("search",function(){return t.get();})("filter",function(){return t.openFilterComponent();}),s(1,"button",1),T("click",function(){return t.openSaveComponent();}),s(2,"span"),re(3,2),c()()(),s(4,"sz-ui-table",3),T("update",function(){return t.get();}),c()),e&2&&(m("dataSource",t.dataSource),f(4),m("paginationEnabled",!0)("stateEnabled",!0)("dataSource",t.dataSource));},dependencies:[ue,Ue,ze],encapsulation:2});let i=o;return i;})();var Be=(()=>{let o=class o{constructor(r,e){this.dialog=r,this.route=e,this.alert$=new Z(),this.referenceValue=this.route.snapshot.data.referenceValue;}};o.ɵfac=function(e){return new(e||o)(a(Y),a(U));},o.ɵcmp=d({type:o,selectors:[["medisy-laboratory-reference-value"]],features:[_([])],decls:10,vars:2,consts:[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["mat-icon-button","","routerLink","../","end",""]],template:function(e,t){e&1&&(s(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),P(3),c(),s(4,"span",2),P(5),c()(),s(6,"button",3)(7,"mat-icon"),P(8,"arrow_back"),c()()(),p(9,"medisy-laboratory-reference-value-rules")),e&2&&(f(3),H(t.referenceValue.testClass.name),f(2),H(t.referenceValue.description));},dependencies:[se,Se,fe,j,je],encapsulation:2});let i=o;return i;})();var xe=[{path:"",component:Be}];var vo=(()=>{let o=class o{};o.ɵfac=function(e){return new(e||o)();},o.ɵmod=te({type:o}),o.ɵinj=ee({providers:[h],imports:[C,le,pe.forChild(xe),O,N,Ae,Ee,ce,ge,$e,Ie,Le,v,j]});let i=o;return i;})();export{vo as ReferenceValueModule};/**i18n:c47ea6c8e33fa0c222c20e616e96e45afbcc3267e1e4f83fbed9283c01f003ba*/