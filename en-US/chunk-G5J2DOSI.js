import{a as H}from"./chunk-Q7YRED3C.js";import{a as d}from"./chunk-BC6TH3PO.js";import{d as j,f as G,g as $,j as q}from"./chunk-5NWVIDQT.js";import{a as N,b as R,e as Y,g as B}from"./chunk-Z2LVGH3F.js";import{j as P,s as V}from"./chunk-ZW4ISBNU.js";import{b as u}from"./chunk-KCMCGJDS.js";import{d as C,f as E,g as O,l as D,n as F,q as L,r as v,u as M}from"./chunk-WH3JX6YX.js";import{t as z}from"./chunk-HWVQOC2X.js";import{Eb as b,Jb as _,Kb as g,Lb as m,Yb as h,bb as s,cb as l,na as c,nc as I,oc as A,qb as T,vb as S,zb as n}from"./chunk-ID6V6OOS.js";import{a as f,b as p}from"./chunk-YPLVL3HC.js";function X(a,i){if(a&1&&m(0,"sz-ui-form-field-select",3),a&2){let y=h();n("source",y.laboratories)("config",y.transferOutLaboratorySelectConfig);}}var le=(()=>{let i=class i extends j{constructor(r,o,t,w){super(o),this.fb=r,this.dialog=o,this.mlabService=t,this.data=w,this.laboratories=null,this.laboratoryOptionValueFn=e=>e,this.testTypesFilters=[],this.laboratoryId=this.data,this.transferOutLaboratorySelectConfig={emptyOption:!0},this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,p(f({query:""},u.minimal()),{orderBy:["-isFavorite","testType.nameEn"]})),this.testTypeAutocompleteConfig={valueChangedFn:e=>{if(typeof e=="string")this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,p(f({query:e},u.minimal()),{orderBy:["-isFavorite","testType.nameEn"]}));else if(typeof e=="object"&&e)return!1;return!0;},optionSelectedFn:e=>{this.form.patchValue({transferOutLaboratoryId:e.transferOutLaboratoryId}),e.transferOutLaboratoryId?this.form.controls.transferOutLaboratoryId.disable():this.form.controls.transferOutLaboratoryId.enable(),e.transferOutEnabled&&(this.laboratories=this.mlabService.laboratories.getAll({orderBy:["name"],filters:z.create().notEqual("id",this.data).any("testTypes.testTypeId",e.testTypeId).any("testTypes.enabled",!0).any("testTypes.transferInEnabled",!0).filters()}));},optionValueFn:e=>e,optionContentFn:e=>e.testType.nameEn,optionDisplayWithFn:e=>e.testType.nameEn},this.form=r.group({transferOutLaboratoryId:[null,[]],testType:r.control(null,[C.required,H()])});}isTranferOutEnabled(){return this.form.value?.testType?.transferOutEnabled;}submit(){this.IsValid()&&this.dialog.close({laboratoryTestType:this.form.value.testType,transferOutLaboratoryId:this.form.getRawValue().transferOutLaboratoryId});}};i.ɵfac=function(o){return new(o||i)(l(v),l(N),l(d),l(R));},i.ɵcmp=c({type:i,selectors:[["sz-medisy-laboratory-analysis-test-type-add"]],standalone:!0,features:[I([d]),T,A],decls:6,vars:8,consts:()=>{let r;return r="Transfer Out Laboratory",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testType",3,"source","config"],["formControlName","transferOutLaboratoryId","label",r,3,"source","config"],[3,"actions"]];},template:function(o,t){o&1&&(m(0,"sz-ui-dialog-header",0),_(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-autocomplete",2),S(4,X,1,2,"sz-ui-form-field-select",3),g()(),m(5,"sz-ui-dialog-actions",4)),o&2&&(n("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),s(2),n("formGroup",t.form),s(),n("source",t.testTypes)("config",t.testTypeAutocompleteConfig),s(),b(t.isTranferOutEnabled()?4:-1),s(),n("actions",t.actions));},dependencies:[M,D,E,O,F,L,B,Y,q,G,$,V,P],encapsulation:2});let a=i;return a;})();export{le as a};/**i18n:4821e1b9962cdddbef9c2ff89937dbb197b2343c5ff627ac1e6724c8725e235e*/