import{a as fe}from"./chunk-W2KGKS45.js";import"./chunk-Z3ELZRWE.js";import{a as E}from"./chunk-PISLV3X5.js";import{a as s,b as Oe,d as Ne,f as ge,i as Te,j as Ae}from"./chunk-U4RNOXSF.js";import"./chunk-U2NYA4TJ.js";import"./chunk-UKNNB4C6.js";import"./chunk-UBJFLYRY.js";import{a as S}from"./chunk-D4CAUMAG.js";import{e as Se,f as Ee,g as Me,i as Re,j as L,k as Ce}from"./chunk-GOPVSNKC.js";import"./chunk-M3NA2DMH.js";import{b as A}from"./chunk-4NVEBB2R.js";import{d as pe,h as I}from"./chunk-QMJQGH34.js";import{a as Z,b as ee,d as N,e as te,g}from"./chunk-R72CS7SP.js";import"./chunk-2NAL3ARI.js";import{a as ae,b as le,o as T,q as _e,s as ce,t as de}from"./chunk-UCRC6V5J.js";import{c as se}from"./chunk-5WJVC7PV.js";import"./chunk-P4AS2ZYY.js";import"./chunk-EY4PTUQV.js";import{d as me}from"./chunk-QXIIYWNN.js";import{h as oe,i as re,k as ue}from"./chunk-YWYJPJA4.js";import{b as Y,d as C,f as j,g as X,j as w,k,m as q,p as x,q as H,s as W,t as Q}from"./chunk-EIWC7QFZ.js";import"./chunk-22G3BWVW.js";import{a as O,e as J}from"./chunk-L6HNREY7.js";import"./chunk-6YPHC773.js";import{ha as K,ia as ie,ka as ne}from"./chunk-QHXZELMZ.js";import"./chunk-TWGSABWX.js";import{Db as l,Hc as G,Ib as V,Ma as U,Nb as _,Ob as d,Pb as c,Zb as B,_b as R,hb as m,ib as a,ka as b,l as D,pc as f,qc as $,ta as y,ua as p,ub as F,va as z,zb as P}from"./chunk-XPH4NMLC.js";function be(i,t){i&1&&(_(0,"div",4)(1,"mat-form-field",5)(2,"label"),c(3,"input",8),d()(),_(4,"mat-form-field",5)(5,"label"),c(6,"input",9),d()()());}function ye(i,t){i&1&&(_(0,"mat-form-field",5)(1,"label"),c(2,"input",10),d()());}var Ve=(()=>{let t=class t extends Se{constructor(o,e,r,n){super(r),this.mlabService=o,this.fb=e,this.dialog=r,this.data=n,this.referenceGroups=this.mlabService.referenceGroups.getAll({orderBy:["name"]}),this.comparisonOperators=Object.keys(E).map(u=>E[u]),this.form=e.group({description:[n.referenceValueRule?.description,[C.maxLength(4096)]],comparisonOperator:new w(n.referenceValueRule?.comparisonOperator??E.Equal,[C.required]),referenceGroupId:[n.referenceValueRule?.referenceGroupId,[C.required]],value:[n.referenceValueRule?.value,[]],start:[n.referenceValueRule?.start,[]],end:[n.referenceValueRule?.end,[]]});}isRange(){return this.form.value.comparisonOperator===E.RangeWithBoundaries||this.form.value.comparisonOperator===E.RangeWithoutBoundaries;}submit(){this.IsValid()&&(this.data.referenceValueRule?this.save(this.mlabService.referenceValues.rules.update(this.data.referenceValueId,this.data.referenceValueRule.id,this.form.value)):this.save(this.mlabService.referenceValues.rules.create(this.data.referenceValueId,this.form.value)));}};t.ɵfac=function(e){return new(e||t)(a(S),a(H),a(Z),a(ee));},t.ɵcmp=p({type:t,selectors:[["sz-medisy-laboratory-reference-value-rules-save"]],standalone:!0,features:[f([]),F,$],decls:9,vars:10,consts:()=>{let o;o="Reference Group";let e;e="Comparison Operator";let r;r="Description";let n;n="Start";let u;u="End";let v;return v="Value",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","referenceGroupId","label",o,3,"source"],["formControlName","comparisonOperator","label",e,3,"source","localizedValue"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["formControlName","description","label",r],[3,"actions"],["autocomplete","off","formControlName","start","matInput","","placeholder",n],["autocomplete","off","formControlName","end","matInput","","placeholder",u],["autocomplete","off","formControlName","value","matInput","","placeholder",v]];},template:function(e,r){e&1&&(c(0,"sz-ui-dialog-header",0),_(1,"mat-dialog-content")(2,"form",1),c(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3),P(5,be,7,0,"div",4)(6,ye,3,0,"mat-form-field",5),c(7,"sz-ui-form-field-textarea",6),d()(),c(8,"sz-ui-dialog-actions",7)),e&2&&(l("title",r.title)("subtitle",r.subtitle)("alert",r.alert()),m(2),l("formGroup",r.form),m(),l("source",r.referenceGroups),m(),l("source",r.comparisonOperators)("localizedValue",!0),m(),V(5,r.isRange()?5:-1),m(),V(6,r.isRange()?-1:6),m(2),l("actions",r.actions));},dependencies:[Q,k,Y,j,X,q,x,le,ae,oe,g,te,re,T,L,Ee,Me,de,ce,_e],encapsulation:2});let i=t;return i;})();var Ie=(()=>{let t=class t{constructor(o,e,r,n){this.dialog=o,this.route=e,this.mlabService=r,this.locale=n,this.dataSource=new Ne(),this.referenceValueId=U.required(),this.dataSource.columnDefs.push(s.uuid("id"),s.uuid("referenceValueId"),s.uuid("referenceGroupId"),s.string("referenceGroup.name"),s.enum("comparisonOperator").setValueGetter(u=>me(u.comparisonOperator)),s.number("value"),s.number("start"),s.number("end"),s.string("description"),s.date("createdAt").setVisible(!1),s.date("updatedAt").setVisible(!1),Oe.menu([I.edit(u=>this.openSaveComponent(u)),I.delete(u=>{this.openReferenceValueRuleDeleteComponent(u);})]));}ngOnInit(){this.get();}openSaveComponent(o){this.dialog.open(Ve,{data:{referenceValueId:this.referenceValueId(),referenceValueRule:o}}).afterClosed().subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}openReferenceValueRuleDeleteComponent(o){this.dialog.open(Re,{data:Ce.delete(this.mlabService.referenceValues.rules.delete(o.referenceValueId,o.id),o)}).afterClosed().subscribe(e=>{this.dataSource.delete(e);});}get(){this.mlabService.referenceValues.rules.get(this.referenceValueId(),this.dataSource.getQuery()).pipe(se(this.dataSource.indicator)).subscribe(o=>{this.dataSource.set(o.items,o.count);});}};t.ɵfac=function(e){return new(e||t)(a(N),a(O),a(S),a(G));},t.ɵcmp=p({type:t,selectors:[["sz-medisy-laboratory-reference-value-rules"]],inputs:{referenceValueId:[y.SignalBased,"referenceValueId"]},features:[f([])],decls:5,vars:3,consts:()=>{let o;return o="Add",[o,[3,"changed","dataSource"],["mat-flat-button","","color","primary","start","",3,"click"],[3,"update","stateEnabled","dataSource"]];},template:function(e,r){e&1&&(_(0,"sz-ui-table-search-filter",1),R("changed",function(){return r.get();}),_(1,"button",2),R("click",function(){return r.openSaveComponent();}),_(2,"span"),B(3,0),d()()(),_(4,"sz-ui-table",3),R("update",function(){return r.get();}),d()),e&2&&(l("dataSource",r.dataSource),m(4),l("stateEnabled",!0)("dataSource",r.dataSource));},dependencies:[ie,Te,ge],encapsulation:2});let i=t;return i;})();var he=(()=>{let t=class t{constructor(o,e){this.dialog=o,this.route=e,this.alert$=new D(),this.referenceValue=this.route.snapshot.data.referenceValue;}};t.ɵfac=function(e){return new(e||t)(a(N),a(O));},t.ɵcmp=p({type:t,selectors:[["sz-medisy-laboratory-reference-value"]],features:[f([])],decls:2,vars:3,consts:[[3,"title","subtitle"],[3,"referenceValueId"]],template:function(e,r){e&1&&c(0,"sz-ui-header-info",0)(1,"sz-medisy-laboratory-reference-value-rules",1),e&2&&(l("title",r.referenceValue.testType.name)("subtitle",r.referenceValue.description),m(),l("referenceValueId",r.referenceValue.id));},dependencies:[A,Ie],encapsulation:2});let i=t;return i;})();var ve=[{path:"",component:he}];var Gt=(()=>{let t=class t{};t.ɵfac=function(e){return new(e||t)();},t.ɵmod=z({type:t}),t.ɵinj=b({providers:[S],imports:[W,J.forChild(ve),g,T,pe,K,ne,ue,Ae,fe,L,A]});let i=t;return i;})();export{Gt as ReferenceValueModule};/**i18n:7992b670fa912c61e7fcc3b33bbd0ab051bcb5cc240f907263ef623fbdc93e3b*/