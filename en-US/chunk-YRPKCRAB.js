import{a as P}from"./chunk-GREKVNN5.js";import{d as Q,e as W,f as v,g as R,i as Z,j as L,k as ee}from"./chunk-ENCF6XTC.js";import{q as X,s as k,t as q}from"./chunk-YJSXPXWI.js";import{a as b,b as y,d as H,e as D,g as I}from"./chunk-WBZAM75Y.js";import"./chunk-6SRMRYZC.js";import{a as le}from"./chunk-ACGKKLNQ.js";import"./chunk-SUXNJZRF.js";import{b as Y}from"./chunk-ISAWOBMZ.js";import{a as te,b as ie,c as oe,e as re,o as ae,p as ne}from"./chunk-L6BMLV26.js";import{b as F}from"./chunk-5ODKHLUD.js";import"./chunk-LOBLBQWK.js";import{b as K}from"./chunk-ER63VEFB.js";import"./chunk-GTAADJAG.js";import{d as M,g as E,h as A,l as C,n as O,o as T,p as g,s as h,t as w,v as U}from"./chunk-QNNLOUIR.js";import{a as N}from"./chunk-A375HXIX.js";import"./chunk-G5MYBKYL.js";import{a as x}from"./chunk-NAIGIBUH.js";import{a as J}from"./chunk-CBGBJVBN.js";import{D as G,G as V,H as j}from"./chunk-F5GW25TI.js";import{Ab as p,Kb as z,L as S,Mb as f,Tb as B,Ub as $,Zb as u,cb as s,db as r,kb as c,la as _,nb as l,yb as m,zb as d}from"./chunk-PWEA5SW5.js";var de=(()=>{let o=class o extends Q{constructor(i,e,t){super(e),this.fb=i,this.dialog=e,this.data=t,this.form=i.group({emailType:[t.emailType]});}submit(){this.IsValid()&&this.dialog.close(this.form.value);}};o.ɵfac=function(e){return new(e||o)(r(g),r(b),r(y));},o.ɵcmp=_({type:o,selectors:[["medisy-laboratory-emails-filter"]],standalone:!0,features:[c,u],decls:5,vars:3,consts:[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","emailType"],[3,"actions"]],template:function(e,t){e&1&&(p(0,"sz-ui-dialog-header",0),m(1,"mat-dialog-content")(2,"form",1),p(3,"medisy-form-field-email-type",2),d()(),p(4,"sz-ui-dialog-actions",3)),e&2&&(l("header",t.header),s(2),l("formGroup",t.form),s(2),l("actions",t.actions));},dependencies:[h,C,E,A,O,T,L,v,R,I,D,P],encapsulation:2});let n=o;return n;})();var pe=(()=>{let o=class o extends W{constructor(i,e,t,a){super(t),this.mlabService=i,this.fb=e,this.dialog=t,this.data=a,this.form=e.group({value:[a.laboratoryEmail?.value,[M.required,M.email]],description:[a.laboratoryEmail?.description,[]],emailType:[a.laboratoryEmail?.emailType??le.Public,[M.required]]});}submit(){this.IsValid()&&(this.data.laboratoryEmail?this.save(this.mlabService.laboratories.emails.update(this.data.laboratoryId,this.data.laboratoryEmail?.id,this.form.value)):this.save(this.mlabService.laboratories.emails.create(this.data.laboratoryId,this.form.value)));}};o.ɵfac=function(e){return new(e||o)(r(N),r(g),r(b),r(y));},o.ɵcmp=_({type:o,selectors:[["medisy-laboratory-emails-save"]],standalone:!0,features:[c,u],decls:7,vars:3,consts:()=>{let i;i="Description";let e;return e="Email",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","description","label",i],["formControlName","value","label",e],["formControlName","emailType"],[3,"actions"]];},template:function(e,t){e&1&&(p(0,"sz-ui-dialog-header",0),m(1,"mat-dialog-content")(2,"form",1),p(3,"sz-ui-form-field-textarea",2)(4,"sz-ui-form-field-input",3)(5,"medisy-form-field-email-type",4),d()(),p(6,"sz-ui-dialog-actions",5)),e&2&&(l("header",t.header),s(2),l("formGroup",t.form),s(4),l("actions",t.actions));},dependencies:[h,C,E,A,O,T,L,v,R,I,D,q,X,k,P],encapsulation:2});let n=o;return n;})();var tt=(()=>{let o=class o{constructor(i,e,t){this.dialog=i,this.mlabService=e,this.route=t,this.dataSource=new ie(x.paged()),this.laboratory=this.route.snapshot.data.laboratory,this.dataSource.addRows(oe.default([te.text("value","Email"),Y.createdAt(),Y.menu([F.edit(a=>{this.openSaveComponent(a);}),F.delete(a=>{this.openEmailDeleteComponent(a);})])])),this.get();}openSaveComponent(i){this.dialog.open(pe,{data:{laboratoryId:this.laboratory.id,laboratoryEmail:i}}).afterClosed().pipe(S(1)).subscribe(t=>{this.dataSource.updateOrPushItem(t);});}openFilterComponent(){this.dialog.open(de,{data:this.dataSource.filterModel}).afterClosed().pipe(S(1)).subscribe(e=>{this.dataSource.updateFilterModel(e),this.get();});}openEmailDeleteComponent(i){this.dialog.open(Z,{data:ee.delete(this.mlabService.laboratories.emails.delete(i.laboratoryId,i.id),i)}).afterClosed().pipe(S(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.mlabService.laboratories.emails.get(this.laboratory.id,this.dataSource.filterModel).pipe(K(this.dataSource.indicator)).pipe(S(1)).subscribe(i=>{this.dataSource.set(i.items,i.count);});}};o.ɵfac=function(e){return new(e||o)(r(H),r(N),r(G));},o.ɵcmp=_({type:o,selectors:[["medisy-laboratory-emails"]],standalone:!0,features:[u],decls:11,vars:5,consts:()=>{let i;i="Emails";let e;return e="Add",[["start",""],[1,"sz-h5"],i,["routerLink","../",1,"tw-underline","tw-text-sm"],[3,"dataSource","search","filter"],["title","","mat-flat-button","","color","primary","start","",3,"click"],e,[3,"paginationEnabled","stateEnabled","dataSource","update"]];},template:function(e,t){e&1&&(m(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),z(3,2),d(),m(4,"a",3),B(5),d()()(),m(6,"sz-ui-table-filter",4),f("search",function(){return t.get();})("filter",function(){return t.openFilterComponent();}),m(7,"button",5),f("click",function(){return t.openSaveComponent();}),m(8,"span"),z(9,6),d()()(),m(10,"sz-ui-table",7),f("update",function(){return t.get();}),d()),e&2&&(s(5),$(t.laboratory.name),s(1),l("dataSource",t.dataSource),s(4),l("paginationEnabled",!0)("stateEnabled",!0)("dataSource",t.dataSource));},dependencies:[j,V,U,w,J,ne,ae,re],encapsulation:2});let n=o;return n;})();export{tt as LaboratoryEmailsComponent};/**i18n:1d16e7d3b6b09b5ca5f11aee33f3c6ee9a8e446806802ef706aaf87e85c9b2b7*/