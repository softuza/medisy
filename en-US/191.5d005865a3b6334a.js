"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[191],{6187:(R,m,r)=>{r.r(m),r.d(m,{ReferenceValueModule:()=>q});var i=r(6814),o=r(6223),s=r(2296),E=r(5986),p=r(7700),S=r(617),v=r(7988),P=r(8525),_=r(8109),c=r(6883),F=r(758),u=r(8308),h=r(2169),C=r(9899),D=r(5041),Z=r(7239),g=r(3572),b=r(8645),e=r(5879),G=r(2516),A=r(8262),O=r(7076),V=r(9598),y=r(8721),T=r(8180),M=r(5781),B=r(7398);let z=(()=>{class l extends M.ms{set person(a){this._person=a}constructor(a,n){super(a),this.ngControl=a,this.mlabService=n,this.options=[],this.label="Reference Group",this.optionContent=t=>t.name,this.optionValue=t=>this.szOptionValueFn?this.szOptionValueFn(t):t.id,this.mlabService.referenceGroups.get(V.J.unpagedSorted("name")).pipe((0,T.q)(1),(0,B.U)(t=>t.items)).pipe((0,y.sU)(this.indicator)).subscribe(t=>{this.options=t})}ngOnInit(){this.control=this.ngControl.control}static#e=this.\u0275fac=function(n){return new(n||l)(e.Y36(o.a5,10),e.Y36(c.t))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["medisy-form-field-reference-group"]],inputs:{person:"person"},standalone:!0,features:[e._Bn([c.t]),e.qOj,e.jDz],decls:1,vars:9,consts:[[3,"formControl","indicator","options","label","placeholder","emptyOption","multiple","szOptionContentFn","szOptionValueFn"]],template:function(n,t){1&n&&e._UZ(0,"sz-ui-form-field-select",0),2&n&&e.Q6J("formControl",t.control)("indicator",t.indicator)("options",t.options)("label",t.label)("placeholder",t.placeholder)("emptyOption",t.emptyOption)("multiple",t.multiple)("szOptionContentFn",t.optionContent)("szOptionValueFn",t.optionValue)},dependencies:[i.ez,o.UX,o.JJ,o.oH,M.E3],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]})}return l})();var N=r(7263);let L=(()=>{class l extends M.ms{constructor(a,n){super(a),this.ngControl=a,this.typeI18nPipe=n,this.options=Object.keys(N.v).map(t=>N.v[t]),this.label="Comparison Operator",this.optionContent=t=>this.typeI18nPipe.transform(t)}ngOnInit(){this.control=this.ngControl.control}static#e=this.\u0275fac=function(n){return new(n||l)(e.Y36(o.a5,10),e.Y36(O.y))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["medisy-form-field-comparison-operator"]],standalone:!0,features:[e._Bn([O.y]),e.qOj,e.jDz],decls:1,vars:7,consts:[[3,"formControl","options","label","placeholder","emptyOption","multiple","szOptionContentFn"]],template:function(n,t){1&n&&e._UZ(0,"sz-ui-form-field-select",0),2&n&&e.Q6J("formControl",t.control)("options",t.options)("label",t.label)("placeholder",t.placeholder)("emptyOption",t.emptyOption)("multiple",t.multiple)("szOptionContentFn",t.optionContent)},dependencies:[o.UX,o.JJ,o.oH,M.E3],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]})}return l})();var I=r(4622),$=r(6091);let J=(()=>{class l extends C.Z2{constructor(a,n,t,f){super(n),this.fb=a,this.dialog=n,this.typeI18nPipe=t,this.data=f,this.form=a.group({referenceGroupId:[f.referenceGroupId],comparisonOperator:new o.NI(f.comparisonOperator)})}submit(){this.IsValid()&&this.dialog.close(this.form.value)}static#e=this.\u0275fac=function(n){return new(n||l)(e.Y36(o.qu),e.Y36(p.so),e.Y36(O.y),e.Y36(p.WI))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["medisy-laboratory-reference-value-rules-filter"]],standalone:!0,features:[e._Bn([O.y]),e.qOj,e.jDz],decls:6,vars:5,consts:[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","comparisonOperator",3,"emptyOption"],["formControlName","referenceGroupId",3,"emptyOption"],[3,"actions"]],template:function(n,t){1&n&&(e._UZ(0,"sz-ui-dialog-header",0),e.TgZ(1,"mat-dialog-content")(2,"form",1),e._UZ(3,"medisy-form-field-comparison-operator",2)(4,"medisy-form-field-reference-group",3),e.qZA()(),e._UZ(5,"sz-ui-dialog-actions",4)),2&n&&(e.Q6J("header",t.header),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("emptyOption",!0),e.xp6(1),e.Q6J("emptyOption",!0),e.xp6(1),e.Q6J("actions",t.actions))},dependencies:[i.ez,o.UX,o._Y,o.JJ,o.JL,o.sg,o.u,p.Is,p.xY,E.p9,C.su,I.Y,$.t,z,L],encapsulation:2})}return l})();var Y=r(9157),U=r(2032),W=r(8873);function X(l,k){1&l&&(e.TgZ(0,"div",8)(1,"mat-form-field",9)(2,"label"),e._UZ(3,"input",10),e.qZA()(),e.TgZ(4,"mat-form-field",9)(5,"label"),e._UZ(6,"input",11),e.qZA()()())}function j(l,k){1&l&&(e.TgZ(0,"mat-form-field",9)(1,"label"),e._UZ(2,"input",12),e.qZA()())}let x=(()=>{class l extends C.Ku{constructor(a,n,t,f,d){super(f),this.mlabService=a,this.typeI18nPipe=n,this.fb=t,this.dialog=f,this.data=d,this.form=t.group({description:[d.referenceValueRule?.description,[o.kI.maxLength(4096)]],comparisonOperator:new o.NI(d.referenceValueRule?.comparisonOperator??N.v.Equal,[o.kI.required]),referenceGroupId:[d.referenceValueRule?.referenceGroupId,[o.kI.required]],value:[d.referenceValueRule?.value,[]],start:[d.referenceValueRule?.start,[]],end:[d.referenceValueRule?.end,[]]})}isRange(){return this.form.value.comparisonOperator===N.v.RangeWithBoundaries||this.form.value.comparisonOperator===N.v.RangeWithoutBoundaries}submit(){this.IsValid()&&this.save(this.data.referenceValueRule?this.mlabService.referenceValues.rules.update(this.data.referenceValueId,this.data.referenceValueRule.id,this.form.value):this.mlabService.referenceValues.rules.create(this.data.referenceValueId,this.form.value))}static#e=this.\u0275fac=function(n){return new(n||l)(e.Y36(c.t),e.Y36(O.y),e.Y36(o.qu),e.Y36(p.so),e.Y36(p.WI))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["medisy-laboratory-reference-value-rules-save"]],standalone:!0,features:[e._Bn([O.y]),e.qOj,e.jDz],decls:9,vars:5,consts:function(){let a,n,t,f;return a="Description",n="Start",t="End",f="Value",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","description","label",a],["formControlName","comparisonOperator"],["class","tw-flex md:tw-flex-row tw-flex-col md:tw-gap-4",4,"ngIf"],["class","tw-flex-1",4,"ngIf"],["formControlName","referenceGroupId"],[3,"actions"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["autocomplete","off","formControlName","start","matInput","","placeholder",n],["autocomplete","off","formControlName","end","matInput","","placeholder",t],["autocomplete","off","formControlName","value","matInput","","placeholder",f]]},template:function(n,t){1&n&&(e._UZ(0,"sz-ui-dialog-header",0),e.TgZ(1,"mat-dialog-content")(2,"form",1),e._UZ(3,"sz-ui-form-field-textarea",2)(4,"medisy-form-field-comparison-operator",3),e.YNc(5,X,7,0,"div",4),e.YNc(6,j,3,0,"mat-form-field",5),e._UZ(7,"medisy-form-field-reference-group",6),e.qZA()(),e._UZ(8,"sz-ui-dialog-actions",7)),2&n&&(e.Q6J("header",t.header),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("ngIf",t.isRange()),e.xp6(1),e.Q6J("ngIf",!t.isRange()),e.xp6(2),e.Q6J("actions",t.actions))},dependencies:[i.ez,i.O5,o.UX,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,U.c,U.Nt,Y.KE,p.Is,p.xY,Y.lN,E.p9,C.su,I.Y,$.t,M.g2,W.L,z,L],encapsulation:2})}return l})();var Q=r(8359),H=r(3144);let w=(()=>{class l{constructor(a,n,t,f){this.dialog=a,this.route=n,this.mlabService=t,this.typeI18nPipe=f,this.dataSource=new g.b2(V.J.paged()),this.referenceValue=this.route.snapshot.data.referenceValue,this.dataSource.columns=[g.UC.text("referenceGroup","Reference group",d=>d.referenceGroup.name),A.h.comparisonOperator(d=>f.transform(d.comparisonOperator)),g.UC.text("value","Value",d=>d.value?d.value:`${d.start} - ${d.end}`),A.h.createdAt(),A.h.menu([g.od.edit(d=>this.openSaveComponent(d)),g.od.delete(d=>{this.openReferenceValueRuleDeleteComponent(d)})])],this.get()}openSaveComponent(a){this.dialog.open(x,{data:{referenceValueId:this.referenceValue.id,referenceValueRule:a}}).afterClosed().pipe((0,T.q)(1)).subscribe(t=>{this.dataSource.updateOrPushItem(t)})}openFilterComponent(){this.dialog.open(J,{data:this.dataSource.filterModel}).afterClosed().pipe((0,T.q)(1)).subscribe(n=>{this.dataSource.updateFilterModel(n),this.get()})}openReferenceValueRuleDeleteComponent(a){this.dialog.open(C.fN,{data:C.cb.delete(this.mlabService.referenceValues.rules.delete(a.referenceValueId,a.id),a)}).afterClosed().pipe((0,T.q)(1)).subscribe(t=>{this.dataSource.delete(t)})}get(){this.mlabService.referenceValues.rules.get(this.referenceValue.id,this.dataSource.filterModel).pipe((0,y.sU)(this.dataSource.indicator),(0,T.q)(1)).subscribe(a=>{this.dataSource.set(a.items,a.count)})}static#e=this.\u0275fac=function(n){return new(n||l)(e.Y36(p.uw),e.Y36(_.gz),e.Y36(c.t),e.Y36(O.y))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["medisy-laboratory-reference-value-rules"]],features:[e._Bn([O.y])],decls:5,vars:4,consts:function(){let a;return a="Add",[[3,"dataSource","search","filter"],["mat-flat-button","","color","primary","start","",3,"click"],a,[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(n,t){1&n&&(e.TgZ(0,"sz-ui-table-filter",0),e.NdJ("search",function(){return t.get()})("filter",function(){return t.openFilterComponent()}),e.TgZ(1,"button",1),e.NdJ("click",function(){return t.openSaveComponent()}),e.TgZ(2,"span"),e.SDv(3,2),e.qZA()()(),e.TgZ(4,"sz-ui-table",3),e.NdJ("update",function(){return t.get()}),e.qZA()),2&n&&(e.Q6J("dataSource",t.dataSource),e.xp6(4),e.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",t.dataSource))},dependencies:[s.lW,Q.K,H.f],encapsulation:2})}return l})();const K=[{path:"",component:(()=>{class l{constructor(a,n){this.dialog=a,this.route=n,this.alert$=new b.x,this.referenceValue=this.route.snapshot.data.referenceValue}static#e=this.\u0275fac=function(n){return new(n||l)(e.Y36(p.uw),e.Y36(_.gz))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["medisy-laboratory-reference-value"]],features:[e._Bn([])],decls:10,vars:2,consts:[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["mat-icon-button","","routerLink","../","end",""]],template:function(n,t){1&n&&(e.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),e._uU(3),e.qZA(),e.TgZ(4,"span",2),e._uU(5),e.qZA()(),e.TgZ(6,"button",3)(7,"mat-icon"),e._uU(8,"arrow_back"),e.qZA()()(),e._UZ(9,"medisy-laboratory-reference-value-rules")),2&n&&(e.xp6(3),e.Oqu(t.referenceValue.testClass.name),e.xp6(2),e.Oqu(t.referenceValue.description))},dependencies:[_.rH,S.Hw,s.RK,G.z,w],encapsulation:2})}return l})()}];let q=(()=>{class l{static#e=this.\u0275fac=function(n){return new(n||l)};static#t=this.\u0275mod=e.oAB({type:l});static#r=this.\u0275inj=e.cJS({providers:[c.t],imports:[i.ez,o.u5,_.Bz.forChild(K),p.Is,E.p9,v.Tx,S.Ps,s.ot,P.LD,F.E3,g.Vn,h.c,u.VH,Z.h,C.su,D.n]})}return l})()},7076:(R,m,r)=>{r.d(m,{y:()=>_});var i=r(3712),o=r(1101),s=r(7263),E=function(c){return c.Validated="Validated",c.Returned="Returned",c.Forwarded="Forwarded",c.Destroyed="Destroyed",c.Collected="Collected",c.Accepted="Accepted",c.Created="Created",c}(E||{}),p=function(c){return c.Created="Created",c.Pending="Pending",c.Started="Started",c.Finished="Finished",c}(p||{}),S=r(1646),v=r(9155),P=r(5879);let _=(()=>{class c{transform(u,h=!1){return u in s.v?this.transformComparisonOperator(u,h):u in p?this.transformTestState(u):u in E?this.transformSpecimenState(u):u in i.V?this.transformEmailType(u):u in o.z?this.transformPhoneType(u):u in v.m?this.transformSex(u):u in S.n?this.transformDocumentType(u):""}transformComparisonOperator(u,h){switch(u){case s.v.Equal:return h?"==":"Equal";case s.v.GreaterThan:return h?">":"GreaterThan";case s.v.GreaterThanOrEqual:return h?">=":"GreaterThanOrEqual";case s.v.LessThan:return h?"<":"LessThan";case s.v.LessThanOrEqual:return h?"<=":"LessThanOrEqual";case s.v.RangeWithBoundaries:return h?"<==>":"RangeWithBoundaries";case s.v.RangeWithoutBoundaries:return h?"<>":"RangeWithoutBoundaries";case s.v.Not:return h?"!=":"Not";default:return""}}transformTestState(u){switch(u){case p.Created:return "Created";case p.Started:return "Started";case p.Finished:return "Finished";case p.Pending:return "Pending";default:return""}}transformSpecimenState(u){switch(u){case E.Accepted:return "Accepted";case E.Collected:return "Collected";case E.Destroyed:return "Destroyed";case E.Forwarded:return "Forwarded";case E.Validated:return "Validated";case E.Created:return "Created";default:return""}}transformEmailType(u){switch(u){case i.V.Private:return "Private";case i.V.Public:return "Public";case i.V.Work:return "Work";default:return""}}transformPhoneType(u){switch(u){case o.z.Home:return "Home";case o.z.Mobile:return "Mobile";case o.z.Work:return "Work";default:return""}}transformSex(u){switch(u){case v.m.Female:return "Female";case v.m.Male:return "Male";default:return""}}transformDocumentType(u){switch(u){case S.n.BankCard:return "Bank Card";case S.n.DriverLicense:return "Driver License";case S.n.NationalCard:return "National Card";case S.n.Passport:return "Passport";case S.n.TravelDocument:return "Travel Document";case S.n.Other:return "Other";default:return""}}static#e=this.\u0275fac=function(h){return new(h||c)};static#t=this.\u0275pipe=P.Yjl({name:"typeI18n",type:c,pure:!0,standalone:!0})}return c})()},3712:(R,m,r)=>{r.d(m,{V:()=>i});var i=function(s){return s.Private="Private",s.Public="Public",s.Work="Work",s}(i||{});Object.keys(i).map(s=>i[s])},1101:(R,m,r)=>{r.d(m,{z:()=>i});var i=function(s){return s.Home="Home",s.Mobile="Mobile",s.Work="Work",s}(i||{});Object.keys(i).map(s=>i[s])},7263:(R,m,r)=>{r.d(m,{v:()=>i});var i=function(o){return o.Equal="Equal",o.GreaterThan="GreaterThan",o.GreaterThanOrEqual="GreaterThanOrEqual",o.LessThan="LessThan",o.LessThanOrEqual="LessThanOrEqual",o.Not="Not",o.RangeWithBoundaries="RangeWithBoundaries",o.RangeWithoutBoundaries="RangeWithoutBoundaries",o}(i||{})},1646:(R,m,r)=>{r.d(m,{n:()=>i});var i=function(s){return s.NationalCard="NationalCard",s.BankCard="BankCard",s.DriverLicense="DriverLicense",s.Passport="Passport",s.TravelDocument="TravelDocument",s.Other="Other",s}(i||{});Object.keys(i).map(s=>i[s])},9155:(R,m,r)=>{r.d(m,{m:()=>i});var i=function(s){return s.Male="Male",s.Female="Female",s}(i||{});Object.keys(i).map(s=>i[s])}}]);