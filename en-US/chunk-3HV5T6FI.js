import{a as W,c as Z,e as x,f as ee,g as M,j as te,k as oe,l as a}from"./chunk-FZEUNKK5.js";import"./chunk-FZ52L27Y.js";import"./chunk-DMM3KDE2.js";import{a as f}from"./chunk-L27V7QHK.js";import{e as q,f as w,g as H,i as J,j as K,k as Q}from"./chunk-2OSRE3JT.js";import"./chunk-RYHQSWXO.js";import{b as j}from"./chunk-UU5EOSAA.js";import{f as b}from"./chunk-GIBK7SER.js";import{a as V,b as G,d as U,e as X,g as k}from"./chunk-FYGLJEE6.js";import{u as B,z as $}from"./chunk-6AE3I6K5.js";import{Ba as P,J as I,N as D,d as c,f as C,g as N,k as R,m as g,p as h,q as L,t as v,ya as F}from"./chunk-YEMGMLL5.js";import"./chunk-TXIZFIB6.js";import{Ea as Y,Ga as z}from"./chunk-XSLO4G5W.js";import{Fb as l,Gb as p,Hb as T,M as m,Rb as u,Tb as E,gb as S,hb as s,kc as A,oa as O,ob as y,vb as n}from"./chunk-WU7ZNUS7.js";var ie=(()=>{let r=class r extends q{constructor(e,t,i,o){super(i),this.mlabService=e,this.fb=t,this.dialog=i,this.data=o,this.testTypes=this.mlabService.testTypes.getAll({orderBy:["latinName"]}),this.form=t.group({enabled:[o.laboratoryTestType?.enabled??!0,[c.required]],price:[o.laboratoryTestType?.price??0,[c.required]],isFavorite:[o.laboratoryTestType?.isFavorite??!1,[c.required]],testTypeId:[o.laboratoryTestType?.testTypeId,[c.required]]});}submit(){this.IsValid()&&(this.data.laboratoryTestType?this.save(this.mlabService.laboratories.testTypes.update(this.data.laboratoryId,this.data.laboratoryTestType?.id,this.form.value)):this.save(this.mlabService.laboratories.testTypes.create(this.data.laboratoryId,this.form.value)));}};r.ɵfac=function(t){return new(t||r)(s(f),s(L),s(V),s(G));},r.ɵcmp=O({type:r,selectors:[["medisy-laboratory-test-types-save"]],standalone:!0,features:[y,A],decls:10,vars:4,consts:()=>{let e;e="Test Type";let t;t="Price";let i;i="Favorite";let o;return o="Enabled",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId","label",e,3,"source"],["formControlName","price","label",t],["formControlName","isFavorite"],i,["formControlName","enabled"],o,[3,"actions"]];},template:function(t,i){t&1&&(T(0,"sz-ui-dialog-header",0),l(1,"mat-dialog-content")(2,"form",1),T(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-input",3),l(5,"mat-checkbox",4),u(6,5),p(),l(7,"mat-checkbox",6),u(8,7),p()()(),T(9,"sz-ui-dialog-actions",8)),t&2&&(n("header",i.header),S(2),n("formGroup",i.form),S(),n("source",i.testTypes),S(6),n("actions",i.actions));},dependencies:[v,R,C,N,g,h,K,w,H,k,X,M,ee,B,$],encapsulation:2});let _=r;return _;})();var Ue=(()=>{let r=class r{constructor(e,t,i){this.dialog=e,this.mlabService=t,this.route=i,this.title=P.testTypes,this.dataSource=new Z(),this.laboratory=this.route.snapshot.data.laboratory,this.dataSource.fields.push(a.uuid("id"),a.uuid("laboratoryId"),a.uuid("testTypeId"),a.string("testType.name"),a.number("price"),a.date("createdAt",!1),a.date("updatedAt",!1),a.boolean("isFavorite",(o,d)=>{o.isFavorite=d,this.updateItem(o);}).setDisplayName(P.favorite),a.boolean("enabled",(o,d)=>{o.enabled=d,this.mlabService.laboratories.testTypes.update(o.laboratoryId,o.id,o).pipe(m(1)).subscribe(re=>{o=re;});}),W.menu([b.edit(o=>this.openSaveComponent(o)),b.delete(o=>this.openLaboratoryTestTypeDeleteComponent(o))])),this.get();}openSaveComponent(e){this.dialog.open(ie,{data:{laboratoryId:this.laboratory.id,laboratoryTestType:e}}).afterClosed().pipe(m(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openLaboratoryTestTypeDeleteComponent(e){this.dialog.open(J,{data:Q.delete(this.mlabService.laboratories.testTypes.delete(e.laboratoryId,e.id),e)}).afterClosed().pipe(m(1)).subscribe(t=>{this.dataSource.delete(t);});}updateItem(e){this.mlabService.laboratories.testTypes.update(e.laboratoryId,e.id,e).subscribe(t=>{this.dataSource.update(t);});}get(){this.mlabService.laboratories.testTypes.get(this.laboratory.id,this.dataSource.buildRequest()).pipe(F(this.dataSource.indicator)).pipe(m(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};r.ɵfac=function(t){return new(t||r)(s(U),s(f),s(I));},r.ɵcmp=O({type:r,selectors:[["medisy-laboratory-test-types"]],standalone:!0,features:[A],decls:6,vars:5,consts:()=>{let e;return e="Add",[[3,"title","subtitle"],[3,"dataSource","changed"],["title","","mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(t,i){t&1&&(T(0,"sz-ui-header-info",0),l(1,"sz-ui-table-search-filter",1),E("changed",function(){return i.get();}),l(2,"button",2),E("click",function(){return i.openSaveComponent();}),l(3,"span"),u(4,3),p()()(),l(5,"sz-ui-table",4),E("update",function(){return i.get();}),p()),t&2&&(n("title",i.title)("subtitle",i.laboratory.name),S(),n("dataSource",i.dataSource),S(4),n("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[D,j,oe,te,x,M,z,Y],encapsulation:2});let _=r;return _;})();export{Ue as LaboratoryTestTypesComponent};/**i18n:f1993a9d8de25a460a4edd4e25b48862b3dd863aec93a795c43b451741326090*/