import{a as Se,b as Te,c as Ee,d as Oe,e as de}from"./chunk-PU3DZ5EO.js";import{a as S,d as ae,e as ne,f as _e,i as se,j as le}from"./chunk-2ZVCN45A.js";import"./chunk-5TVHWUQF.js";import"./chunk-FLYZTQVP.js";import{a as C}from"./chunk-INUEVVSF.js";import"./chunk-MB447KBV.js";import{b as Z,f as ee,g as te,h as oe,j as re,k as ie}from"./chunk-OZNM4F5S.js";import"./chunk-MOAPW72V.js";import{j as d,k as W}from"./chunk-LZ3HWPNB.js";import{a as k,b as q,d as j,e as w,g as x}from"./chunk-YEM3GD5L.js";import{c as Q,p as J,q as N,r as K}from"./chunk-F6DYKLPX.js";import"./chunk-ZPIO6CFV.js";import"./chunk-264QKOH6.js";import"./chunk-UJCEDBUS.js";import"./chunk-H7W7YGPD.js";import"./chunk-VNEAS3P2.js";import{d as p,f as D,g as v,l as V,n as $,q as z,r as G,u as F}from"./chunk-ER7WHOJP.js";import{Y as b,r as R,t as A}from"./chunk-6JNKTIUK.js";import{a as U,e as X}from"./chunk-NBEPCNAY.js";import"./chunk-THXYLS24.js";import{la as H}from"./chunk-UUEM5JJT.js";import"./chunk-PSZD7437.js";import{Kb as _,Lb as a,Mb as T,Wb as O,Xb as y,bb as l,cb as m,ja as M,na as f,oc as c,qb as B,zb as n}from"./chunk-IKPHE33N.js";import"./chunk-EAIILSS5.js";var pe=(()=>{let i=class i extends ee{constructor(e,t,o,r){super(o),this.mlabService=e,this.fb=t,this.dialog=o,this.data=r,this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"],filterBehavior:R.Or,filters:A.create().equalIf("id",this.data.laboratoryTestType?.testTypeId).notAny("laboratories.laboratoryId",[this.data.laboratoryId]).filters()}),this.laboratories=this.mlabService.laboratories.getAll({orderBy:["name"],filters:A.create().notEqual("id",this.data.laboratoryId).filters()}),this.referenceValueSelectConfig={emptyOption:!0,autoSelect:!0,optionContentFn:u=>u.testType.nameEn},this.testTypeSelectConfig={optionSelectedFn:this.testTypeChnaged.bind(this)},this.transferOutLaboratorySelectConfig={emptyOption:!0},this.referenceValues=null,this.form=t.group({enabled:[r.laboratoryTestType?.enabled??!0,[p.required]],transferInPrice:[r.laboratoryTestType?.transferInPrice??0,[]],transferInEnabled:[r.laboratoryTestType?.transferInEnabled??!0,[p.required]],transferOutEnabled:[r.laboratoryTestType?.transferOutEnabled??!0,[p.required]],transferOutLaboratoryId:[r.laboratoryTestType?.transferOutLaboratoryId,[]],price:[r.laboratoryTestType?.price??0,[]],isFavorite:[r.laboratoryTestType?.isFavorite??!1,[p.required]],testTypeId:[r.laboratoryTestType?.testTypeId,[p.required]],referenceValueId:[r.laboratoryTestType?.referenceValueId,[]]}),r.laboratoryTestType&&this.testTypeChnaged(r.laboratoryTestType.testTypeId);}testTypeChnaged(e){this.referenceValues=this.mlabService.referenceValues.getAll({orderBy:["testType.nameEn"],filterBehavior:R.And,filters:A.create().equalIf("testType.id",e).filters()});}submit(){this.IsValid()&&(this.data.laboratoryTestType?this.save(this.mlabService.laboratories.testTypes.update(this.data.laboratoryId,this.data.laboratoryTestType?.id,this.form.value)):this.save(this.mlabService.laboratories.testTypes.create(this.data.laboratoryId,this.form.value)));}};i.ɵfac=function(t){return new(t||i)(m(C),m(G),m(k),m(q));},i.ɵcmp=f({type:i,selectors:[["sz-medisy-laboratory-laboratory-test-types-save"]],standalone:!0,features:[B,c],decls:29,vars:13,consts:()=>{let e;e="Test Type";let t;t="Reference Value";let o;o="Price";let r;r="Price";let u;u="Laboratory";let L;L="Enabled";let g;g="Favorite";let I;I="Transfer In";let P;P="Enabled";let h;h="Transfer Out";let Y;return Y="Enabled",[L,g,I,P,h,Y,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId","label",e,3,"source","config"],["formControlName","referenceValueId","label",t,3,"source","config"],[1,"sz-form-row"],["formControlName","enabled"],["formControlName","isFavorite"],["formControlName","price","label",o,3,"type"],["multi","",1,"tw-mb-4"],["formControlName","transferInEnabled"],["formControlName","transferInPrice","label",r,3,"type"],["formControlName","transferOutEnabled"],["formControlName","transferOutLaboratoryId","label",u,3,"source","config"],[3,"actions"]];},template:function(t,o){t&1&&(T(0,"sz-ui-dialog-header",6),_(1,"mat-dialog-content")(2,"form",7),T(3,"sz-ui-form-field-select",8)(4,"sz-ui-form-field-select",9),_(5,"div",10)(6,"mat-checkbox",11),O(7,0),a(),_(8,"mat-checkbox",12),O(9,1),a()(),_(10,"div",10),T(11,"sz-ui-form-field-input",13),a(),T(12,"div",10),_(13,"mat-accordion",14)(14,"mat-expansion-panel")(15,"mat-expansion-panel-header")(16,"mat-panel-title"),O(17,2),a()(),_(18,"mat-checkbox",15),O(19,3),a(),T(20,"sz-ui-form-field-input",16),a(),_(21,"mat-expansion-panel")(22,"mat-expansion-panel-header")(23,"mat-panel-title"),O(24,4),a()(),_(25,"mat-checkbox",17),O(26,5),a(),T(27,"sz-ui-form-field-select",18),a()()()(),T(28,"sz-ui-dialog-actions",19)),t&2&&(n("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),l(2),n("formGroup",o.form),l(),n("source",o.testTypes)("config",o.testTypeSelectConfig),l(),n("source",o.referenceValues)("config",o.referenceValueSelectConfig),l(7),n("type","number"),l(9),n("type","number"),l(7),n("source",o.laboratories)("config",o.transferOutLaboratorySelectConfig),l(),n("actions",o.actions));},dependencies:[F,V,D,v,$,z,ie,te,oe,x,w,N,J,de,Oe,Se,Te,Ee,Q,K],encapsulation:2});let E=i;return E;})();var We=(()=>{let i=class i{constructor(){this.dialog=M(j),this.mlabService=M(C),this.route=M(U),this.dataSource=new ae("testType.nameEn"),this.laboratory=this.route.snapshot.data.laboratory,this.appBarConfig={title:b.test_types,subtitle:this.laboratory.name,backEnabled:!0,menu:W.default().setItems([d.add(this.openSaveComponent.bind(this)),d.menu([d.search()])])},this.dataSource.columnDefs.push(S.uuid("id"),S.uuid("testTypeId"),S.string("testType.nameEn"),S.date("createdAt").setVisible(!1),S.date("updatedAt").setVisible(!1),S.boolean("isFavorite",(e,t)=>{e.isFavorite=t,this.updateItem(e);}).setHeaderName(b.favorite).setResponsive(!0),S.boolean("enabled",(e,t)=>{e.enabled=t,this.mlabService.laboratories.testTypes.update(e.laboratoryId,e.id,e).subscribe(o=>{e=o;});}).setResponsive(!0),S.menu([d.edit(this.openSaveComponent.bind(this)),d.divider(),d.delete(this.openLaboratoryTestTypeDeleteComponent.bind(this))])),this.get();}openSaveComponent(e){this.dialog.open(pe,{data:{laboratoryId:this.laboratory.id,laboratoryTestType:e}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openLaboratoryTestTypeDeleteComponent(e){this.dialog.open(re,{data:Z.delete(this.mlabService.laboratories.testTypes.delete(e.laboratoryId,e.id),e)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}updateItem(e){this.mlabService.laboratories.testTypes.update(e.laboratoryId,e.id,e).subscribe(t=>{this.dataSource.update(t);});}get(){this.mlabService.laboratories.testTypes.get(this.laboratory.id,this.dataSource.getQuery()).pipe(ne(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=f({type:i,selectors:[["sz-medisy-laboratory-laboratory-test-types"]],standalone:!0,features:[c],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(t,o){t&1&&(_(0,"sz-ui-table-bar",0),y("changed",function(){return o.get();}),a(),_(1,"sz-ui-table",1),y("update",function(){return o.get();}),a()),t&2&&(n("config",o.appBarConfig)("dataSource",o.dataSource),l(),n("dataSource",o.dataSource));},dependencies:[X,le,se,_e,N,H],encapsulation:2});let E=i;return E;})();export{We as LaboratoryTestTypesComponent};/**i18n:23b18f90dfad26ae6b830c3e760ecc323aedcfc43eb78549f6a00c2171dce7c8*/