import{a as d,b as u}from"./chunk-PF7HVV5B.js";import"./chunk-XLSE5NCB.js";import{a as y}from"./chunk-O4JAUULY.js";import{a as l}from"./chunk-3BKI5RJX.js";import{d as B,g as w}from"./chunk-VWPRYYV7.js";import"./chunk-UKCE2Q4Z.js";import{a as q}from"./chunk-Y2GSKKA6.js";import"./chunk-3VGQRMVI.js";import"./chunk-SIM3MWAY.js";import"./chunk-BYYBYZIV.js";import{b as L}from"./chunk-CQQPNAJZ.js";import{a as h,b,c as H}from"./chunk-HEEN2CKG.js";import"./chunk-E7VUVWEF.js";import"./chunk-XJ54ZRFR.js";import{v as $}from"./chunk-X72CBQLP.js";import{a as n}from"./chunk-Y376CRI2.js";import"./chunk-SNR3XRMI.js";import{a as c}from"./chunk-PIKBUH2I.js";import{a as f}from"./chunk-3HWNDRT6.js";import{F as x,H as N,J as R,Va as k,n as F}from"./chunk-P44VDH7R.js";import{$a as P,Ab as p,Bb as a,Cb as C,L as z,Wb as S,Xb as M,Zb as E,ea as g,eb as m,fb as s,ma as I,na as T,pb as v,xb as j,yb as A,zb as D}from"./chunk-3CXVAQY6.js";function W(t,e){if(t&1&&C(0,"sz-ui-card",5),t&2){let K=e.$implicit;v("card",K);}}var G=(()=>{let e=class e{constructor(o,i,r,O,Q,U){this.dialog=o,this.route=i,this.router=r,this.mlabService=O,this.mpplService=Q,this.personNamePipe=U,this.alert$=P(void 0),this.testsDataSource=new L(c.pagedSorted("-createdAt")),this.tiles=[],this.analysisMenu=H.more([b.edit(()=>this.openEditComponent),b.print(()=>this.openEditComponent)]),this.analysis=this.route.snapshot.data.analysis,this.getPerson(),this.buildTiles();}buildTiles(){let o={icon:"science",subtitle:"Tests",type:d.Counter,clickFn:()=>this.router.navigate(["tests"],{relativeTo:this.route})},i={icon:"label",subtitle:"Specimens",type:d.Counter,clickFn:()=>this.router.navigate(["specimens"],{relativeTo:this.route})};this.mlabService.analyses.tests.count(this.analysis.id,c.count()).subscribe(r=>{o.title=r;}),this.mlabService.analyses.specimens.count(this.analysis.id,c.count()).subscribe(r=>{i.title=r;}),this.tiles.push(o),this.tiles.push(i);}getPerson(){this.analysis.personId&&this.mpplService.persons.getById(this.analysis.personId).pipe(z(1)).subscribe(o=>{this.tiles.splice(0,0,{icon:"person",type:d.Text,subtitle:"Patient",title:this.personNamePipe.transform(o),clickFn:()=>this.router.navigate([`mppl/persons/${o.id}`])});});}openEditComponent(){}};e.ɵfac=function(i){return new(i||e)(s(B),s(x),s(N),s(n),s(l),s(y));},e.ɵcmp=I({type:e,selectors:[["medisy-laboratory-analysis"]],features:[E([n,l,y])],decls:10,vars:3,consts:[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["end","",3,"menu"],[1,"sz-grid-card"],[3,"card"]],template:function(i,r){i&1&&(p(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),S(3),a(),p(4,"span",2),S(5),a()(),C(6,"sz-ui-menu",3),a(),p(7,"div",4),A(8,W,1,1,"sz-ui-card",5,j),a()),i&2&&(m(3),M(r.analysis.code),m(2),M(r.analysis.note),m(1),v("menu",r.analysisMenu),D(8,r.tiles));},dependencies:[f,u,h],encapsulation:2});let t=e;return t;})();var J=[{path:"",component:G},{path:"tests",loadComponent:()=>import("./chunk-KTPDSOXP.js").then(t=>t.AnalysisTestsComponent)},{path:"specimens",loadComponent:()=>import("./chunk-5XTY23I7.js").then(t=>t.AnalysisSpecimensComponent)}];var Ee=(()=>{let e=class e{};e.ɵfac=function(i){return new(i||e)();},e.ɵmod=T({type:e}),e.ɵinj=g({providers:[n],imports:[F,R.forChild(J),w,k,$,f,u,h,q]});let t=e;return t;})();export{Ee as AnalysisModule};/**i18n:c47ea6c8e33fa0c222c20e616e96e45afbcc3267e1e4f83fbed9283c01f003ba*/