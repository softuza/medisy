"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[191],{6187:(C,m,t)=>{t.r(m),t.d(m,{ReferenceValueModule:()=>k});var a=t(6814),n=t(6223),s=t(2296),S=t(5986),h=t(7700),u=t(617),_=t(7988),O=t(8525),y=t(8109),T=t(6883),p=t(758),D=t(8308),c=t(2169),f=t(9899),F=t(5041),b=t(7239),g=t(3562),Z=t(8645),e=t(5879),G=t(2516),P=t(8262),R=t(7076),z=t(9598),A=t(8721),v=t(8180),M=t(5781),B=t(7398);let V=(()=>{class i extends M.ms{set person(l){this._person=l}constructor(l,o){super(l),this.ngControl=l,this.mlabService=o,this.options=[],this.label="Reference Group",this.optionContent=r=>r.locales[0].name,this.optionValue=r=>this.szOptionValueFn?this.szOptionValueFn(r):r.id,this.mlabService.referenceGroups.get(z.J.unpagedSorted("name")).pipe((0,v.q)(1),(0,B.U)(r=>r.items)).pipe((0,A.sU)(this.indicator)).subscribe(r=>{this.options=r})}ngOnInit(){this.control=this.ngControl.control}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(n.a5,10),e.Y36(T.t))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["medisy-form-field-reference-group"]],inputs:{person:"person"},standalone:!0,features:[e._Bn([T.t]),e.qOj,e.jDz],decls:1,vars:9,consts:[[3,"formControl","indicator","options","label","placeholder","emptyOption","multiple","szOptionContentFn","szOptionValueFn"]],template:function(o,r){1&o&&e._UZ(0,"sz-ui-form-field-select",0),2&o&&e.Q6J("formControl",r.control)("indicator",r.indicator)("options",r.options)("label",r.label)("placeholder",r.placeholder)("emptyOption",r.emptyOption)("multiple",r.multiple)("szOptionContentFn",r.optionContent)("szOptionValueFn",r.optionValue)},dependencies:[a.ez,n.UX,n.JJ,n.oH,M.E3],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]})}return i})();var N=t(7263);let $=(()=>{class i extends M.ms{constructor(l,o){super(l),this.ngControl=l,this.typeI18nPipe=o,this.options=Object.keys(N.v).map(r=>N.v[r]),this.label="Comparison Operator",this.optionContent=r=>this.typeI18nPipe.transform(r)}ngOnInit(){this.control=this.ngControl.control}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(n.a5,10),e.Y36(R.y))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["medisy-form-field-comparison-operator"]],standalone:!0,features:[e._Bn([R.y]),e.qOj,e.jDz],decls:1,vars:7,consts:[[3,"formControl","options","label","placeholder","emptyOption","multiple","szOptionContentFn"]],template:function(o,r){1&o&&e._UZ(0,"sz-ui-form-field-select",0),2&o&&e.Q6J("formControl",r.control)("options",r.options)("label",r.label)("placeholder",r.placeholder)("emptyOption",r.emptyOption)("multiple",r.multiple)("szOptionContentFn",r.optionContent)},dependencies:[n.UX,n.JJ,n.oH,M.E3],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]})}return i})();var L=t(4622),I=t(6091);let J=(()=>{class i extends f.Z2{constructor(l,o,r,E){super(o),this.fb=l,this.dialog=o,this.typeI18nPipe=r,this.data=E,this.form=l.group({referenceGroupId:[E.referenceGroupId],comparisonOperator:new n.NI(E.comparisonOperator)})}submit(){this.IsValid()&&this.dialog.close(this.form.value)}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(n.qu),e.Y36(h.so),e.Y36(R.y),e.Y36(h.WI))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["medisy-laboratory-reference-value-rules-filter"]],standalone:!0,features:[e._Bn([R.y]),e.qOj,e.jDz],decls:6,vars:5,consts:[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","comparisonOperator",3,"emptyOption"],["formControlName","referenceGroupId",3,"emptyOption"],[3,"actions"]],template:function(o,r){1&o&&(e._UZ(0,"sz-ui-dialog-header",0),e.TgZ(1,"mat-dialog-content")(2,"form",1),e._UZ(3,"medisy-form-field-comparison-operator",2)(4,"medisy-form-field-reference-group",3),e.qZA()(),e._UZ(5,"sz-ui-dialog-actions",4)),2&o&&(e.Q6J("header",r.header),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(1),e.Q6J("emptyOption",!0),e.xp6(1),e.Q6J("emptyOption",!0),e.xp6(1),e.Q6J("actions",r.actions))},dependencies:[a.ez,n.UX,n._Y,n.JJ,n.JL,n.sg,n.u,h.Is,h.xY,S.p9,f.su,L.Y,I.t,V,$],encapsulation:2})}return i})();var U=t(9157),Y=t(2032),x=t(8873);function W(i,q){1&i&&(e.TgZ(0,"div",8)(1,"mat-form-field",9)(2,"label"),e._UZ(3,"input",10),e.qZA()(),e.TgZ(4,"mat-form-field",9)(5,"label"),e._UZ(6,"input",11),e.qZA()()())}function X(i,q){1&i&&(e.TgZ(0,"mat-form-field",9)(1,"label"),e._UZ(2,"input",12),e.qZA()())}let j=(()=>{class i extends f.Ku{constructor(l,o,r,E,d){super(E),this.mlabService=l,this.typeI18nPipe=o,this.fb=r,this.dialog=E,this.data=d,this.form=r.group({description:[d.referenceValueRule?.description,[n.kI.maxLength(4096)]],comparisonOperator:new n.NI(d.referenceValueRule?.comparisonOperator??N.v.Equal,[n.kI.required]),referenceGroupId:[d.referenceValueRule?.referenceGroupId,[n.kI.required]],value:[d.referenceValueRule?.value,[]],start:[d.referenceValueRule?.start,[]],end:[d.referenceValueRule?.end,[]]})}isRange(){return this.form.value.comparisonOperator===N.v.RangeWithBoundaries||this.form.value.comparisonOperator===N.v.RangeWithoutBoundaries}submit(){this.IsValid()&&this.save(this.data.referenceValueRule?this.mlabService.referenceValues.rules.update(this.data.referenceValueId,this.data.referenceValueRule.id,this.form.value):this.mlabService.referenceValues.rules.create(this.data.referenceValueId,this.form.value))}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(T.t),e.Y36(R.y),e.Y36(n.qu),e.Y36(h.so),e.Y36(h.WI))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["medisy-laboratory-reference-value-rules-save"]],standalone:!0,features:[e._Bn([R.y]),e.qOj,e.jDz],decls:9,vars:5,consts:function(){let l,o,r,E;return l="Description",o="Start",r="End",E="Value",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","description","label",l],["formControlName","comparisonOperator"],["class","tw-flex md:tw-flex-row tw-flex-col md:tw-gap-4",4,"ngIf"],["class","tw-flex-1",4,"ngIf"],["formControlName","referenceGroupId"],[3,"actions"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["autocomplete","off","formControlName","start","matInput","","placeholder",o],["autocomplete","off","formControlName","end","matInput","","placeholder",r],["autocomplete","off","formControlName","value","matInput","","placeholder",E]]},template:function(o,r){1&o&&(e._UZ(0,"sz-ui-dialog-header",0),e.TgZ(1,"mat-dialog-content")(2,"form",1),e._UZ(3,"sz-ui-form-field-textarea",2)(4,"medisy-form-field-comparison-operator",3),e.YNc(5,W,7,0,"div",4),e.YNc(6,X,3,0,"mat-form-field",5),e._UZ(7,"medisy-form-field-reference-group",6),e.qZA()(),e._UZ(8,"sz-ui-dialog-actions",7)),2&o&&(e.Q6J("header",r.header),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(3),e.Q6J("ngIf",r.isRange()),e.xp6(1),e.Q6J("ngIf",!r.isRange()),e.xp6(2),e.Q6J("actions",r.actions))},dependencies:[a.ez,a.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,Y.c,Y.Nt,U.KE,h.Is,h.xY,U.lN,S.p9,f.su,L.Y,I.t,M.g2,x.L,V,$],encapsulation:2})}return i})();var Q=t(8359),w=t(3144);let H=(()=>{class i{constructor(l,o,r,E){this.dialog=l,this.route=o,this.mlabService=r,this.typeI18nPipe=E,this.dataSource=new g.b2(z.J.paged()),this.referenceValue=this.route.snapshot.data.referenceValue,this.dataSource.addRows(g.zP.default([g.UC.text("referenceGroup","Reference group",d=>d.referenceGroup.locales[0].name),P.h.comparisonOperator(d=>E.transform(d.comparisonOperator)),g.UC.text("value","Value",d=>d.value?d.value:`${d.start} - ${d.end}`),P.h.createdAt(),P.h.menu([g.od.edit(d=>this.openSaveComponent(d)),g.od.delete(d=>{this.openReferenceValueRuleDeleteComponent(d)})])])),this.get()}openSaveComponent(l){this.dialog.open(j,{data:{referenceValueId:this.referenceValue.id,referenceValueRule:l}}).afterClosed().pipe((0,v.q)(1)).subscribe(r=>{this.dataSource.updateOrPushItem(r)})}openFilterComponent(){this.dialog.open(J,{data:this.dataSource.filterModel}).afterClosed().pipe((0,v.q)(1)).subscribe(o=>{this.dataSource.updateFilterModel(o),this.get()})}openReferenceValueRuleDeleteComponent(l){this.dialog.open(f.fN,{data:f.cb.delete(this.mlabService.referenceValues.rules.delete(l.referenceValueId,l.id),l)}).afterClosed().pipe((0,v.q)(1)).subscribe(r=>{this.dataSource.delete(r)})}get(){this.mlabService.referenceValues.rules.get(this.referenceValue.id,this.dataSource.filterModel).pipe((0,A.sU)(this.dataSource.indicator),(0,v.q)(1)).subscribe(l=>{this.dataSource.set(l.items,l.count)})}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(h.uw),e.Y36(y.gz),e.Y36(T.t),e.Y36(R.y))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["medisy-laboratory-reference-value-rules"]],features:[e._Bn([R.y])],decls:5,vars:4,consts:function(){let l;return l="Add",[[3,"dataSource","search","filter"],["mat-flat-button","","color","primary","start","",3,"click"],l,[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(o,r){1&o&&(e.TgZ(0,"sz-ui-table-filter",0),e.NdJ("search",function(){return r.get()})("filter",function(){return r.openFilterComponent()}),e.TgZ(1,"button",1),e.NdJ("click",function(){return r.openSaveComponent()}),e.TgZ(2,"span"),e.SDv(3,2),e.qZA()()(),e.TgZ(4,"sz-ui-table",3),e.NdJ("update",function(){return r.get()}),e.qZA()),2&o&&(e.Q6J("dataSource",r.dataSource),e.xp6(4),e.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",r.dataSource))},dependencies:[s.lW,Q.K,w.f],encapsulation:2})}return i})();const K=[{path:"",component:(()=>{class i{constructor(l,o){this.dialog=l,this.route=o,this.alert$=new Z.x,this.referenceValue=this.route.snapshot.data.referenceValue}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(h.uw),e.Y36(y.gz))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["medisy-laboratory-reference-value"]],features:[e._Bn([])],decls:10,vars:2,consts:[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["mat-icon-button","","routerLink","../","end",""]],template:function(o,r){1&o&&(e.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),e._uU(3),e.qZA(),e.TgZ(4,"span",2),e._uU(5),e.qZA()(),e.TgZ(6,"button",3)(7,"mat-icon"),e._uU(8,"arrow_back"),e.qZA()()(),e._UZ(9,"medisy-laboratory-reference-value-rules")),2&o&&(e.xp6(3),e.Oqu(r.referenceValue.testClass.name),e.xp6(2),e.Oqu(r.referenceValue.description))},dependencies:[y.rH,u.Hw,s.RK,G.z,H],encapsulation:2})}return i})()}];let k=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#r=this.\u0275inj=e.cJS({providers:[T.t],imports:[a.ez,n.u5,y.Bz.forChild(K),h.Is,S.p9,_.Tx,u.Ps,s.ot,O.LD,p.E3,g.Vn,c.c,D.VH,b.h,f.su,F.n]})}return i})()},8262:(C,m,t)=>{t.d(m,{h:()=>S});var a=t(3562),n=t(7311);const s={documentType:"Document Type",comparisonType:"Comparison Operator",emailType:"Email Type",phoneType:"Phone Type"};class S{static menu(u){return a.UC.action("menu",u)}static code(){return a.UC.text("code","Code")}static createdAt(){return a.UC.date("createdAt",n.O.createdDate)}static updatedAt(){return a.UC.date("updatedAt",n.O.updatedDate)}static id(){return a.UC.text("id",n.O.id)}static nameHyperlink(u,_,O){return a.UC.hyperlink("name",n.O.name,u,_,O)}static nameText(u){return a.UC.text("name",n.O.name,u)}static phoneType(u){return a.UC.text("phoneType",s.phoneType,u)}static emailType(u){return a.UC.text("emailType",s.emailType,u)}static documentType(u){return a.UC.text("documentType",s.documentType,u)}static comparisonOperator(u){return a.UC.text("comparisonOperator",s.comparisonType,u)}}},7311:(C,m,t)=>{t.d(m,{O:()=>a});const a={id:"Id",name:"Name",description:"Description",updatedDate:"Updated Date",createdDate:"Created Date",tests:"Tests"}},7076:(C,m,t)=>{t.d(m,{y:()=>T});var a=t(3712),n=t(1101),s=t(7263),S=function(p){return p.Validated="Validated",p.Returned="Returned",p.Forwarded="Forwarded",p.Destroyed="Destroyed",p.Collected="Collected",p.Accepted="Accepted",p.Created="Created",p}(S||{}),h=function(p){return p.Created="Created",p.Pending="Pending",p.Started="Started",p.Finished="Finished",p}(h||{}),u=t(1646),_=t(9155),O=t(6494),y=t(5879);let T=(()=>{class p{transform(c,f=!1){return c in s.v?this.transformComparisonOperator(c,f):c in h?this.transformTestState(c):c in S?this.transformSpecimenState(c):c in a.V?this.transformEmailType(c):c in n.z?this.transformPhoneType(c):c in _.m?this.transformSex(c):c in u.n?this.transformDocumentType(c):c in O.x?this.transformChannelType(c):""}transformComparisonOperator(c,f){switch(c){case s.v.Equal:return f?"==":"Equal";case s.v.GreaterThan:return f?">":"GreaterThan";case s.v.GreaterThanOrEqual:return f?">=":"GreaterThanOrEqual";case s.v.LessThan:return f?"<":"LessThan";case s.v.LessThanOrEqual:return f?"<=":"LessThanOrEqual";case s.v.RangeWithBoundaries:return f?"<==>":"RangeWithBoundaries";case s.v.RangeWithoutBoundaries:return f?"<>":"RangeWithoutBoundaries";case s.v.Not:return f?"!=":"Not";default:return""}}transformTestState(c){switch(c){case h.Created:return "Created";case h.Started:return "Started";case h.Finished:return "Finished";case h.Pending:return "Pending";default:return""}}transformSpecimenState(c){switch(c){case S.Accepted:return "Accepted";case S.Collected:return "Collected";case S.Destroyed:return "Destroyed";case S.Forwarded:return "Forwarded";case S.Validated:return "Validated";case S.Created:return "Created";default:return""}}transformEmailType(c){switch(c){case a.V.Private:return "Private";case a.V.Public:return "Public";case a.V.Work:return "Work";default:return""}}transformPhoneType(c){switch(c){case n.z.Home:return "Home";case n.z.Mobile:return "Mobile";case n.z.Work:return "Work";default:return""}}transformSex(c){switch(c){case _.m.Female:return "Female";case _.m.Male:return "Male";default:return""}}transformDocumentType(c){switch(c){case u.n.BankCard:return "Bank Card";case u.n.DriverLicense:return "Driver License";case u.n.NationalCard:return "National Card";case u.n.Passport:return "Passport";case u.n.TravelDocument:return "Travel Document";case u.n.Other:return "Other";default:return""}}transformChannelType(c){switch(c){case O.x.Email:return "Email";case O.x.Sms:return "SMS";case O.x.Push:return "Push";default:return""}}static#e=this.\u0275fac=function(f){return new(f||p)};static#t=this.\u0275pipe=y.Yjl({name:"typeI18n",type:p,pure:!0,standalone:!0})}return p})()},3712:(C,m,t)=>{t.d(m,{V:()=>a});var a=function(s){return s.Private="Private",s.Public="Public",s.Work="Work",s}(a||{});Object.keys(a).map(s=>a[s])},1101:(C,m,t)=>{t.d(m,{z:()=>a});var a=function(s){return s.Home="Home",s.Mobile="Mobile",s.Work="Work",s}(a||{});Object.keys(a).map(s=>a[s])},7263:(C,m,t)=>{t.d(m,{v:()=>a});var a=function(n){return n.Equal="Equal",n.GreaterThan="GreaterThan",n.GreaterThanOrEqual="GreaterThanOrEqual",n.LessThan="LessThan",n.LessThanOrEqual="LessThanOrEqual",n.Not="Not",n.RangeWithBoundaries="RangeWithBoundaries",n.RangeWithoutBoundaries="RangeWithoutBoundaries",n}(a||{})},1646:(C,m,t)=>{t.d(m,{n:()=>a});var a=function(s){return s.NationalCard="NationalCard",s.BankCard="BankCard",s.DriverLicense="DriverLicense",s.Passport="Passport",s.TravelDocument="TravelDocument",s.Other="Other",s}(a||{});Object.keys(a).map(s=>a[s])},9155:(C,m,t)=>{t.d(m,{m:()=>a});var a=function(s){return s.Male="Male",s.Female="Female",s}(a||{});Object.keys(a).map(s=>a[s])},6494:(C,m,t)=>{t.d(m,{x:()=>a});var a=function(n){return n.Email="Email",n.Sms="Sms",n.Push="Push",n}(a||{})}}]);