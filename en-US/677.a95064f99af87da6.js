"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[677],{677:(D,p,s)=>{s.r(p),s.d(p,{AnalysisModule:()=>Y});var m=s(6814),M=s(2296),y=s(7700),C=s(6385),O=s(617),c=s(7988),E=s(8109),v=s(5738),P=s(758),n=s(2595),g=s(5041),S=s(5807),t=s(5879),l=s(9060),d=s(5348),o=s(2430),r=s(5703),u=s(2764),T=s(3572),f=s(9598),z=s(8180),I=s(2516),R=s(6128);function U(e,h){1&e&&t._UZ(0,"sz-ui-card",6),2&e&&t.Q6J("card",h.$implicit)}const B=[{path:"",component:(()=>{class e{constructor(a,i,A,K,N,Z){this.dialog=a,this.route=i,this.router=A,this.analysisService=K,this.personService=N,this.personNamePipe=Z,this.alert$=(0,t.tdS)(void 0),this.testsDataSource=new T.b2(f.J.pagedSorted("-createdAt")),this.tiles=[],this.analysisMenu=r.B.more([u.N.edit(()=>this.openEditComponent),u.N.print(()=>this.openEditComponent)]),this.analysis=this.route.snapshot.data.analysis,this.getPerson(),this.buildTiles()}buildTiles(){const a={icon:"science",subtitle:"Tests",type:o.k.Counter,clickFn:()=>this.router.navigate(["tests"],{relativeTo:this.route})},i={icon:"label",subtitle:"Specimens",type:o.k.Counter,clickFn:()=>this.router.navigate(["specimens"],{relativeTo:this.route})};this.analysisService.tests.count(this.analysis.id,f.J.count()).subscribe(A=>{a.title=A}),this.analysisService.specimens.count(this.analysis.id,f.J.count()).subscribe(A=>{i.title=A}),this.tiles.push(a),this.tiles.push(i)}getPerson(){this.analysis.personId&&this.personService.getById(this.analysis.personId).pipe((0,z.q)(1)).subscribe(a=>{this.tiles.splice(0,0,{icon:"person",type:o.k.Text,subtitle:"Patient",title:this.personNamePipe.transform(a),clickFn:()=>this.router.navigate([`mppl/persons/${a.id}`])})})}openEditComponent(){}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(y.uw),t.Y36(E.gz),t.Y36(E.F0),t.Y36(v.K),t.Y36(d.R),t.Y36(l.Y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["medisy-laboratory-analysis"]],features:[t._Bn([v.K,d.R,l.Y])],decls:9,vars:4,consts:[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["end","",3,"menu"],[1,"sz-grid-card"],[3,"card",4,"ngFor","ngForOf"],[3,"card"]],template:function(a,i){1&a&&(t.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),t._uU(3),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.qZA()(),t._UZ(6,"sz-ui-menu",3),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,U,1,1,"sz-ui-card",5),t.qZA()),2&a&&(t.xp6(3),t.Oqu(i.analysis.code),t.xp6(2),t.Oqu(i.analysis.note),t.xp6(1),t.Q6J("menu",i.analysisMenu),t.xp6(2),t.Q6J("ngForOf",i.tiles))},dependencies:[m.sg,I.z,R.X,S.i],encapsulation:2}),e})()},{path:"tests",loadComponent:()=>Promise.resolve().then(s.bind(s,1947)).then(e=>e.AnalysisTestsComponent)},{path:"specimens",loadComponent:()=>s.e(380).then(s.bind(s,2380)).then(e=>e.AnalysisSpecimensComponent)}];var L=s(1947);let Y=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[v.K],imports:[m.ez,E.Bz.forChild(B),y.Is,P.E3,c.Tx,O.Ps,M.ot,C.t,g.n,n.V,S.i,L.AnalysisTestsComponent]}),e})()},1947:(D,p,s)=>{s.r(p),s.d(p,{AnalysisTestsComponent:()=>t});var m=s(8109),M=s(2191),y=s(592),C=s(5738),O=s(5041),c=s(3572),E=s(9598),v=s(8721),P=s(8180),n=s(5879),g=s(8359),S=s(2516);let t=(()=>{class l{constructor(o,r,u){this.route=o,this.analysisService=r,this.laboratoryI18nPipe=u,this.dataSource=new c.b2(E.J.pagedSorted("test.testClass")),this.analysis=this.route.snapshot.data.analysis,this.dataSource.columns=[c.UC.text("test.testclass","Test Class",T=>T.test.testClass.name),c.UC.text("test.state","State",T=>u.transform(T.test.state)),M.h.menu([])],this.get()}get(){this.analysisService.tests.get(this.analysis.id,this.dataSource.filterModel).pipe((0,v.sU)(this.dataSource.indicator)).pipe((0,P.q)(1)).subscribe(o=>{this.dataSource.set(o.items,o.count)})}}return l.\u0275fac=function(o){return new(o||l)(n.Y36(m.gz),n.Y36(C.K),n.Y36(y.M))},l.\u0275cmp=n.Xpm({type:l,selectors:[["medisy-laboratory-analysis-tests"]],standalone:!0,features:[n._Bn([C.K,y.M]),n.jDz],decls:7,vars:4,consts:function(){let d;return d="Tests",[["start",""],[1,"sz-h5"],d,["routerLink","../",1,"tw-underline","tw-text-sm"],[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(o,r){1&o&&(n.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),n.SDv(3,2),n.qZA(),n.TgZ(4,"a",3),n._uU(5),n.qZA()()(),n.TgZ(6,"sz-ui-table",4),n.NdJ("update",function(){return r.get()}),n.qZA()),2&o&&(n.xp6(5),n.Oqu(r.analysis.code),n.xp6(1),n.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",r.dataSource))},dependencies:[m.Bz,m.rH,c.Vn,g.K,O.n,S.z],encapsulation:2}),l})()}}]);