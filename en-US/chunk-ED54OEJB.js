import{a as Te}from"./chunk-OTPK4MCI.js";import{a as l}from"./chunk-REOG2CV6.js";import{a as g}from"./chunk-7W4DPCX5.js";import{a as d,c as ge,e as Ne,i as Me,j as Q}from"./chunk-OX75U6S7.js";import"./chunk-YSNB3P37.js";import"./chunk-M6VFFTL7.js";import"./chunk-2DOHZQYD.js";import{b as Ee,f as j,g as k,h as q,j as Oe,k as N}from"./chunk-JDBQ45YP.js";import{a as w}from"./chunk-ZGUTF2MC.js";import{e as Ce,j as S,k as Y}from"./chunk-53DZ6NLX.js";import{a as b,b as U,d as V,e as F,g as O}from"./chunk-7B3GMYBR.js";import{c as ue,o as Se,p as _e,q as ce,r as X,s as fe,t as H}from"./chunk-NKLFXX3X.js";import{b as B}from"./chunk-VPIQ5RG6.js";import"./chunk-PYOUUVMA.js";import"./chunk-ODIMT2GD.js";import"./chunk-NBE6QGAD.js";import"./chunk-IT3CNXEP.js";import{d as f,f as R,g as v,l as A,n as I,q as y,r as P,u as z}from"./chunk-QZRJHJEV.js";import{Y as M,r as le,t as de}from"./chunk-4QPQ7IQ3.js";import{a as D,c as G,d as L}from"./chunk-WMCOMOML.js";import"./chunk-V2COJPJH.js";import{ia as pe,la as $}from"./chunk-H2OL5IOU.js";import"./chunk-CYOOLWM5.js";import{Cc as me,Gb as ie,Hb as re,Ia as te,Ib as ne,Jb as p,Kb as u,Lb as m,Wb as ae,bb as s,ea as x,gc as se,ja as n,kb as oe,mb as h,mc as c,na as _,nc as E,oa as ee,yb as a}from"./chunk-6EDHPT3A.js";import"./chunk-NLUW4JS2.js";var K=(()=>{let o=class o extends j{constructor(){let t=n(b);super(t),this.fb=n(P),this.data=n(U),this.cstnService=n(l),this.orderPositions=[1,2,3,4,5,6,7,8,9,10,11,12],this.orderSelectConfig={emptyOption:!0};let i=this.fb;this.dialog=t;let e=this.data;this.form=i.group({name:[e?.teamGroup?.name,[f.required,f.minLength(1)]],description:[e?.teamGroup?.description,[]],orderPosition:[e?.teamGroup?.orderPosition,[]]});}submit(){this.IsValid()&&(this.data.teamGroup?this.save(this.cstnService.teams.groups.update(this.data.teamId,this.data.teamGroup.id,this.form.value)):this.save(this.cstnService.teams.groups.create(this.data.teamId,this.form.value)));}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=_({type:o,selectors:[["sz-constr-groups-save"]],standalone:!0,features:[c([l]),h,E],decls:7,vars:7,consts:()=>{let t;t="Name";let i;i="Description";let e;return e="Order",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",t],["formControlName","description","label",i],["formControlName","orderPosition","label",e,3,"source","config"],[3,"actions"]];},template:function(i,e){i&1&&(m(0,"sz-ui-dialog-header",0),p(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"sz-ui-form-field-select",4),u()(),m(6,"sz-ui-dialog-actions",5)),i&2&&(a("title",e.title)("subtitle",e.subtitle)("alert",e.alert()),s(2),a("formGroup",e.form),s(3),a("source",e.orderPositions)("config",e.orderSelectConfig),s(),a("actions",e.actions));},dependencies:[z,A,R,v,I,y,O,F,N,k,q,H,ue,fe,X],encapsulation:2});let r=o;return r;})();var he=(()=>{let o=class o extends j{constructor(){let t=n(b);super(t),this.fb=n(P),this.data=n(U),this.cstnService=n(l),this.employees=this.cstnService.employees.getAll({orderBy:["name"],filterBehavior:le.Or,filters:de.create().equalIf("id",this.data?.teamEmployee?.employeeId).notAnyIf("teams.teamId",this.data?.teamId).filters()}),this.designations=this.cstnService.designations.getAll({orderBy:["name"]}),this.groups=this.cstnService.teams.groups.getAll(this.data.teamId,{orderBy:["name"]}),this.groupSelectConfig={emptyOption:!0};let i=this.fb;this.dialog=t;let e=this.data;this.form=i.group({employeeId:[e?.teamEmployee?.employeeId,[f.required]],designationId:[e?.teamEmployee?.designationId,[f.required]],groupId:[e?.teamEmployee?.groupId,[]],isGroupLeader:[e?.teamEmployee?.isGroupLeader??!1,[f.required]],startDate:[e?.teamEmployee?.startDate??new Date(),[]],endDate:[e?.teamEmployee?.endDate,[]]});}submit(){this.IsValid()&&(this.data?.teamEmployee?this.save(this.cstnService.teams.employees.update(this.data.teamId,this.data.teamEmployee.id,this.form.value)):this.save(this.cstnService.teams.employees.create(this.data.teamId,this.form.value)));}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=_({type:o,selectors:[["sz-constr-construction-zones-units-save"]],standalone:!0,features:[c([]),h,E],decls:12,vars:9,consts:()=>{let t;t="Employee";let i;i="Designation";let e;e="Group";let C;C="Start Date";let Z;return Z="End Date",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","employeeId","label",t,3,"source"],["formControlName","designationId","label",i,3,"source"],["formControlName","groupId","label",e,3,"source","config"],["formControlName","isGroupLeader"],[1,"sz-form-row"],["formControlName","startDate","label",C],["formControlName","endDate","label",Z],[3,"actions"]];},template:function(i,e){i&1&&(m(0,"sz-ui-dialog-header",0),p(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3)(5,"sz-ui-form-field-select",4),p(6,"mat-checkbox",5),se(7,"Group Leader"),u(),p(8,"div",6),m(9,"sz-ui-form-field-date",7)(10,"sz-ui-form-field-date",8),u()()(),m(11,"sz-ui-dialog-actions",9)),i&2&&(a("title",e.title)("subtitle",e.subtitle)("alert",e.alert()),s(2),a("formGroup",e.form),s(),a("source",e.employees),s(),a("source",e.designations),s(),a("source",e.groups)("config",e.groupSelectConfig),s(6),a("actions",e.actions));},dependencies:[z,A,R,v,I,y,O,F,ce,_e,N,k,q,H,Se,X],encapsulation:2});let r=o;return r;})();var W=(()=>{let o=class o{constructor(){this.route=n(D),this.router=n(G),this.dialog=n(V),this.locale=n(me),this.cstnService=n(l),this.team=te.required(),this.dataSource=new ge(["group.orderPosition"]),this.card={header:{title:M.employees},menu:Y.more([S.add(this.openSaveComponent.bind(this)),S.divider(),S.addGroup(()=>this.openGroupSaveComponent())])},this.dataSource.columnDefs.push(d.uuid("id"),d.icon("group.orderPosition").setHeaderName(M.group).setHeaderSortable(!0).setStyleSmall().setValueTooltip(t=>t.group&&t.isGroupLeader?M.group_leader:"").setValueGetter(t=>t.group&&t.isGroupLeader?Ce.supervisor_account:"").setResponsive(!0),d.string("employee.name").setStacked(d.string("designation.name").setValueClassFontSmall()),d.string("employee.primaryPhone").setResponsive(!0),d.date("startDate").setVisible(!1),d.date("endDate").setVisible(!1),d.date("createdAt").setVisible(!1),d.date("updatedAt").setVisible(!1),d.menu([S.edit(this.openSaveComponent.bind(this)),S.divider(),S.delete(this.openDeleteComponent.bind(this))])),this.dataSource.groupDefs={key:"groupId",name:M.test_group,columnDefs:[d.string("group.name").setValueGetter(t=>t.group?.name??"")]};}ngOnInit(){this.get();}openGroupSaveComponent(t){this.dialog.open(K,{data:{teamId:this.team().id,group:t}}).afterClosed().subscribe(i=>{});}openSaveComponent(t){this.dialog.open(he,{data:{teamId:this.team().id,teamEmployee:t}}).afterClosed().subscribe(i=>{this.dataSource.addOrUpdateItem(i);});}openDeleteComponent(t){this.dialog.open(Oe,{data:Ee.delete(this.cstnService.teams.employees.delete(this.team().id,t.id),t)}).afterClosed().subscribe(i=>{this.dataSource.delete(i);});}get(){this.cstnService.teams.employees.get(this.team().id,this.dataSource.getQuery()).pipe(Ne(this.dataSource.state)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=_({type:o,selectors:[["sz-constr-construction-team-employees-groups"]],inputs:{team:[1,"team"]},standalone:!0,features:[c([l]),E],decls:2,vars:2,consts:[[3,"card"],["content","",3,"update","dataSource"]],template:function(i,e){i&1&&(p(0,"sz-ui-card",0)(1,"sz-ui-table",1),ae("update",function(){return e.get();}),u()()),i&2&&(a("card",e.card),s(),a("dataSource",e.dataSource));},dependencies:[L,Q,Me,$,g],encapsulation:2});let r=o;return r;})();function Ge(r,o){if(r&1&&m(0,"sz-ui-card",3),r&2){let ve=o.$implicit;a("card",ve);}}var Re=(()=>{let o=class o{constructor(){this.cstnService=n(l),this.router=n(G),this.route=n(D),this.dialog=n(V),this.team=this.route.snapshot.data.team,this.alert=oe(void 0),this.cards=[],this.appBarConfig={title:this.team.name,menu:Y.default().setItems([S.menu([S.edit(this.openSaveComponent.bind(this))])])};}openSaveComponent(){this.dialog.open(Te,{data:this.team}).afterClosed().subscribe(t=>{t&&(this.team=t);});}openGroupSaveComponent(){this.dialog.open(K,{data:{teamId:this.team.id}}).afterClosed().subscribe(t=>{});}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=_({type:o,selectors:[["sz-constr-construction-team"]],features:[c([])],decls:8,vars:3,consts:[[3,"config"],[3,"alert"],[1,"sz-grid-card"],[3,"card"],[1,"tw-my-4"],[3,"team"]],template:function(i,e){i&1&&(m(0,"sz-ui-app-bar",0)(1,"sz-ui-alert",1),p(2,"div",2),re(3,Ge,1,1,"sz-ui-card",3,ie),u(),p(5,"div",4),m(6,"sz-constr-construction-team-employees-groups",5),u(),m(7,"div",4)),i&2&&(a("config",e.appBarConfig),s(),a("alert",e.alert()),s(2),ne(e.cards),s(3),a("team",e.team));},dependencies:[B,w,g,W],encapsulation:2});let r=o;return r;})();var wt=(()=>{let o=class o{};o.ɵfac=function(i){return new(i||o)();},o.ɵmod=ee({type:o}),o.ɵinj=x({providers:[l],imports:[L.forChild([{path:"",component:Re}]),O,pe,$,B,Q,N,w,g,W]});let r=o;return r;})();export{wt as TeamModule};/**i18n:71c33448fc84035c6ee56f25f20b16a3c311d1f911de884d4bce9857c4574a16*/