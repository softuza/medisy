"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[961],{1961:(y,E,o)=>{o.r(E),o.d(E,{PersonPhonesComponent:()=>R});var u=o(2296),P=o(8109),h=o(8262),m=o(9060),S=o(9899),O=o(5041),l=o(3572),N=o(9598),f=o(8721),d=o(8180),i=o(6223),p=o(7700),M=o(7680),_=o(1101),C=o(5781),e=o(5879),c=o(2393),g=o(4622),T=o(6091),v=o(5974),A=o(8873);let I=(()=>{class r extends S.Ku{constructor(n,s,t,a){super(t),this.mpplService=n,this.fb=s,this.dialog=t,this.data=a,this.form=s.group({value:[a?.personPhone?.value,[i.kI.required]],description:[a?.personPhone?.description,[]],phoneType:[a?.personPhone?.phoneType??_.z.Mobile,[i.kI.required]]})}submit(){this.IsValid()&&this.save(this.data.personPhone?this.mpplService.persons.phones.update(this.data.personId,this.data.personPhone.id,this.form.value):this.mpplService.persons.phones.create(this.data.personId,this.form.value))}static#e=this.\u0275fac=function(s){return new(s||r)(e.Y36(c.i),e.Y36(i.qu),e.Y36(p.so),e.Y36(p.WI))};static#o=this.\u0275cmp=e.Xpm({type:r,selectors:[["medisy-people-person-phones-save"]],standalone:!0,features:[e.qOj,e.jDz],decls:7,vars:3,consts:function(){let n,s;return n="Description",s="Number",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","description","label",n],["formControlName","value","label",s],["formControlName","phoneType"],[3,"actions"]]},template:function(s,t){1&s&&(e._UZ(0,"sz-ui-dialog-header",0),e.TgZ(1,"mat-dialog-content")(2,"form",1),e._UZ(3,"sz-ui-form-field-textarea",2)(4,"sz-ui-form-field-input",3)(5,"medisy-form-field-phone-type",4),e.qZA()(),e._UZ(6,"sz-ui-dialog-actions",5)),2&s&&(e.Q6J("header",t.header),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("actions",t.actions))},dependencies:[i.UX,i._Y,i.JJ,i.JL,i.sg,i.u,p.Is,p.xY,S.su,g.Y,T.t,C.g2,v.g,A.L,M.I],encapsulation:2})}return r})();var D=o(2516),L=o(8359),Y=o(3144);let R=(()=>{class r{constructor(n,s,t){this.dialog=n,this.mpplService=s,this.route=t,this.dataSource=new l.b2(N.J.paged()),this.person=this.route.snapshot.data.person,this.dataSource.columns=[l.UC.text("value","Phone"),h.h.createdAt(),h.h.menu([l.od.edit(a=>this.openSaveComponent(a)),l.od.delete(a=>this.openPersonPhoneDeleteComponent(a))])],this.get()}openSaveComponent(n){this.dialog.open(I,{data:{personId:this.person.id,personPhone:n}}).afterClosed().pipe((0,d.q)(1)).subscribe(t=>{this.dataSource.updateOrPushItem(t)})}openPersonPhoneDeleteComponent(n){this.dialog.open(S.fN,{data:S.cb.delete(this.mpplService.persons.phones.delete(n.personId,n.id),n)}).afterClosed().pipe((0,d.q)(1)).subscribe(t=>{this.dataSource.delete(t)})}get(){this.mpplService.persons.phones.get(this.person.id,this.dataSource.filterModel).pipe((0,f.sU)(this.dataSource.indicator),(0,d.q)(1)).subscribe(n=>{this.dataSource.set(n.items,n.count)})}static#e=this.\u0275fac=function(s){return new(s||r)(e.Y36(p.uw),e.Y36(c.i),e.Y36(P.gz))};static#o=this.\u0275cmp=e.Xpm({type:r,selectors:[["medisy-people-person-phones"]],standalone:!0,features:[e.jDz],decls:12,vars:7,consts:function(){let n,s;return n="Phones",s="Add",[["start",""],[1,"sz-h5"],n,["routerLink","../",1,"tw-underline"],[3,"dataSource","search"],["title","","mat-flat-button","","color","primary","start","",3,"click"],s,[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(s,t){1&s&&(e.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),e.SDv(3,2),e.qZA(),e.TgZ(4,"a",3),e._uU(5),e.ALo(6,"personName"),e.qZA()()(),e.TgZ(7,"sz-ui-table-filter",4),e.NdJ("search",function(){return t.get()}),e.TgZ(8,"button",5),e.NdJ("click",function(){return t.openSaveComponent()}),e.TgZ(9,"span"),e.SDv(10,6),e.qZA()()(),e.TgZ(11,"sz-ui-table",7),e.NdJ("update",function(){return t.get()}),e.qZA()),2&s&&(e.xp6(5),e.Oqu(e.lcZ(6,5,t.person)),e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(4),e.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",t.dataSource))},dependencies:[P.Bz,P.rH,u.ot,u.lW,O.n,D.z,l.Vn,L.K,Y.f,m.Y],encapsulation:2})}return r})()}}]);