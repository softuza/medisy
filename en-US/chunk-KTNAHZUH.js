import{a as X}from"./chunk-NCQTFOTT.js";import{a as u}from"./chunk-4DEPVHVX.js";import{e as G,g as j,h as q,k as H}from"./chunk-6Y6J7VB6.js";import{a as R,b as Y,e as z,g as B}from"./chunk-EJOHO2EB.js";import{j as P,r as V,t as $}from"./chunk-YZKNUD65.js";import{c as T}from"./chunk-TL57E7RA.js";import{d,f as O,g as h,l as L,n as C,q as M,r as N,u as F}from"./chunk-MGV73Q32.js";import{t as v}from"./chunk-I7PR7JM4.js";import{Fb as A,Kb as E,Lb as g,Mb as m,Zb as b,bb as n,cb as l,na as y,oc as I,pc as D,qb as S,vb as c,zb as s}from"./chunk-UELVXDXK.js";import{a as f,b as p}from"./chunk-2GMD7R3L.js";function W(a,i){if(a&1&&m(0,"sz-ui-form-field-select",3),a&2){let _=b();s("source",_.laboratories)("config",_.transferOutLaboratorySelectConfig);}}var de=(()=>{let i=class i extends G{constructor(r,o,t,w){super(o),this.fb=r,this.dialog=o,this.mlabService=t,this.data=w,this.laboratories=null,this.laboratoryOptionValueFn=e=>e,this.testTypesFilters=[],this.laboratoryId=this.data,this.transferOutLaboratorySelectConfig={emptyOption:!0},this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,p(f({query:""},T.minimal()),{orderBy:["-isFavorite","testType.nameEn"]})),this.testTypeAutocompleteConfig={valueChangedFn:e=>{if(typeof e=="string")this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,p(f({query:e},T.minimal()),{orderBy:["-isFavorite","testType.nameEn"]}));else if(typeof e=="object"&&e)return!1;return!0;},optionSelectedFn:e=>{this.form.patchValue({transferOutLaboratoryId:null}),e.transferOutLaboratoryId?this.form.controls.transferOutLaboratoryId.addValidators(d.required):this.form.controls.transferOutLaboratoryId.removeValidators(d.required),e.transferOutEnabled&&(this.laboratories=this.mlabService.laboratories.getAll({orderBy:["name"],filters:v.create().notEqual("id",this.data).equalIf("id",e.transferOutLaboratoryId).any("testTypes.testTypeId",e.testTypeId).any("testTypes.enabled",!0).any("testTypes.transferInEnabled",!0).filters()}));},optionValueFn:e=>e,optionContentFn:e=>e.testType.nameEn,optionDisplayWithFn:e=>e.testType.nameEn},this.form=r.group({transferOutLaboratoryId:[null,[]],testType:r.control(null,[d.required,X()])});}isTranferOutEnabled(){return this.form.value?.testType?.transferOutEnabled;}submit(){this.IsValid()&&this.dialog.close({laboratoryTestType:this.form.value.testType,transferOutLaboratoryId:this.form.getRawValue().transferOutLaboratoryId});}};i.ɵfac=function(o){return new(o||i)(l(N),l(R),l(u),l(Y));},i.ɵcmp=y({type:i,selectors:[["sz-medisy-laboratory-analysis-test-type-add"]],standalone:!0,features:[I([u]),S,D],decls:6,vars:8,consts:()=>{let r;r="Test Type";let o;return o="Transfer Out Laboratory",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testType","label",r,3,"source","config"],["formControlName","transferOutLaboratoryId","label",o,3,"source","config"],[3,"actions"]];},template:function(o,t){o&1&&(m(0,"sz-ui-dialog-header",0),E(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-autocomplete",2),c(4,W,1,2,"sz-ui-form-field-select",3),g()(),m(5,"sz-ui-dialog-actions",4)),o&2&&(s("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),n(2),s("formGroup",t.form),n(),s("source",t.testTypes)("config",t.testTypeAutocompleteConfig),n(),A(t.isTranferOutEnabled()?4:-1),n(),s("actions",t.actions));},dependencies:[F,L,O,h,C,M,B,z,H,j,q,$,V,P],encapsulation:2});let a=i;return a;})();export{de as a};/**i18n:fe59e4cec730fb22fcad5443103077b4b8cf7932d5cc1616a4c03edd493e1605*/