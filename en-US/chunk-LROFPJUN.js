import{a as ae}from"./chunk-2DXNLB3U.js";import"./chunk-BAVP4TXU.js";import{a as P}from"./chunk-AGIV3H7X.js";import{b as T,c as Z,e as ee,g as te,h as oe,i as E,s as re,t as ie}from"./chunk-VUMSGYE7.js";import{c as w,h as x,i as H,j as J,l as K,m as Q,n as W}from"./chunk-SYMUEBIF.js";import{a as U,b as V,d as k,e as j,g as X}from"./chunk-RY32KYW7.js";import{y as $}from"./chunk-DXSUKRZ3.js";import{d as c,g,h as y,l as v,n as I,o as G,p as D,s as L}from"./chunk-4NL6MOY5.js";import{a as m}from"./chunk-FW7JEP5X.js";import{a as b}from"./chunk-5ZFALIMN.js";import{b as q}from"./chunk-5W7PZILH.js";import"./chunk-XP7I6OF6.js";import{a as Y,e as z}from"./chunk-IF5LYGUI.js";import{i as C}from"./chunk-3LHHJK2J.js";import"./chunk-QFXGLSXE.js";import"./chunk-MZZLEOGC.js";import{Pa as F,Ra as B}from"./chunk-HMJ5RFBC.js";import{Bb as l,Cb as p,Db as _,L as u,Nb as S,Pb as M,ac as O,bc as h,cb as d,cc as N,db as n,kb as R,la as f,nb as s}from"./chunk-VTJ4Z7TN.js";var _e=()=>[],me=a=>[a],ne=(()=>{let i=class i extends x{constructor(e,t,r,o){super(r),this.mlabService=e,this.fb=t,this.dialog=r,this.data=o,this.form=t.group({enabled:[o.laboratoryTestGroup?.enabled??!0,[c.required]],price:[o.laboratoryTestGroup?.price??0,[c.required]],isFavorite:[o.laboratoryTestGroup?.isFavorite??!1,[c.required]],testGroupId:[o.laboratoryTestGroup?.testGroupId,[c.required]]});}submit(){this.IsValid()&&(this.data.laboratoryTestGroup?this.save(this.mlabService.laboratories.testGroups.update(this.data.laboratoryId,this.data.laboratoryTestGroup?.id,this.form.value)):this.save(this.mlabService.laboratories.testGroups.create(this.data.laboratoryId,this.form.value)));}};i.ɵfac=function(t){return new(t||i)(n(b),n(D),n(U),n(V));},i.ɵcmp=f({type:i,selectors:[["medisy-laboratory-test-groups-save"]],standalone:!0,features:[R,O],decls:10,vars:7,consts:()=>{let e;e="Price";let t;t="Favorite";let r;return r="Enabled",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","testGroupId",3,"excludeLaboratoryIds"],["formControlName","price","label",e],["formControlName","isFavorite"],t,["formControlName","enabled"],r,[3,"actions"]];},template:function(t,r){t&1&&(_(0,"sz-ui-dialog-header",0),l(1,"mat-dialog-content")(2,"form",1),_(3,"medisy-form-field-test-group-select",2)(4,"sz-ui-form-field-input",3),l(5,"mat-checkbox",4),S(6,5),p(),l(7,"mat-checkbox",6),S(8,7),p()()(),_(9,"sz-ui-dialog-actions",8)),t&2&&(s("header",r.header),d(2),s("formGroup",r.form),d(1),s("excludeLaboratoryIds",r.data.laboratoryTestGroup?h(4,_e):N(5,me,r.data.laboratoryId)),d(6),s("actions",r.actions));},dependencies:[L,v,g,y,I,G,Q,H,J,X,j,E,oe,ae,$],encapsulation:2});let a=i;return a;})();var xe=(()=>{let i=class i{constructor(e,t,r){this.dialog=e,this.mlabService=t,this.route=r,this.title=m.testGroups,this.dataSource=new ee(),this.laboratory=this.route.snapshot.data.laboratory,this.dataSource.addRows(Z.default([T.text("testGroup.name",m.testGroup),T.text("price",m.price),P.createdAt(),T.checkbox("isFavorite",m.favorite,(o,A)=>{o.isFavorite=A,this.updateItem(o);}),T.checkbox("enabled",m.enabled,(o,A)=>{o.enabled=A,this.mlabService.laboratories.testGroups.update(o.laboratoryId,o.id,o).pipe(u(1)).subscribe(se=>{o=se;});}),P.menu([C.edit(o=>this.openSaveComponent(o)),C.delete(o=>this.openLaboratoryTestGroupDeleteComponent(o))])])),this.get();}openSaveComponent(e){this.dialog.open(ne,{data:{laboratoryId:this.laboratory.id,laboratoryTestGroup:e}}).afterClosed().pipe(u(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openLaboratoryTestGroupDeleteComponent(e){this.dialog.open(K,{data:W.delete(this.mlabService.laboratories.testGroups.delete(e.laboratoryId,e.id),e)}).afterClosed().pipe(u(1)).subscribe(t=>{this.dataSource.delete(t);});}updateItem(e){this.mlabService.laboratories.testGroups.update(e.laboratoryId,e.id,e).subscribe(t=>{this.dataSource.update(t);});}get(){this.mlabService.laboratories.testGroups.get(this.laboratory.id,this.dataSource.buildRequest()).pipe(w(this.dataSource.indicator)).pipe(u(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(t){return new(t||i)(n(k),n(b),n(Y));},i.ɵcmp=f({type:i,selectors:[["medisy-laboratory-test-groups"]],standalone:!0,features:[O],decls:6,vars:5,consts:()=>{let e;return e="Add",[[3,"title","subTitle"],[3,"filter","search"],["title","","mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(t,r){t&1&&(_(0,"sz-ui-header-info",0),l(1,"sz-ui-table-filter",1),M("search",function(){return r.get();}),l(2,"button",2),M("click",function(){return r.openSaveComponent();}),l(3,"span"),S(4,3),p()()(),l(5,"sz-ui-table",4),M("update",function(){return r.get();}),p()),t&2&&(s("title",r.title)("subTitle",r.laboratory.name),d(1),s("filter",r.dataSource.filter),d(4),s("stateEnabled",!0)("dataSource",r.dataSource));},dependencies:[z,q,ie,re,te,E,B,F],encapsulation:2});let a=i;return a;})();export{xe as LaboratoryTestGroupsComponent};/**i18n:58cd3b8848ac5782a36a96a60f590b5398c328b80f04dbb1677d4c0de37b393f*/