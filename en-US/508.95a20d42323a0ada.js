"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[508],{7508:(V,g,n)=>{n.r(g),n.d(g,{ReferenceValueModule:()=>ne});var u=n(6814),e=n(6223),f=n(2296),d=n(5986),c=n(7700),o=n(617),S=n(7988),R=n(8525),N=n(8109),P=n(6987),I=n(758),C=n(2595),M=n(2169),m=n(3576),O=n(5041),z=n(7239),v=n(3572),y=n(8645),t=n(5879),x=n(2516),F=n(2191),L=n(592),Z=n(9598),l=n(8721),E=n(8180),i=n(7263),T=n(6893),Y=n(8930);let U=(()=>{class s extends T.m{constructor(r,a){super(r),this.ngControl=r,this.laboratoryI18nPipe=a,this.items=Object.keys(i.v).map(p=>i.v[p]),this.label="Comparison Operator",this.contentFormat=p=>this.laboratoryI18nPipe.transform(p)}ngOnInit(){this.control=this.ngControl.control}}return s.\u0275fac=function(r){return new(r||s)(t.Y36(e.a5,10),t.Y36(L.M))},s.\u0275cmp=t.Xpm({type:s,selectors:[["medisy-form-field-comparison-operator"]],standalone:!0,features:[t._Bn([L.M]),t.qOj,t.jDz],decls:1,vars:7,consts:[[3,"formControl","items","label","placeholder","emptyOption","multiple","contentFn"]],template:function(r,a){1&r&&t._UZ(0,"sz-ui-form-field-select",0),2&r&&t.Q6J("formControl",a.control)("items",a.items)("label",a.label)("placeholder",a.placeholder)("emptyOption",a.emptyOption)("multiple",a.multiple)("contentFn",a.contentFormat)},dependencies:[e.UX,e.JJ,e.oH,Y.E],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]}),s})();var D=n(884),G=n(6187),J=n(4622),$=n(6091);let b=(()=>{class s extends m.Z2{constructor(r,a,p){super(a),this.fb=r,this.dialog=a,this.data=p,this.form=r.group({referenceGroupId:[p.referenceGroupId],comparisonOperator:[p.comparisonOperator]})}submit(){this.IsValid()&&this.dialog.close(this.form.value)}}return s.\u0275fac=function(r){return new(r||s)(t.Y36(e.qu),t.Y36(c.so),t.Y36(c.WI))},s.\u0275cmp=t.Xpm({type:s,selectors:[["medisy-laboratory-reference-value-rules-filter"]],standalone:!0,features:[t._Bn([G.T]),t.qOj,t.jDz],decls:6,vars:5,consts:[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","comparisonOperator",3,"emptyOption"],["formControlName","referenceGroupId",3,"emptyOption"],[3,"actions"]],template:function(r,a){1&r&&(t._UZ(0,"sz-ui-dialog-header",0),t.TgZ(1,"mat-dialog-content")(2,"form",1),t._UZ(3,"medisy-form-field-comparison-operator",2)(4,"medisy-form-field-reference-group",3),t.qZA()(),t._UZ(5,"sz-ui-dialog-actions",4)),2&r&&(t.Q6J("header",a.header),t.xp6(2),t.Q6J("formGroup",a.form),t.xp6(1),t.Q6J("emptyOption",!0),t.xp6(1),t.Q6J("emptyOption",!0),t.xp6(1),t.Q6J("actions",a.actions))},dependencies:[u.ez,e.UX,e._Y,e.JJ,e.JL,e.sg,e.u,c.Is,c.xY,d.p9,m.su,J.Y,$.t,D.P,U],encapsulation:2}),s})();var B=n(9157),X=n(2032),j=n(9004),Q=n(8380),W=n(8873);function K(s,_){1&s&&(t.TgZ(0,"div",8)(1,"mat-form-field",9)(2,"label"),t._UZ(3,"input",10),t.qZA()(),t.TgZ(4,"mat-form-field",9)(5,"label"),t._UZ(6,"input",11),t.qZA()()())}function H(s,_){1&s&&(t.TgZ(0,"mat-form-field",9)(1,"label"),t._UZ(2,"input",12),t.qZA()())}let w=(()=>{class s extends m.Ku{constructor(r,a,p,h){super(p),this.referenceValueService=r,this.fb=a,this.dialog=p,this.data=h,this.form=a.group({description:[h.referenceValueRule?.description,[e.kI.maxLength(4096)]],comparisonOperator:[h.referenceValueRule?.comparisonOperator??i.v.Equal,[e.kI.required]],referenceGroupId:[h.referenceValueRule?.referenceGroupId,[e.kI.required]],value:[h.referenceValueRule?.value,[]],start:[h.referenceValueRule?.start,[]],end:[h.referenceValueRule?.end,[]]})}isRange(){return this.form.value.comparisonOperator===i.v.RangeWithBoundaries||this.form.value.comparisonOperator===i.v.RangeWithoutBoundaries}submit(){this.IsValid()&&this.save(this.data.referenceValueRule?this.referenceValueService.updateRule(this.data.referenceValueId,this.data.referenceValueRule.id,this.form.value):this.referenceValueService.createRule(this.data.referenceValueId,this.form.value))}}return s.\u0275fac=function(r){return new(r||s)(t.Y36(Q.U),t.Y36(e.qu),t.Y36(c.so),t.Y36(c.WI))},s.\u0275cmp=t.Xpm({type:s,selectors:[["medisy-laboratory-reference-value-rules-save"]],standalone:!0,features:[t._Bn([P.C]),t.qOj,t.jDz],decls:9,vars:5,consts:function(){let _,r,a,p;return _="Description",r="Start",a="End",p="Value",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","description","label",_],["formControlName","comparisonOperator"],["class","tw-flex md:tw-flex-row tw-flex-col md:tw-gap-4",4,"ngIf"],["class","tw-flex-1",4,"ngIf"],["formControlName","referenceGroupId"],[3,"actions"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["autocomplete","off","formControlName","start","matInput","","placeholder",r],["autocomplete","off","formControlName","end","matInput","","placeholder",a],["autocomplete","off","formControlName","value","matInput","","placeholder",p]]},template:function(r,a){1&r&&(t._UZ(0,"sz-ui-dialog-header",0),t.TgZ(1,"mat-dialog-content")(2,"form",1),t._UZ(3,"sz-ui-form-field-textarea",2)(4,"medisy-form-field-comparison-operator",3),t.YNc(5,K,7,0,"div",4),t.YNc(6,H,3,0,"mat-form-field",5),t._UZ(7,"medisy-form-field-reference-group",6),t.qZA()(),t._UZ(8,"sz-ui-dialog-actions",7)),2&r&&(t.Q6J("header",a.header),t.xp6(2),t.Q6J("formGroup",a.form),t.xp6(3),t.Q6J("ngIf",a.isRange()),t.xp6(1),t.Q6J("ngIf",!a.isRange()),t.xp6(2),t.Q6J("actions",a.actions))},dependencies:[u.ez,u.O5,e.UX,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,X.c,X.Nt,B.KE,c.Is,c.xY,B.lN,d.p9,m.su,J.Y,$.t,j.g,W.L,D.P,U],encapsulation:2}),s})();var q=n(8359),k=n(3144);let ee=(()=>{class s{constructor(r,a,p,h){this.dialog=r,this.route=a,this.referenceValueService=p,this.comparisonOperatorI18nPipe=h,this.dataSource=new v.b2(Z.J.paged()),this.referenceValue=this.route.snapshot.data.referenceValue,this.dataSource.columns=[v.UC.text("referenceGroup","Reference group",A=>A.referenceGroup.name),F.h.comparisonOperator(A=>h.transform(A.comparisonOperator)),v.UC.text("value","Value",A=>A.value?A.value:`${A.start} - ${A.end}`),F.h.createdAt(),F.h.menu([v.od.edit(A=>this.openSaveComponent(A)),v.od.delete(A=>{this.openReferenceValueRuleDeleteComponent(A)})])],this.get()}openSaveComponent(r){this.dialog.open(w,{data:{referenceValueId:this.referenceValue.id,referenceValueRule:r}}).afterClosed().pipe((0,E.q)(1)).subscribe(p=>{this.dataSource.updateOrPushItem(p)})}openFilterComponent(){this.dialog.open(b,{data:this.dataSource.filterModel}).afterClosed().pipe((0,E.q)(1)).subscribe(a=>{this.dataSource.updateFilterModel(a),this.get()})}openReferenceValueRuleDeleteComponent(r){this.dialog.open(m.fN,{data:m.cb.delete(this.referenceValueService.deleteRule(r.referenceValueId,r.id),r)}).afterClosed().pipe((0,E.q)(1)).subscribe(p=>{this.dataSource.delete(p)})}get(){this.referenceValueService.getRules(this.referenceValue.id,this.dataSource.filterModel).pipe((0,l.sU)(this.dataSource.indicator),(0,E.q)(1)).subscribe(r=>{this.dataSource.set(r.items,r.count)})}}return s.\u0275fac=function(r){return new(r||s)(t.Y36(c.uw),t.Y36(N.gz),t.Y36(Q.U),t.Y36(L.M))},s.\u0275cmp=t.Xpm({type:s,selectors:[["medisy-laboratory-reference-value-rules"]],features:[t._Bn([L.M])],decls:5,vars:4,consts:function(){let _;return _="Add",[[3,"dataSource","search","filter"],["mat-flat-button","","color","primary","start","",3,"click"],_,[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(r,a){1&r&&(t.TgZ(0,"sz-ui-table-filter",0),t.NdJ("search",function(){return a.get()})("filter",function(){return a.openFilterComponent()}),t.TgZ(1,"button",1),t.NdJ("click",function(){return a.openSaveComponent()}),t.TgZ(2,"span"),t.SDv(3,2),t.qZA()()(),t.TgZ(4,"sz-ui-table",3),t.NdJ("update",function(){return a.get()}),t.qZA()),2&r&&(t.Q6J("dataSource",a.dataSource),t.xp6(4),t.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",a.dataSource))},dependencies:[f.lW,q.K,k.f],encapsulation:2}),s})();const te=[{path:"",component:(()=>{class s{constructor(r,a){this.dialog=r,this.route=a,this.alert$=new y.x,this.referenceValue=this.route.snapshot.data.referenceValue}}return s.\u0275fac=function(r){return new(r||s)(t.Y36(c.uw),t.Y36(N.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["medisy-laboratory-reference-value"]],features:[t._Bn([])],decls:10,vars:2,consts:[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["mat-icon-button","","routerLink","../","end",""]],template:function(r,a){1&r&&(t.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),t._uU(3),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.qZA()(),t.TgZ(6,"button",3)(7,"mat-icon"),t._uU(8,"arrow_back"),t.qZA()()(),t._UZ(9,"medisy-laboratory-reference-value-rules")),2&r&&(t.xp6(3),t.Oqu(a.referenceValue.testClass.name),t.xp6(2),t.Oqu(a.referenceValue.description))},dependencies:[N.rH,o.Hw,f.RK,x.z,ee],encapsulation:2}),s})()}];let ne=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[P.C],imports:[u.ez,e.u5,N.Bz.forChild(te),c.Is,d.p9,S.Tx,o.Ps,f.ot,R.LD,I.E3,v.Vn,M.c,C.V,z.h,m.su,O.n]}),s})()},2595:(V,g,n)=>{n.d(g,{V:()=>f});var u=n(6128),e=n(5879);let f=(()=>{class d{}return d.\u0275fac=function(o){return new(o||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[u.X]}),d})()},6128:(V,g,n)=>{n.d(g,{X:()=>Z});var u=n(6814),e=n(5879),f=n(5195),d=n(6385),c=n(617),o=n(6007),S=n(2169);let R=(()=>{class l{hasIcon(){return void 0!==this.icon}getIcon(){return"string"==typeof this.icon?this.icon:this.icon?.name}getClass(){return"string"==typeof this.icon||void 0===this.icon?.class?"material-symbols-outlined":this.icon?.class}}return l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["sz-ui-icon"]],inputs:{icon:"icon"},standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[[3,"className"]],template:function(i,T){1&i&&(e.TgZ(0,"span",0),e._uU(1),e.qZA()),2&i&&(e.Q6J("className",T.getClass()),e.uIk("data-icon",T.getIcon()),e.xp6(1),e.Oqu(T.getIcon()))},dependencies:[u.ez],styles:[".material-icons[_ngcontent-%COMP%]:after, .fas[_ngcontent-%COMP%]:after{content:attr(data-icon)}"]}),l})(),N=(()=>{class l{}return l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[R]}),l})();var P=n(2430),I=n(8145);function C(l,E){if(1&l&&(e.ynx(0),e._UZ(1,"sz-ui-counter",8),e.BQk()),2&l){const i=e.oxw();e.xp6(1),e.Q6J("value",i.getValue())}}function M(l,E){if(1&l&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&l){const i=e.oxw(2);e.xp6(1),e.hij(" ",i.card.title," ")}}function m(l,E){1&l&&e.Hsn(0,2)}function O(l,E){if(1&l&&(e.ynx(0),e.YNc(1,M,2,1,"div",9),e.YNc(2,m,1,0,"ng-template",null,10,e.W1O),e.BQk()),2&l){const i=e.MAs(3),T=e.oxw();e.xp6(1),e.Q6J("ngIf",T.card.title)("ngIfElse",i)}}function z(l,E){if(1&l&&e._UZ(0,"sz-ui-icon",11),2&l){const i=e.oxw();e.Q6J("icon",i.card.icon)}}function v(l,E){1&l&&e._UZ(0,"mat-divider")}function y(l,E){if(1&l){const i=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){const U=e.CHM(i).$implicit,D=e.oxw(2);return e.KtG(D.cardActionClick(U))}),e._uU(1),e.qZA()}if(2&l){const i=E.$implicit;e.xp6(1),e.hij(" ",i.title," ")}}function t(l,E){if(1&l&&(e.TgZ(0,"mat-card-actions"),e.YNc(1,y,2,1,"button",12),e.qZA()),2&l){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.card.actions)}}function x(l,E){1&l&&e._UZ(0,"mat-progress-bar",14)}const F=[[["","content",""]],[["","footer",""]],[["","title",""]]],L=["[content]","[footer]","[title]"];let Z=(()=>{class l{constructor(){this.szCardType=P.k,this.indicator=(0,e.tdS)(!1)}getValue(){if(this.card.title&&!isNaN(Number(this.card.title)))return Number(this.card.title)}cardClick(){this.card&&this.card.clickFn&&this.card.clickFn(this.card)}cardActionClick(i){this.card&&i&&i.clickFn&&i?.clickFn()}hasIcon(){return void 0!==this.card.icon}hasActions(){return null!=this.card.actions&&this.card.actions.length>0}}return l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["sz-ui-card"]],inputs:{card:"card",indicator:"indicator"},standalone:!0,features:[e.jDz],ngContentSelectors:L,decls:16,vars:8,consts:[[1,"card"],[2,"cursor","pointer",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"spacer"],[3,"icon",4,"ngIf"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],[3,"value"],[4,"ngIf","ngIfElse"],["titleBlock",""],[3,"icon"],["mat-button","",3,"click",4,"ngFor","ngForOf"],["mat-button","",3,"click"],["mode","indeterminate"]],template:function(i,T){1&i&&(e.F$t(F),e.TgZ(0,"mat-card",0)(1,"mat-card-header",1),e.NdJ("click",function(){return T.cardClick()}),e.TgZ(2,"mat-card-subtitle"),e._uU(3),e.qZA(),e.TgZ(4,"mat-card-title",2),e.YNc(5,C,2,1,"ng-container",3),e.YNc(6,O,4,2,"ng-container",3),e.qZA(),e._UZ(7,"span",4),e.YNc(8,z,1,1,"sz-ui-icon",5),e.qZA(),e.TgZ(9,"mat-card-content"),e.Hsn(10),e.YNc(11,v,1,0,"mat-divider",6),e.YNc(12,t,2,1,"mat-card-actions",6),e.qZA(),e.TgZ(13,"mat-card-footer"),e.Hsn(14,1),e.YNc(15,x,1,0,"mat-progress-bar",7),e.qZA()()),2&i&&(e.xp6(3),e.Oqu(T.card.subtitle),e.xp6(1),e.Q6J("ngSwitch",T.card.type),e.xp6(1),e.Q6J("ngSwitchCase",T.szCardType.Counter),e.xp6(1),e.Q6J("ngSwitchCase",T.szCardType.Text),e.xp6(2),e.Q6J("ngIf",T.hasIcon()),e.xp6(3),e.Q6J("ngIf",T.hasActions()),e.xp6(1),e.Q6J("ngIf",T.hasActions()),e.xp6(3),e.Q6J("ngIf",T.indicator()))},dependencies:[u.ez,u.sg,u.O5,u.RF,u.n9,f.QW,f.a8,f.hq,f.dn,f.rt,f.dk,f.$j,f.n5,c.Ps,d.t,d.d,o.Cv,o.pW,N,R,S.c,I.R],styles:[".material-icons[_ngcontent-%COMP%]:after, .fas[_ngcontent-%COMP%]:after{content:attr(data-icon)}"]}),l})()},2430:(V,g,n)=>{n.d(g,{k:()=>u});var u=(()=>((u=u||{})[u.Counter=0]="Counter",u[u.Text=1]="Text",u))()},8145:(V,g,n)=>{n.d(g,{R:()=>d});var u=n(6814),e=n(5879);const f=["*"];let d=(()=>{class c{constructor(){this.start=0,this.decimal=0,this.duration=800,this.currentValue=0,this.oldValue=0}set value(S){S&&(this.animate(this.oldValue,S),this.oldValue=S)}ngOnDestroy(){this.timer&&clearInterval(this.timer)}animate(S,R){const N=R-S;let I=Math.abs(Math.floor(this.duration/N));I=Math.max(I,50);const M=(new Date).getTime()+this.duration,m=()=>{const O=(new Date).getTime(),z=Math.max((M-O)/this.duration,0),v=Math.round(R-z*N);this.currentValue=v,Math.round(v)===Math.round(R)&&clearInterval(this.timer)};this.timer=setInterval(m,I),m()}}return c.\u0275fac=function(S){return new(S||c)},c.\u0275cmp=e.Xpm({type:c,selectors:[["sz-ui-counter"]],inputs:{value:"value"},standalone:!0,features:[e.jDz],ngContentSelectors:f,decls:3,vars:1,template:function(S,R){1&S&&(e.F$t(),e.TgZ(0,"span"),e._uU(1),e.Hsn(2),e.qZA()),2&S&&(e.xp6(1),e.hij(" ",R.currentValue," "))},dependencies:[u.ez],encapsulation:2}),c})()},2169:(V,g,n)=>{n.d(g,{c:()=>f});var u=n(8145),e=n(5879);let f=(()=>{class d{}return d.\u0275fac=function(o){return new(o||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[u.R]}),d})()},8873:(V,g,n)=>{n.d(g,{L:()=>I});var u=n(6814),e=n(6223),f=n(9157),d=n(2032),c=n(2757),o=n(5879);function S(C,M){if(1&C&&(o.TgZ(0,"mat-label"),o._uU(1),o.qZA()),2&C){const m=o.oxw();o.xp6(1),o.Oqu(m.label)}}function R(C,M){1&C&&(o.TgZ(0,"mat-error"),o.SDv(1,3),o.qZA())}function N(C,M){1&C&&(o.TgZ(0,"mat-error"),o.SDv(1,4),o.qZA())}function P(C,M){1&C&&(o.TgZ(0,"mat-error"),o.SDv(1,5),o.qZA())}let I=(()=>{class C extends c.l{constructor(m){super(m),this.ngControl=m}ngOnInit(){this.control=this.ngControl.control}writeValue(m){this.value=m}}return C.\u0275fac=function(m){return new(m||C)(o.Y36(e.a5,10))},C.\u0275cmp=o.Xpm({type:C,selectors:[["sz-ui-form-field-textarea"]],standalone:!0,features:[o.qOj,o.jDz],decls:7,vars:7,consts:function(){let M,m,O;return M="This field is required",m="This field has insufficient length",O="This field exceeds the maximum length",[[1,"tw-flex-1"],[4,"ngIf"],["matInput","",3,"formControl","value","placeholder"],M,m,O]},template:function(m,O){1&m&&(o.TgZ(0,"mat-form-field",0),o.YNc(1,S,2,1,"mat-label",1),o.TgZ(2,"textarea",2),o._uU(3,"  "),o.qZA(),o.YNc(4,R,2,0,"mat-error",1),o.YNc(5,N,2,0,"mat-error",1),o.YNc(6,P,2,0,"mat-error",1),o.qZA()),2&m&&(o.xp6(1),o.Q6J("ngIf",O.label),o.xp6(1),o.Q6J("formControl",O.control)("value",O.value)("placeholder",O.placeholder),o.xp6(2),o.Q6J("ngIf",O.control.hasError("required")),o.xp6(1),o.Q6J("ngIf",O.control.hasError("minlength")),o.xp6(1),o.Q6J("ngIf",O.control.hasError("maxlength")))},dependencies:[u.ez,u.O5,e.UX,e.Fj,e.JJ,e.oH,f.lN,f.KE,f.hX,f.TO,d.c,d.Nt],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),C})()},9004:(V,g,n)=>{n.d(g,{g:()=>d});var u=n(5974),e=n(8873),f=n(5879);let d=(()=>{class c{}return c.\u0275fac=function(S){return new(S||c)},c.\u0275mod=f.oAB({type:c}),c.\u0275inj=f.cJS({imports:[u.g,e.L]}),c})()}}]);