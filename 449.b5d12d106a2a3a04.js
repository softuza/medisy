"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[449],{5449:(Ie,Z,s)=>{s.r(Z),s.d(Z,{AnalysesModule:()=>De});var c=s(9808),$=s(9764),x=s(7531),g=s(5245),h=s(7423),O=s(6114),_=s(2349),y=s(1079),r=s(6346),S=s(6087),B=s(1575),U=s(7446),z=s(4107),m=s(3075),p=s(2081),d=s(2181),v=s(7238),E=s(4623),A=s(4847),N=s(508),P=s(773),j=s(9224),u=s(5467),T=s(2986),L=s(675),J=s(8929),Q=s(4850),H=s(1059),R=s(13),w=s(7545),K=s(8514),G=s(1737),k=s(537),q=s(7221),V=s(8033);const Y=t=>o=>(0,K.P)(()=>(t(),o));var f=s(2532),b=s(1408),D=s(520),e=s(5e3);let F=(()=>{class t{constructor(n){this.http=n,this.path="v1/persons"}getPersons(n){return this.http.get(`${this.path}`,{params:new D.LE({fromObject:n})})}getPerson(n){return this.http.get(`${this.path}/${n}`)}createAnalysis(n){return this.http.post(`${this.path}`,n)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(D.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var I=s(7093),ee=s(7322),te=s(5006);function ne(t,o){1&t&&e._UZ(0,"app-alert",22),2&t&&e.Q6J("alert",o.ngIf)}function ae(t,o){1&t&&e._uU(0,"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0634\u062e\u0635")}function oe(t,o){if(1&t&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n.firstName," ")}}function se(t,o){1&t&&e._uU(0,"\u0627\u0644\u062a\u062d\u0644\u064a\u0644")}function le(t,o){if(1&t&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n.name," ")}}function ie(t,o){1&t&&e._uU(0,"\u0645\u0631\u0627\u062c\u0639\u0629")}function re(t,o){if(1&t&&(e.TgZ(0,"div",26)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA()()),2&t){const n=o.$implicit;e.xp6(2),e.Oqu(n.key),e.xp6(2),e.Oqu(n.value)}}function me(t,o){if(1&t&&(e.TgZ(0,"div",24)(1,"h4"),e._uU(2),e.qZA(),e.YNc(3,re,5,2,"div",25),e.qZA()),2&t){const n=o.$implicit;e.xp6(2),e.hij(" ",n.title," "),e.xp6(1),e.Q6J("ngForOf",n.items)}}let M=(()=>{class t{constructor(n,a,l,i,C){this.analysisService=n,this.analysisTypeService=a,this.personService=l,this.fb=i,this.router=C,this.analysisTypes$=null,this.persons$=null,this.indicator$=new J.xQ,this.alert$=new J.xQ,this.form=this.fb.group({person:[null,[m.kI.required]],analysisType:[null,[m.kI.required]],notes:[null,[]]})}ngOnInit(){this.getAnalysisTypes(),this.getPersons()}review(){const n=[];return n.push({title:"\u0627\u0644\u0634\u062e\u0635",items:this.generatePersonReview()}),n}submit(){return!!this.validate()&&(this.analysisService.createAnalysis({personId:this.form.value.personId,analysisTypeId:this.form.value.analysisTypeId,notes:this.form.value.notes}).pipe((t=>o=>o.pipe(Y(()=>t.next(!0)),(0,k.x)(()=>t.next(!1))))(this.indicator$)).pipe(((t,o)=>n=>n.pipe(Y(()=>t.next()),(0,q.K)(a=>{let l="";return a.error instanceof ErrorEvent?l=a.error.message:a&&(l=a.statusText),t.next({message:l,type:V.N.error}),(0,G._)(l)})))(this.alert$)).pipe((0,T.q)(1)).subscribe(a=>{this.router.navigate(["/analyses"])}),!1)}getAnalysisTypes(){this.analysisTypes$=this.analysisTypeService.getAnalysisTypes({pageIndex:1,pageSize:10,sortBy:"Name",sortDescending:!1}).pipe((0,Q.U)(n=>n.items))}getPersons(){this.persons$=this.form.controls.person.valueChanges.pipe((0,H.O)(""),(0,R.b)(500),(0,w.w)(n=>this.personService.getPersons({firstName:n,pageIndex:1,pageSize:10,sortBy:"FirstName",sortDescending:!1}).pipe((0,Q.U)(a=>a.items))))}validate(){return this.form&&!this.form.valid?(Object.keys(this.form.controls).forEach(n=>{var a;const l=null===(a=this.form)||void 0===a?void 0:a.get(n);null==l||l.markAsTouched({onlySelf:!0})}),!1):!!this.form.value.person.id}generatePersonReview(){var n;return[{key:"\u0627\u0644\u0627\u0633\u0645",value:null===(n=this.form.value.person)||void 0===n?void 0:n.firstName}]}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.K),e.Y36(b.c),e.Y36(F),e.Y36(m.QS),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-analyses-create"]],features:[e._Bn([f.K,b.c,F])],decls:47,vars:20,consts:[[1,"page-container"],[1,"page-header"],[1,"page-title"],[1,"spacer"],["mat-icon-button","","routerLink","/analyses","matTooltip","\u0631\u062c\u0648\u0639"],[3,"alert",4,"ngIf"],[1,"elevation-4",3,"linear"],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["fxLayout","row"],["fxFlex","1 1 100%"],["formControlName","person","type","text","placeholder","\u0627\u0644\u0627\u0633\u0645","matInput","",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"end"],["mat-button","","matStepperNext",""],["formControlName","analysisType","type","text","placeholder","Brand","matInput","",3,"matAutocomplete"],["class","list",4,"ngFor","ngForOf"],["routerLink","/analyses","mat-button","","type","button"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"alert"],[3,"value"],[1,"list"],["class","list-item-horizontal",4,"ngFor","ngForOf"],[1,"list-item-horizontal"]],template:function(n,a){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3,"\u0625\u0646\u0634\u0627\u0621 \u062a\u062d\u0644\u064a\u0644"),e.qZA(),e._UZ(4,"span",3),e.TgZ(5,"button",4)(6,"mat-icon"),e._uU(7,"arrow_back"),e.qZA()()(),e.YNc(8,ne,1,1,"app-alert",5),e.ALo(9,"async"),e.TgZ(10,"mat-vertical-stepper",6,7)(12,"mat-step",8)(13,"form",9),e.YNc(14,ae,1,0,"ng-template",10),e.TgZ(15,"div",11)(16,"mat-form-field",12),e._UZ(17,"input",13),e.TgZ(18,"mat-autocomplete",null,14),e.YNc(20,oe,2,2,"mat-option",15),e.ALo(21,"async"),e.qZA()()(),e.TgZ(22,"div",16)(23,"button",17),e._uU(24,"\u0627\u0644\u062a\u0627\u0644\u064a"),e.qZA()()()(),e.TgZ(25,"mat-step",8)(26,"form",9),e.YNc(27,se,1,0,"ng-template",10),e.TgZ(28,"div",11)(29,"mat-form-field",12),e._UZ(30,"input",18),e.TgZ(31,"mat-autocomplete",null,14),e.YNc(33,le,2,2,"mat-option",15),e.ALo(34,"async"),e.qZA()()(),e.TgZ(35,"div",16)(36,"button",17),e._uU(37,"\u0627\u0644\u062a\u0627\u0644\u064a"),e.qZA()()()(),e.TgZ(38,"mat-step"),e.YNc(39,ie,1,0,"ng-template",10),e.YNc(40,me,4,2,"div",19),e.TgZ(41,"div",16)(42,"button",20),e._uU(43,"\u0625\u0644\u063a\u0627\u0621"),e.qZA(),e.TgZ(44,"button",21),e.NdJ("click",function(){return a.submit()}),e.ALo(45,"async"),e._uU(46," \u0627\u0646\u0634\u0627\u0621 "),e.qZA()()()()()),2&n){const l=e.MAs(19);e.xp6(8),e.Q6J("ngIf",e.lcZ(9,12,a.alert$)),e.xp6(2),e.Q6J("linear",!0),e.xp6(2),e.Q6J("stepControl",a.form),e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(4),e.Q6J("matAutocomplete",l),e.xp6(3),e.Q6J("ngForOf",e.lcZ(21,14,a.persons$)),e.xp6(5),e.Q6J("stepControl",a.form),e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(4),e.Q6J("matAutocomplete",l),e.xp6(3),e.Q6J("ngForOf",e.lcZ(34,16,a.analysisTypes$)),e.xp6(7),e.Q6J("ngForOf",a.review()),e.xp6(4),e.Q6J("disabled",e.lcZ(45,18,a.indicator$))}},dependencies:[c.sg,c.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,u.rH,y.XC,y.ZL,N.ey,I.xw,I.yH,ee.KE,x.Nt,te.w,g.Hw,h.lW,p.C0,p.VY,p.Vq,p.Ic,v.gM,c.Ov],encapsulation:2}),t})();var ce=s(9779),pe=s(7280);function ue(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"mat-header-cell",26)(1,"mat-checkbox",27),e.NdJ("change",function(l){e.CHM(n);const i=e.oxw();return e.KtG(l?i.masterToggle():null)}),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("checked",n.selection.hasValue()&&n.isAllSelected())("indeterminate",n.selection.hasValue()&&!n.isAllSelected())}}function de(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"mat-cell",26)(1,"mat-checkbox",28),e.NdJ("click",function(l){return l.stopPropagation()})("change",function(l){const C=e.CHM(n).$implicit,Fe=e.oxw();return e.KtG(l?Fe.selection.toggle(C):null)}),e.qZA()()}if(2&t){const n=o.$implicit,a=e.oxw();e.xp6(1),e.Q6J("checked",a.selection.isSelected(n))}}function fe(t,o){if(1&t&&(e.TgZ(0,"mat-cell")(1,"div")(2,"div"),e._uU(3),e.qZA()()()),2&t){const n=o.$implicit,a=e.oxw();e.uIk("colspan",a.displayedColumns.length),e.xp6(1),e.Q6J("@detailExpand",n===a.expandedElement?"expanded":"collapsed"),e.xp6(2),e.hij(" ",n.description," ")}}function ge(t,o){1&t&&(e.TgZ(0,"mat-header-cell",29),e._uU(1," #"),e.qZA())}function he(t,o){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.hij(" ",n.id," ")}}function ye(t,o){1&t&&(e.TgZ(0,"mat-header-cell",29),e._uU(1," \u0627\u0644\u0627\u0633\u0645"),e.qZA())}function ve(t,o){if(1&t&&(e.TgZ(0,"mat-cell")(1,"div",30)(2,"div")(3,"strong"),e._uU(4),e.qZA()()()()),2&t){const n=o.$implicit;e.xp6(4),e.hij(" ",n.name," ")}}function Ae(t,o){1&t&&(e.TgZ(0,"mat-header-cell",29),e._uU(1," \u0627\u0644\u0646\u0645\u0637"),e.qZA())}function Te(t,o){1&t&&(e.TgZ(0,"mat-icon"),e._uU(1,"checked"),e.qZA())}function Ce(t,o){if(1&t&&(e.TgZ(0,"mat-cell")(1,"div",30),e.YNc(2,Te,2,0,"mat-icon",31),e.qZA()()),2&t){const n=o.$implicit;e.xp6(2),e.Q6J("ngIf",n.notifySms)}}function Ze(t,o){1&t&&e._UZ(0,"mat-header-cell",26)}function xe(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(n);const l=e.oxw().$implicit,i=e.oxw();return e.KtG(i.expandedElement=i.expandedElement===l?null:l)}),e.TgZ(1,"mat-icon"),e._uU(2),e.qZA()()}if(2&t){const n=e.oxw().$implicit,a=e.oxw();e.xp6(2),e.Oqu(a.expandedElement===n?"expand_less":"expand_more")}}function _e(t,o){if(1&t&&(e.TgZ(0,"mat-cell",32),e.YNc(1,xe,3,1,"button",33),e.TgZ(2,"button",5)(3,"mat-icon"),e._uU(4,"more_vert"),e.qZA()(),e._UZ(5,"mat-menu",null,34),e.qZA()),2&t){const n=e.MAs(6);e.xp6(1),e.Q6J("ngIf",!1),e.xp6(1),e.Q6J("matMenuTriggerFor",n)}}function Se(t,o){1&t&&e._UZ(0,"mat-header-row")}function Ue(t,o){1&t&&e._UZ(0,"mat-row")}function Ne(t,o){1&t&&(e.TgZ(0,"div",36)(1,"mat-icon",37),e._uU(2,"access_operations"),e.qZA(),e.TgZ(3,"span",38),e._uU(4,"No Items Found"),e.qZA(),e.TgZ(5,"span",39),e._uU(6,"Please add items to display them"),e.qZA()())}const Je=function(){return[10,25,50,100]};function Qe(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"mat-paginator",40),e.NdJ("page",function(l){e.CHM(n);const i=e.oxw();return e.KtG(i.onPageChange(l.pageIndex,l.pageSize))}),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("length",n.count)("pageSize",n.pageSize)("pageSizeOptions",e.DdM(3,Je))}}const Ye=[{path:"",component:(()=>{class t extends L.a{constructor(n,a){super(),this.dialog=n,this.analysisService=a,this.displayedColumns=["name","analysisType","menu"],this.get()}openCreateComponent(){this.dialog.open(M,{autoFocus:!0,width:"480px"}).afterClosed().pipe((0,T.q)(1)).subscribe(a=>{a&&this.add(a)})}get(){this.analysisService.getAnalyses({pageIndex:this.pageIndex,pageSize:this.pageSize,sortBy:this.sortBy,sortDescending:this.sortDescending}).pipe((0,T.q)(1)).subscribe(a=>{this.set(a.count,a.items)})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(_.uw),e.Y36(f.K))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-analyses"]],features:[e.qOj],decls:45,vars:11,consts:[[1,"page-container"],[1,"page-header","table-header"],[1,"page-title"],[1,"spacer"],["mat-icon-button","","matTooltip","S\xf6k",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","routerLink","create"],[3,"visible","changed","closed"],[3,"visible"],["multiTemplateDataRows","","matSort","","matSortDisableClear","","matSortDirection","desc",1,"page-content",3,"dataSource","matSortActive","matSortChange"],["matColumnDef","select"],["class","table-column-small",4,"matHeaderCellDef"],["class","table-column-small",4,"matCellDef"],["matColumnDef","expandedDetail"],[4,"matCellDef"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","analysisType"],["matColumnDef","menu"],["class","table-column-small table-column-end",4,"matCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],[1,"table-column-small"],[3,"checked","indeterminate","change"],[3,"checked","click","change"],["mat-sort-header",""],[1,"table-cell-stacked"],[4,"ngIf"],[1,"table-column-small","table-column-end"],["mat-icon-button","",3,"click",4,"ngIf"],["itemMenu","matMenu"],["mat-icon-button","",3,"click"],[1,"empty-state"],[1,"icon"],[1,"title"],[1,"subtitle"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"]],template:function(n,a){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3,"\u0627\u0644\u062a\u062d\u0627\u0644\u064a\u0644"),e.qZA(),e._UZ(4,"span",3),e.TgZ(5,"button",4),e.NdJ("click",function(){return a.search=!0}),e.TgZ(6,"mat-icon"),e._uU(7,"search"),e.qZA()(),e.TgZ(8,"button",5)(9,"mat-icon"),e._uU(10,"more_vert"),e.qZA()(),e.TgZ(11,"mat-menu",null,6)(13,"button",7)(14,"mat-icon"),e._uU(15,"add"),e.qZA(),e.TgZ(16,"span"),e._uU(17,"\u0625\u0636\u0627\u0641\u0629"),e.qZA()()()(),e.TgZ(18,"app-table-search",8),e.NdJ("changed",function(i){return a.onSearch(i)})("closed",function(){return a.onSearchClose()}),e.qZA(),e.TgZ(19,"app-table-selection",9)(20,"span"),e._uU(21),e.qZA(),e._UZ(22,"span",3),e.qZA(),e.TgZ(23,"mat-table",10),e.NdJ("matSortChange",function(i){return a.onSort(i.active,i.direction)}),e.ynx(24,11),e.YNc(25,ue,2,2,"mat-header-cell",12),e.YNc(26,de,2,1,"mat-cell",13),e.BQk(),e.ynx(27,14),e.YNc(28,fe,4,3,"mat-cell",15),e.BQk(),e.ynx(29,16),e.YNc(30,ge,2,0,"mat-header-cell",17),e.YNc(31,he,2,1,"mat-cell",15),e.BQk(),e.ynx(32,18),e.YNc(33,ye,2,0,"mat-header-cell",17),e.YNc(34,ve,5,1,"mat-cell",15),e.BQk(),e.ynx(35,19),e.YNc(36,Ae,2,0,"mat-header-cell",17),e.YNc(37,Ce,3,1,"mat-cell",15),e.BQk(),e.ynx(38,20),e.YNc(39,Ze,1,0,"mat-header-cell",12),e.YNc(40,_e,7,2,"mat-cell",21),e.BQk(),e.YNc(41,Se,1,0,"mat-header-row",22),e.YNc(42,Ue,1,0,"mat-row",23),e.qZA(),e.YNc(43,Ne,7,0,"div",24),e.YNc(44,Qe,1,4,"mat-paginator",25),e.qZA()),2&n){const l=e.MAs(12);e.xp6(8),e.Q6J("matMenuTriggerFor",l),e.xp6(10),e.Q6J("visible",a.search),e.xp6(1),e.Q6J("visible",a.selection.hasValue()),e.xp6(2),e.hij("",a.selection.selected.length," selected"),e.xp6(2),e.s9C("matSortActive",a.sortBy),e.Q6J("dataSource",a.dataSource),e.xp6(18),e.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(1),e.Q6J("ngIf",0===a.count),e.xp6(1),e.Q6J("ngIf",a.count>0)}},dependencies:[c.O5,u.rH,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,S.NW,ce.R,pe.S,U.oG,d.VK,d.OP,d.p6,g.Hw,h.lW,v.gM,A.YE,A.nU],styles:[".test[_ngcontent-%COMP%]{width:400px}"]}),t})()},{path:"create",component:M}];let be=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(Ye),u.Bz]}),t})(),De=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[f.K],imports:[c.ez,m.u5,m.UX,be,_.Is,y.Bb,$.o9,r.p0,S.TU,x.c,B.U,O.n,U.p9,d.Tx,g.Ps,h.ot,z.LD,p.T5,v.AV,E.ie,A.JX,N.XK,j.QW,P.Cq]}),t})()}}]);