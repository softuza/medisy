import{a as Se,b as Te,c as Ee,d as Oe,e as de}from"./chunk-Z6CFIFUG.js";import{a as S,d as ae,e as ne,f as _e,i as se,j as le}from"./chunk-N3YZ3GWE.js";import"./chunk-YGU4JTYS.js";import"./chunk-ALLHSD3Q.js";import{a as C}from"./chunk-ECHZ6EB4.js";import"./chunk-LZIUZOQU.js";import{b as Z,f as ee,g as te,h as oe,j as re,k as ie}from"./chunk-BQ3MI4NW.js";import{b as y}from"./chunk-RNNBY4AW.js";import{h as N}from"./chunk-VP6ZLF3H.js";import{a as q,b as j,d as w,e as x,g as H}from"./chunk-WNUUIGGE.js";import{c as J,p as K,q as A,r as W}from"./chunk-7CXFXQJU.js";import"./chunk-IP3Z2NCN.js";import"./chunk-264QKOH6.js";import"./chunk-W4ZBAGNE.js";import"./chunk-AAHDAXVC.js";import"./chunk-JACASQJP.js";import{d,f as v,g as V,l as $,n as z,q as G,r as F,u as U}from"./chunk-VXNH5PTX.js";import{Y as L,r as b,t as c}from"./chunk-KQ5MQZXD.js";import{a as X,e as k}from"./chunk-DNH4OZS2.js";import"./chunk-ELRLVGRO.js";import{la as Q}from"./chunk-4B53IFHW.js";import"./chunk-UZ765RGE.js";import{Kb as _,Lb as a,Mb as T,Wb as O,Xb as R,bb as l,cb as p,ja as u,na as M,pc as f,qb as D,zb as n}from"./chunk-G33TNFCW.js";import"./chunk-EAIILSS5.js";var pe=(()=>{let i=class i extends ee{constructor(e,t,o,r){super(o),this.mlabService=e,this.fb=t,this.dialog=o,this.data=r,this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"],filterBehavior:b.Or,filters:c.create().equalIf("id",this.data.laboratoryTestType?.testTypeId).notAny("laboratories.laboratoryId",[this.data.laboratoryId]).filters()}),this.laboratories=this.mlabService.laboratories.getAll({orderBy:["name"],filters:c.create().notEqual("id",this.data.laboratoryId).filters()}),this.referenceValueSelectConfig={emptyOption:!0,autoSelect:!0,optionContentFn:m=>m.testType.nameEn},this.testTypeSelectConfig={optionSelectedFn:this.testTypeChnaged.bind(this)},this.transferOutLaboratorySelectConfig={emptyOption:!0},this.referenceValues=null,this.form=t.group({enabled:[r.laboratoryTestType?.enabled??!0,[d.required]],transferInPrice:[r.laboratoryTestType?.transferInPrice??0,[]],transferInEnabled:[r.laboratoryTestType?.transferInEnabled??!0,[d.required]],transferOutEnabled:[r.laboratoryTestType?.transferOutEnabled??!0,[d.required]],transferOutLaboratoryId:[r.laboratoryTestType?.transferOutLaboratoryId,[]],price:[r.laboratoryTestType?.price??0,[]],isFavorite:[r.laboratoryTestType?.isFavorite??!1,[d.required]],testTypeId:[r.laboratoryTestType?.testTypeId,[d.required]],referenceValueId:[r.laboratoryTestType?.referenceValueId,[]]}),r.laboratoryTestType&&this.testTypeChnaged(r.laboratoryTestType.testTypeId);}testTypeChnaged(e){this.referenceValues=this.mlabService.referenceValues.getAll({orderBy:["testType.nameEn"],filterBehavior:b.And,filters:c.create().equalIf("testType.id",e).filters()});}submit(){this.IsValid()&&(this.data.laboratoryTestType?this.save(this.mlabService.laboratories.testTypes.update(this.data.laboratoryId,this.data.laboratoryTestType?.id,this.form.value)):this.save(this.mlabService.laboratories.testTypes.create(this.data.laboratoryId,this.form.value)));}};i.ɵfac=function(t){return new(t||i)(p(C),p(F),p(q),p(j));},i.ɵcmp=M({type:i,selectors:[["sz-medisy-laboratory-laboratory-test-types-save"]],standalone:!0,features:[D,f],decls:29,vars:13,consts:()=>{let e;e="\u0646\u0645\u0637 \u0627\u062E\u062A\u0628\u0627\u0631";let t;t="\u0627\u0644\u0642\u064A\u0645\u0629 \u0627\u0644\u0645\u0631\u062C\u0639\u064A\u0629";let o;o="\u0627\u0644\u0633\u0639\u0631";let r;r="\u0627\u0644\u0633\u0639\u0631";let m;m="\u0627\u0644\u0645\u062E\u0628\u0631";let g;g="\u0645\u0641\u0639\u0644";let I;I="\u0645\u0641\u0636\u0644\u0629";let P;P="\u062A\u062D\u0648\u064A\u0644 \u0625\u0644\u0649";let h;h="\u0645\u0641\u0639\u0644";let Y;Y="\u062A\u062D\u0648\u064A\u0644 \u0644\u0644\u062E\u0627\u0631\u062C";let B;return B="\u0645\u0641\u0639\u0644",[g,I,P,h,Y,B,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId","label",e,3,"source","config"],["formControlName","referenceValueId","label",t,3,"source","config"],[1,"sz-form-row"],["formControlName","enabled"],["formControlName","isFavorite"],["formControlName","price","label",o,3,"type"],["multi","",1,"tw-mb-4"],["formControlName","transferInEnabled"],["formControlName","transferInPrice","label",r,3,"type"],["formControlName","transferOutEnabled"],["formControlName","transferOutLaboratoryId","label",m,3,"source","config"],[3,"actions"]];},template:function(t,o){t&1&&(T(0,"sz-ui-dialog-header",6),_(1,"mat-dialog-content")(2,"form",7),T(3,"sz-ui-form-field-select",8)(4,"sz-ui-form-field-select",9),_(5,"div",10)(6,"mat-checkbox",11),O(7,0),a(),_(8,"mat-checkbox",12),O(9,1),a()(),_(10,"div",10),T(11,"sz-ui-form-field-input",13),a(),T(12,"div",10),_(13,"mat-accordion",14)(14,"mat-expansion-panel")(15,"mat-expansion-panel-header")(16,"mat-panel-title"),O(17,2),a()(),_(18,"mat-checkbox",15),O(19,3),a(),T(20,"sz-ui-form-field-input",16),a(),_(21,"mat-expansion-panel")(22,"mat-expansion-panel-header")(23,"mat-panel-title"),O(24,4),a()(),_(25,"mat-checkbox",17),O(26,5),a(),T(27,"sz-ui-form-field-select",18),a()()()(),T(28,"sz-ui-dialog-actions",19)),t&2&&(n("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),l(2),n("formGroup",o.form),l(),n("source",o.testTypes)("config",o.testTypeSelectConfig),l(),n("source",o.referenceValues)("config",o.referenceValueSelectConfig),l(7),n("type","number"),l(9),n("type","number"),l(7),n("source",o.laboratories)("config",o.transferOutLaboratorySelectConfig),l(),n("actions",o.actions));},dependencies:[U,$,v,V,z,G,ie,te,oe,H,x,A,K,de,Oe,Se,Te,Ee,J,W],encapsulation:2});let E=i;return E;})();var We=(()=>{let i=class i{constructor(){this.dialog=u(w),this.mlabService=u(C),this.route=u(X),this.dataSource=new ae("testType.nameEn"),this.laboratory=this.route.snapshot.data.laboratory,this.appBarConfig={title:L.test_types,subtitle:this.laboratory.name,backEnabled:!0,actions:[y.add(this.openSaveComponent.bind(this)),y.menu([y.search()])]},this.dataSource.columnDefs.push(S.uuid("id"),S.uuid("testTypeId"),S.string("testType.nameEn"),S.date("createdAt").setVisible(!1),S.date("updatedAt").setVisible(!1),S.boolean("isFavorite",(e,t)=>{e.isFavorite=t,this.updateItem(e);}).setName(L.favorite).setResponsive(!0),S.boolean("enabled",(e,t)=>{e.enabled=t,this.mlabService.laboratories.testTypes.update(e.laboratoryId,e.id,e).subscribe(o=>{e=o;});}).setResponsive(!0),S.menu([N.edit(this.openSaveComponent.bind(this)),N.divider(),N.delete(this.openLaboratoryTestTypeDeleteComponent.bind(this))])),this.get();}openSaveComponent(e){this.dialog.open(pe,{data:{laboratoryId:this.laboratory.id,laboratoryTestType:e}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openLaboratoryTestTypeDeleteComponent(e){this.dialog.open(re,{data:Z.delete(this.mlabService.laboratories.testTypes.delete(e.laboratoryId,e.id),e)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}updateItem(e){this.mlabService.laboratories.testTypes.update(e.laboratoryId,e.id,e).subscribe(t=>{this.dataSource.update(t);});}get(){this.mlabService.laboratories.testTypes.get(this.laboratory.id,this.dataSource.getQuery()).pipe(ne(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=M({type:i,selectors:[["sz-medisy-laboratory-laboratory-test-types"]],standalone:!0,features:[f],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(t,o){t&1&&(_(0,"sz-ui-table-bar",0),R("changed",function(){return o.get();}),a(),_(1,"sz-ui-table",1),R("update",function(){return o.get();}),a()),t&2&&(n("config",o.appBarConfig)("dataSource",o.dataSource),l(),n("dataSource",o.dataSource));},dependencies:[k,le,se,_e,A,Q],encapsulation:2});let E=i;return E;})();export{We as LaboratoryTestTypesComponent};/**i18n:23b18f90dfad26ae6b830c3e760ecc323aedcfc43eb78549f6a00c2171dce7c8*/