import{a as R}from"./chunk-AND2MYDT.js";import{a as Re}from"./chunk-VH4ZW36B.js";import{a as c,b as Ae,d as Le,e as Ve,g as ge,j as he,k as Ie}from"./chunk-DD36HVYA.js";import"./chunk-DLQAZNQZ.js";import"./chunk-X723JSXA.js";import"./chunk-MQZIPEFT.js";import{a as E}from"./chunk-RTXEUJTA.js";import"./chunk-6FO4JYCJ.js";import{e as Me,f as Oe,g as Ce,i as Ne,j as h,k as Te}from"./chunk-S6CBQ2WA.js";import"./chunk-DV32DAUC.js";import{a as g}from"./chunk-FW3D7UEL.js";import{d as Ee,h as D}from"./chunk-GOEYM4JS.js";import{a as re,b as ie,d as A,e as ne,g as L}from"./chunk-AHUVNO4M.js";import"./chunk-F5R7DRI7.js";import{A as Se,c as _e,d as pe,v as V,x as de,z as fe}from"./chunk-JEX5D4MF.js";import"./chunk-W6XZBSJY.js";import"./chunk-A6HPAVPV.js";import{d as ce}from"./chunk-OXD3F7WY.js";import{i as ae,j as le,l as me}from"./chunk-WZ3F4V4D.js";import{b as X,d as N,f as w,g as x,k,l as q,n as H,q as W,r as Q,t as J,u as K}from"./chunk-HKMIKSFL.js";import{r as ee,t as te}from"./chunk-7PIZFBIY.js";import{a as T,e as Z}from"./chunk-FBTMN7JN.js";import"./chunk-6JKOPXSS.js";import{ia as oe,ja as se,la as ue}from"./chunk-PUK5P6HB.js";import"./chunk-66CG3LE3.js";import{Eb as O,Fa as B,Fc as j,Jb as _,Kb as p,Lb as m,Vb as G,Wb as C,Yb as v,bb as u,cb as l,ea as P,f as z,na as f,nc as S,oa as F,oc as Y,qb as $,vb as I,zb as s}from"./chunk-ZZ2H3KSV.js";import"./chunk-VWF2YKFJ.js";function Pe(i,e){if(i&1&&m(0,"sz-ui-form-field-select",4),i&2){let M=v();s("source",M.testTypeResultOptions);}}function Fe(i,e){i&1&&(_(0,"div",7)(1,"mat-form-field",8)(2,"label"),m(3,"input",9),p()(),_(4,"mat-form-field",8)(5,"label"),m(6,"input",10),p()()());}function Be(i,e){i&1&&(_(0,"mat-form-field",8)(1,"label"),m(2,"input",11),p()());}function $e(i,e){if(i&1&&I(0,Fe,7,0,"div",7)(1,Be,3,0,"mat-form-field",8),i&2){let M=v();O(M.isRange()?0:-1),u(),O(M.isRange()?-1:1);}}var De=(()=>{let e=class e extends Me{constructor(o,t,r,a){super(r),this.mlabService=o,this.fb=t,this.dialog=r,this.data=a,this.referenceGroups=this.mlabService.referenceGroups.getAll({orderBy:["nameEn"],filterBehavior:ee.Or,filters:te.create().equalIf("id",this.data.referenceValueRule?.referenceGroupId).notAny("referenceValueRules.referenceValueId",[this.data.referenceValue.id]).filters()}),this.testTypeResultOptions=this.mlabService.testTypes.resultOptions.getAll(this.data.referenceValue.testTypeId,{orderBy:["nameEn"]}),this.comparisonOperators=Object.keys(R).map(n=>R[n]),this.form=t.group({description:[a.referenceValueRule?.description,[N.maxLength(4096)]],comparisonOperator:new k(a.referenceValueRule?.comparisonOperator??R.Equal,[N.required]),referenceGroupId:[a.referenceValueRule?.referenceGroupId,[N.required]],value:[a.referenceValueRule?.value,[]],start:[a.referenceValueRule?.start,[]],end:[a.referenceValueRule?.end,[]],testTypeResultOptionId:[a.referenceValueRule?.testTypeResultOptionId,[]]});}isRange(){return this.form.value.comparisonOperator===R.RangeWithBoundaries||this.form.value.comparisonOperator===R.RangeWithoutBoundaries;}submit(){this.IsValid()&&(this.data.referenceValueRule?this.save(this.mlabService.referenceValues.rules.update(this.data.referenceValue.id,this.data.referenceValueRule.id,this.form.value)):this.save(this.mlabService.referenceValues.rules.create(this.data.referenceValue.id,this.form.value)));}};e.ɵfac=function(t){return new(t||e)(l(E),l(Q),l(re),l(ie));},e.ɵcmp=f({type:e,selectors:[["sz-medisy-laboratory-reference-value-rules-save"]],standalone:!0,features:[S([]),$,Y],decls:9,vars:9,consts:()=>{let o;o="\u0627\u0644\u0641\u0626\u0629 \u0627\u0644\u0645\u0631\u062C\u0639\u064A\u0629";let t;t="\u0627\u0644\u0639\u0645\u0644\u064A\u0629";let r;r="\u0642\u064A\u0645\u0629";let a;a="\u0627\u0644\u0648\u0635\u0641";let n;n="\u0628\u062F\u0627\u064A\u0629";let b;b="\u0646\u0647\u0627\u064A\u0629";let U;return U="\u0642\u064A\u0645\u0629",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","referenceGroupId","label",o,3,"source"],["formControlName","comparisonOperator","label",t,3,"source","localizedValue"],["formControlName","testTypeResultOptionId","label",r,3,"source"],["formControlName","description","label",a],[3,"actions"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["autocomplete","off","formControlName","start","matInput","","placeholder",n],["autocomplete","off","formControlName","end","matInput","","placeholder",b],["autocomplete","off","formControlName","value","matInput","","placeholder",U]];},template:function(t,r){t&1&&(m(0,"sz-ui-dialog-header",0),_(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3),I(5,Pe,1,1,"sz-ui-form-field-select",4)(6,$e,2,2),m(7,"sz-ui-form-field-textarea",5),p()(),m(8,"sz-ui-dialog-actions",6)),t&2&&(s("title",r.title)("subtitle",r.subtitle)("alert",r.alert()),u(2),s("formGroup",r.form),u(),s("source",r.referenceGroups),u(),s("source",r.comparisonOperators)("localizedValue",!0),u(),O(r.data.referenceValue.testType.hasResultOptions?5:6),u(3),s("actions",r.actions));},dependencies:[K,q,X,w,x,H,W,pe,_e,ae,L,ne,le,V,h,Oe,Ce,Se,fe,de],encapsulation:2});let i=e;return i;})();var ye=(()=>{let e=class e{constructor(o,t,r,a){this.dialog=o,this.route=t,this.mlabService=r,this.locale=a,this.dataSource=new Le(),this.referenceValue=B.required(),this.dataSource.columnDefs.push(c.uuid("id"),c.string("referenceGroup.nameEn").setValueClassFontBold().setStacked(c.string("referenceGroup.description").setStyleSmall()),c.enum("comparisonOperator").setValueGetter(n=>ce(n.comparisonOperator)),c.number("_value").setValueGetter(n=>n.testTypeResultOption?n.testTypeResultOption.nameEn:n.value!==null?n.value:`${n.start} - ${n.end}`).setHeaderSortable(!1),c.date("createdAt").setVisible(!1),c.date("updatedAt").setVisible(!1),Ae.menu([D.edit(n=>this.openSaveComponent(n)),D.delete(n=>{this.openReferenceValueRuleDeleteComponent(n);})]));}ngOnInit(){this.get();}openSaveComponent(o){this.dialog.open(De,{data:{referenceValue:this.referenceValue(),referenceValueRule:o}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openReferenceValueRuleDeleteComponent(o){this.dialog.open(Ne,{data:Te.delete(this.mlabService.referenceValues.rules.delete(o.referenceValueId,o.id),o)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}get(){this.mlabService.referenceValues.rules.get(this.referenceValue().id,this.dataSource.getQuery()).pipe(Ve(this.dataSource.state)).subscribe(o=>{this.dataSource.set(o.items,o.count);});}};e.ɵfac=function(t){return new(t||e)(l(A),l(T),l(E),l(j));},e.ɵcmp=f({type:e,selectors:[["sz-medisy-laboratory-reference-value-rules"]],inputs:{referenceValue:[1,"referenceValue"]},features:[S([])],decls:5,vars:2,consts:()=>{let o;return o="\u0625\u0636\u0627\u0641\u0629",[o,[3,"changed","dataSource"],["mat-flat-button","","color","primary","start","",3,"click"],[3,"update","dataSource"]];},template:function(t,r){t&1&&(_(0,"sz-ui-table-search-filter",1),C("changed",function(){return r.get();}),_(1,"button",2),C("click",function(){return r.openSaveComponent();}),_(2,"span"),G(3,0),p()()(),_(4,"sz-ui-table",3),C("update",function(){return r.get();}),p()),t&2&&(s("dataSource",r.dataSource),u(4),s("dataSource",r.dataSource));},dependencies:[se,he,ge],encapsulation:2});let i=e;return i;})();var be=(()=>{let e=class e{constructor(o,t){this.dialog=o,this.route=t,this.alert$=new z(),this.referenceValue=this.route.snapshot.data.referenceValue;}};e.ɵfac=function(t){return new(t||e)(l(A),l(T));},e.ɵcmp=f({type:e,selectors:[["sz-medisy-laboratory-reference-value"]],features:[S([])],decls:2,vars:4,consts:[[3,"title","subtitle","backEnabled"],[3,"referenceValue"]],template:function(t,r){t&1&&m(0,"sz-ui-app-bar",0)(1,"sz-medisy-laboratory-reference-value-rules",1),t&2&&(s("title",r.referenceValue.testType.nameEn)("subtitle",r.referenceValue.description)("backEnabled",!0),u(),s("referenceValue",r.referenceValue));},dependencies:[g,ye],encapsulation:2});let i=e;return i;})();var Ue=[{path:"",component:be}];var Ht=(()=>{let e=class e{};e.ɵfac=function(t){return new(t||e)();},e.ɵmod=F({type:e}),e.ɵinj=P({providers:[E],imports:[J,Z.forChild(Ue),L,V,Ee,oe,ue,me,Ie,Re,h,g]});let i=e;return i;})();export{Ht as ReferenceValueModule};/**i18n:6b55cd1e489fc2a9391d1b13a69b265321df5f62925c47a1512178c2da6817cf*/