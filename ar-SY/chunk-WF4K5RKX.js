import{d as Ue}from"./chunk-3I7RXS7D.js";import"./chunk-SCLXRFRD.js";import{b as A}from"./chunk-GJ53RA72.js";import{b as ve}from"./chunk-CHXZP2FG.js";import{a as ze,b as Ve,c as be,d as Be,e as Fe}from"./chunk-HG44BF4G.js";import{a as g}from"./chunk-MUPWFADN.js";import{a as L}from"./chunk-W2KGKS45.js";import{h as Oe}from"./chunk-Z3ELZRWE.js";import{c as ye,g as $e}from"./chunk-F4I77DF4.js";import{a as Ge}from"./chunk-ONUVJR5I.js";import"./chunk-U2NYA4TJ.js";import"./chunk-UBJFLYRY.js";import{a as C}from"./chunk-D4CAUMAG.js";import{e as he,f as Re,g as De,j as I}from"./chunk-GOPVSNKC.js";import"./chunk-M3NA2DMH.js";import{b as T}from"./chunk-4NVEBB2R.js";import{d as Te,e as P,f as Le,h as Ie,j as Ae}from"./chunk-QMJQGH34.js";import{a as se,b as Se,d as Ee,e as pe,g as f}from"./chunk-R72CS7SP.js";import"./chunk-2NAL3ARI.js";import{c as Ne,d as fe,m as ce,q as Pe,r as Ce,t as ge}from"./chunk-UCRC6V5J.js";import"./chunk-5WJVC7PV.js";import"./chunk-P4AS2ZYY.js";import"./chunk-EY4PTUQV.js";import{b as ue,c}from"./chunk-QXIIYWNN.js";import"./chunk-YWYJPJA4.js";import{d as M,f as W,g as Q,j as O,k as J,m as K,p as Z,q as ee,s as oe,t as ie}from"./chunk-EIWC7QFZ.js";import{p as ae,t as _e}from"./chunk-22G3BWVW.js";import{a as te,c as ne,e as re}from"./chunk-L6HNREY7.js";import{ga as le,ha as me,ja as de,ka as Me}from"./chunk-QHXZELMZ.js";import"./chunk-TWGSABWX.js";import{Db as S,Kb as X,Lb as Y,Mb as x,Nb as l,Ob as a,Pb as _,Zb as d,_b as j,a as b,b as B,hb as E,ib as s,jc as w,ka as F,pc as N,qc as k,ua as u,ub as U,uc as H,va as G,vc as q}from"./chunk-XPH4NMLC.js";var Ye=(()=>{let e=class e extends he{constructor(r,o,i,t){super(i),this.mpplService=r,this.fb=o,this.dialog=i,this.data=t,this.nationalities=this.mpplService.nationalities.getAll({orderBy:["name"]}),this.languages=this.mpplService.languages.getAll({orderBy:["name"]}),this.sexes=Object.keys(A).map(p=>A[p]),this.form=o.group({sex:[t.sex,[M.required]],languageId:[t.languageId,[M.required]],title:[t.title,[Ge()]],ssn:[t.ssn,[]],nationalityId:[t.nationalityId,[]],birthDate:[t.birthDate,[]],primaryEmail:[t?.primaryEmail,[M.email]],secondaryEmail:[t?.secondaryEmail,[M.email]],mobilePhone:new O(t?.mobilePhone),homePhone:new O(t?.homePhone),workPhone:new O(t?.workPhone),homeAddress:new O(t?.homeAddress)});}submit(){this.IsValid()&&this.save(this.mpplService.persons.update(this.data.id,B(b({},this.form.value),{titleId:this.form.value.title?.id})));}};e.ɵfac=function(o){return new(o||e)(s(g),s(ee),s(se),s(Se));},e.ɵcmp=u({type:e,selectors:[["sz-medisy-people-person-save"]],standalone:!0,features:[N([]),U,k],decls:40,vars:9,consts:()=>{let r;r="\u0627\u0644\u062C\u0646\u0633\u064A\u0629";let o;o="\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0637\u0646\u064A";let i;i="\u0627\u0644\u0644\u063A\u0629";let t;t="\u0627\u0644\u062C\u0646\u0633";let p;p="\u0627\u0644\u0644\u0642\u0628";let h;h="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0648\u0644\u0627\u062F\u0629";let R;R="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0627\u0644\u0627\u0633\u0627\u0633\u064A";let D;D="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0627\u0644\u062B\u0627\u0646\u0648\u064A";let y;y="\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0646\u0632\u0644";let $;$="\u0627\u0644\u0647\u0627\u062A\u0641 \u0627\u0644\u062C\u0648\u0627\u0644";let v;v="\u0647\u0627\u062A\u0641 \u0627\u0644\u0645\u0646\u0632\u0644";let z;z="\u0647\u0627\u062A\u0641 \u0627\u0644\u0639\u0645\u0644";let V;return V="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A",[y,$,v,z,V,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],[1,"sz-form-row"],["formControlName","nationalityId","label",r,3,"source"],["formControlName","ssn","label",o],["formControlName","languageId","label",i,3,"source"],["formControlName","sex","label",t,3,"source","localizedValue"],["formControlName","title","label",p],["formControlName","birthDate","label",h],[1,"tw-mb-4"],["multi",""],["formControlName","homeAddress"],["formControlName","mobilePhone"],["formControlName","homePhone"],["formControlName","workPhone"],["formControlName","primaryEmail","label",R],["formControlName","secondaryEmail","label",D],[3,"actions"]];},template:function(o,i){o&1&&(_(0,"sz-ui-dialog-header",5),l(1,"mat-dialog-content")(2,"form",6)(3,"div",7),_(4,"sz-ui-form-field-select",8)(5,"sz-ui-form-field-input",9),a(),_(6,"sz-ui-form-field-select",10),l(7,"div",7),_(8,"sz-ui-form-field-select",11)(9,"sz-medisy-people-title-search",12),a(),_(10,"sz-ui-form-field-date",13),l(11,"div",14)(12,"mat-accordion",15)(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title"),d(16,0),a()(),_(17,"sz-ui-form-field-address",16),a(),l(18,"mat-expansion-panel")(19,"mat-expansion-panel-header")(20,"mat-panel-title"),d(21,1),a()(),_(22,"sz-ui-form-field-phone-number",17),a(),l(23,"mat-expansion-panel")(24,"mat-expansion-panel-header")(25,"mat-panel-title"),d(26,2),a()(),_(27,"sz-ui-form-field-phone-number",18),a(),l(28,"mat-expansion-panel")(29,"mat-expansion-panel-header")(30,"mat-panel-title"),d(31,3),a()(),_(32,"sz-ui-form-field-phone-number",19),a(),l(33,"mat-expansion-panel")(34,"mat-expansion-panel-header")(35,"mat-panel-title"),d(36,4),a()(),_(37,"sz-ui-form-field-input",20)(38,"sz-ui-form-field-input",21),a()()()()(),_(39,"sz-ui-dialog-actions",22)),o&2&&(S("title",i.title)("subtitle",i.subtitle)("alert",i.alert()),E(2),S("formGroup",i.form),E(2),S("source",i.nationalities),E(2),S("source",i.languages),E(2),S("source",i.sexes)("localizedValue",!0),E(31),S("actions",i.actions));},dependencies:[ie,J,W,Q,K,Z,I,Re,De,ge,Ne,f,pe,Fe,Be,ze,Ve,be,ce,Ue,Pe,fe,Ce],encapsulation:2});let n=e;return n;})();function He(n,e){if(n&1&&_(0,"sz-ui-card",3),n&2){let we=e.$implicit;S("card",we);}}var xe=(()=>{let e=class e{constructor(r,o,i,t){this.dialog=r,this.mlabService=o,this.route=i,this.router=t,this.items=[],this.personMenu=Ae.more([Ie.edit(()=>this.openSaveComponent()),P.divider(),P.item(c.names,"info",()=>this.navigate("names")),P.item(c.documents,"badge",()=>this.navigate("documents"))]),this.person=this.route.snapshot.data.person;let p={title:0,icon:"science",subtitle:c.analyses,indicator:!0,clickFn:()=>this.router.navigate(["/mlab/analyses"],{state:{filter:{field:"personId",op:ae.Equal,value:this.person.id}}})};this.items.push(p),this.getAnalysisCount(p);}navigate(r){this.router.navigate([r],{relativeTo:this.route});}getAnalysisCount(r){this.mlabService.analyses.count({filters:_e.create().equal("personId",this.person.id).filters()}).subscribe(o=>{r.title=o;});}openSaveComponent(){this.dialog.open(Ye,{data:this.person}).afterClosed().subscribe(r=>{r&&(this.person=r);});}openBarcodeWriterComponent(){this.dialog.open($e,{data:{format:ye.QR_CODE,msg:`personid.${this.person.id}`}}).afterClosed().subscribe({});}};e.ɵfac=function(o){return new(o||e)(s(Ee),s(C),s(te),s(ne));},e.ɵcmp=u({type:e,selectors:[["sz-medisy-people-person"]],features:[N([C])],decls:8,vars:4,consts:[[3,"title","menu"],["end","","mat-icon-button","",3,"click"],[1,"sz-grid-card"],[3,"card"]],template:function(o,i){o&1&&(l(0,"sz-ui-header-info",0),H(1,"personName"),l(2,"button",1),j("click",function(){return i.openBarcodeWriterComponent();}),l(3,"mat-icon"),w(4,"qr_code"),a()()(),l(5,"div",2),Y(6,He,1,1,"sz-ui-card",3,X),a()),o&2&&(S("title",q(1,2,i.person))("menu",i.personMenu),E(6),x(i.items));},dependencies:[le,L,T,de,ve],encapsulation:2});let n=e;return n;})();var je=[{path:"",component:xe},{path:"names",loadComponent:()=>import("./chunk-GROHNW3M.js").then(n=>n.PersonNamesComponent)},{path:"documents",loadComponent:()=>import("./chunk-B3MTAC6I.js").then(n=>n.PersonDocumentsComponent)}];var Qo=(()=>{let e=class e{};e.ɵfac=function(o){return new(o||e)();},e.ɵmod=G({type:e}),e.ɵinj=F({providers:[g],imports:[oe,re.forChild(je),Oe,me,L,I,T,Te,ue,f,Me,Le]});let n=e;return n;})();export{Qo as PersonModule};/**i18n:7992b670fa912c61e7fcc3b33bbd0ab051bcb5cc240f907263ef623fbdc93e3b*/