"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[677],{677:(v,i,s)=>{s.r(i),s.d(i,{AnalysisModule:()=>W});var e=s(6814),p=s(2296),n=s(7700),r=s(6385),l=s(617),u=s(7988),h=s(8109),P=s(758),O=s(2595),a=s(5041),S=s(5807),t=s(5879),d=s(9060),y=s(6883),E=s(2393),m=s(2430),C=s(5703),f=s(2764),A=s(3572),g=s(9598),D=s(8180),$=s(2516),B=s(6128);function L(o,z){1&o&&t._UZ(0,"sz-ui-card",6),2&o&&t.Q6J("card",z.$implicit)}const R=[{path:"",component:(()=>{class o{constructor(c,T,M,N,F,U){this.dialog=c,this.route=T,this.router=M,this.mlabService=N,this.mpplService=F,this.personNamePipe=U,this.alert$=(0,t.tdS)(void 0),this.testsDataSource=new A.b2(g.J.pagedSorted("-createdAt")),this.tiles=[],this.analysisMenu=C.B.more([f.N.edit(()=>this.openEditComponent),f.N.print(()=>this.openEditComponent)]),this.analysis=this.route.snapshot.data.analysis,this.getPerson(),this.buildTiles()}buildTiles(){const c={icon:"science",subtitle:"\u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631\u0627\u062A",type:m.k.Counter,clickFn:()=>this.router.navigate(["tests"],{relativeTo:this.route})},T={icon:"label",subtitle:"\u0627\u0644\u0639\u064A\u0646\u0627\u062A",type:m.k.Counter,clickFn:()=>this.router.navigate(["specimens"],{relativeTo:this.route})};this.mlabService.analyses.tests.count(this.analysis.id,g.J.count()).subscribe(M=>{c.title=M}),this.mlabService.analyses.specimens.count(this.analysis.id,g.J.count()).subscribe(M=>{T.title=M}),this.tiles.push(c),this.tiles.push(T)}getPerson(){this.analysis.personId&&this.mpplService.persons.getById(this.analysis.personId).pipe((0,D.q)(1)).subscribe(c=>{this.tiles.splice(0,0,{icon:"person",type:m.k.Text,subtitle:"\u0627\u0644\u0645\u0631\u064A\u0636",title:this.personNamePipe.transform(c),clickFn:()=>this.router.navigate([`mppl/persons/${c.id}`])})})}openEditComponent(){}}return o.\u0275fac=function(c){return new(c||o)(t.Y36(n.uw),t.Y36(h.gz),t.Y36(h.F0),t.Y36(y.t),t.Y36(E.i),t.Y36(d.Y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["medisy-laboratory-analysis"]],features:[t._Bn([y.t,E.i,d.Y])],decls:9,vars:4,consts:[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["end","",3,"menu"],[1,"sz-grid-card"],[3,"card",4,"ngFor","ngForOf"],[3,"card"]],template:function(c,T){1&c&&(t.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),t._uU(3),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.qZA()(),t._UZ(6,"sz-ui-menu",3),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,L,1,1,"sz-ui-card",5),t.qZA()),2&c&&(t.xp6(3),t.Oqu(T.analysis.code),t.xp6(2),t.Oqu(T.analysis.note),t.xp6(1),t.Q6J("menu",T.analysisMenu),t.xp6(2),t.Q6J("ngForOf",T.tiles))},dependencies:[e.sg,$.z,B.X,S.i],encapsulation:2}),o})()},{path:"tests",loadComponent:()=>Promise.resolve().then(s.bind(s,1947)).then(o=>o.AnalysisTestsComponent)},{path:"specimens",loadComponent:()=>s.e(380).then(s.bind(s,2380)).then(o=>o.AnalysisSpecimensComponent)}];var I=s(1947);let W=(()=>{class o{}return o.\u0275fac=function(c){return new(c||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[y.t],imports:[e.ez,h.Bz.forChild(R),n.Is,P.E3,u.Tx,l.Ps,p.ot,r.t,a.n,O.V,S.i,I.AnalysisTestsComponent]}),o})()},1947:(v,i,s)=>{s.r(i),s.d(i,{AnalysisTestsComponent:()=>d});var e=s(8109),p=s(8262),n=s(7076),r=s(6883),l=s(5041),u=s(3572),h=s(9598),P=s(8721),O=s(8180),a=s(5879),S=s(8359),t=s(2516);let d=(()=>{class y{constructor(m,C,f){this.route=m,this.mlabService=C,this.typeI18nPipe=f,this.dataSource=new u.b2(h.J.pagedSorted("test.testClass")),this.analysis=this.route.snapshot.data.analysis,this.dataSource.columns=[u.UC.text("test.testclass","\u0635\u0646\u0641 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631",A=>A.test.testClass.name),u.UC.text("test.state","\u0627\u0644\u062D\u0627\u0644\u0629",A=>f.transform(A.test.state)),p.h.menu([])],this.get()}get(){this.mlabService.analyses.tests.get(this.analysis.id,this.dataSource.filterModel).pipe((0,P.sU)(this.dataSource.indicator)).pipe((0,O.q)(1)).subscribe(m=>{this.dataSource.set(m.items,m.count)})}}return y.\u0275fac=function(m){return new(m||y)(a.Y36(e.gz),a.Y36(r.t),a.Y36(n.y))},y.\u0275cmp=a.Xpm({type:y,selectors:[["medisy-laboratory-analysis-tests"]],standalone:!0,features:[a._Bn([r.t,n.y]),a.jDz],decls:7,vars:4,consts:function(){let E;return E="\u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631\u0627\u062A",[["start",""],[1,"sz-h5"],E,["routerLink","../",1,"tw-underline","tw-text-sm"],[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(m,C){1&m&&(a.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),a.SDv(3,2),a.qZA(),a.TgZ(4,"a",3),a._uU(5),a.qZA()()(),a.TgZ(6,"sz-ui-table",4),a.NdJ("update",function(){return C.get()}),a.qZA()),2&m&&(a.xp6(5),a.Oqu(C.analysis.code),a.xp6(1),a.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",C.dataSource))},dependencies:[e.Bz,e.rH,u.Vn,S.K,l.n,t.z],encapsulation:2}),y})()},7076:(v,i,s)=>{s.d(i,{y:()=>O});var e=s(3712),p=s(1101),n=s(7263),r=(()=>((r=r||{}).Validated="Validated",r.Returned="Returned",r.Forwarded="Forwarded",r.Destroyed="Destroyed",r.Collected="Collected",r.Accepted="Accepted",r.Created="Created",r))(),l=(()=>((l=l||{}).Created="Created",l.Pending="Pending",l.Started="Started",l.Finished="Finished",l))(),u=s(1646),h=s(9155),P=s(5879);let O=(()=>{class a{transform(t,d=!1){return t in n.v?this.transformComparisonOperator(t,d):t in l?this.transformTestState(t):t in r?this.transformSpecimenState(t):t in e.V?this.transformEmailType(t):t in p.z?this.transformPhoneType(t):t in h.m?this.transformSex(t):t in u.n?this.transformDocumentType(t):""}transformComparisonOperator(t,d){switch(t){case n.v.Equal:return d?"==":"\u062A\u0633\u0627\u0648\u064A";case n.v.GreaterThan:return d?">":"\u0627\u0643\u0628\u0631 \u0645\u0646";case n.v.GreaterThanOrEqual:return d?">=":"\u0627\u0643\u0628\u0631 \u0645\u0646 \u0627\u0648 \u064A\u0633\u0627\u0648\u064A";case n.v.LessThan:return d?"<":"\u0623\u0635\u063A\u0631 \u0645\u0646";case n.v.LessThanOrEqual:return d?"<=":"\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0648 \u064A\u0633\u0627\u0648\u064A";case n.v.RangeWithBoundaries:return d?"<==>":"\u0645\u062C\u0627\u0644 \u0645\u0639 \u0627\u0644\u062D\u062F\u0648\u062F";case n.v.RangeWithoutBoundaries:return d?"<>":"\u0645\u062C\u0627\u0644 \u0628\u062F\u0648\u0646 \u0627\u0644\u062D\u062F\u0648\u062F";case n.v.Not:return d?"!=":"\u0644\u064A\u0633 \u0641\u064A";default:return""}}transformTestState(t){switch(t){case l.Created:return "\u0645\u0646\u0634\u0623\u0629";case l.Started:return "\u0628\u062F\u0623";case l.Finished:return "\u0627\u0646\u062A\u0647\u062A";case l.Pending:return "\u0642\u064A\u062F \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631";default:return""}}transformSpecimenState(t){switch(t){case r.Accepted:return "\u062A\u0645 \u0627\u0644\u0642\u0628\u0648\u0644";case r.Collected:return "\u062A\u0645 \u0627\u0644\u062C\u0645\u0639";case r.Destroyed:return "\u062A\u0645 \u0627\u0644\u0627\u062A\u0644\u0627\u0641";case r.Forwarded:return "\u062A\u0645 \u0627\u0644\u062A\u062D\u0648\u064A\u0644";case r.Validated:return "\u062A\u0645 \u0627\u0644\u062A\u062D\u0642\u0642";case r.Created:return "\u0645\u0646\u0634\u0623\u0629";default:return""}}transformEmailType(t){switch(t){case e.V.Private:return "\u062E\u0627\u0635";case e.V.Public:return "\u0639\u0627\u0645";case e.V.Work:return "\u0627\u0644\u0639\u0645\u0644";default:return""}}transformPhoneType(t){switch(t){case p.z.Home:return "\u0627\u0644\u0645\u0646\u0632\u0644";case p.z.Mobile:return "\u0627\u0644\u062C\u0648\u0627\u0644";case p.z.Work:return "\u0627\u0644\u0639\u0645\u0644";default:return""}}transformSex(t){switch(t){case h.m.Female:return "\u0627\u0646\u062B\u0649";case h.m.Male:return "\u0630\u0643\u0631";default:return""}}transformDocumentType(t){switch(t){case u.n.BankCard:return "\u0628\u0637\u0627\u0642\u0629 \u0645\u0635\u0631\u0641";case u.n.DriverLicense:return "\u0631\u062E\u0635\u0629 \u0642\u064A\u0627\u062F\u0629";case u.n.NationalCard:return "\u0628\u0637\u0627\u0642\u0629 \u0648\u0637\u0646\u064A\u0629";case u.n.Passport:return "\u062C\u0648\u0627\u0632 \u0633\u0641\u0631";case u.n.TravelDocument:return "\u0648\u062B\u064A\u0642\u0629 \u0633\u0641\u0631";case u.n.Other:return "\u0623\u062E\u0631\u0649";default:return""}}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275pipe=P.Yjl({name:"typeI18n",type:a,pure:!0,standalone:!0}),a})()},3712:(v,i,s)=>{s.d(i,{V:()=>e});var e=(()=>((e=e||{}).Private="Private",e.Public="Public",e.Work="Work",e))();Object.keys(e).map(n=>e[n])},1101:(v,i,s)=>{s.d(i,{z:()=>e});var e=(()=>((e=e||{}).Home="Home",e.Mobile="Mobile",e.Work="Work",e))();Object.keys(e).map(n=>e[n])},7263:(v,i,s)=>{s.d(i,{v:()=>e});var e=(()=>((e=e||{}).Equal="Equal",e.GreaterThan="GreaterThan",e.GreaterThanOrEqual="GreaterThanOrEqual",e.LessThan="LessThan",e.LessThanOrEqual="LessThanOrEqual",e.Not="Not",e.RangeWithBoundaries="RangeWithBoundaries",e.RangeWithoutBoundaries="RangeWithoutBoundaries",e))()},1646:(v,i,s)=>{s.d(i,{n:()=>e});var e=(()=>((e=e||{}).NationalCard="NationalCard",e.BankCard="BankCard",e.DriverLicense="DriverLicense",e.Passport="Passport",e.TravelDocument="TravelDocument",e.Other="Other",e))();Object.keys(e).map(n=>e[n])},9155:(v,i,s)=>{s.d(i,{m:()=>e});var e=(()=>((e=e||{}).Male="Male",e.Female="Female",e))();Object.keys(e).map(n=>e[n])}}]);