import{a as N}from"./chunk-NP7SVCCO.js";import{h as Q}from"./chunk-5NLLDK4F.js";import{a as ue,b as Ee,c as h}from"./chunk-LAEA5R7O.js";import{a as Pe}from"./chunk-7UAY7NTV.js";import{a as O}from"./chunk-BTQ6GMBV.js";import"./chunk-FL73F5K2.js";import{a as M}from"./chunk-SWJ7RLQH.js";import{e as _e,f as de,g as Se,j as g}from"./chunk-D56MTZ33.js";import"./chunk-7FFA5B5B.js";import{b as C}from"./chunk-4PHVAQ5I.js";import{d as me,e as le,f as p,g as pe}from"./chunk-BJPU6W4M.js";import{a as re,b as ne,d as ae,e as se,g as c}from"./chunk-HG4PA5ON.js";import{s as ee,t as oe,x as te,z as ie}from"./chunk-VRMADYJ5.js";import{Ba as d,J as q,L as H,N as J,P as W,d as A,f as j,g as U,k as X,m as Y,p as B,q as x,s as k,t as w}from"./chunk-6XBADPGE.js";import{Ga as K,Ja as Z}from"./chunk-6NFGCLSN.js";import{Cb as z,Db as $,Eb as V,Fb as E,Gb as S,Hb as m,M as L,a as v,b as R,fa as D,gb as l,hb as a,hc as f,kc as F,nc as b,oa as P,ob as I,oc as G,pa as y,vb as s}from"./chunk-6OQDJKEQ.js";var ce=(()=>{let o=class o extends _e{constructor(i,t,r,n){super(r),this.mpplService=i,this.fb=t,this.dialog=r,this.data=n,this.nationalities=this.mpplService.nationalities.getAll({orderBy:["name"]}),this.languages=this.mpplService.languages.getAll({orderBy:["name"]}),this.sexes=Object.keys(h).map(_=>h[_]),this.form=t.group({sex:[n.sex,[A.required]],languageId:[n.languageId,[A.required]],title:[n.title,[Ee()]],ssn:[n.ssn,[]],nationalityId:[n.nationalityId,[]],birthDate:[n.birthDate,[]]});}submit(){this.IsValid()&&this.save(this.mpplService.persons.update(this.data.id,R(v({},this.form.value),{titleId:this.form.value.title?.id})));}};o.ɵfac=function(t){return new(t||o)(a(O),a(x),a(re),a(ne));},o.ɵcmp=P({type:o,selectors:[["medisy-people-person-save"]],standalone:!0,features:[f([]),I,F],decls:12,vars:7,consts:()=>{let i;i="\u0627\u0644\u062C\u0646\u0633\u064A\u0629";let t;t="\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0637\u0646\u064A";let r;r="\u0627\u0644\u0644\u063A\u0629";let n;n="\u0627\u0644\u062C\u0646\u0633";let _;_="\u0627\u0644\u0644\u0642\u0628";let T;return T="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0648\u0644\u0627\u062F\u0629",[[3,"header"],[1,"sz-form",3,"formGroup"],[1,"sz-form-row"],["formControlName","nationalityId","label",i,3,"source"],["formControlName","ssn","label",t],["formControlName","languageId","label",r,3,"source"],["formControlName","sex","label",n,3,"source","localizedValue"],["formControlName","title","label",_],["formControlName","birthDate","label",T],[3,"actions"]];},template:function(t,r){t&1&&(m(0,"sz-ui-dialog-header",0),E(1,"mat-dialog-content")(2,"form",1)(3,"div",2),m(4,"sz-ui-form-field-select",3)(5,"sz-ui-form-field-input",4),S(),m(6,"sz-ui-form-field-select",5),E(7,"div",2),m(8,"sz-ui-form-field-select",6)(9,"medisy-form-field-title-search",7),S(),m(10,"sz-ui-form-field-date",8),S()(),m(11,"sz-ui-dialog-actions",9)),t&2&&(s("header",r.header),l(2),s("formGroup",r.form),l(2),s("source",r.nationalities),l(2),s("source",r.languages),l(2),s("source",r.sexes)("localizedValue",!0),l(3),s("actions",r.actions));},dependencies:[w,X,j,U,Y,B,g,de,Se,ie,oe,c,se,ee,ue,te],encapsulation:2});let e=o;return e;})();function Ne(e,o){if(e&1&&m(0,"sz-ui-card",2),e&2){let Ce=o.$implicit;s("card",Ce);}}var Me=(()=>{let o=class o{constructor(i,t,r,n){this.dialog=i,this.mlabService=t,this.route=r,this.router=n,this.items=[],this.personMenu=pe.more([p.edit(()=>this.openSaveComponent()),p.divider(),p.default(d.names,"info",()=>this.navigate("names")),p.default(d.phones,"phone",()=>this.navigate("phones")),p.default(d.emails,"alternate_email",()=>this.navigate("emails")),p.default(d.addresses,"home",()=>this.navigate("addresses")),p.default(d.documents,"badge",()=>this.navigate("documents"))]),this.person=this.route.snapshot.data.person;let _={title:0,icon:"science",subtitle:d.analyses,indicator:!0,clickFn:()=>this.router.navigate(["/mlab/analyses"],{queryParams:{personIds:[this.person.id]}})};this.items.push(_),this.getAnalysisCount(_);}navigate(i){this.router.navigate([i],{relativeTo:this.route});}getAnalysisCount(i){this.mlabService.analyses.count().subscribe(t=>{i.title=t;});}openSaveComponent(){this.dialog.open(ce,{data:this.person}).afterClosed().pipe(L(1)).subscribe(i=>{i&&(this.person=i);});}};o.ɵfac=function(t){return new(t||o)(a(ae),a(M),a(q),a(H));},o.ɵcmp=P({type:o,selectors:[["medisy-peopel-person"]],features:[f([M])],decls:5,vars:4,consts:[[3,"title","menu"],[1,"sz-grid-card"],[3,"card"]],template:function(t,r){t&1&&(m(0,"sz-ui-header-info",0),b(1,"personName"),E(2,"div",1),$(3,Ne,1,1,"sz-ui-card",2,z),S()),t&2&&(s("title",G(1,2,r.person))("menu",r.personMenu),l(3),V(r.items));},dependencies:[N,C,Pe],encapsulation:2});let e=o;return e;})();var Oe=[{path:"",component:Me},{path:"names",loadComponent:()=>import("./chunk-LWRKRPRM.js").then(e=>e.PersonNamesComponent)},{path:"phones",loadComponent:()=>import("./chunk-Y4TMYZSP.js").then(e=>e.PersonPhonesComponent)},{path:"emails",loadComponent:()=>import("./chunk-RPRNXIWQ.js").then(e=>e.PersonEmailsComponent)},{path:"documents",loadComponent:()=>import("./chunk-DF5QKEPP.js").then(e=>e.PersonDocumentsComponent)},{path:"addresses",loadComponent:()=>import("./chunk-OLJ6RSKD.js").then(e=>e.PersonAddressesComponent)}];var Oo=(()=>{let o=class o{};o.ɵfac=function(t){return new(t||o)();},o.ɵmod=y({type:o}),o.ɵinj=D({providers:[O],imports:[k,J.forChild(Oe),Q,Z,N,g,C,me,W,c,K,le]});let e=o;return e;})();export{Oo as PersonModule};/**i18n:01970b5be1a6a06655fe4c3b2f38689bdabee61974e5aa4bcc571eb668de444c*/