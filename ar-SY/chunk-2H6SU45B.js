import{a as O}from"./chunk-EECHJOTC.js";import{a as I}from"./chunk-OUFOEIAO.js";import{a as r,d as oe,e as ne,f as ae,i as re,j as se}from"./chunk-TPH2WFJI.js";import{b as Y,f as Z,g as x,h as ee,j as ie,k as te}from"./chunk-UK5PWDVA.js";import{j as c,k as W}from"./chunk-YRDJQT3N.js";import{a as G,b as $,d as B,e as U,g as j}from"./chunk-KGWKQ6FR.js";import{c as w,p as H,q as Q,r as J,t as K}from"./chunk-7ITRZQIY.js";import{i as X}from"./chunk-A56FT5YZ.js";import{d as u,f as b,g as z,l as R,n as F,q as P,r as D,u as y}from"./chunk-BHO3RGW2.js";import{Y as M,Z as q}from"./chunk-KYIHBKDH.js";import{a as L,d as V}from"./chunk-BMCN66UE.js";import{la as k}from"./chunk-O5CF5VDW.js";import{Fa as h,Jb as p,Kb as f,Lb as _,Vb as v,Wb as C,ab as m,bb as a,mc as N,na as S,nc as T,pb as A,yb as s}from"./chunk-2TFHNGIL.js";import{a as E,b as g}from"./chunk-IL567IQQ.js";var de=(()=>{let n=class n extends Z{constructor(t,e,i,o){super(i),this.sntiService=t,this.fb=e,this.dialog=i,this.data=o,this.notificationTypes=Object.keys(O).map(l=>O[l]),this.form=e.group({name:[o?.notificationRecipient?.name,[u.maxLength(4096)]],enabled:[o?.notificationRecipient?.enabled??!0,[u.required]],identifier:[o?.notificationRecipient?.identifier,[u.required]],notificationType:[o?.notificationRecipient?.notificationType,[u.required]]});}submit(){this.IsValid()&&(this.data&&this.data.notificationRecipient?this.save(this.sntiService.notifications.recipients.update(this.data.notificationId,this.data.notificationRecipient.id,this.form.value)):this.save(this.sntiService.notifications.recipients.create(this.data.notificationId,this.form.value)));}};n.ɵfac=function(e){return new(e||n)(a(I),a(D),a(G),a($));},n.ɵcmp=S({type:n,selectors:[["sz-mgmt-notification-notification-recipients-save"]],standalone:!0,features:[N([]),A,T],decls:9,vars:7,consts:()=>{let t;t="\u0627\u0644\u0627\u0633\u0645";let e;e="\u0627\u0644\u0646\u0645\u0637";let i;i="\u0627\u0644\u0645\u0639\u0631\u0641";let o;return o="\u0645\u0641\u0639\u0644",[o,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",t],["formControlName","notificationType","label",e,3,"source","localizedValue"],["formControlName","identifier","label",i],["formControlName","enabled"],[3,"actions"]];},template:function(e,i){e&1&&(_(0,"sz-ui-dialog-header",1),p(1,"mat-dialog-content")(2,"form",2),_(3,"sz-ui-form-field-input",3)(4,"sz-ui-form-field-select",4)(5,"sz-ui-form-field-input",5),p(6,"mat-checkbox",6),v(7,0),f()()(),_(8,"sz-ui-dialog-actions",7)),e&2&&(s("title",i.title)("subtitle",i.subtitle)("alert",i.alert()),m(2),s("formGroup",i.form),m(2),s("source",i.notificationTypes)("localizedValue",!0),m(4),s("actions",i.actions));},dependencies:[y,R,b,z,F,P,j,U,X,Q,H,te,x,ee,K,w,J],encapsulation:2});let d=n;return d;})();var He=(()=>{let n=class n{constructor(t,e,i){this.route=t,this.dialog=e,this.sntiService=i,this.notification=h.required(),this.dataSource=new oe(),this.appBarConfig={title:M.recipients,subtitle:this.notification().name,backEnabled:!0,menu:W.default().setItems([c.add(this.openSaveComponent.bind(this)),c.menu([c.search()])])},this.dataSource.columnDefs.push(r.uuid("id"),r.string("name").setStacked(r.enum("notificationType").setHeaderName(M.type).setValueGetter(o=>q(o.notificationType)).setValueClassFontSmall()),r.string("identifier"),r.boolean("enabled").setChangeFn((o,l)=>{this.sntiService.notifications.recipients.update(this.notification().id,o.id,g(E({},o),{enabled:l})).subscribe(le=>{this.dataSource.addOrUpdateItem(le);});}),r.date("createdAt").setVisible(!1),r.date("updatedAt").setVisible(!1),r.menu([c.edit(this.openSaveComponent.bind(this)),c.divider(),c.delete(this.openNotificationRecipientDeleteComponent.bind(this))]));}ngOnInit(){this.get();}openNotificationRecipientDeleteComponent(t){this.dialog.open(ie,{data:Y.delete(this.sntiService.notifications.recipients.delete(t.notificationId,t.id),t)}).afterClosed().subscribe(e=>{this.dataSource.delete(e);});}openSaveComponent(t){this.dialog.open(de,{data:{notificationId:this.notification().id,notificationRecipient:t}}).afterClosed().subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}get(){this.sntiService.notifications.recipients.get(this.notification().id,this.dataSource.getQuery()).pipe(ne(this.dataSource.state)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};n.ɵfac=function(e){return new(e||n)(a(L),a(B),a(I));},n.ɵcmp=S({type:n,selectors:[["sz-mgmt-notification-notification-recipients"]],inputs:{notification:[1,"notification"]},standalone:!0,features:[N([]),T],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(e,i){e&1&&(p(0,"sz-ui-table-bar",0),C("changed",function(){return i.get();}),f(),p(1,"sz-ui-table",1),C("update",function(){return i.get();}),f()),e&2&&(s("config",i.appBarConfig)("dataSource",i.dataSource),m(),s("dataSource",i.dataSource));},dependencies:[V,se,re,ae,k],encapsulation:2});let d=n;return d;})();export{He as a};/**i18n:254aa6fe1cd18dc65995e6e9397465bfcd88a7e4c31f715b7e9eda5212bf646d*/