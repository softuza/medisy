import{d as Xe}from"./chunk-ND6JYHBI.js";import"./chunk-TGLGAP7F.js";import{b as A}from"./chunk-QVGAT2AD.js";import{b as Ve}from"./chunk-AUWI72SV.js";import{a as ve,b as be,c as Be,d as Fe,e as Ge}from"./chunk-IFNMQRAM.js";import{a as Ue}from"./chunk-W3SCOMF3.js";import{a as g}from"./chunk-PI4PP26V.js";import{a as L}from"./chunk-RLK6UWFY.js";import"./chunk-YMRPXBKM.js";import{b as ye,h as ze}from"./chunk-JHODOAA4.js";import"./chunk-H7NG3CYC.js";import{a as P}from"./chunk-Q6LE2SQU.js";import"./chunk-EIEESADP.js";import"./chunk-XAJI6S7M.js";import{e as he,f as De,g as $e,j as I}from"./chunk-5XQIRF4K.js";import{a as T}from"./chunk-PVTJ7D2N.js";import{d as Le,e as C,f as Ie,h as Ae,j as Re}from"./chunk-L6E6STES.js";import{a as Se,b as Ee,d as pe,e as de,g as f}from"./chunk-DIXRY2BM.js";import"./chunk-SH6LLNPF.js";import{A as Te,e as fe,f as ce,t as Ce,x as Pe,y as ge}from"./chunk-JYUHLNJX.js";import"./chunk-Q6LA27NV.js";import{h as Ne}from"./chunk-TKDGFNHB.js";import{b as ue,c}from"./chunk-TPSD3DFS.js";import"./chunk-4IQAUZQG.js";import{d,f as Q,g as J,k as M,l as K,n as Z,q as ee,r as oe,t as ie,u as te}from"./chunk-CBNQJNHR.js";import{p as ae,t as le}from"./chunk-TW7AXWBO.js";import{a as ne,c as re,e as _e}from"./chunk-3IXDZKQC.js";import{ha as se,ia as me,ka as Me,la as Oe}from"./chunk-YM6Z3W7O.js";import"./chunk-G4CXIA4B.js";import{Gb as Y,Hb as x,Ib as j,Jb as s,Kb as a,Lb as l,Vb as N,Wb as w,bb as E,cb as m,ea as G,hc as k,na as O,nc as u,oa as U,oc as H,qb as X,sc as q,tc as W,zb as S}from"./chunk-2CGEOOG5.js";import{a as B,b as F}from"./chunk-FJU4DKT4.js";var xe=(()=>{let e=class e extends he{constructor(r,o,i,t){super(i),this.mpplService=r,this.fb=o,this.dialog=i,this.data=t,this.nationalities=this.mpplService.nationalities.getAll({orderBy:["name"]}),this.languages=this.mpplService.languages.getAll({orderBy:["name"]}),this.sexes=Object.keys(A).map(p=>A[p]),this.form=o.group({sex:[t.sex,[d.required]],languageId:[t.languageId,[d.required]],title:[t.title,[Ue()]],ssn:[t.ssn,[]],nationalityId:[t.nationalityId,[]],birthDate:[t.birthDate,[]],primaryEmail:[t?.primaryEmail,[d.email]],secondaryEmail:[t?.secondaryEmail,[d.email]],mobilePhone:new M(t?.mobilePhone),homePhone:new M(t?.homePhone),workPhone:new M(t?.workPhone),homeAddress:new M(t?.homeAddress)});}submit(){this.IsValid()&&this.save(this.mpplService.persons.update(this.data.id,F(B({},this.form.value),{titleId:this.form.value.title?.id})));}};e.ɵfac=function(o){return new(o||e)(m(g),m(oe),m(Se),m(Ee));},e.ɵcmp=O({type:e,selectors:[["sz-medisy-people-person-save"]],standalone:!0,features:[u([]),X,H],decls:32,vars:9,consts:()=>{let r;r="\u0627\u0644\u062C\u0646\u0633\u064A\u0629";let o;o="\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0637\u0646\u064A";let i;i="\u0627\u0644\u0644\u063A\u0629";let t;t="\u0627\u0644\u062C\u0646\u0633";let p;p="\u0627\u0644\u0644\u0642\u0628";let R;R="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0648\u0644\u0627\u062F\u0629";let h;h="\u0627\u0644\u062C\u0648\u0627\u0644";let D;D="\u0627\u0644\u0645\u0646\u0632\u0644";let $;$="\u0627\u0644\u0639\u0645\u0644";let y;y="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0627\u0644\u0627\u0633\u0627\u0633\u064A";let z;z="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0627\u0644\u062B\u0627\u0646\u0648\u064A";let V;V="\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0646\u0632\u0644";let v;v="\u0627\u0644\u0647\u0648\u0627\u062A\u0641";let b;return b="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A",[V,v,b,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],[1,"sz-form-row"],["formControlName","nationalityId","label",r,3,"source"],["formControlName","ssn","label",o],["formControlName","languageId","label",i,3,"source"],["formControlName","sex","label",t,3,"source","localizedValue"],["formControlName","title","label",p],["formControlName","birthDate","label",R],[1,"tw-mb-4"],["multi",""],["formControlName","homeAddress"],["formControlName","mobilePhone","label",h],["formControlName","homePhone","label",D],["formControlName","workPhone","label",$],["formControlName","primaryEmail","label",y],["formControlName","secondaryEmail","label",z],[3,"actions"]];},template:function(o,i){o&1&&(l(0,"sz-ui-dialog-header",3),s(1,"mat-dialog-content")(2,"form",4)(3,"div",5),l(4,"sz-ui-form-field-select",6)(5,"sz-ui-form-field-input",7),a(),l(6,"sz-ui-form-field-select",8),s(7,"div",5),l(8,"sz-ui-form-field-select",9)(9,"sz-medisy-people-title-search",10),a(),l(10,"sz-ui-form-field-date",11),s(11,"div",12)(12,"mat-accordion",13)(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title"),N(16,0),a()(),l(17,"sz-ui-form-field-address",14),a(),s(18,"mat-expansion-panel")(19,"mat-expansion-panel-header")(20,"mat-panel-title"),N(21,1),a()(),l(22,"sz-ui-form-field-phone-number",15)(23,"sz-ui-form-field-phone-number",16)(24,"sz-ui-form-field-phone-number",17),a(),s(25,"mat-expansion-panel")(26,"mat-expansion-panel-header")(27,"mat-panel-title"),N(28,2),a()(),l(29,"sz-ui-form-field-input",18)(30,"sz-ui-form-field-input",19),a()()()()(),l(31,"sz-ui-dialog-actions",20)),o&2&&(S("title",i.title)("subtitle",i.subtitle)("alert",i.alert()),E(2),S("formGroup",i.form),E(2),S("source",i.nationalities),E(2),S("source",i.languages),E(2),S("source",i.sexes)("localizedValue",!0),E(23),S("actions",i.actions));},dependencies:[te,K,Q,J,Z,ee,I,De,$e,Te,fe,Ce,Pe,f,de,Ge,Fe,ve,be,Be,Xe,ce,ge],encapsulation:2});let n=e;return n;})();function qe(n,e){if(n&1&&l(0,"sz-ui-card",3),n&2){let ke=e.$implicit;S("card",ke);}}var je=(()=>{let e=class e{constructor(r,o,i,t){this.dialog=r,this.mlabService=o,this.route=i,this.router=t,this.items=[],this.personMenu=Re.more([Ae.edit(()=>this.openSaveComponent()),C.divider(),C.item(c.names,"info",()=>this.navigate("names")),C.item(c.documents,"badge",()=>this.navigate("documents"))]),this.person=this.route.snapshot.data.person;let p={title:0,icon:"science",subtitle:c.analyses,indicator:!0,clickFn:()=>this.router.navigate(["/mlab/analyses"],{state:{filter:{field:"personId",op:ae.Equal,value:this.person.id}}})};this.items.push(p),this.getAnalysisCount(p);}navigate(r){this.router.navigate([r],{relativeTo:this.route});}getAnalysisCount(r){this.mlabService.analyses.count({filters:le.create().equal("personId",this.person.id).filters()}).subscribe(o=>{r.title=o;});}openSaveComponent(){this.dialog.open(xe,{data:this.person}).afterClosed().subscribe(r=>{r&&(this.person=r);});}openBarcodeWriterComponent(){this.dialog.open(ze,{data:{format:ye.QR_CODE,msg:`personid.${this.person.id}`}}).afterClosed().subscribe({});}};e.ɵfac=function(o){return new(o||e)(m(pe),m(P),m(ne),m(re));},e.ɵcmp=O({type:e,selectors:[["sz-medisy-people-person"]],features:[u([P])],decls:8,vars:4,consts:[[3,"title","menu"],["end","","mat-icon-button","",3,"click"],[1,"sz-grid-card"],[3,"card"]],template:function(o,i){o&1&&(s(0,"sz-ui-app-bar",0),q(1,"personName"),s(2,"button",1),w("click",function(){return i.openBarcodeWriterComponent();}),s(3,"mat-icon"),k(4,"qr_code"),a()()(),s(5,"div",2),x(6,qe,1,1,"sz-ui-card",3,Y),a()),o&2&&(S("title",W(1,2,i.person))("menu",i.personMenu),E(6),j(i.items));},dependencies:[se,L,T,Me,Ve],encapsulation:2});let n=e;return n;})();var we=[{path:"",component:je},{path:"names",loadComponent:()=>import("./chunk-42P6PK3F.js").then(n=>n.PersonNamesComponent)},{path:"documents",loadComponent:()=>import("./chunk-SAJJXFUT.js").then(n=>n.PersonDocumentsComponent)}];var Zo=(()=>{let e=class e{};e.ɵfac=function(o){return new(o||e)();},e.ɵmod=U({type:e}),e.ɵinj=G({providers:[g],imports:[ie,_e.forChild(we),Ne,me,L,I,T,Le,ue,f,Oe,Ie]});let n=e;return n;})();export{Zo as PersonModule};/**i18n:74c2b26e2511915b63b53dced5a329acbedd3101dfbc00b668fe6d77d7375591*/