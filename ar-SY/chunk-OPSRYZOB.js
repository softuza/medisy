import{a as Ie}from"./chunk-W46QVTWD.js";import{a as U}from"./chunk-X4LE7LUR.js";import"./chunk-7Q6OW2UL.js";import{b as Z}from"./chunk-DU2E6YP2.js";import{a as ee}from"./chunk-VDIBXAQD.js";import{d as q,e as p,g as ae,h as Le,i as H,j as se}from"./chunk-F64HSAHQ.js";import"./chunk-HHCFDSF5.js";import"./chunk-LSNQZFOO.js";import{a as ve,b as j}from"./chunk-Q5PPAZIB.js";import"./chunk-AUVX5464.js";import{b as G,f as X,g as x,h as w,j as Q,k}from"./chunk-WHAG7LSE.js";import{a as d}from"./chunk-3DVWFHKJ.js";import"./chunk-QPQIE4A5.js";import{a as z,b as Y,d as y,e as B,g as F}from"./chunk-FWJIHBSI.js";import{a as Ce,b as Me,c as Ne,h as ye,p as he,q as ne,r as ge,t as Ae}from"./chunk-GTKDPFSM.js";import"./chunk-OV7FHNU5.js";import"./chunk-DDPI6SSN.js";import{h as fe,i as Oe}from"./chunk-ZWIAKVOR.js";import{b as Te,d as O,f as b,g as v,k as ce,l as L,o as I,r as V,s as D,u as P}from"./chunk-HQCVSBMA.js";import{b as u,c as C}from"./chunk-PEMO7RUT.js";import{a as be}from"./chunk-XPD37T4K.js";import"./chunk-VBJIFLAU.js";import"./chunk-ZQGZRSRX.js";import{a as $,b as Re}from"./chunk-OTKLRWP3.js";import"./chunk-LQS4VE4S.js";import{p as N,r as te,s as oe,x as ie}from"./chunk-CGZI6P6W.js";import"./chunk-Q3IY2OYF.js";import"./chunk-OVQUXRAN.js";import{Na as re}from"./chunk-VALEY5R5.js";import{Fb as M,Kb as _,Lb as m,Mb as l,Wb as ue,Xb as A,Zb as W,cb as s,hc as Se,ja as n,jc as Ee,na as S,nb as h,qc as c,rc as E,sb as g,zb as a}from"./chunk-ON3RGNH3.js";import"./chunk-A3HJOLUF.js";function xe(r,i){if(r&1&&l(0,"sz-ui-form-field-select",6),r&2){let K=W();a("source",K.testTypeResultOptions);}}function we(r,i){r&1&&(_(0,"div",3),l(1,"sz-ui-form-field-input-number",12)(2,"sz-ui-form-field-input-number",13),m());}function Qe(r,i){r&1&&(_(0,"mat-form-field",9)(1,"label"),l(2,"input",14),m()());}function ke(r,i){if(r&1&&(g(0,we,3,0,"div",3)(1,Qe,3,0,"mat-form-field",9),_(2,"div",3),l(3,"sz-ui-form-field-input-number",10)(4,"sz-ui-form-field-input-number",11),m()),r&2){let K=W();M(K.isRange()?0:1);}}var Ye=(()=>{let i=class i extends X{constructor(){let e=n(z);super(e),this.mlabService=n(d),this.fb=n(D),this.data=n(Y),this.units=[],this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"]}),this.unitSelectConfig={autoSelect:!0},this.referenceGroups=this.mlabService.referenceGroups.getAll({orderBy:["nameEn"]}),this.testTypeResultOptions=[],this.comparisonOperators=Object.keys(Z).map(T=>Z[T]),this.isQuantitative=!1;let t=this.fb;this.dialog=e;let o=this.data;console.log(o),this.form=t.group({description:[o.referenceValue?.description,[O.maxLength(4096)]],testTypeId:[o.testType.id,[O.required]],unitId:[o.referenceValue?.unitId,[]],comparisonOperator:new ce(o.referenceValue?.comparisonOperator??Z.Range,[O.required]),referenceGroupId:[o.referenceValue?.referenceGroupId,[O.required]],value:[o.referenceValue?.value,[]],lowerBound:t.control(o.referenceValue?.lowerBound,[]),upperBound:t.control(o.referenceValue?.upperBound,[]),minValue:t.control(o.referenceValue?.minValue,[]),maxValue:t.control(o.referenceValue?.maxValue,[]),testTypeResultOptionId:[o.referenceValue?.testTypeResultOptionId,[]]}),this.testTypeSelected(o.testType);}testTypeSelected(e){e.unitId&&e.unit?this.getUnits(e.unit):this.units=[],this.testTypeResultOptions=[],e.testResultType===ee.Qualitative&&this.mlabService.testTypes.resultOptions.getAllItems(e.id,{orderBy:["nameEn"]}).pipe(ye(this.indicator)).subscribe(t=>{t&&(this.testTypeResultOptions=t);}),this.isQuantitative=e.testResultType===ee.Quantitative;}getUnits(e){this.units=[e],this.form.patchValue({unitId:e?.id}),this.mlabService.unitConverters.getAllItems({filters:ie.create().equal("toUnitId",e.id).filters()}).subscribe(t=>{this.units.push(...t.map(o=>o.fromUnit));});}isRange(){return this.form.value.comparisonOperator===Z.Range;}submit(){if(!this.IsValid())return;let e=this.form.value;if(e.minValue){if(e.lowerBound&&e.minValue>e.lowerBound){this.form.controls.minValue.setErrors({incorrect:!0});return;}if(e.value&&typeof e.value=="number"&&e.minValue>e.value){this.form.controls.minValue.setErrors({incorrect:!0});return;}}if(e.maxValue){if(e.upperBound&&e.maxValue<e.upperBound){this.form.controls.maxValue.setErrors({incorrect:!0});return;}if(e.value&&typeof e.value=="number"&&e.maxValue<e.value){this.form.controls.maxValue.setErrors({incorrect:!0});return;}}this.data.referenceValue?this.save(this.mlabService.referenceValues.update(this.data.referenceValue.id,this.form.value)):this.save(this.mlabService.referenceValues.create(this.form.value));}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-medisy-laboratory-reference-values-save"]],standalone:!0,features:[c([d]),h,E],decls:11,vars:11,consts:()=>{let e;e="\u0627\u0644\u0641\u0626\u0629 \u0627\u0644\u0645\u0631\u062C\u0639\u064A\u0629";let t;t="\u0648\u0627\u062D\u062F\u0629";let o;o="\u0627\u0644\u0639\u0645\u0644\u064A\u0629";let T;T="\u0642\u064A\u0645\u0629";let R;R="\u0627\u0644\u0648\u0635\u0641";let le;le="\u0627\u0642\u0644 \u0642\u064A\u0645\u0629";let pe;pe="\u0627\u0639\u0644\u0649 \u0642\u064A\u0645\u0629";let _e;_e="\u0628\u062F\u0627\u064A\u0629";let me;me="\u0646\u0647\u0627\u064A\u0629";let de;return de="\u0642\u064A\u0645\u0629",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","referenceGroupId","label",e,3,"source"],[1,"sz-form-row"],["formControlName","unitId","label",t,3,"source","config"],["formControlName","comparisonOperator","label",o,3,"source","localizedValue"],["formControlName","testTypeResultOptionId","label",T,3,"source"],["formControlName","description","label",R],[3,"actions"],[1,"tw-flex-1"],["formControlName","minValue","label",le],["formControlName","maxValue","label",pe],["formControlName","lowerBound","label",_e],["formControlName","upperBound","label",me],["autocomplete","off","formControlName","value","matInput","","placeholder",de]];},template:function(t,o){t&1&&(l(0,"sz-ui-dialog-header",0),_(1,"mat-dialog-content")(2,"form",1),l(3,"sz-ui-form-field-select",2),_(4,"div",3),l(5,"sz-ui-form-field-select",4)(6,"sz-ui-form-field-select",5),m(),g(7,xe,1,1,"sz-ui-form-field-select",6)(8,ke,5,1,"div",3),l(9,"sz-ui-form-field-textarea",7),m()(),l(10,"sz-ui-dialog-actions",8)),t&2&&(a("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),s(2),a("formGroup",o.form),s(),a("source",o.referenceGroups),s(2),a("source",o.units)("config",o.unitSelectConfig),s(),a("source",o.comparisonOperators)("localizedValue",!0),s(),M(o.isQuantitative?8:7),s(3),a("actions",o.actions));},dependencies:[P,L,Te,b,v,I,V,F,B,Oe,fe,j,k,x,w,Me,Ce,Ae,he,ge,ne],encapsulation:2});let r=i;return r;})();var Be=(()=>{let i=class i{constructor(){this.dialog=n(y),this.mlabService=n(d),this.router=n(te),this.route=n(N),this.testType=this.route.snapshot.data.testType,this.dataSource=new Le(),this.card={header:{title:$.reference_values},menu:C.more([u.add(this.openSaveComponent.bind(this))])},this.dataSource.columnDefs.push(p.uuid("id"),p.string("referenceGroup.nameEn").setStacked(p.string("referenceGroup.nameAr").setValueClassFontSmall()),p.string("unit").setValueGetter(e=>e.unit?.symbol),p.enum("comparisonOperator").setValueGetter(e=>Re(e.comparisonOperator)),p.number("_value").setValueGetter(e=>e.testTypeResultOption?e.testTypeResultOption.nameEn:e.value!==null?e.value:`${e.lowerBound} - ${e.upperBound}`).setHeaderSortable(!1),p.date("createdAt").setVisible(!1),p.date("updatedAt").setVisible(!1),p.menu(C.more([u.edit(this.openSaveComponent.bind(this)),u.divider(),u.delete(this.openReferenceValueDeleteComponent.bind(this))]))),this.dataSource.filtration?.equal("testTypeId",this.testType.id),this.get();}openSaveComponent(e){this.dialog.open(Ye,{data:{testType:this.testType,referenceValue:e}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openReferenceValueDeleteComponent(e){this.dialog.open(Q,{data:G.delete(this.mlabService.referenceValues.delete(e.id),e)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}get(){this.mlabService.referenceValues.get(this.dataSource.getQuery()).pipe(H(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-medisy-laboratory-test-type-reference-values"]],standalone:!0,features:[c([d]),E],decls:2,vars:2,consts:[[3,"card"],["content","",3,"update","dataSource"]],template:function(t,o){t&1&&(_(0,"sz-ui-card",0)(1,"sz-ui-table",1),A("update",function(){return o.get();}),m()()),t&2&&(a("card",o.card),s(),a("dataSource",o.dataSource));},dependencies:[q,U],encapsulation:2});let r=i;return r;})();var Fe=(()=>{let i=class i extends X{constructor(){let e=n(z);super(e),this.mlabService=n(d),this.fb=n(D),this.data=n(Y),this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"],filters:ie.create().equal("isGroup",!1).filters()});let t=this.fb;this.dialog=e;let o=this.data;this.form=t.group({relatedTestTypeId:[o.testTypeRelationship?.relatedTestTypeId,[O.required]],enabled:[o.testTypeRelationship?.enabled??!0]});}submit(){this.IsValid()&&(this.data.testTypeRelationship?this.save(this.mlabService.testTypes.relationships.update(this.data.testTypeId,this.data.testTypeRelationship?.id,this.form.value)):this.save(this.mlabService.testTypes.relationships.create(this.data.testTypeId,this.form.value)));}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-medisy-laboratory-test-type-specimen-types-save"]],standalone:!0,features:[c([d]),h,E],decls:7,vars:6,consts:()=>{let e;e="\u0627\u0644\u0646\u0645\u0637";let t;return t="\u0645\u0641\u0639\u0644",[t,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","relatedTestTypeId","label",e,3,"source"],["formControlName","enabled"],[3,"actions"]];},template:function(t,o){t&1&&(l(0,"sz-ui-dialog-header",1),_(1,"mat-dialog-content")(2,"form",2),l(3,"sz-ui-form-field-select",3),_(4,"mat-checkbox",4),ue(5,0),m()()(),l(6,"sz-ui-dialog-actions",5)),t&2&&(a("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),s(2),a("formGroup",o.form),s(),a("source",o.testTypes),s(3),a("actions",o.actions));},dependencies:[P,L,b,v,I,V,F,B,j,ve,k,x,w,ne],encapsulation:2});let r=i;return r;})();var $e=(()=>{let i=class i{constructor(){this.dialog=n(y),this.mlabService=n(d),this.route=n(N),this.testType=this.route.snapshot.data.testType,this.dataSource=new ae(),this.card={header:{title:$.test_types},menu:C.more([u.add(()=>this.openSaveComponent())])},this.dataSource.columnDefs.push(p.uuid("id"),p.string("relatedTestType.nameEn"),p.date("createdAt").setVisible(!1),p.date("updatedAt").setVisible(!1),p.menu(C.more([u.edit(this.openSaveComponent.bind(this)),u.divider(),u.delete(this.openTestTypeRelationshipDeleteComponent.bind(this))])));}ngOnInit(){this.get();}openSaveComponent(e){this.dialog.open(Fe,{data:{testTypeId:this.testType.id,testTypeRelationship:e}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openTestTypeRelationshipDeleteComponent(e){this.dialog.open(Q,{data:G.delete(this.mlabService.testTypes.relationships.delete(e.testTypeId,e.id),e)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}updateItem(e){this.mlabService.testTypes.relationships.update(e.testTypeId,e.id,e).subscribe(t=>{this.dataSource.update(t);});}get(){this.mlabService.testTypes.relationships.get(this.testType.id,this.dataSource.getQuery()).pipe(H(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-medisy-laboratory-test-type-relationships"]],standalone:!0,features:[E],decls:2,vars:2,consts:[[3,"card"],["content","",3,"update","dataSource"]],template:function(t,o){t&1&&(_(0,"sz-ui-card",0)(1,"sz-ui-table",1),A("update",function(){return o.get();}),m()()),t&2&&(a("card",o.card),s(),a("dataSource",o.dataSource));},dependencies:[oe,re,se,q,U],encapsulation:2});let r=i;return r;})();var Ue=(()=>{let i=class i extends X{constructor(){let e=n(z);super(e),this.mlabService=n(d),this.fb=n(D),this.data=n(Y);let t=this.fb;this.dialog=e;let o=this.data;this.form=t.group({nameEn:[o.testTypeResultOption?.nameEn,[O.required]],description:[o.testTypeResultOption?.description,[]],abbreviation:[o.testTypeResultOption?.abbreviation,[]],nameAr:[o.testTypeResultOption?.nameAr,[]]});}submit(){this.IsValid()&&(this.data.testTypeResultOption?this.save(this.mlabService.testTypes.resultOptions.update(this.data.testTypeId,this.data.testTypeResultOption?.id,this.form.value)):this.save(this.mlabService.testTypes.resultOptions.create(this.data.testTypeId,this.form.value)));}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-medisy-laboratory-test-type-result-options-save"]],standalone:!0,features:[c([d]),h,E],decls:8,vars:5,consts:()=>{let e;e="\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0627\u0646\u0643\u0644\u064A\u0632\u064A\u0629";let t;t="\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629";let o;o="\u0627\u0644\u0648\u0635\u0641";let T;return T="\u0623\u062E\u062A\u0635\u0627\u0631",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","nameEn","label",e],["formControlName","nameAr","label",t],["formControlName","description","label",o],["formControlName","abbreviation","label",T],[3,"actions"]];},template:function(t,o){t&1&&(l(0,"sz-ui-dialog-header",0),_(1,"mat-dialog-content")(2,"form",1),l(3,"sz-ui-form-field-input-text",2)(4,"sz-ui-form-field-input-text",3)(5,"sz-ui-form-field-input-text",4)(6,"sz-ui-form-field-input-text",5),m()(),l(7,"sz-ui-dialog-actions",6)),t&2&&(a("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),s(2),a("formGroup",o.form),s(5),a("actions",o.actions));},dependencies:[P,L,b,v,I,V,F,B,j,k,x,w,Ne],encapsulation:2});let r=i;return r;})();var Ge=(()=>{let i=class i{constructor(){this.dialog=n(y),this.mlabService=n(d),this.route=n(N),this.testType=this.route.snapshot.data.testType,this.dataSource=new ae(),this.card={header:{title:$.result_options},menu:C.more([u.add(()=>this.openSaveComponent())])},this.dataSource.columnDefs.push(p.uuid("id"),p.string("nameEn").setStacked(p.string("nameAr").setValueClassFontSmall()),p.string("abbreviation"),p.date("createdAt").setVisible(!1),p.date("updatedAt").setVisible(!1),p.menu(C.more([u.edit(this.openSaveComponent.bind(this)),u.divider(),u.delete(this.openTestTypeResultOptionDeleteComponent.bind(this))])));}ngOnInit(){this.get();}openSaveComponent(e){this.dialog.open(Ue,{data:{testTypeId:this.testType.id,testTypeResultOption:e}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openTestTypeResultOptionDeleteComponent(e){this.dialog.open(Q,{data:G.delete(this.mlabService.testTypes.resultOptions.delete(e.testTypeId,e.id),e)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}updateItem(e){this.mlabService.testTypes.resultOptions.update(e.testTypeId,e.id,e).subscribe(t=>{this.dataSource.update(t);});}get(){this.mlabService.testTypes.resultOptions.get(this.testType.id,this.dataSource.getQuery()).pipe(H(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-medisy-laboratory-test-type-result-options"]],standalone:!0,features:[E],decls:2,vars:2,consts:[[3,"card"],["content","",3,"update","dataSource"]],template:function(t,o){t&1&&(_(0,"sz-ui-card",0)(1,"sz-ui-table",1),A("update",function(){return o.get();}),m()()),t&2&&(a("card",o.card),s(),a("dataSource",o.dataSource));},dependencies:[oe,re,se,q,U],encapsulation:2});let r=i;return r;})();function qe(r,i){if(r&1&&(_(0,"p"),Se(1),m()),r&2){let K=W();s(),Ee(" ",K.testType.description,`
`);}}function He(r,i){r&1&&l(0,"sz-medisy-laboratory-test-type-result-options");}function Je(r,i){r&1&&l(0,"sz-medisy-laboratory-test-type-reference-values");}function Ke(r,i){r&1&&l(0,"sz-medisy-laboratory-test-type-relationships");}var Xe=(()=>{let i=class i{constructor(){this.dialog=n(y),this.mlabService=n(d),this.route=n(N),this.router=n(te),this.testType=this.route.snapshot.data.testType,this.appBarConfig={title:this.testType.nameEn,backEnabled:!0},this.isQualitative=this.testType.testResultType===ee.Qualitative;}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-medisy-laboratory-test-type"]],standalone:!0,features:[c([]),E],decls:7,vars:6,consts:[[3,"config"],[1,"tw-grid","lg:tw-grid-cols-2","tw-gap-2","tw-mb-2"],[3,"testTypeId"]],template:function(t,o){t&1&&(l(0,"sz-ui-app-bar",0),g(1,qe,2,1,"p"),_(2,"div",1),l(3,"sz-medisy-laboratory-test-type-specimen-types",2),g(4,He,1,0,"sz-medisy-laboratory-test-type-result-options")(5,Je,1,0,"sz-medisy-laboratory-test-type-reference-values")(6,Ke,1,0,"sz-medisy-laboratory-test-type-relationships"),m()),t&2&&(a("config",o.appBarConfig),s(),M(o.testType.description?1:-1),s(2),a("testTypeId",o.testType.id),s(),M(o.isQualitative?4:-1),s(),M(o.testType.isGroup?-1:5),s(),M(o.testType.isGroup?6:-1));},dependencies:[be,Ie,Ge,Be,$e],encapsulation:2});let r=i;return r;})();var Go=[{path:"",component:Xe},{path:"specimen-types",loadComponent:()=>import("./chunk-NRUNSTBM.js").then(r=>r.TestTypeSpecimenTypesComponent)}];export{Go as default};/**i18n:e5a4f37a71fd368be79cb8da0d0d7a2590c44dcf81e5f6dec604e77051a7feed*/