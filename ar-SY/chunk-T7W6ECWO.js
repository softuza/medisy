import{c as me}from"./chunk-J2B53B6K.js";import{a as d}from"./chunk-KJY6KLE7.js";import{a as S,b as oe,d as ie,e as re,g as ae,j as ne,k as se}from"./chunk-YYUIO3M5.js";import"./chunk-AV4XTPWD.js";import"./chunk-IGQAW4G2.js";import"./chunk-4P4RPOWU.js";import{b as W,f as Y,g as Z,h as x,j as ee,k as te}from"./chunk-K46Y6NGM.js";import{a as g}from"./chunk-R7EUDMGD.js";import{e as K,h as C}from"./chunk-KBWUA6E4.js";import{a as B,b as $,d as V,e as j,g as T}from"./chunk-NGJJVZ6X.js";import{c as w,r as H,s as Q,t as J}from"./chunk-COX3WBO6.js";import"./chunk-ZR7X63GG.js";import"./chunk-6M4SYF3G.js";import"./chunk-CWCVES7X.js";import{c as q}from"./chunk-TUR2GSJY.js";import{i as U}from"./chunk-Z6RT565P.js";import{d as M,f as z,g as A,l as I,n as L,q as b,r as D,u as P}from"./chunk-GIW6HK33.js";import"./chunk-27BMIET6.js";import{c as G,e as y}from"./chunk-EGDCC6ZL.js";import"./chunk-2XGPU6MG.js";import{ia as F,ja as X,la as k}from"./chunk-PE6NSH2D.js";import"./chunk-ZZK427TV.js";import{Kb as l,Lb as u,Mb as p,Wb as R,Xb as f,bb as m,cb as n,ea as h,na as c,oa as N,oc as _,pc as O,qb as v,zb as s}from"./chunk-3KG4VHVC.js";import"./chunk-B3HEJ5KY.js";var E=function(a){return a.LTR="LTR",a.RTL="RTL",a;}(E||{});var pe=(()=>{let o=class o extends Y{constructor(t,e,i,r){super(i),this.srptService=t,this.fb=e,this.dialog=i,this.data=r,this.categories=this.srptService.categories.getAll({orderBy:["name"]}),this.baseTemplates=this.srptService.baseTemplates.getAll({orderBy:["name"]}),this.pageDirections=Object.keys(E).map(Se=>E[Se]),this.form=e.group({name:[r?.name,[M.required]],description:[r?.description,[M.maxLength(4096)]],baseTemplateId:[r?.baseTemplateId,[M.required]]});}submit(){this.IsValid()&&(this.data?this.save(this.srptService.templates.update(this.data.id,this.form.value)):this.save(this.srptService.templates.create(this.form.value)));}};o.ɵfac=function(e){return new(e||o)(n(d),n(D),n(B),n($));},o.ɵcmp=c({type:o,selectors:[["sz-mgmt-reporting-templates-save"]],standalone:!0,features:[_([]),v,O],decls:7,vars:6,consts:()=>{let t;t="\u0627\u0644\u0627\u0633\u0645";let e;e="\u0627\u0644\u0648\u0635\u0641";let i;return i="\u0627\u0644\u0642\u0627\u0644\u0628 \u0627\u0644\u0627\u0633\u0627\u0633\u064A",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",t],["formControlName","description","label",e],["formControlName","baseTemplateId","label",i,3,"source"],[3,"actions"]];},template:function(e,i){e&1&&(p(0,"sz-ui-dialog-header",0),l(1,"mat-dialog-content")(2,"form",1),p(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"sz-ui-form-field-select",4),u()(),p(6,"sz-ui-dialog-actions",5)),e&2&&(s("title",i.title)("subtitle",i.subtitle)("alert",i.alert()),m(2),s("formGroup",i.form),m(3),s("source",i.baseTemplates),m(),s("actions",i.actions));},dependencies:[P,I,z,A,L,b,T,j,U,me,te,Z,x,J,w,Q,H],encapsulation:2});let a=o;return a;})();var de=(()=>{let o=class o{constructor(t,e,i){this.dialog=t,this.srptService=e,this.router=i,this.dataSource=new ie(),this.appBarConfig={title:q.templates},this.dataSource.columnDefs.push(S.uuid("id"),S.hyperlink("name",r=>`/srpt/templates/${r.id}`).setStacked(S.string("description").setValueClassFontSmall()),S.date("createdAt").setVisible(!1),S.date("updatedAt").setVisible(!1),oe.menu([C.edit(r=>this.openSaveComponent(r)),K.divider(),C.delete(r=>this.openReportDeleteComponent(r))])),this.get();}openSaveComponent(t){this.dialog.open(pe,{data:t}).afterClosed().subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}openReportDeleteComponent(t){this.dialog.open(ee,{data:W.delete(this.srptService.templates.delete(t.id),t)}).afterClosed().subscribe(e=>{this.dataSource.delete(e);});}get(){this.srptService.templates.get(this.dataSource.getQuery()).pipe(re(this.dataSource.state)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};o.ɵfac=function(e){return new(e||o)(n(V),n(d),n(G));},o.ɵcmp=c({type:o,selectors:[["sz-mgmt-reporting-templates"]],features:[_([])],decls:6,vars:3,consts:()=>{let t;return t="\u0625\u0636\u0627\u0641\u0629",[t,[3,"config"],[3,"changed","dataSource"],["mat-flat-button","","color","primary","start","",3,"click"],[3,"update","dataSource"]];},template:function(e,i){e&1&&(p(0,"sz-ui-app-bar",1),l(1,"sz-ui-table-search-filter",2),f("changed",function(){return i.get();}),l(2,"button",3),f("click",function(){return i.openSaveComponent();}),l(3,"span"),R(4,0),u()()(),l(5,"sz-ui-table",4),f("update",function(){return i.get();}),u()),e&2&&(s("config",i.appBarConfig),m(),s("dataSource",i.dataSource),m(4),s("dataSource",i.dataSource));},dependencies:[X,ne,ae,g],encapsulation:2});let a=o;return a;})();var tt=(()=>{let o=class o{};o.ɵfac=function(e){return new(e||o)();},o.ɵmod=N({type:o}),o.ɵinj=h({providers:[d],imports:[y.forChild([{path:"",component:de}]),T,k,se,g,F]});let a=o;return a;})();export{tt as TemplatesModule};/**i18n:7a9f3c982e3d544e8991bb34cdb5a6fdcf3438cf410fb6ab9f6732a102cfaa64*/