import{a as nt}from"./chunk-SG36GEWZ.js";import{a as at}from"./chunk-VS7YCACG.js";import{a as P}from"./chunk-DJWTHWUI.js";import{a as A}from"./chunk-7ZD52CWE.js";import{a as $}from"./chunk-JRXQDBB2.js";import{a as rt}from"./chunk-RCH7FYAY.js";import{b as j}from"./chunk-OEK33LHI.js";import{a as Ve,b as qe,c as Ke,e as Qe,h as We,j as Je,l as Ze,m as et,n as tt,q as it,r as ot}from"./chunk-ZQY436EE.js";import{c as k,d as xe,g as Ue,i as Xe,j as je,m as w}from"./chunk-TZHDOS7D.js";import{a as Ge,b as ke,d as we,e as Be,g as z}from"./chunk-MLSRSUWT.js";import{a as Te,b as Ie,c as Re,d as De,e as ye,f as Fe,j as Le,k as ve,l as be,m as ze,n as Ye,o as $e}from"./chunk-DPUIQT2Q.js";import{a as F,b as Ae,d as Oe,h as L,i as v}from"./chunk-32W7D3XL.js";import{b as R,f as me,g as D,h as pe,l as de,m as _e,n as ce,o as Se,p as ue,s as y}from"./chunk-UZRVZSRL.js";import{c as X}from"./chunk-VXIMUH5R.js";import{d as He}from"./chunk-FVPLSC3A.js";import"./chunk-5YXUG2NC.js";import"./chunk-25UH3N2F.js";import{a as Y}from"./chunk-KYTCDYCU.js";import{a as G}from"./chunk-O5KLIVQ3.js";import"./chunk-4KTV3HE2.js";import{a as g}from"./chunk-HSBTPXYW.js";import{a as fe,d as Me,e as Ee}from"./chunk-7EL7DJOA.js";import"./chunk-YSHIJLQQ.js";import"./chunk-PHZ6OWUT.js";import{a as ge,c as Pe}from"./chunk-45S7AHWB.js";import{Ka as Ce,Na as he,Qa as Ne,Ra as b}from"./chunk-5YRGD4YU.js";import{$b as N,Ab as a,Bb as s,Cb as f,Gb as oe,L as E,Mb as _,Ob as S,Qb as re,Ub as C,Vb as h,Wb as U,Xb as ne,Yb as M,_a as ee,cb as l,da as Q,db as p,dc as T,ec as I,ic as ae,jc as se,kb as O,la as u,lc as le,ma as W,nb as m,qa as J,ra as Z,tb as te,ub as ie,vb as B,wb as H,xb as x}from"./chunk-MK3KDUIH.js";var ct=["input"];function St(r,o){if(r&1){let d=oe();a(0,"mat-chip-row",7),S("removed",function(){let i=J(d).$implicit,n=re();return Z(n.remove(i));}),h(1),T(2,"personName"),a(3,"button",8)(4,"mat-icon"),h(5,"cancel"),s()()();}if(r&2){let d=o.$implicit;l(1),ne(" ",I(2,1,d)," ");}}function ut(r,o){if(r&1&&(a(0,"mat-option",9)(1,"div",10)(2,"span"),h(3),T(4,"personName"),s(),a(5,"small"),h(6),T(7,"personAge"),s()()()),r&2){let d=o.$implicit;m("value",d),l(3),U(I(4,3,d)),l(3),U(I(7,5,d==null?null:d.birthDate));}}function ft(r,o){r&1&&(a(0,"mat-error"),_(1,11),s());}var st=(()=>{let o=class o extends Fe{constructor(t,e,i,n){super(t),this.ngControl=t,this.mpplService=e,this.personNamePipe=i,this.personAgePipe=n,this.items=[],this.selections=[],this.separatorKeysCodes=[13,188],this.indicator=ee(!0),this.filter=g.paged(1,10),this.totalPages=-1,this.displayFn=c=>{if(!c)return"";let q=this.personNamePipe.transform(c),K=this.personAgePipe.transform(c?.birthDate);return K?`${q}, ${K}`:`${q}`;};}ngOnInit(){this.control=this.ngControl.control,this.listenChanges();}listenChanges(){this.control.valueChanges.pipe(xe(400)).subscribe(t=>{this.handleValueChanged(t);});}handleValueChanged(t){if(this.reset(),typeof t=="string"){let e=t.split(" ");e.length===2?(this.filter.query=e[0],this.filter.lastName=e[1]):this.filter.query=e[0];}this.get();}add(){this.control.setValue(this.selections.map(t=>t.id));}remove(t){let e=this.selections.indexOf(t);e>=0&&this.selections.splice(e,1);}optionSelected(t){this.selections.push(t.option.value),this.input.nativeElement.value="",this.control.setValue(this.selections.map(e=>e.id));}scroll(){this.filter.pageIndex<this.totalPages&&(++this.filter.pageIndex,this.get());}reset(){this.filter=g.paged(1,10),this.totalPages=-1,this.items=[];}get(){this.mpplService.persons.get(this.filter).pipe(E(1),k(this.indicator)).subscribe(t=>{this.items.push(...t.items),this.totalPages=t.totalPages;});}};o.ɵfac=function(e){return new(e||o)(p(me,10),p($),p(A),p(P));},o.ɵcmp=u({type:o,selectors:[["medisy-form-field-persons-search"]],viewQuery:function(e,i){if(e&1&&se(ct,5),e&2){let n;ae(n=le())&&(i.input=n.first);}},standalone:!0,features:[M([$,P,A]),O,N],decls:14,vars:7,consts:()=>{let t;t="\u0627\u0644\u0627\u0633\u0645 \u0627\u0648 \u0627\u0644\u0647\u0627\u062A\u0641 \u0627\u0648 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let e;return e="\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628",[t,["aria-label","Fruit selection"],["chipGrid",""],["matInput","",3,"matAutocomplete","formControl","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["input",""],[3,"displayWith","szOptionsScrollIgnored","optionSelected","optionsScroll"],["auto","matAutocomplete"],[3,"removed"],["matChipRemove",""],[3,"value"],[1,"sz-form"],e];},template:function(e,i){if(e&1&&(a(0,"mat-form-field")(1,"mat-label"),_(2,0),s(),a(3,"mat-chip-grid",1,2),H(5,St,6,3,"mat-chip-row",null,B),s(),a(7,"input",3,4),S("matChipInputTokenEnd",function(){return i.add();}),s(),a(9,"mat-autocomplete",5,6),S("optionSelected",function(c){return i.optionSelected(c);})("optionsScroll",function(){return i.scroll();}),H(11,ut,8,7,"mat-option",9,B),s(),te(13,ft,2,0,"mat-error"),s()),e&2){let n=C(4),c=C(10);x(5,i.selections),l(7),m("matAutocomplete",c)("formControl",i.control)("matChipInputFor",n)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes),l(2),m("displayWith",i.displayFn)("szOptionsScrollIgnored",i.indicator()),x(11,i.items),l(4),ie(13,i.control.hasError("required")?13:-1);}},dependencies:[y,R,D,_e,v,L,F,Ae,Re,Te,Ce,Ie,ye,De,he,tt,Ze,et,We,Je,b,Ne,at,P,A],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]});let r=o;return r;})();var lt=(()=>{let o=class o extends Ue{constructor(t,e,i){super(e),this.fb=t,this.dialog=e,this.data=i,this.form=t.group({testGroupIds:[i.testGroupIds],laboratoryIds:[i.laboratoryIds],personIds:[i.personIds],startDate:[i.startDate],endDate:[i.endDate]});}submit(){this.IsValid()&&this.dialog?.close(this.form.value);}};o.ɵfac=function(e){return new(e||o)(p(ue),p(Ge),p(ke));},o.ɵcmp=u({type:o,selectors:[["medisy-laboratory-analyses-filter"]],standalone:!0,features:[M([]),O,N],decls:16,vars:9,consts:()=>{let t;t="\u0627\u0644\u062A\u0627\u0631\u064A\u062E";let e;e="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629";let i;return i="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0646\u0647\u0627\u064A\u0629",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","testGroupIds",3,"multiple"],["formControlName","laboratoryIds",3,"multiple"],["formControlName","personIds"],[1,"tw-flex-1"],t,["startView","year",3,"rangePicker","comparisonStart","comparisonEnd"],["matStartDate","","placeholder",e,"formControlName","startDate"],["matEndDate","","placeholder",i,"formControlName","endDate"],["matSuffix","",3,"for"],["datePicker",""],[3,"actions"]];},template:function(e,i){if(e&1&&(f(0,"sz-ui-dialog-header",0),a(1,"mat-dialog-content")(2,"form",1),f(3,"medisy-form-field-test-group-select",2)(4,"medisy-form-field-laboratory",3)(5,"medisy-form-field-persons-search",4),a(6,"mat-form-field",5)(7,"mat-label"),_(8,6),s(),a(9,"mat-date-range-input",7),f(10,"input",8)(11,"input",9),s(),f(12,"mat-datepicker-toggle",10)(13,"mat-date-range-picker",null,11),s()()(),f(15,"sz-ui-dialog-actions",12)),e&2){let n=C(14);m("header",i.header),l(2),m("formGroup",i.form),l(1),m("multiple",!0),l(1),m("multiple",!0),l(5),m("rangePicker",n)("comparisonStart",i.form.controls.startDate.value)("comparisonEnd",i.form.controls.endDate.value),l(3),m("for",n),l(3),m("actions",i.actions);}},dependencies:[y,de,R,D,pe,ce,Se,z,Be,v,L,F,Oe,w,Xe,je,nt,rt,st,$e,Le,ze,ve,be,Ye],encapsulation:2});let r=o;return r;})();var mt=(()=>{let o=class o{constructor(t,e,i){this.dialog=t,this.mlabService=e,this.route=i,this.dataSource=new qe(g.pagedSorted("-createdAt")),this.dataSource.addRows([Ke.default([Ve.hyperlink("code","\u0627\u0644\u0631\u0645\u0632",n=>n.id).makeCompact(),j.createdAt(),j.menu([X.divider(),X.default("Report","report",()=>{})])])]),this.dataSource.updateFilterModel(this.route.snapshot.queryParams),this.get();}openFilterComponent(){this.dialog.open(lt,{data:this.dataSource.filterModel}).afterClosed().pipe(E(1)).subscribe(t=>{this.dataSource.updateFilterModel(t),this.get();});}get(){this.mlabService.analyses.get(this.dataSource.filterModel).pipe(k(this.dataSource.indicator),E(1)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};o.ɵfac=function(e){return new(e||o)(p(we),p(Y),p(fe));},o.ɵcmp=u({type:o,selectors:[["medisy-laboratory-analyses"]],features:[M([])],decls:8,vars:4,consts:()=>{let t;t="\u0627\u0644\u062A\u062D\u0627\u0644\u064A\u0644";let e;return e="\u0625\u0636\u0627\u0641\u0629",[["start","",1,"sz-h5"],t,[3,"dataSource","search","filter"],["title","","mat-flat-button","","routerLink","create","color","primary","start",""],e,[3,"paginationEnabled","stateEnabled","dataSource","update"]];},template:function(e,i){e&1&&(a(0,"sz-ui-header-basic")(1,"h5",0),_(2,1),s()(),a(3,"sz-ui-table-filter",2),S("search",function(){return i.get();})("filter",function(){return i.openFilterComponent();}),a(4,"button",3)(5,"span"),_(6,4),s()()(),a(7,"sz-ui-table",5),S("update",function(){return i.get();}),s()),e&2&&(l(3),m("dataSource",i.dataSource),l(4),m("paginationEnabled",!0)("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[Me,it,Qe,G,ge],styles:[".column-status[_ngcontent-%COMP%], .mat-column-detail-status[_ngcontent-%COMP%], .mat-column-status[_ngcontent-%COMP%]:not(mat-header-cell){max-width:4px;margin-left:24px}.mat-column-status[_ngcontent-%COMP%]:not(mat-header-cell){background-color:#13a311}.mat-column-detail-status[_ngcontent-%COMP%]{background-color:#13a311}.mat-cell[_ngcontent-%COMP%]   .mat-column-status[_ngcontent-%COMP%]{padding-left:0}"]});let r=o;return r;})();var pt=[{path:"",component:mt},{path:"create",loadComponent:()=>import("./chunk-VKVDTMXF.js").then(r=>r.CreateComponent)}];var Bi=(()=>{let o=class o{};o.ɵfac=function(e){return new(e||o)();},o.ɵmod=W({type:o}),o.ɵinj=Q({providers:[Y],imports:[Ee.forChild(pt),z,ot,w,G,He,b,Pe]});let r=o;return r;})();export{Bi as AnalysesModule};/**i18n:33360f080214f876987bd0ecc2f51b8308b133d904c534ef8c974004cf54d934*/