import{a as Me}from"./chunk-NP7SVCCO.js";import"./chunk-5NLLDK4F.js";import{a as E}from"./chunk-SBIPTKC7.js";import{a as Oe,c as Ce,e as Ae,g as L,j as Ne,k as Pe,l}from"./chunk-HGOHDOVU.js";import"./chunk-7XGIBKVM.js";import"./chunk-FL73F5K2.js";import{a as S}from"./chunk-SWJ7RLQH.js";import{e as pe,f as fe,g as Se,i as Ee,j as g,k as Re}from"./chunk-D56MTZ33.js";import"./chunk-7FFA5B5B.js";import{b as T}from"./chunk-4PHVAQ5I.js";import{d as de,f as V}from"./chunk-BJPU6W4M.js";import{a as _e,b as ue,d as N,e as ce,g as P}from"./chunk-HG4PA5ON.js";import{g as Z,h as ee,l as oe,m as re,v as ae,x as le,y as se,z as me}from"./chunk-VRMADYJ5.js";import{Ca as ne,J as A,N as J,b as Y,d as C,f as B,g as w,j,k as X,m as x,p as k,q,s as H,t as W,ya as ie}from"./chunk-6XBADPGE.js";import"./chunk-4PXWNT7N.js";import{Ea as K,Ga as Q,Ja as te}from"./chunk-6NFGCLSN.js";import{Ab as h,Ac as G,Fb as _,Gb as d,Hb as u,M,Rb as z,Tb as O,fa as b,gb as c,hb as a,hc as f,kc as $,l as D,oa as p,ob as U,pa as y,rb as F,vb as s}from"./chunk-6OQDJKEQ.js";function Ie(i,t){i&1&&(_(0,"div",8)(1,"mat-form-field",9)(2,"label"),u(3,"input",10),d()(),_(4,"mat-form-field",9)(5,"label"),u(6,"input",11),d()()());}function De(i,t){i&1&&(_(0,"mat-form-field",9)(1,"label"),u(2,"input",12),d()());}var ge=(()=>{let t=class t extends pe{constructor(o,e,r,n){super(r),this.mlabService=o,this.fb=e,this.dialog=r,this.data=n,this.referenceGroups=this.mlabService.referenceGroups.getAll({orderBy:["name"]}),this.comparisonOperators=Object.keys(E).map(m=>E[m]),this.form=e.group({description:[n.referenceValueRule?.description,[C.maxLength(4096)]],comparisonOperator:new j(n.referenceValueRule?.comparisonOperator??E.Equal,[C.required]),referenceGroupId:[n.referenceValueRule?.referenceGroupId,[C.required]],value:[n.referenceValueRule?.value,[]],start:[n.referenceValueRule?.start,[]],end:[n.referenceValueRule?.end,[]]});}isRange(){return this.form.value.comparisonOperator===E.RangeWithBoundaries||this.form.value.comparisonOperator===E.RangeWithoutBoundaries;}submit(){this.IsValid()&&(this.data.referenceValueRule?this.save(this.mlabService.referenceValues.rules.update(this.data.referenceValueId,this.data.referenceValueRule.id,this.form.value)):this.save(this.mlabService.referenceValues.rules.create(this.data.referenceValueId,this.form.value)));}};t.ɵfac=function(e){return new(e||t)(a(S),a(q),a(_e),a(ue));},t.ɵcmp=p({type:t,selectors:[["medisy-laboratory-reference-value-rules-save"]],standalone:!0,features:[f([]),U,$],decls:9,vars:8,consts:()=>{let o;o="\u0627\u0644\u0641\u0626\u0629 \u0627\u0644\u0645\u0631\u062C\u0639\u064A\u0629";let e;e="\u0627\u0644\u0639\u0645\u0644\u064A\u0629";let r;r="\u0627\u0644\u0648\u0635\u0641";let n;n="\u0628\u062F\u0627\u064A\u0629";let m;m="\u0646\u0647\u0627\u064A\u0629";let I;return I="\u0642\u064A\u0645\u0629",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","referenceGroupId","label",o,3,"source"],["formControlName","comparisonOperator","label",e,3,"source","localizedValue"],["class","tw-flex md:tw-flex-row tw-flex-col md:tw-gap-4"],["class","tw-flex-1"],["formControlName","description","label",r],[3,"actions"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["autocomplete","off","formControlName","start","matInput","","placeholder",n],["autocomplete","off","formControlName","end","matInput","","placeholder",m],["autocomplete","off","formControlName","value","matInput","","placeholder",I]];},template:function(e,r){e&1&&(u(0,"sz-ui-dialog-header",0),_(1,"mat-dialog-content")(2,"form",1),u(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3),F(5,Ie,7,0,"div",4)(6,De,3,0,"mat-form-field",5),u(7,"sz-ui-form-field-textarea",6),d()(),u(8,"sz-ui-dialog-actions",7)),e&2&&(s("header",r.header),c(2),s("formGroup",r.form),c(),s("source",r.referenceGroups),c(),s("source",r.comparisonOperators)("localizedValue",!0),c(),h(5,r.isRange()?5:-1),c(),h(6,r.isRange()?-1:6),c(2),s("actions",r.actions));},dependencies:[W,X,Y,B,w,x,k,re,oe,Z,P,ce,ee,L,g,fe,Se,me,se,le],encapsulation:2});let i=t;return i;})();var Le=(()=>{let t=class t{constructor(o,e,r,n){this.dialog=o,this.route=e,this.mlabService=r,this.locale=n,this.dataSource=new Ce(),this.referenceValue=this.route.snapshot.data.referenceValue,this.dataSource.fields.push(l.uuid("id"),l.uuid("referenceValueId"),l.uuid("referenceGroupId"),l.string("referenceGroup.name"),l.enum("comparisonOperator").setContentFormat(m=>ne(m.comparisonOperator)),l.number("value"),l.number("start"),l.number("end"),l.string("description"),l.date("createdAt",!1),l.date("updatedAt",!1),Oe.menu([V.edit(m=>this.openSaveComponent(m)),V.delete(m=>{this.openReferenceValueRuleDeleteComponent(m);})])),this.get();}openSaveComponent(o){this.dialog.open(ge,{data:{referenceValueId:this.referenceValue.id,referenceValueRule:o}}).afterClosed().pipe(M(1)).subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}openReferenceValueRuleDeleteComponent(o){this.dialog.open(Ee,{data:Re.delete(this.mlabService.referenceValues.rules.delete(o.referenceValueId,o.id),o)}).afterClosed().pipe(M(1)).subscribe(e=>{this.dataSource.delete(e);});}get(){this.mlabService.referenceValues.rules.get(this.referenceValue.id,this.dataSource.buildRequest()).pipe(ie(this.dataSource.indicator),M(1)).subscribe(o=>{this.dataSource.set(o.items,o.count);});}};t.ɵfac=function(e){return new(e||t)(a(N),a(A),a(S),a(G));},t.ɵcmp=p({type:t,selectors:[["medisy-laboratory-reference-value-rules"]],features:[f([])],decls:5,vars:3,consts:()=>{let o;return o="\u0625\u0636\u0627\u0641\u0629",[[3,"dataSource","changed"],["mat-flat-button","","color","primary","start","",3,"click"],o,[3,"stateEnabled","dataSource","update"]];},template:function(e,r){e&1&&(_(0,"sz-ui-table-search-filter",0),O("changed",function(){return r.get();}),_(1,"button",1),O("click",function(){return r.openSaveComponent();}),_(2,"span"),z(3,2),d()()(),_(4,"sz-ui-table",3),O("update",function(){return r.get();}),d()),e&2&&(s("dataSource",r.dataSource),c(4),s("stateEnabled",!0)("dataSource",r.dataSource));},dependencies:[K,Ne,Ae],encapsulation:2});let i=t;return i;})();var he=(()=>{let t=class t{constructor(o,e){this.dialog=o,this.route=e,this.alert$=new D(),this.referenceValue=this.route.snapshot.data.referenceValue;}};t.ɵfac=function(e){return new(e||t)(a(N),a(A));},t.ɵcmp=p({type:t,selectors:[["medisy-laboratory-reference-value"]],features:[f([])],decls:2,vars:2,consts:[[3,"title","subtitle"]],template:function(e,r){e&1&&u(0,"sz-ui-header-info",0)(1,"medisy-laboratory-reference-value-rules"),e&2&&s("title",r.referenceValue.testType.name)("subtitle",r.referenceValue.description);},dependencies:[T,Le],encapsulation:2});let i=t;return i;})();var Ve=[{path:"",component:he}];var Bt=(()=>{let t=class t{};t.ɵfac=function(e){return new(e||t)();},t.ɵmod=y({type:t}),t.ɵinj=b({providers:[S],imports:[H,J.forChild(Ve),P,L,de,te,Q,ae,Pe,Me,g,T]});let i=t;return i;})();export{Bt as ReferenceValueModule};/**i18n:01970b5be1a6a06655fe4c3b2f38689bdabee61974e5aa4bcc571eb668de444c*/