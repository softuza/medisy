import{b as X,c as Y}from"./chunk-OIBPFNT7.js";import"./chunk-DYF5VNNH.js";import"./chunk-BXRRBUXH.js";import{b as _}from"./chunk-EPZDIXX3.js";import{a as f}from"./chunk-A7GQRDTI.js";import"./chunk-XQJTLSW3.js";import"./chunk-VRSIL5GJ.js";import"./chunk-2XAO4NGN.js";import{a as V,d as w}from"./chunk-4LPXBF4W.js";import"./chunk-RZK5BQ6B.js";import{a as r,b as W,d as q,f as H,k as Q,l as U}from"./chunk-OI56A53W.js";import"./chunk-TWBGWNGA.js";import"./chunk-JRUBGHEE.js";import"./chunk-PL4MR2GH.js";import"./chunk-7X57PM37.js";import"./chunk-JQT4R7GV.js";import"./chunk-FJN7IPRV.js";import{b as S}from"./chunk-IQZQN23K.js";import{g as C,i as G}from"./chunk-DVP7SI2Y.js";import{d as R,g as k}from"./chunk-A4VZDCMN.js";import"./chunk-56B7SY65.js";import{c as F}from"./chunk-5U3VDL4S.js";import{b as A}from"./chunk-TLW5FHGJ.js";import"./chunk-BLWEVJSC.js";import{c as m,d as j}from"./chunk-IPNLK4JQ.js";import"./chunk-AFEBAW55.js";import"./chunk-BHEDLFH7.js";import"./chunk-M3ENAOYB.js";import{c as T,e as N}from"./chunk-KE6LGXGX.js";import"./chunk-32GZIOYR.js";import{a as B,b as L,c as $}from"./chunk-C5QDVZ7D.js";import{ha as D,ia as O}from"./chunk-HX7WXKH6.js";import{n as I}from"./chunk-OC2OOWUG.js";import{Ib as s,Jb as u,Kb as v,O as g,Ub as E,Wb as d,ha as b,hc as y,jb as h,kb as l,kc as z,qa as M,ra as P,yb as c}from"./chunk-G52QRAV6.js";var x=(()=>{let t=class t{constructor(e,i,o,p){this.dialog=e,this.mpplService=i,this.personNamePipe=o,this.router=p,this.title=m.patients,this.dataSource=new q("-createdAt"),this.dataSource.columnDefs.push(r.uuid("id"),r.string("title.abbreviation").setVisibility(!1),r.string("title.name").setVisibility(!1).setName(m.title),r.hyperlink("names",a=>this.router.navigate([`/mppl/persons/${a.id}`])).setValueGetter(a=>o.transform(a)).setName(m.name).setStacked(r.string("sex").setValueGetter(a=>j(a.sex))),r.date("birthDate"),r.string("ssn").setName(m.ssn).setResponsive(!0),r.date("createdAt",!1),r.date("updatedAt",!1),W.menu([C.divider(),C.item(m.qr,G.qr,a=>this.openBarcodeWriterComponent(a))])),this.get();}openPersonCreateComponent(){this.dialog.open(X).afterClosed().subscribe(e=>{e&&this.router.navigate([`/mppl/persons/${e.id}`]);});}openPersonScanComponent(){this.dialog.open(Y).afterClosed().subscribe(e=>{if(e){let i=this.dataSource.filtration?.filters.find(o=>o.field==="ssn");i?i.value=e.ssn:this.dataSource.filtration?.filters.push({field:"ssn",op:A.InsensitiveContains,value:e.ssn}),this.get();}});}openBarcodeWriterComponent(e){this.dialog.open(w,{data:{type:V.QR_Code,msg:`personid.${e.id}`}}).afterClosed().subscribe({});}get(){this.mpplService.persons.get(this.dataSource.getQuery()).pipe(F(this.dataSource.indicator),g(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};t.ɵfac=function(i){return new(i||t)(l(R),l(f),l(_),l(T));},t.ɵcmp=M({type:t,selectors:[["sz-medisy-people-persons"]],features:[z([I,_])],decls:9,vars:4,consts:()=>{let e;return e="\u0625\u0636\u0627\u0641\u0629",[[3,"title"],[3,"dataSource","changed"],["mat-flat-button","","color","primary","start","",3,"click"],e,["end","","mat-icon-button","",3,"click"],[3,"stateEnabled","dataSource","update"]];},template:function(i,o){i&1&&(v(0,"sz-ui-header-info",0),s(1,"sz-ui-table-search-filter",1),d("changed",function(){return o.get();}),s(2,"button",2),d("click",function(){return o.openPersonCreateComponent();}),s(3,"span"),E(4,3),u()(),s(5,"button",4),d("click",function(){return o.openPersonScanComponent();}),s(6,"mat-icon"),y(7,"barcode"),u()()(),s(8,"sz-ui-table",5),d("update",function(){return o.get();}),u()),i&2&&(c("title",o.title),h(),c("dataSource",o.dataSource),h(7),c("stateEnabled",!0)("dataSource",o.dataSource));},dependencies:[B,L,Q,H,S,D],encapsulation:2});let n=t;return n;})();var De=(()=>{let t=class t{};t.ɵfac=function(i){return new(i||t)();},t.ɵmod=P({type:t}),t.ɵinj=b({providers:[f],imports:[N.forChild([{path:"",component:x}]),k,$,U,S,O]});let n=t;return n;})();export{De as PersonsModule};/**i18n:3c79f61dd4ae219236c62485f036b897dde9f999c4ae619f8589958cf23779e7*/