"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[49],{6049:(Se,R,t)=>{t.r(R),t.d(R,{ReferenceValueModule:()=>me});var C=t(6814),s=t(6223),I=t(4630),_=t(9014),O=t(2296),U=t(5195),Y=t(5986),v=t(3680),D=t(8034),f=t(7700),y=t(617),A=t(2032),$=t(9038),Z=t(7988),M=t(1476),F=t(5940),x=t(8525),z=t(3566),J=t(1545),G=t(5313),B=t(2596),E=t(8109),X=t(6981),Q=t(465),N=t(6987),W=t(4407),j=t(2595),K=t(696),H=t(2169),d=t(3524),b=t(4567),w=t(5041),q=t(8766),c=t(3572),k=t(8645),e=t(5879),ee=t(2516),S=t(2191),g=t(5837),te=t(9598),oe=t(2119),m=t(8180),ne=t(6187),V=t(2557),h=t(4257),T=t(4622),P=t(6091);let re=(()=>{class r extends d.Z2{constructor(o,n,l){super(n),this.fb=o,this.dialog=n,this.data=l,this.form=o.group({referenceGroupId:[l.referenceGroupId],comparisonOperator:[l.comparisonOperator]})}submit(){this.IsValid()&&this.dialog.close(this.form.value)}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(s.qu),e.Y36(f.so),e.Y36(f.WI))},r.\u0275cmp=e.Xpm({type:r,selectors:[["medisy-laboratory-reference-value-rules-filter"]],features:[e._Bn([ne.T]),e.qOj],decls:6,vars:5,consts:[[3,"header"],[1,"tw-flex","tw-flex-col",3,"formGroup"],["formControlName","comparisonOperator",3,"emptyOption"],["formControlName","referenceGroupId",3,"emptyOption"],[3,"actions"]],template:function(o,n){1&o&&(e._UZ(0,"sz-ui-dialog-header",0),e.TgZ(1,"mat-dialog-content")(2,"form",1),e._UZ(3,"medisy-form-field-comparison-operator",2)(4,"medisy-form-field-reference-group",3),e.qZA()(),e._UZ(5,"sz-ui-dialog-actions",4)),2&o&&(e.Q6J("header",n.header),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(1),e.Q6J("emptyOption",!0),e.xp6(1),e.Q6J("emptyOption",!0),e.xp6(1),e.Q6J("actions",n.actions))},dependencies:[s._Y,s.JJ,s.JL,s.sg,s.u,f.xY,V.P,h.f,T.Y,P.t],encapsulation:2}),r})();var p=t(7263),L=t(8380),ae=t(9157),le=t(8873);function se(r,a){1&r&&(e.TgZ(0,"div",8)(1,"mat-form-field",9)(2,"label"),e._UZ(3,"input",10),e.qZA()(),e.TgZ(4,"mat-form-field",9)(5,"label"),e._UZ(6,"input",11),e.qZA()()())}function ue(r,a){1&r&&(e.TgZ(0,"mat-form-field",9)(1,"label"),e._UZ(2,"input",12),e.qZA()())}let ie=(()=>{class r extends d.Ku{constructor(o,n,l,u){super(l),this.referenceValueService=o,this.fb=n,this.dialog=l,this.data=u,this.form=n.group({description:[u.referenceValueRule?.description,[s.kI.maxLength(4096)]],comparisonOperator:[u.referenceValueRule?.comparisonOperator??p.v.Equal,[s.kI.required]],referenceGroupId:[u.referenceValueRule?.referenceGroupId,[s.kI.required]],value:[u.referenceValueRule?.value,[]],start:[u.referenceValueRule?.start,[]],end:[u.referenceValueRule?.end,[]]})}isRange(){return this.form.value.comparisonOperator===p.v.RangeWithBoundaries||this.form.value.comparisonOperator===p.v.RangeWithoutBoundaries}submit(){this.IsValid()&&this.save(this.data.referenceValueRule?this.referenceValueService.updateReferenceValueRule(this.data.referenceValueId,this.data.referenceValueRule.id,this.form.value):this.referenceValueService.createReferenceValueRule(this.data.referenceValueId,this.form.value))}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(L.U),e.Y36(s.qu),e.Y36(f.so),e.Y36(f.WI))},r.\u0275cmp=e.Xpm({type:r,selectors:[["medisy-laboratory-reference-value-rules-save"]],features:[e._Bn([N.C]),e.qOj],decls:9,vars:5,consts:function(){let a,o,n,l;return a="\u0627\u0644\u0648\u0635\u0641",o="\u0628\u062F\u0627\u064A\u0629",n="\u0646\u0647\u0627\u064A\u0629",l="\u0642\u064A\u0645\u0629",[[3,"header"],[1,"tw-flex","tw-flex-col",3,"formGroup"],["formControlName","description","label",a],["formControlName","comparisonOperator"],["class","tw-flex md:tw-flex-row tw-flex-col md:tw-gap-4",4,"ngIf"],["class","tw-flex-1",4,"ngIf"],["formControlName","referenceGroupId"],[3,"actions"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["autocomplete","off","formControlName","start","matInput","","placeholder",o],["autocomplete","off","formControlName","end","matInput","","placeholder",n],["autocomplete","off","formControlName","value","matInput","","placeholder",l]]},template:function(o,n){1&o&&(e._UZ(0,"sz-ui-dialog-header",0),e.TgZ(1,"mat-dialog-content")(2,"form",1),e._UZ(3,"sz-ui-form-field-textarea",2)(4,"medisy-form-field-comparison-operator",3),e.YNc(5,se,7,0,"div",4),e.YNc(6,ue,3,0,"mat-form-field",5),e._UZ(7,"medisy-form-field-reference-group",6),e.qZA()(),e._UZ(8,"sz-ui-dialog-actions",7)),2&o&&(e.Q6J("header",n.header),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("ngIf",n.isRange()),e.xp6(1),e.Q6J("ngIf",!n.isRange()),e.xp6(2),e.Q6J("actions",n.actions))},dependencies:[C.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,f.xY,A.Nt,ae.KE,le.J,V.P,h.f,T.Y,P.t],encapsulation:2}),r})();var fe=t(3872),ce=t(9288);let de=(()=>{class r{constructor(o,n,l,u){this.dialog=o,this.route=n,this.referenceValueService=l,this.comparisonOperatorI18nPipe=u,this.dataSource=new c.b2(te.J.paged()),this.referenceValue=this.route.snapshot.data.referenceValue,this.dataSource.columns=[c.UC.text("referenceGroup","\u0627\u0644\u0645\u062C\u0645\u0648\u0639\u0629 \u0627\u0644\u0645\u0631\u062C\u0639\u064A\u0629",i=>i.referenceGroup.name),S.h.comparisonOperator(i=>u.transform(i.comparisonOperator)),c.UC.text("value","\u0642\u064A\u0645\u0629",i=>i.value?i.value:`${i.start} - ${i.end}`),S.h.createdAt(),S.h.menu([c.od.edit(i=>this.openSaveComponent(i)),c.od.delete(i=>{this.openReferenceValueRuleDeleteComponent(i)})])],this.get()}openSaveComponent(o){this.dialog.open(ie,{data:{referenceValueId:this.referenceValue.id,referenceValueRule:o}}).afterClosed().pipe((0,m.q)(1)).subscribe(l=>{this.dataSource.updateOrPushItem(l)})}openFilterComponent(){this.dialog.open(re,{data:this.dataSource.filterModel}).afterClosed().pipe((0,m.q)(1)).subscribe(n=>{this.dataSource.updateFilterModel(n),this.get()})}openReferenceValueRuleDeleteComponent(o){this.dialog.open(d.fN,{data:d.cb.delete(this.referenceValueService.deleteReferenceValueRule(o.referenceValueId,o.id),o)}).afterClosed().pipe((0,m.q)(1)).subscribe(l=>{this.dataSource.delete(l)})}get(){this.referenceValueService.getReferenceValueRules(this.referenceValue.id,this.dataSource.filterModel).pipe((0,oe.sU)(this.dataSource.indicator),(0,m.q)(1)).subscribe(o=>{this.dataSource.set(o.items,o.count)})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(f.uw),e.Y36(E.gz),e.Y36(L.U),e.Y36(g.Q))},r.\u0275cmp=e.Xpm({type:r,selectors:[["medisy-laboratory-reference-value-rules"]],features:[e._Bn([g.Q])],decls:5,vars:4,consts:function(){let a;return a="\u0625\u0636\u0627\u0641\u0629",[[3,"dataSource","search","filter"],["mat-flat-button","","color","primary","start","",3,"click"],a,[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(o,n){1&o&&(e.TgZ(0,"sz-ui-table-filter",0),e.NdJ("search",function(){return n.get()})("filter",function(){return n.openFilterComponent()}),e.TgZ(1,"button",1),e.NdJ("click",function(){return n.openSaveComponent()}),e.TgZ(2,"span"),e.SDv(3,2),e.qZA()()(),e.TgZ(4,"sz-ui-table",3),e.NdJ("update",function(){return n.get()}),e.qZA()),2&o&&(e.Q6J("dataSource",n.dataSource),e.xp6(4),e.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",n.dataSource))},dependencies:[O.lW,fe.K,ce.f],encapsulation:2}),r})();const Ee=[{path:"",component:(()=>{class r{constructor(o,n){this.dialog=o,this.route=n,this.alert$=new k.x,this.referenceValue=this.route.snapshot.data.referenceValue}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(f.uw),e.Y36(E.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["medisy-laboratory-reference-value"]],features:[e._Bn([])],decls:7,vars:1,consts:function(){let a;return a="\u0627\u0644\u0642\u064A\u0645 \u0627\u0644\u0645\u0631\u062C\u0639\u064A\u0629",[["start",""],[1,"sz-h5"],["routerLink","../",1,"tw-underline","tw-text-sm"],a]},template:function(o,n){1&o&&(e.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),e._uU(3),e.qZA(),e.TgZ(4,"a",2),e.SDv(5,3),e.qZA()()(),e._UZ(6,"medisy-laboratory-reference-value-rules")),2&o&&(e.xp6(3),e.Oqu(n.referenceValue.testClass.name))},dependencies:[E.rH,ee.z,de],encapsulation:2}),r})()}];let me=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[N.C],imports:[C.ez,s.u5,s.UX,E.Bz.forChild(Ee),f.Is,I.Bb,A.c,K.S,Y.p9,Z.Tx,y.Ps,O.ot,x.LD,J.T5,B.AV,$.ie,U.QW,F.Cq,v.XK,D.FA,G.p0,M.TU,z.JX,W.E,c.Vn,H.c,j.V,q.h,b.g,X.F,d.su,w.n,Q.L,M.TU,f.Is,v.Ng,_.g]}),r})()}}]);