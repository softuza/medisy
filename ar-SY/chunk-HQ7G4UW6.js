import{a as ye}from"./chunk-IUSM46JI.js";import{a as he,b as Fe,c as De}from"./chunk-QRNYUQ6K.js";import{a as P}from"./chunk-RIASER7Q.js";import{c as Ae,e as ue,f as O,g as ce,i as Me,u as Pe,v as ge}from"./chunk-4FMEOKTF.js";import{c as Oe,h as fe,i as Ie,j as de,l as Ee,m as Ce,n as pe}from"./chunk-W2LWMIH7.js";import{a as se,b as Se,d as le,e as me,g as c}from"./chunk-VQ3CVIXE.js";import{A as ae,h as ie,v as _e,z as re}from"./chunk-EJRHERCA.js";import{d as S,f as w,g as k,k as H,m as J,p as K,q as Q,t as W}from"./chunk-LDFDSR3K.js";import{a as Ne}from"./chunk-BUSYHZDZ.js";import{b as M}from"./chunk-K7VJTIK7.js";import{d as Te}from"./chunk-4VFLSYB5.js";import{e as ee}from"./chunk-E2DYYESB.js";import{i as g}from"./chunk-R54FJ7AR.js";import"./chunk-OHNFTK26.js";import"./chunk-XTT75MUU.js";import{Ea as oe,Ga as te,Ja as ne,r as q}from"./chunk-TT7ZQ2V6.js";import{Eb as s,Fb as N,Gb as m,M as d,Qb as x,Sb as p,Ub as A,da as v,ea as G,fb as l,g as V,gb as T,gc as u,ja as X,jc as B,na as E,nb as Z,oa as Y,qb as j,ub as a,zb as C}from"./chunk-CQJO6ZYU.js";var f=(()=>{let o=class o{constructor(e){this.http=e,this.basePath="softuza-notification",this.notifications=new Te(this.http,`${this.basePath}/v1/notifications`);}};o.ɵfac=function(t){return new(t||o)(X(q));},o.ɵprov=v({token:o,factory:o.ɵfac});let n=o;return n;})();function Ue(n,o){if(n&1&&(s(0,"mat-tab",5),m(1,"sz-ui-form-field-input",9)(2,"sz-ui-form-field-input",10)(3,"sz-ui-form-field-input",11)(4,"sz-ui-form-field-textarea",12),N()),n&2){let I=A();a("formGroup",I.formEmail);}}function Ve(n,o){if(n&1&&(s(0,"mat-tab",6),m(1,"sz-ui-form-field-input",13)(2,"sz-ui-form-field-textarea",14),N()),n&2){let I=A();a("formGroup",I.formSms);}}function ve(n,o){if(n&1&&(s(0,"mat-tab",7),m(1,"sz-ui-form-field-input",15)(2,"sz-ui-form-field-textarea",16),N()),n&2){let I=A();a("formGroup",I.formPush);}}var $e=(()=>{let o=class o extends fe{constructor(e,t,i,_){super(i),this.sntiService=e,this.fb=t,this.dialog=i,this.data=_,this.notificationTypes=O,this.subscriptions=new V(),this.formEmail=t.group({subject:[_?.email?.subject,[S.required]],replyToEmail:[_?.email?.replyToEmail,[S.email]],replyToName:[_?.email?.replyToName,[]],body:[_?.email?.body,[S.required]]}),this.formSms=t.group({originator:[_?.sms?.originator,[S.required]],body:[_?.sms?.body,[S.required]]}),this.formPush=t.group({title:[_?.push?.title,[S.required]],body:[_?.push?.body,[S.required]]}),this.form=t.group({name:[_?.name,[S.required]],description:[_?.description,[S.maxLength(4096)]],types:[_?.types??[],[S.required]]}),this.subscribeChanges();}ngOnDestroy(){this.subscriptions.unsubscribe();}subscribeChanges(){this.subscriptions.add(this.form.controls.types.valueChanges.subscribe(e=>{this.form.contains("email")?e?.includes(O.Email)||this.form.removeControl("email"):e?.includes(O.Email)&&this.form.addControl("email",this.formEmail),this.form.contains("sms")?e?.includes(O.Sms)||this.form.removeControl("sms"):e?.includes(O.Sms)&&this.form.addControl("sms",this.formSms),this.form.contains("push")?e?.includes(O.Push)||this.form.removeControl("push"):e?.includes(O.Push)&&this.form.addControl("push",this.formPush);}));}hasChannelType(e){return this.form.value.types?.includes(e);}submit(){this.IsValid()&&(this.data?this.save(this.sntiService.notifications.update(this.data.id,this.form.value)):this.save(this.sntiService.notifications.create(this.form.value)));}};o.ɵfac=function(t){return new(t||o)(T(f),T(Q),T(se),T(Se));},o.ɵcmp=E({type:o,selectors:[["medisy-laboratory-reference-values-save"]],standalone:!0,features:[u([]),Z,B],decls:11,vars:7,consts:()=>{let e;e="\u0627\u0644\u0627\u0633\u0645";let t;t="\u0627\u0644\u0648\u0635\u0641";let i;i="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let _;_="\u0631\u0633\u0627\u0644\u0629 \u0646\u0635\u064A\u0629";let F;F="\u0627\u0634\u0639\u0627\u0631";let D;D="\u0627\u0644\u0645\u0648\u0636\u0648\u0639";let y;y="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let b;b="\u0627\u0644\u0627\u0633\u0645";let $;$="\u0627\u0644\u0645\u062D\u062A\u0648\u0649";let R;R="\u0627\u0644\u0645\u0631\u0633\u0644";let L;L="\u0627\u0644\u0645\u062D\u062A\u0648\u0649";let z;z="\u0627\u0644\u0644\u0642\u0628";let U;return U="\u0627\u0644\u0645\u062D\u062A\u0648\u0649",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",t],["formControlName","types",3,"multiple"],["label",i,3,"formGroup"],["label",_,3,"formGroup"],["label",F,3,"formGroup"],[3,"actions"],["formControlName","subject","label",D],["formControlName","replyToEmail","label",y],["formControlName","replyToName","label",b],["formControlName","body","label",$],["formControlName","originator","label",R],["formControlName","body","label",L],["formControlName","title","label",z],["formControlName","body","label",U]];},template:function(t,i){t&1&&(m(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"medisy-form-field-notification-type",4),s(6,"mat-tab-group"),j(7,Ue,5,1,"mat-tab",5)(8,Ve,3,1,"mat-tab",6)(9,ve,3,1,"mat-tab",7),N()()(),m(10,"sz-ui-dialog-actions",8)),t&2&&(a("header",i.header),l(2),a("formGroup",i.form),l(3),a("multiple",!0),l(2),C(7,i.hasChannelType(i.notificationTypes.Email)?7:-1),l(),C(8,i.hasChannelType(i.notificationTypes.Sms)?8:-1),l(),C(9,i.hasChannelType(i.notificationTypes.Push)?9:-1),l(),a("actions",i.actions));},dependencies:[W,H,w,k,J,K,c,me,ie,De,he,Fe,Ce,Ie,de,ae,_e,re,ce],encapsulation:2});let n=o;return n;})();var Re=(()=>{let o=class o{constructor(e,t){this.dialog=e,this.sntiService=t,this.title=Ne.notifications,this.dataSource=new ue(),this.dataSource.addRows([Ae.borderless([P.nameText(),P.createdAt(),P.menu([g.edit(i=>this.openSaveComponent(i)),g.delete(i=>this.openNotificationDeleteComponent(i))])])]),this.dataSource.schema=ye.softuza.notificationAPI.notification,this.get();}openSaveComponent(e){this.dialog.open($e,{data:e}).afterClosed().pipe(d(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openNotificationDeleteComponent(e){this.dialog.open(Ee,{data:pe.delete(this.sntiService.notifications.delete(e.id),e)}).afterClosed().pipe(d(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.sntiService.notifications.get(this.dataSource.buildRequest()).pipe(Oe(this.dataSource.indicator),d(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(t){return new(t||o)(T(le),T(f));},o.ɵcmp=E({type:o,selectors:[["softuza-notification-notifications"]],features:[u([])],decls:6,vars:4,consts:()=>{let e;return e="\u0625\u0636\u0627\u0641\u0629",[[3,"title"],[3,"dataSource","changed"],["mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(t,i){t&1&&(m(0,"sz-ui-header-info",0),s(1,"sz-ui-table-search-filter",1),p("changed",function(){return i.get();}),s(2,"button",2),p("click",function(){return i.openSaveComponent();}),s(3,"span"),x(4,3),N()()(),s(5,"sz-ui-table",4),p("update",function(){return i.get();}),N()),t&2&&(a("title",i.title),l(),a("dataSource",i.dataSource),l(4),a("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[oe,Pe,Me,M],encapsulation:2});let n=o;return n;})();var Le=[{path:"",component:Re}];var Uo=(()=>{let o=class o{};o.ɵfac=function(t){return new(t||o)();},o.ɵmod=Y({type:o}),o.ɵinj=G({providers:[f],imports:[ee.forChild(Le),c,te,ge,M,ne]});let n=o;return n;})();export{Uo as NotificationsModule};/**i18n:70191478f6ac7be8bdb3241746fcd9e1f236a6362603c105af1f0a7330a6840e*/