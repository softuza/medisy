import{a as Se}from"./chunk-UR62DX7K.js";import{a as N}from"./chunk-L3MA6WSX.js";import{d as _,g as p}from"./chunk-ZUTEIW3L.js";import"./chunk-PPO5LMMV.js";import"./chunk-6VMEWVPH.js";import"./chunk-JI5I5E7Z.js";import{a as O}from"./chunk-NOAPOEUB.js";import{a as me,b as pe,c as le,e as de,o as ce,p as ue}from"./chunk-FYVWUY5J.js";import"./chunk-BDKYF43S.js";import{c as te,h as oe,i as ie,j as ne,l as re,m as se,n as ae}from"./chunk-JUKWJGHA.js";import{a as J,b as K,d as Q,e as W,g as Z}from"./chunk-LR6DSKQQ.js";import{C as q,E as H,p as B,z as X}from"./chunk-CJ3L35E7.js";import{d as T,f as A,g as D,h as F,l as R,m as L,n as U,o as $,p as j,s as h}from"./chunk-FZFNR6NR.js";import"./chunk-5MX2FBOB.js";import{a as ee}from"./chunk-V2YTYBA6.js";import{a as x}from"./chunk-AQB7U7BU.js";import{a as Y,d as G,e as w}from"./chunk-4G55JY3H.js";import{i as v}from"./chunk-5QJH45WQ.js";import"./chunk-AWHXYS7Y.js";import"./chunk-EBVBFE7W.js";import{Pa as k,Ra as V}from"./chunk-W55BWEJG.js";import{Bb as a,Cb as d,Db as u,L as M,Nb as g,Pb as E,Wb as y,Xb as I,Zb as P,ac as S,cb as l,db as n,ec as b,fc as z,kb as C,la as c,nb as s}from"./chunk-3QIFGVJ6.js";var _e=(()=>{let i=class i extends B{constructor(o,e){super(o),this.ngControl=o,this.typeI18nPipe=e,this.options=Object.keys(_).map(t=>_[t]),this.label="\u0646\u0648\u0639 \u0627\u0644\u0648\u062B\u064A\u0642\u0629",this.optionContent=t=>this.typeI18nPipe.transform(t);}ngOnInit(){this.control=this.ngControl.control;}};i.ɵfac=function(e){return new(e||i)(n(A,10),n(p));},i.ɵcmp=c({type:i,selectors:[["medisy-form-field-document-type"]],standalone:!0,features:[P([p]),C,S],decls:1,vars:7,consts:[[3,"formControl","options","label","placeholder","emptyOption","multiple","szOptionContentFn"]],template:function(e,t){e&1&&u(0,"sz-ui-form-field-select",0),e&2&&s("formControl",t.control)("options",t.options)("label",t.label)("placeholder",t.placeholder)("emptyOption",t.emptyOption)("multiple",t.multiple)("szOptionContentFn",t.optionContent);},dependencies:[h,D,L,q],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]});let r=i;return r;})();var Me=(()=>{let i=class i extends oe{constructor(o,e,t,m){super(t),this.mpplService=o,this.fb=e,this.dialog=t,this.data=m,this.form=e.group({referenceNumber:[m.personDocument?.referenceNumber,[T.maxLength(128)]],documentType:[m.personDocument?.documentType??_.DriverLicense,[T.required]]});}submit(){this.IsValid()&&(this.data.personDocument?this.save(this.mpplService.persons.documents.update(this.data.personId,this.data.personDocument.id,this.form.value)):this.save(this.mpplService.persons.documents.create(this.data.personId,this.form.value)));}};i.ɵfac=function(e){return new(e||i)(n(N),n(j),n(J),n(K));},i.ɵcmp=c({type:i,selectors:[["medisy-people-person-documents-save"]],standalone:!0,features:[C,S],decls:6,vars:3,consts:()=>{let o;return o="\u0627\u0644\u0631\u0642\u0645",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","referenceNumber","placeholder",o],["formControlName","documentType"],[3,"actions"]];},template:function(e,t){e&1&&(u(0,"sz-ui-dialog-header",0),a(1,"mat-dialog-content")(2,"form",1),u(3,"sz-ui-form-field-input",2)(4,"medisy-form-field-document-type",3),d()(),u(5,"sz-ui-dialog-actions",4)),e&2&&(s("header",t.header),l(2),s("formGroup",t.form),l(3),s("actions",t.actions));},dependencies:[h,R,D,F,U,$,Z,W,H,X,se,ie,ne,_e],encapsulation:2});let r=i;return r;})();var mt=(()=>{let i=class i{constructor(o,e,t,m){this.dialog=o,this.mpplService=e,this.route=t,this.typeI18nPipe=m,this.dataSource=new pe(x.paged()),this.person=this.route.snapshot.data.person,this.dataSource.addRows(le.default([me.text("referenceNumber","\u0627\u0644\u0631\u0642\u0645"),O.documentType(f=>this.typeI18nPipe.transform(f.documentType)),O.createdAt(),O.menu([v.edit(f=>this.openSaveComponent(f)),v.delete(f=>this.openPersonDocumentDeleteComponent(f))])])),this.get();}openSaveComponent(o){this.dialog.open(Me,{data:{personId:this.person.id,personDocument:o}}).afterClosed().pipe(M(1)).subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}openPersonDocumentDeleteComponent(o){this.dialog.open(re,{data:ae.delete(this.mpplService.persons.documents.delete(o.personId,o.id),o)}).afterClosed().pipe(M(1)).subscribe(e=>{this.dataSource.delete(e);});}get(){this.mpplService.persons.documents.get(this.person.id,this.dataSource.filterModel).pipe(te(this.dataSource.indicator),M(1)).subscribe(o=>{this.dataSource.set(o.items,o.count);});}};i.ɵfac=function(e){return new(e||i)(n(Q),n(N),n(Y),n(p));},i.ɵcmp=c({type:i,selectors:[["medisy-people-person-documents"]],standalone:!0,features:[P([p]),S],decls:12,vars:7,consts:()=>{let o;o="\u0627\u0644\u0648\u062B\u0627\u0626\u0642";let e;return e="\u0625\u0636\u0627\u0641\u0629",[["start",""],[1,"sz-h5"],o,["routerLink","../",1,"tw-underline"],[3,"dataSource","search"],["title","","mat-flat-button","","color","primary","start","",3,"click"],e,[3,"paginationEnabled","stateEnabled","dataSource","update"]];},template:function(e,t){e&1&&(a(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),g(3,2),d(),a(4,"a",3),y(5),b(6,"personName"),d()()(),a(7,"sz-ui-table-filter",4),E("search",function(){return t.get();}),a(8,"button",5),E("click",function(){return t.openSaveComponent();}),a(9,"span"),g(10,6),d()()(),a(11,"sz-ui-table",7),E("update",function(){return t.get();}),d()),e&2&&(l(5),I(z(6,5,t.person)),l(2),s("dataSource",t.dataSource),l(4),s("paginationEnabled",!0)("stateEnabled",!0)("dataSource",t.dataSource));},dependencies:[w,G,V,k,ue,ce,de,ee,Se],encapsulation:2});let r=i;return r;})();export{mt as PersonDocumentsComponent};/**i18n:419148c294ae56579e504a43f00a8e71eb3633c9912a0864afd0e0662e47e985*/