"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[506],{3506:(E,S,s)=>{s.r(S),s.d(S,{AnalysisModule:()=>K});var c=s(6814),m=s(2296),o=s(7700),p=s(6385),i=s(617),A=s(7988),u=s(8109),h=s(465),T=s(5738),L=s(758),z=s(2595),P=s(5041),t=s(5879),M=s(9060),l=(()=>((l=l||{}).Created="Created",l.Pending="Pending",l.Started="Started",l.Finished="Finished",l))();let C=(()=>{class n{transform(e){switch(e){case l.Created:return "\u0645\u0646\u0634\u0623\u0629";case l.Started:return "\u0628\u062F\u0623";case l.Finished:return "\u0627\u0646\u062A\u0647\u062A";case l.Pending:return "\u0642\u064A\u062F \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631";default:return""}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"testStateI18n",type:n,pure:!0,standalone:!0}),n})();var v=s(5348),N=s(2430),g=s(3572),f=s(9598),D=s(7398),O=s(8180),Y=s(2516),R=s(6128),Z=s(2191),I=s(9862),_=s(3971);let U=(()=>{class n{constructor(e){this.http=e,this.path="medisy-laboratory/v1/tests"}getTests(e){return this.http.get(`${this.path}`,{params:new I.LE({fromObject:(0,_.c)(e)})})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(I.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var F=s(8721),B=s(3582);let $=(()=>{class n{constructor(e,r,d){this.route=e,this.analysisService=r,this.testStatei18nPipe=d,this.dataSource=new g.b2(f.J.pagedSorted("-createdAt")),this.analysis=this.route.snapshot.data.analysis,this.dataSource.columns=[g.UC.text("test.testclass","\u0635\u0646\u0641 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631",y=>y.test.testClass.name),g.UC.text("test.state","\u0627\u0644\u062D\u0627\u0644\u0629",y=>d.transform(y.test.state)),Z.h.menu([])],this.get()}get(){this.analysisService.getAnalysisTests(this.analysis.id,this.dataSource.filterModel).pipe((0,F.sU)(this.dataSource.indicator)).pipe((0,O.q)(1)).subscribe(e=>{this.dataSource.set(e.items,e.count)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.gz),t.Y36(T.K),t.Y36(C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["medisy-laboratory-analysis-tests"]],standalone:!0,features:[t._Bn([U]),t.jDz],decls:4,vars:3,consts:function(){let a;return a="\u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631\u0627\u062A",[["start",""],a,[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(e,r){1&e&&(t.TgZ(0,"sz-ui-header-basic")(1,"strong",0),t.SDv(2,1),t.qZA()(),t.TgZ(3,"sz-ui-table",2),t.NdJ("update",function(){return r.get()}),t.qZA()),2&e&&(t.xp6(3),t.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",r.dataSource))},dependencies:[g.Vn,B.K,P.n,Y.z],encapsulation:2}),n})();function J(n,a){1&n&&t._UZ(0,"sz-ui-card",10),2&n&&t.Q6J("card",a.$implicit)}const X=[{path:"",component:(()=>{class n{constructor(e,r,d,y,b,G){this.dialog=e,this.route=r,this.router=d,this.analysisService=y,this.personService=b,this.personNamePipe=G,this.alert$=(0,t.tdS)(void 0),this.testsDataSource=new g.b2(f.J.pagedSorted("-createdAt")),this.tiles=[],this.analysis=this.route.snapshot.data.analysis,this.analysis.personId&&this.getPerson(),this.tiles.push({icon:"science",subtitle:"\u0627\u0644\u0639\u064A\u0646\u0627\u062A",type:N.k.Counter,task$:this.analysisService.getAnalysisSpecimens(this.analysis.id,f.J.count()).pipe((0,D.U)(j=>j.count))})}getPerson(){this.personService.getPerson(this.analysis.personId).pipe((0,O.q)(1)).subscribe(e=>{this.tiles.splice(0,0,{icon:"person",type:N.k.Text,subtitle:"\u0627\u0644\u0645\u0631\u064A\u0636",title:this.personNamePipe.transform(e),clickFn:()=>this.router.navigate([`mppl/persons/${e.id}`])})})}openEditComponent(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(o.uw),t.Y36(u.gz),t.Y36(u.F0),t.Y36(T.K),t.Y36(v.R),t.Y36(M.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["medisy-laboratory-analysis"]],features:[t._Bn([T.K,v.R,M.Y,C])],decls:25,vars:4,consts:function(){let a,e;return a="\u062A\u0639\u062F\u064A\u0644",e="\u0637\u0628\u0627\u0639\u0629",[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["mat-icon-button","","end","",3,"matMenuTriggerFor"],["itemMenu","matMenu"],["mat-menu-item","",3,"click"],a,e,[1,"sz-grid-card"],[3,"card",4,"ngFor","ngForOf"],[3,"card"]]},template:function(e,r){if(1&e&&(t.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),t._uU(3),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.qZA()(),t.TgZ(6,"button",3)(7,"mat-icon"),t._uU(8,"more_vert"),t.qZA()(),t.TgZ(9,"mat-menu",null,4)(11,"button",5),t.NdJ("click",function(){return r.openEditComponent()}),t.TgZ(12,"mat-icon"),t._uU(13,"edit"),t.qZA(),t.TgZ(14,"span"),t.SDv(15,6),t.qZA()(),t._UZ(16,"mat-divider"),t.TgZ(17,"button",5),t.NdJ("click",function(){return r.openEditComponent()}),t.TgZ(18,"mat-icon"),t._uU(19,"print"),t.qZA(),t.TgZ(20,"span"),t.SDv(21,7),t.qZA()()()(),t.TgZ(22,"div",8),t.YNc(23,J,1,1,"sz-ui-card",9),t.qZA(),t._UZ(24,"medisy-laboratory-analysis-tests")),2&e){const d=t.MAs(10);t.xp6(3),t.Oqu(r.analysis.code),t.xp6(2),t.Oqu(r.analysis.note),t.xp6(1),t.Q6J("matMenuTriggerFor",d),t.xp6(17),t.Q6J("ngForOf",r.tiles)}},dependencies:[c.sg,A.VK,A.OP,A.p6,i.Hw,m.RK,p.d,Y.z,R.X,$],encapsulation:2}),n})()}];let K=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[T.K],imports:[c.ez,u.Bz.forChild(X),o.Is,L.E3,A.Tx,i.Ps,m.ot,p.t,P.n,z.V,h.X,$]}),n})()},465:(E,S,s)=>{s.d(S,{X:()=>m});var c=s(5879);let m=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=c.oAB({type:o}),o.\u0275inj=c.cJS({}),o})()},9060:(E,S,s)=>{s.d(S,{Y:()=>m});var c=s(5879);let m=(()=>{class o{transform(i,A=!1){if(!i.names||0===i.names.length)return`${i.id}`;const u=i.names[0].firstName,h=i.names[0].lastName,T=h?`${u} ${h}`:`${u}`;return A&&i.birthDate?""+(+new Date-+i.birthDate):T}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275pipe=c.Yjl({name:"personName",type:o,pure:!0,standalone:!0}),o})()}}]);