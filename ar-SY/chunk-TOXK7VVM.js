import{a as be,b as $e,c as ze}from"./chunk-5WUUDBFV.js";import{a as j}from"./chunk-WB25ISRV.js";import{d as Ce,e as Ee,f as G,g as X,i as Ae,j as Y,k as Me}from"./chunk-VT3WYR67.js";import{o as fe,s as Ne,u as Oe,v as R}from"./chunk-RQNRD2JQ.js";import"./chunk-3UYL57HA.js";import{a as v,b as L,d as de,e as U,g as d}from"./chunk-V6FPP55L.js";import"./chunk-U7VPIABE.js";import{e as f,f as ye}from"./chunk-3VGQRMVI.js";import"./chunk-SIM3MWAY.js";import{b as Z}from"./chunk-M3UESULM.js";import{a as q,b as Pe,c as ge,d as k,f as he,p as Fe,q as De}from"./chunk-PTJACGQS.js";import"./chunk-UNCYENX6.js";import{b as ce}from"./chunk-VRISEVPV.js";import{E as z,d as p,g,h,l as F,n as D,o as y,p as b,s as $,t as Se,v as Te}from"./chunk-GJY7U5GZ.js";import{e as Ie}from"./chunk-3BVZ364G.js";import{a as ue}from"./chunk-PIKBUH2I.js";import{a as V}from"./chunk-QDC3ZTFW.js";import{M as me,Wa as pe,j as se,q as P,s as le}from"./chunk-NC2N2FCX.js";import{Ab as a,Bb as S,Cb as T,L as c,Mb as w,Pb as E,Rb as A,Zb as O,ac as M,da as ie,ea as ne,eb as s,f as te,fb as l,ja as re,ma as N,mb as C,na as _e,pb as _,vb as ae}from"./chunk-3CXVAQY6.js";var u=(()=>{let t=class t{constructor(e){this.http=e,this.basePath="softuza-notification",this.notifications=new Ie(this.http,`${this.basePath}/v1/notifications`);}};t.ɵfac=function(i){return new(i||t)(re(le));},t.ɵprov=ie({token:t,factory:t.ɵfac});let n=t;return n;})();var Le=(()=>{let t=class t extends Ce{constructor(e,i,o){super(i),this.fb=e,this.dialog=i,this.data=o,this.form=e.group({channelType:[o?.channelType]});}submit(){this.IsValid()&&this.dialog.close(this.form.value);}};t.ɵfac=function(i){return new(i||t)(l(b),l(v),l(L));},t.ɵcmp=N({type:t,selectors:[["softuza-notification-notifications-filter"]],standalone:!0,features:[O([]),C,M],decls:5,vars:3,consts:[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","channelType"],[3,"actions"]],template:function(i,o){i&1&&(T(0,"sz-ui-dialog-header",0),a(1,"mat-dialog-content")(2,"form",1),T(3,"medisy-form-field-channel-type",2),S()(),T(4,"sz-ui-dialog-actions",3)),i&2&&(_("header",o.header),s(2),_("formGroup",o.form),s(2),_("actions",o.actions));},dependencies:[$,F,g,h,D,y,Y,G,X,R,z,fe,d,U,j],encapsulation:2});let n=t;return n;})();function je(n,t){if(n&1&&(a(0,"mat-tab",9),T(1,"sz-ui-form-field-input",10)(2,"sz-ui-form-field-input",11)(3,"sz-ui-form-field-input",12),S()),n&2){let I=A();_("formGroup",I.formEmail);}}function xe(n,t){if(n&1&&(a(0,"mat-tab",13),T(1,"sz-ui-form-field-input",14)(2,"sz-ui-form-field-textarea",15),S()),n&2){let I=A();_("formGroup",I.formSms);}}function Be(n,t){if(n&1&&(a(0,"mat-tab",16),T(1,"sz-ui-form-field-input",17)(2,"sz-ui-form-field-textarea",18),S()),n&2){let I=A();_("formGroup",I.formPush);}}var Ue=(()=>{let t=class t extends Ee{constructor(e,i,o,r){super(o),this.sntiService=e,this.fb=i,this.dialog=o,this.data=r,this.channelTypes=f,this.subscriptions=new te(),this.formEmail=i.group({subject:[r?.email?.subject,[p.required]],replyToEmail:[r?.email?.replyTo.email,[p.email]],replyToName:[r?.email?.replyTo.name,[]]}),this.formSms=i.group({originator:[r?.sms?.originator,[p.required]],body:[r?.sms?.body,[p.required]]}),this.formPush=i.group({title:[r?.push?.title,[p.required]],body:[r?.push?.body,[p.required]]}),this.form=i.group({name:[r?.name,[p.required]],description:[r?.description,[p.maxLength(4096)]],channelTypes:[r?.channelTypes??[],[p.required]]}),this.subscribeChanges();}ngOnDestroy(){this.subscriptions.unsubscribe();}subscribeChanges(){this.subscriptions.add(this.form.controls.channelTypes.valueChanges.subscribe(e=>{this.form.contains("email")?e?.includes(f.Email)||this.form.removeControl("email"):e?.includes(f.Email)&&this.form.addControl("email",this.formEmail),this.form.contains("sms")?e?.includes(f.Sms)||this.form.removeControl("sms"):e?.includes(f.Sms)&&this.form.addControl("sms",this.formSms),this.form.contains("push")?e?.includes(f.Push)||this.form.removeControl("push"):e?.includes(f.Push)&&this.form.addControl("push",this.formPush);}));}hasChannelType(e){return this.form.value.channelTypes?.includes(e);}submit(){this.IsValid()&&(this.data?this.save(this.sntiService.notifications.update(this.data.id,this.form.value)):this.save(this.sntiService.notifications.create(this.form.value)));}};t.ɵfac=function(i){return new(i||t)(l(u),l(b),l(v),l(L));},t.ɵcmp=N({type:t,selectors:[["medisy-laboratory-reference-values-save"]],standalone:!0,features:[O([]),C,M],decls:11,vars:7,consts:()=>{let e;e="\u0627\u0644\u0627\u0633\u0645";let i;i="\u0627\u0644\u0648\u0635\u0641";let o;o="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let r;r="\u0631\u0633\u0627\u0644\u0629 \u0646\u0635\u064A\u0629";let B;B="\u0627\u0634\u0639\u0627\u0631";let H;H="\u0627\u0644\u0645\u0648\u0636\u0648\u0639";let J;J="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let K;K="\u0627\u0644\u0627\u0633\u0645";let Q;Q="\u0627\u0644\u0645\u0631\u0633\u0644";let W;W="\u0627\u0644\u0645\u062D\u062A\u0648\u0649";let ee;ee="\u0627\u0644\u0644\u0642\u0628";let oe;return oe="\u0627\u0644\u0645\u062D\u062A\u0648\u0649",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",i],["formControlName","channelTypes",3,"multiple"],["label",o,3,"formGroup",4,"ngIf"],["label",r,3,"formGroup",4,"ngIf"],["label",B,3,"formGroup",4,"ngIf"],[3,"actions"],["label",o,3,"formGroup"],["formControlName","subject","label",H],["formControlName","replyToEmail","label",J],["formControlName","replyToName","label",K],["label",r,3,"formGroup"],["formControlName","originator","label",Q],["formControlName","body","label",W],["label",B,3,"formGroup"],["formControlName","title","label",ee],["formControlName","body","label",oe]];},template:function(i,o){i&1&&(T(0,"sz-ui-dialog-header",0),a(1,"mat-dialog-content")(2,"form",1),T(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"medisy-form-field-channel-type",4),a(6,"mat-tab-group"),ae(7,je,4,1,"mat-tab",5)(8,xe,3,1,"mat-tab",6)(9,Be,3,1,"mat-tab",7),S()()(),T(10,"sz-ui-dialog-actions",8)),i&2&&(_("header",o.header),s(2),_("formGroup",o.form),s(3),_("multiple",!0),s(2),_("ngIf",o.hasChannelType(o.channelTypes.Email)),s(1),_("ngIf",o.hasChannelType(o.channelTypes.Sms)),s(1),_("ngIf",o.hasChannelType(o.channelTypes.Push)),s(1),_("actions",o.actions));},dependencies:[P,se,$,F,g,h,D,y,d,U,z,ze,be,$e,Y,G,X,R,Ne,Oe,j],encapsulation:2});let n=t;return n;})();var Ve=(()=>{let t=class t{constructor(e,i){this.dialog=e,this.sntiService=i,this.dataSource=new ge(ue.paged()),this.dataSource.addRows([k.borderless([Z.nameText(),Z.createdAt(),Z.menu([q.edit(o=>this.openSaveComponent(o)),q.delete(o=>this.openNotificationDeleteComponent(o))])]),k.headerless([Pe.text("description")])]),this.get();}openFilterComponent(){this.dialog.open(Le,{data:this.dataSource.filterModel}).afterClosed().pipe(c(1)).subscribe(i=>{this.dataSource.updateFilterModel(i),this.get();});}openSaveComponent(e){this.dialog.open(Ue,{data:e}).afterClosed().pipe(c(1)).subscribe(o=>{this.dataSource.updateOrPushItem(o);});}openNotificationDeleteComponent(e){this.dialog.open(Ae,{data:Me.delete(this.sntiService.notifications.delete(e.id),e)}).afterClosed().pipe(c(1)).subscribe(o=>{this.dataSource.delete(o);});}get(){this.sntiService.notifications.get(this.dataSource.filterModel).pipe(ce(this.dataSource.indicator),c(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};t.ɵfac=function(i){return new(i||t)(l(de),l(u));},t.ɵcmp=N({type:t,selectors:[["softuza-notification-notifications"]],features:[O([ye])],decls:8,vars:4,consts:()=>{let e;e="\u0627\u0644\u0627\u0634\u0639\u0627\u0631\u0627\u062A";let i;return i="\u0625\u0636\u0627\u0641\u0629",[["start","",1,"sz-h5"],e,[3,"dataSource","search","filter"],["mat-flat-button","","color","primary","start","",3,"click"],i,[3,"paginationEnabled","stateEnabled","dataSource","update"]];},template:function(i,o){i&1&&(a(0,"sz-ui-header-basic")(1,"h5",0),w(2,1),S()(),a(3,"sz-ui-table-filter",2),E("search",function(){return o.get();})("filter",function(){return o.openFilterComponent();}),a(4,"button",3),E("click",function(){return o.openSaveComponent();}),a(5,"span"),w(6,4),S()()(),a(7,"sz-ui-table",5),E("update",function(){return o.get();}),S()),i&2&&(s(3),_("dataSource",o.dataSource),s(4),_("paginationEnabled",!0)("stateEnabled",!0)("dataSource",o.dataSource));},dependencies:[Se,Fe,he,V],encapsulation:2});let n=t;return n;})();var Ge=[{path:"",component:Ve}];var Wo=(()=>{let t=class t{};t.ɵfac=function(i){return new(i||t)();},t.ɵmod=_e({type:t}),t.ɵinj=ne({providers:[u],imports:[P,me.forChild(Ge),d,Te,De,V,pe]});let n=t;return n;})();export{Wo as NotificationsModule};/**i18n:c47ea6c8e33fa0c222c20e616e96e45afbcc3267e1e4f83fbed9283c01f003ba*/