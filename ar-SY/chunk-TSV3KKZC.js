import{a as se}from"./chunk-7V6JPZ3L.js";import{a as ae}from"./chunk-727VSYSF.js";import{a as f}from"./chunk-7LVQWGM4.js";import{a as ne}from"./chunk-7OP2KFWQ.js";import"./chunk-RCF34KUN.js";import"./chunk-675HL3QC.js";import"./chunk-7PVYT5AR.js";import{a as P}from"./chunk-Z2RPXGB3.js";import{b as x,c as ee,d as te,f as ie,r as oe,s as re}from"./chunk-7RJ5EIRJ.js";import{c as q,h as H,i as J,j as K,l as Q,m as W,n as Z}from"./chunk-AS5U2OT3.js";import{a as G,b as V,d as j,e as U,g as X}from"./chunk-GP3W3GGO.js";import{D as $,E as Y,z as F}from"./chunk-HSZRRRQX.js";import{d as E,g as O,h as T,l as v,n as A,o as I,p as D,s as z}from"./chunk-DOVRWRQU.js";import{a as k}from"./chunk-VLCPYEZN.js";import{b as B}from"./chunk-MDQJK7YC.js";import{a as w}from"./chunk-6ILUQYS3.js";import{a as y,e as b}from"./chunk-2WUPC45G.js";import{i as M}from"./chunk-DESFHGZ3.js";import"./chunk-PLPMFK4N.js";import"./chunk-GNPEYPQP.js";import{Pa as L,Ra as R}from"./chunk-26JDY2BM.js";import{Bb as m,Cb as d,Db as p,L as S,Nb as h,Pb as u,ac as c,cb as l,db as a,ec as N,fc as g,kb as C,la as _,nb as n}from"./chunk-J5YYK5S2.js";var me=(()=>{let o=class o extends H{constructor(e,t,i,r){super(i),this.mpplService=e,this.fb=t,this.dialog=i,this.data=r,this.form=t.group({value:[r.personEmail?.value,[E.required,E.email]],emailType:[r.personEmail?.emailType??ne.Private,[E.required]],description:[r.personEmail?.description,[]]});}submit(){this.IsValid()&&(this.data.personEmail?this.save(this.mpplService.persons.emails.update(this.data.personId,this.data.personEmail.id,this.form.value)):this.save(this.mpplService.persons.emails.create(this.data.personId,this.form.value)));}};o.ɵfac=function(t){return new(t||o)(a(f),a(D),a(G),a(V));},o.ɵcmp=_({type:o,selectors:[["medisy-people-person-emails-save"]],standalone:!0,features:[C,c],decls:7,vars:3,consts:()=>{let e;e="\u0627\u0644\u0648\u0635\u0641";let t;return t="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","description","placeholder",e],["formControlName","value","placeholder",t],["formControlName","emailType"],[3,"actions"]];},template:function(t,i){t&1&&(p(0,"sz-ui-dialog-header",0),m(1,"mat-dialog-content")(2,"form",1),p(3,"sz-ui-form-field-textarea",2)(4,"sz-ui-form-field-input",3)(5,"medisy-form-field-email-type",4),d()(),p(6,"sz-ui-dialog-actions",5)),t&2&&(n("header",i.header),l(2),n("formGroup",i.form),l(4),n("actions",i.actions));},dependencies:[z,v,O,T,A,I,X,U,Y,F,$,W,J,K,se],encapsulation:2});let s=o;return s;})();var Je=(()=>{let o=class o{constructor(e,t,i){this.dialog=e,this.mpplService=t,this.route=i,this.title=k.emails,this.dataSource=new ee(w.paged()),this.person=this.route.snapshot.data.person,this.dataSource.addRows(te.default([x.text("value","\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),P.createdAt(),P.menu([M.edit(r=>this.openSaveComponent(r)),M.delete(r=>this.openPersonEmailDeleteComponent(r))])])),this.get();}openSaveComponent(e){this.dialog.open(me,{data:{personId:this.person.id,personEmail:e}}).afterClosed().pipe(S(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openPersonEmailDeleteComponent(e){this.dialog.open(Q,{data:Z.delete(this.mpplService.persons.emails.delete(e.personId,e.id),e)}).afterClosed().pipe(S(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.mpplService.persons.emails.get(this.person.id,this.dataSource.filterModel).pipe(q(this.dataSource.indicator),S(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(t){return new(t||o)(a(j),a(f),a(y));},o.ɵcmp=_({type:o,selectors:[["medisy-people-person-emails"]],standalone:!0,features:[c],decls:7,vars:8,consts:()=>{let e;return e="\u0625\u0636\u0627\u0641\u0629",[[3,"title","subTitle"],[3,"dataSource","search"],["title","","mat-flat-button","","color","primary","start","",3,"click"],e,[3,"paginationEnabled","stateEnabled","dataSource","update"]];},template:function(t,i){t&1&&(p(0,"sz-ui-header-info",0),N(1,"personName"),m(2,"sz-ui-table-filter",1),u("search",function(){return i.get();}),m(3,"button",2),u("click",function(){return i.openSaveComponent();}),m(4,"span"),h(5,3),d()()(),m(6,"sz-ui-table",4),u("update",function(){return i.get();}),d()),t&2&&(n("title",i.title)("subTitle",g(1,6,i.person)),l(2),n("dataSource",i.dataSource),l(4),n("paginationEnabled",!0)("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[b,R,L,re,oe,ie,B,ae],encapsulation:2});let s=o;return s;})();export{Je as PersonEmailsComponent};/**i18n:5ebc65b24f90b78d556a3a8c188ab6405e20b5534cf6eb00a5dd3e44f73f97d4*/