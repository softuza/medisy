import{b as Ce}from"./chunk-BVDDTOMA.js";import{a as Ne}from"./chunk-JVGR3LGR.js";import{b as O,c as ye,e as be,i as Pe,j as he,k as I,u as ge,v as Ae}from"./chunk-7O2DLPTA.js";import{a as c}from"./chunk-WBYPLE6B.js";import{a as S}from"./chunk-D3DFCTIC.js";import{c as N,h as Te,i as ue,j as Ee,l as Me,m as fe,n as Oe}from"./chunk-SK6APAT5.js";import{b as ce}from"./chunk-AQRFGV44.js";import"./chunk-ARD3O325.js";import{a as _e,b as de,d as me,e as pe,g as Se}from"./chunk-3NLMA3OD.js";import{a as ee,b as te,g as oe,o as ae,v as ne,w as le,x as se}from"./chunk-7ERNPK3U.js";import{A as re,d as y,e as U,f as g,g as X,k,l as j,m as q,p as w,q as H,t as A,u as J,y as K,z as ie}from"./chunk-HA3OCK63.js";import{i as D}from"./chunk-UVKSHNQV.js";import"./chunk-QFHU2GEW.js";import"./chunk-SRHI3DNT.js";import{Ea as W,Ga as Z,ya as Q}from"./chunk-T2UVNK6V.js";import{Bb as z,Cb as $,Db as B,Eb as l,Fb as s,Gb as p,M as T,Qb as m,Sb as M,Ub as v,a as F,b as Y,dc as h,ec as R,fb as n,gb as _,gc as x,jc as f,kc as G,lc as V,na as E,nb as P,qb as C,ub as d,zb as u}from"./chunk-T2ST7G6M.js";function Ye(i,r){if(i&1&&(l(0,"mat-label"),h(1),s()),i&2){let b=v();n(),R(b.label);}}function ze(i,r){i&1&&(l(0,"mat-option"),h(1,"-"),s());}function $e(i,r){if(i&1&&(l(0,"mat-option",4),h(1),s()),i&2){let b=r.$implicit,e=v();d("value",e.getOptionValue(b)),n(),R(e.getOptionContent(b));}}function Be(i,r){i&1&&(l(0,"mat-error"),m(1,5),s());}function xe(i,r){i&1&&(l(0,"mat-error"),m(1,6),s());}function Ge(i,r){i&1&&(l(0,"mat-error"),m(1,7),s());}function Ve(i,r){i&1&&p(0,"mat-progress-bar",3);}var ve=(()=>{let r=class r extends ae{constructor(e,o){super(e),this.ngControl=e,this.mlabService=o,this.label=c.testType,this.includeLaboratoryIds=[],this.excludeLaboratoryIds=[];}ngOnInit(){this.control=this.ngControl.control,this.get();}get(){this.mlabService.testTypes.get(Y(F({},this.pagination),{orderBy:"name",includeLaboratoryIds:this.includeLaboratoryIds,excludeLaboratoryIds:this.excludeLaboratoryIds})).pipe(N(this.indicator),T(1)).subscribe(e=>{this.options.push(...e.items),this.totalPages=e.totalPages;});}};r.ɵfac=function(o){return new(o||r)(_(U,10),_(S));},r.ɵcmp=E({type:r,selectors:[["medisy-form-field-test-type-select"]],inputs:{includeLaboratoryIds:"includeLaboratoryIds",excludeLaboratoryIds:"excludeLaboratoryIds"},standalone:!0,features:[x([S]),P,f],decls:11,vars:10,consts:()=>{let e;e="\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628";let o;o="\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0644\u064A\u0633 \u0627\u0644\u062D\u062F \u0627\u0644\u0623\u062F\u0646\u0649 \u0644\u0644\u0637\u0648\u0644";let t;return t="\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u064A\u062A\u062C\u0627\u0648\u0632 \u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0639\u0644\u0649 \u0644\u0644\u0637\u0648\u0644",[[1,"container"],[2,"width","100%"],[3,"formControl","multiple","placeholder","szScrollIgnored","szScrolled"],["mode","indeterminate"],[3,"value"],e,o,t];},template:function(o,t){o&1&&(l(0,"div",0)(1,"mat-form-field",1),C(2,Ye,2,1,"mat-label"),l(3,"mat-select",2),M("szScrolled",function(){return t.scroll();}),C(4,ze,2,0,"mat-option"),$(5,$e,2,2,"mat-option",4,z),s(),C(7,Be,2,0,"mat-error")(8,xe,2,0,"mat-error")(9,Ge,2,0,"mat-error"),s(),C(10,Ve,1,0,"mat-progress-bar",3),s()),o&2&&(n(2),u(2,t.label?2:-1),n(),d("formControl",t.control)("multiple",t.multiple)("placeholder",t.placeholder)("szScrollIgnored",t.indicator()),n(),u(4,t.emptyOption?4:-1),n(),B(t.options),n(2),u(7,t.control.hasError("required")?7:-1),n(),u(8,t.control.hasError("min")?8:-1),n(),u(9,t.control.hasError("max")?9:-1),n(),u(10,t.indicator()?10:-1));},dependencies:[A,g,j,se,oe,ee,te,le,Q,re,ie,Ce],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]});let i=r;return i;})();var Xe=()=>[],ke=i=>[i],Re=(()=>{let r=class r extends Te{constructor(e,o,t,a){super(t),this.mlabService=e,this.fb=o,this.dialog=t,this.data=a,this.form=o.group({enabled:[a.laboratoryTestType?.enabled??!0,[y.required]],price:[a.laboratoryTestType?.price??0,[y.required]],isFavorite:[a.laboratoryTestType?.isFavorite??!1,[y.required]],testTypeId:[a.laboratoryTestType?.testTypeId,[y.required]]});}submit(){this.IsValid()&&(this.data.laboratoryTestType?this.save(this.mlabService.laboratories.testTypes.update(this.data.laboratoryId,this.data.laboratoryTestType?.id,this.form.value)):this.save(this.mlabService.laboratories.testTypes.create(this.data.laboratoryId,this.form.value)));}};r.ɵfac=function(o){return new(o||r)(_(S),_(H),_(_e),_(de));},r.ɵcmp=E({type:r,selectors:[["medisy-laboratory-test-types-save"]],standalone:!0,features:[P,f],decls:10,vars:7,consts:()=>{let e;e="\u0627\u0644\u0633\u0639\u0631";let o;o="\u0645\u0641\u0636\u0644\u0629";let t;return t="\u0645\u0641\u0639\u0644",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId",3,"excludeLaboratoryIds"],["formControlName","price","label",e],["formControlName","isFavorite"],o,["formControlName","enabled"],t,[3,"actions"]];},template:function(o,t){o&1&&(p(0,"sz-ui-dialog-header",0),l(1,"mat-dialog-content")(2,"form",1),p(3,"medisy-form-field-test-type-select",2)(4,"sz-ui-form-field-input",3),l(5,"mat-checkbox",4),m(6,5),s(),l(7,"mat-checkbox",6),m(8,7),s()()(),p(9,"sz-ui-dialog-actions",8)),o&2&&(d("header",t.header),n(2),d("formGroup",t.form),n(),d("excludeLaboratoryIds",t.data.laboratoryTestType?G(4,Xe):V(5,ke,t.data.laboratoryId)),n(6),d("actions",t.actions));},dependencies:[A,k,g,X,q,w,fe,ue,Ee,Se,pe,I,he,ve,ne],encapsulation:2});let i=r;return i;})();var Gt=(()=>{let r=class r{constructor(e,o,t){this.dialog=e,this.mlabService=o,this.route=t,this.title=c.testTypes,this.dataSource=new be(),this.laboratory=this.route.snapshot.data.laboratory,this.dataSource.addRows(ye.default([O.text("testType.name",c.testType),O.text("price",c.price),Ne.createdAt(),O.checkbox("isFavorite",c.favorite,(a,L)=>{a.isFavorite=L,this.updateItem(a);}),O.checkbox("enabled",c.enabled,(a,L)=>{a.enabled=L,this.mlabService.laboratories.testTypes.update(a.laboratoryId,a.id,a).pipe(T(1)).subscribe(De=>{a=De;});}),O.menu([D.edit(a=>this.openSaveComponent(a)),D.delete(a=>this.openLaboratoryTestTypeDeleteComponent(a))])])),this.get();}openSaveComponent(e){this.dialog.open(Re,{data:{laboratoryId:this.laboratory.id,laboratoryTestType:e}}).afterClosed().pipe(T(1)).subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openLaboratoryTestTypeDeleteComponent(e){this.dialog.open(Me,{data:Oe.delete(this.mlabService.laboratories.testTypes.delete(e.laboratoryId,e.id),e)}).afterClosed().pipe(T(1)).subscribe(o=>{this.dataSource.delete(o);});}updateItem(e){this.mlabService.laboratories.testTypes.update(e.laboratoryId,e.id,e).subscribe(o=>{this.dataSource.update(o);});}get(){this.mlabService.laboratories.testTypes.get(this.laboratory.id,this.dataSource.buildRequest()).pipe(N(this.dataSource.indicator)).pipe(T(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};r.ɵfac=function(o){return new(o||r)(_(me),_(S),_(J));},r.ɵcmp=E({type:r,selectors:[["medisy-laboratory-test-types"]],standalone:!0,features:[f],decls:6,vars:5,consts:()=>{let e;return e="\u0625\u0636\u0627\u0641\u0629",[[3,"title","subtitle"],[3,"dataSource","changed"],["title","","mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(o,t){o&1&&(p(0,"sz-ui-header-info",0),l(1,"sz-ui-table-search-filter",1),M("changed",function(){return t.get();}),l(2,"button",2),M("click",function(){return t.openSaveComponent();}),l(3,"span"),m(4,3),s()()(),l(5,"sz-ui-table",4),M("update",function(){return t.get();}),s()),o&2&&(d("title",t.title)("subtitle",t.laboratory.name),n(),d("dataSource",t.dataSource),n(4),d("stateEnabled",!0)("dataSource",t.dataSource));},dependencies:[K,ce,Ae,ge,Pe,I,Z,W],encapsulation:2});let i=r;return i;})();export{Gt as LaboratoryTestTypesComponent};/**i18n:5ad987f33fb36a4bb6d53ec4372590584614aa13df9413297fdfa1032f98b4a2*/