import{b as ve}from"./chunk-WVR2DRH2.js";import{a as A}from"./chunk-FKOR3FUM.js";import{b as L,c as he,e as ge,g as Re,i as I,s as ye,t as Oe}from"./chunk-XOP5PXZQ.js";import{c as v,h as fe,i as Se,j as Ee,l as Me,m as Ce,n as be}from"./chunk-BLK656NA.js";import{a as me,b as de,d as ce,e as pe,g as ue}from"./chunk-ZGNAWKHW.js";import{A as se,a as ee,b as te,h as oe,p as ne,z as le}from"./chunk-6KYUYUEY.js";import{d as G,f as B,g as y,h as j,l as k,m as w,n as H,o as X,p as q,s as O}from"./chunk-45ZSE7J2.js";import{a as C}from"./chunk-6SZAHQ7N.js";import{a as M}from"./chunk-KMYBK3UO.js";import{b as _e}from"./chunk-P6DDCQCI.js";import"./chunk-NJ7DKY7A.js";import{a as J,e as K,f as ie,g as re,h as ae}from"./chunk-W5YC4BSW.js";import{i as N}from"./chunk-LA45AZ3O.js";import"./chunk-GAA223RS.js";import"./chunk-UXQNJ32W.js";import{Ka as Q,Pa as W,Ra as Z}from"./chunk-AZJBQUGA.js";import{Bb as n,Cb as l,Db as c,L as u,Nb as f,Pb as S,Rb as T,Wb as R,Xb as F,Zb as U,a as D,ac as E,b as P,bc as x,cb as a,cc as Y,db as m,kb as g,la as _,nb as d,tb as b,ub as p,wb as V,xb as z,yb as $}from"./chunk-7AORQD44.js";function Ae(o,r){if(o&1&&(n(0,"mat-label"),R(1),l()),o&2){let h=T();a(1),F(h.label);}}function De(o,r){o&1&&(n(0,"mat-option"),R(1,"-"),l());}function Pe(o,r){if(o&1&&(n(0,"mat-option",4),R(1),l()),o&2){let h=r.$implicit,t=T();d("value",t.getOptionValue(h)),a(1),F(t.getOptionContent(h));}}function Ve(o,r){o&1&&(n(0,"mat-error"),f(1,5),l());}function ze(o,r){o&1&&(n(0,"mat-error"),f(1,6),l());}function $e(o,r){o&1&&(n(0,"mat-error"),f(1,7),l());}function Ue(o,r){o&1&&c(0,"mat-progress-bar",3);}var Fe=(()=>{let r=class r extends ne{constructor(t,i){super(t),this.ngControl=t,this.mlabService=i,this.label=C.referenceValue,this.includeLaboratoryIds=[],this.excludeLaboratoryIds=[],this.szOptionContentFn=e=>e.testClass.name;}ngOnInit(){this.control=this.ngControl.control,this.get();}get(){this.mlabService.referenceValues.get(P(D({},ae.unpaged()),{includeLaboratoryIds:this.includeLaboratoryIds,excludeLaboratoryIds:this.excludeLaboratoryIds})).pipe(v(this.indicator),u(1)).subscribe(t=>{this.options.push(...t.items),this.totalPages=t.totalPages;});}};r.ɵfac=function(i){return new(i||r)(m(B,10),m(M));},r.ɵcmp=_({type:r,selectors:[["medisy-form-field-reference-value"]],inputs:{includeLaboratoryIds:"includeLaboratoryIds",excludeLaboratoryIds:"excludeLaboratoryIds"},standalone:!0,features:[U([]),g,E],decls:11,vars:10,consts:()=>{let t;t="\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628";let i;i="\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0644\u064A\u0633 \u0627\u0644\u062D\u062F \u0627\u0644\u0623\u062F\u0646\u0649 \u0644\u0644\u0637\u0648\u0644";let e;return e="\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u064A\u062A\u062C\u0627\u0648\u0632 \u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0639\u0644\u0649 \u0644\u0644\u0637\u0648\u0644",[[1,"container"],[2,"width","100%"],[3,"formControl","multiple","placeholder","szScrollIgnored","szScrolled"],["mode","indeterminate"],[3,"value"],t,i,e];},template:function(i,e){i&1&&(n(0,"div",0)(1,"mat-form-field",1),b(2,Ae,2,1,"mat-label"),n(3,"mat-select",2),S("szScrolled",function(){return e.scroll();}),b(4,De,2,0,"mat-option"),z(5,Pe,2,2,"mat-option",4,V),l(),b(7,Ve,2,0,"mat-error")(8,ze,2,0,"mat-error")(9,$e,2,0,"mat-error"),l(),b(10,Ue,1,0,"mat-progress-bar",3),l()),i&2&&(a(2),p(2,e.label?2:-1),a(1),d("formControl",e.control)("multiple",e.multiple)("placeholder",e.placeholder)("szScrollIgnored",e.indicator()),a(1),p(4,e.emptyOption?4:-1),$(5,e.options),a(3),p(7,e.control.hasError("required")?7:-1),a(1),p(8,e.control.hasError("min")?8:-1),a(1),p(9,e.control.hasError("max")?9:-1),a(1),p(10,e.indicator()?10:-1));},dependencies:[O,y,w,se,oe,ee,te,le,Q,re,ie,ve],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]});let o=r;return o;})();var Ye=()=>[],Ge=o=>[o],Ne=(()=>{let r=class r extends fe{constructor(t,i,e,s){super(e),this.mlabService=t,this.fb=i,this.dialog=e,this.data=s,this.form=i.group({referenceValueId:[s.laboratoryReferenceValue?.referenceValueId,[G.required]]});}submit(){this.IsValid()&&(this.data.laboratoryReferenceValue?this.save(this.mlabService.laboratories.referenceValues.update(this.data.laboratoryId,this.data.laboratoryReferenceValue?.id,this.form.value)):this.save(this.mlabService.laboratories.referenceValues.create(this.data.laboratoryId,this.form.value)));}};r.ɵfac=function(i){return new(i||r)(m(M),m(q),m(me),m(de));},r.ɵcmp=_({type:r,selectors:[["medisy-laboratory-reference-values-save"]],standalone:!0,features:[g,E],decls:5,vars:7,consts:[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","referenceValueId",3,"excludeLaboratoryIds"],[3,"actions"]],template:function(i,e){i&1&&(c(0,"sz-ui-dialog-header",0),n(1,"mat-dialog-content")(2,"form",1),c(3,"medisy-form-field-reference-value",2),l()(),c(4,"sz-ui-dialog-actions",3)),i&2&&(d("header",e.header),a(2),d("formGroup",e.form),a(1),d("excludeLaboratoryIds",e.data.laboratoryReferenceValue?x(4,Ye):Y(5,Ge,e.data.laboratoryId)),a(1),d("actions",e.actions));},dependencies:[O,k,y,j,H,X,Ce,Se,Ee,ue,pe,I,Fe],encapsulation:2});let o=r;return o;})();var $t=(()=>{let r=class r{constructor(t,i,e){this.dialog=t,this.mlabService=i,this.route=e,this.title=C.referenceValues,this.dataSource=new ge(),this.laboratory=this.route.snapshot.data.laboratory,this.dataSource.addRows(he.default([L.text("referenceValue.testClass.name",C.referenceValue),L.text("referenceValue.unit.abbreviation",C.unit),A.createdAt(),A.menu([N.edit(s=>this.openSaveComponent(s)),N.delete(s=>this.openLaboratoryReferenceValueDeleteComponent(s))])])),this.get();}openSaveComponent(t){this.dialog.open(Ne,{data:{laboratoryId:this.laboratory.id,laboratoryReferenceValue:t}}).afterClosed().pipe(u(1)).subscribe(i=>{this.dataSource.addOrUpdateItem(i);});}openLaboratoryReferenceValueDeleteComponent(t){this.dialog.open(Me,{data:be.delete(this.mlabService.laboratories.referenceValues.delete(t.laboratoryId,t.id),t)}).afterClosed().pipe(u(1)).subscribe(i=>{this.dataSource.delete(i);});}get(){this.mlabService.laboratories.referenceValues.get(this.laboratory.id,this.dataSource.buildRequest()).pipe(v(this.dataSource.indicator)).pipe(u(1)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};r.ɵfac=function(i){return new(i||r)(m(ce),m(M),m(J));},r.ɵcmp=_({type:r,selectors:[["medisy-laboratory-reference-values"]],standalone:!0,features:[E],decls:6,vars:5,consts:()=>{let t;return t="\u0625\u0636\u0627\u0641\u0629",[[3,"title","subTitle"],[3,"filter","search"],["title","","mat-flat-button","","color","primary","start","",3,"click"],t,[3,"stateEnabled","dataSource","update"]];},template:function(i,e){i&1&&(c(0,"sz-ui-header-info",0),n(1,"sz-ui-table-filter",1),S("search",function(){return e.get();}),n(2,"button",2),S("click",function(){return e.openSaveComponent();}),n(3,"span"),f(4,3),l()()(),n(5,"sz-ui-table",4),S("update",function(){return e.get();}),l()),i&2&&(d("title",e.title)("subTitle",e.laboratory.name),a(1),d("filter",e.dataSource.filter),a(4),d("stateEnabled",!0)("dataSource",e.dataSource));},dependencies:[K,_e,Oe,ye,Re,I,Z,W],encapsulation:2});let o=r;return o;})();export{$t as LaboratoryReferenceValuesComponent};/**i18n:ca0c0aaef853f716736db0c306cb0b403cbd4c4309f5c41e82b4683f77b810d2*/