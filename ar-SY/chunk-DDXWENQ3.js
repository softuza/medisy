import{a as s}from"./chunk-EHCLKBN2.js";import{e as me}from"./chunk-GXSSRYIF.js";import{a as d,c as re,d as ne,f as le,i as se,j as O}from"./chunk-4YWCHR5F.js";import"./chunk-YGU4JTYS.js";import"./chunk-JIZKLMZU.js";import"./chunk-3UZWCLUR.js";import{b as Z,f as ee,g as te,h as ie,j as oe,k as ae}from"./chunk-TFN2F5ZD.js";import{a as Y}from"./chunk-4JQNN2UU.js";import{h as A}from"./chunk-B723H7SH.js";import{a as w,b as q,d as N,e as x,g as _}from"./chunk-HPPZ7ERW.js";import{c as Q,p as J,q as v,r as K,t as W}from"./chunk-RXHMJFXO.js";import"./chunk-WQZWGPYI.js";import"./chunk-264QKOH6.js";import"./chunk-W4ZBAGNE.js";import"./chunk-AAHDAXVC.js";import"./chunk-2XCX2PRG.js";import{d as I,f as D,g as B,l as G,n as y,q as F,r as $,u as j}from"./chunk-VXNH5PTX.js";import{r as U,t as X}from"./chunk-Z63FN5EJ.js";import{a as h,e as C}from"./chunk-DNH4OZS2.js";import"./chunk-ELRLVGRO.js";import{ia as k,ja as H,la as f}from"./chunk-4B53IFHW.js";import"./chunk-UZ765RGE.js";import{Kb as l,Lb as m,Mb as p,Wb as E,Xb as g,bb as S,cb as T,ea as z,ja as r,na as u,oa as L,oc as b,pc as c,qb as P,zb as n}from"./chunk-G33TNFCW.js";import"./chunk-EAIILSS5.js";var pe=(()=>{let e=class e extends ee{constructor(i,t,o){super(t),this.fb=i,this.dialog=t,this.data=o,this.srptService=r(s),this.baseTemplateVariables=this.srptService.baseTemplates.variables.getAll(this.data.baseTemplateId,{orderBy:["name"],filterBehavior:U.Or,filters:X.create().equalIf("id",this.data.templateVariable?.baseTemplateVariableId).notAny("templates.templateId",this.data.templateId).filters()}),this.form=i.group({enabled:[o.templateVariable?.enabled??!0,[I.required]],description:[o.templateVariable?.description,[]],baseTemplateVariableId:[o.templateVariable?.baseTemplateVariableId,[I.required]],value:[o.templateVariable?.value,[]]});}submit(){this.IsValid()&&(this.data.templateVariable?this.save(this.srptService.templates.variables.update(this.data.templateId,this.data.templateVariable?.id,this.form.value)):this.save(this.srptService.templates.variables.create(this.data.templateId,this.form.value)));}};e.ɵfac=function(t){return new(t||e)(T($),T(w),T(q));},e.ɵcmp=u({type:e,selectors:[["sz-mgmt-reporting-template-variables-save"]],standalone:!0,features:[b([s]),P,c],decls:9,vars:6,consts:()=>{let i;i="\u0627\u0644\u0645\u062A\u063A\u064A\u0631";let t;t="\u0642\u064A\u0645\u0629";let o;return o="\u0645\u0641\u0639\u0644",[o,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","baseTemplateVariableId","label",i,3,"source"],["formControlName","value","label",t],[1,"sz-form-row"],["formControlName","enabled"],[3,"actions"]];},template:function(t,o){t&1&&(p(0,"sz-ui-dialog-header",1),l(1,"mat-dialog-content")(2,"form",2),p(3,"sz-ui-form-field-select",3)(4,"sz-ui-form-field-input",4),l(5,"div",5)(6,"mat-checkbox",6),E(7,0),m()()()(),p(8,"sz-ui-dialog-actions",7)),t&2&&(n("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),S(2),n("formGroup",o.form),S(),n("source",o.baseTemplateVariables),S(5),n("actions",o.actions));},dependencies:[j,G,D,B,y,F,ae,te,ie,_,x,v,J,me,W,Q,K],encapsulation:2});let a=e;return a;})();var de=(()=>{let e=class e{constructor(){this.dialog=r(N),this.srptService=r(s),this.route=r(h),this.dataSource=new re("baseTemplateVariable.name"),this.template=this.route.snapshot.data.template,this.dataSource.columnDefs.push(d.uuid("id"),d.string("baseTemplateVariable.name"),d.string("value"),d.date("createdAt").setVisible(!1),d.date("updatedAt").setVisible(!1),d.menu([A.edit(this.openSaveComponent.bind(this)),A.divider(),A.delete(this.openTemplateVariableDeleteComponent.bind(this))])),this.get();}openSaveComponent(i){this.dialog.open(pe,{data:{templateId:this.template.id,baseTemplateId:this.template.baseTemplateId,templateVariable:i}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openTemplateVariableDeleteComponent(i){this.dialog.open(oe,{data:Z.delete(this.srptService.templates.variables.delete(i.templateId,i.id),i)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}get(){this.srptService.templates.variables.get(this.template.id,this.dataSource.getQuery()).pipe(ne(this.dataSource.state)).subscribe(i=>{this.dataSource.set(i.items,i.count);});}};e.ɵfac=function(t){return new(t||e)();},e.ɵcmp=u({type:e,selectors:[["sz-mgmt-reporting-template-variables"]],standalone:!0,features:[c],decls:5,vars:2,consts:()=>{let i;return i="\u0625\u0636\u0627\u0641\u0629",[i,[3,"changed","dataSource"],["mat-flat-button","","color","primary","start","",3,"click"],[3,"update","dataSource"]];},template:function(t,o){t&1&&(l(0,"sz-ui-table-search-filter",1),g("changed",function(){return o.get();}),l(1,"button",2),g("click",function(){return o.openSaveComponent();}),l(2,"span"),E(3,0),m()()(),l(4,"sz-ui-table",3),g("update",function(){return o.get();}),m()),t&2&&(n("dataSource",o.dataSource),S(4),n("dataSource",o.dataSource));},dependencies:[C,O,se,le,v,f,H],encapsulation:2});let a=e;return a;})();var R=(()=>{let e=class e{constructor(){this.route=r(h),this.dialog=r(N),this.srptService=r(s),this.template=this.route.snapshot.data.template,this.appBarConfig={title:this.template.name,subtitle:this.template.description};}};e.ɵfac=function(t){return new(t||e)();},e.ɵcmp=u({type:e,selectors:[["sz-mgmt-reporting-template"]],standalone:!0,features:[b([]),c],decls:3,vars:1,consts:[[3,"config"],[1,"tw-my-4"]],template:function(t,o){t&1&&(p(0,"sz-ui-app-bar",0),l(1,"div",1),p(2,"sz-mgmt-reporting-template-variables"),m()),t&2&&n("config",o.appBarConfig);},dependencies:[_,f,O,Y,k,de],encapsulation:2});let a=e;return a;})();var ut=(()=>{let e=class e{};e.ɵfac=function(t){return new(t||e)();},e.ɵmod=L({type:e}),e.ɵinj=z({providers:[s],imports:[C.forChild([{path:"",component:R}]),_,f,R]});let a=e;return a;})();export{ut as TemplatesModule};/**i18n:23b18f90dfad26ae6b830c3e760ecc323aedcfc43eb78549f6a00c2171dce7c8*/