import{a as q}from"./chunk-M2ROB6P4.js";import{a as d,e as B,g as V,h as $,k as G}from"./chunk-MK7YGESN.js";import{a as y}from"./chunk-QVJWSHYG.js";import{a as M,b as F,e as N,g as R}from"./chunk-BHQL26JK.js";import{j as z,r as v,u as P}from"./chunk-F26FFMJV.js";import{c as p}from"./chunk-YGBK2XWT.js";import{d as l,f as g,g as E,l as h,o as I,r as D,s as L,u as O}from"./chunk-CDK6FD6W.js";import{a as Y}from"./chunk-GGNOAVZ2.js";import{x as C}from"./chunk-FRHF3QTK.js";import{Jb as S,Kb as c,Lb as n,bb as s,ja as a,mb as _,mc as b,na as T,nc as A,yb as i}from"./chunk-JUURYMO7.js";import{a as f,b as u}from"./chunk-SNTXSFJ2.js";var at=(()=>{let r=class r extends B{constructor(){let o=a(M);super(o),this.fb=a(L),this.mlabService=a(y),this.data=a(F),this.title=Y.add_test_type,this.actions=[d.close(()=>this.dialogRef.close()),d.reset(()=>this.form.reset()),d.add(this.submit.bind(this),this.indicator)],this.laboratories=null,this.laboratoryOptionValueFn=t=>t,this.testTypesFilters=[],this.laboratoryId=this.data.laboratoryId,this.transferOutLaboratorySelectConfig={emptyOption:!0},this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,u(f({query:""},p.minimal()),{orderBy:["-isFavorite","testType.nameEn"]})),this.testTypeAutocompleteConfig={valueChangedFn:t=>{if(typeof t=="string")this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,u(f({query:t},p.minimal()),{orderBy:["-isFavorite","testType.nameEn"]}));else if(typeof t=="object"&&t)return!1;return!0;},optionSelectedFn:t=>{this.form.patchValue({transferOutLaboratoryId:null}),t.transferOutLaboratoryId?this.form.controls.transferOutLaboratoryId.addValidators(l.required):this.form.controls.transferOutLaboratoryId.removeValidators(l.required),t.transferOutEnabled&&(this.laboratories=this.mlabService.laboratories.getAll({orderBy:["name"],filters:C.create().notEqual("id",this.data).equalIf("id",t.transferOutLaboratoryId).any("testTypes.testTypeId",t.testTypeId).any("testTypes.enabled",!0).any("testTypes.transferInEnabled",!0).filters()}));},optionValueFn:t=>t,optionContentFn:t=>t.testType.nameEn,optionDisplayWithFn:t=>t.testType.nameEn};let e=this.fb;this.dialog=o,this.form=e.group({transferOutLaboratoryId:[null,[]],testType:e.control(null,[l.required,q.object()])});}isTranferOutEnabled(){return this.form.value?.testType?.transferOutEnabled;}submit(){this.IsValid()&&(this.data.callback&&this.data.callback({laboratoryTestType:this.form.value.testType,transferOutLaboratoryId:this.form.getRawValue().transferOutLaboratoryId}),this.form.reset());}};r.ɵfac=function(e){return new(e||r)();},r.ɵcmp=T({type:r,selectors:[["sz-medisy-laboratory-analysis-test-type-add"]],standalone:!0,features:[b([y]),_,A],decls:6,vars:10,consts:()=>{let o;o="\u0646\u0645\u0637 \u0627\u062E\u062A\u0628\u0627\u0631";let e;return e="\u0627\u0644\u0645\u062E\u0628\u0631 \u0627\u0644\u062E\u0627\u0631\u062C\u064A \u0627\u0644\u0645\u062D\u0648\u0644 \u0644\u0647",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testType","label",o,3,"source","config"],["formControlName","transferOutLaboratoryId","label",e,3,"source","config","disabled"],[3,"actions"]];},template:function(e,t){e&1&&(n(0,"sz-ui-dialog-header",0),S(1,"mat-dialog-content")(2,"form",1),n(3,"sz-ui-form-field-autocomplete",2)(4,"sz-ui-form-field-select",3),c()(),n(5,"sz-ui-dialog-actions",4)),e&2&&(i("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),s(2),i("formGroup",t.form),s(),i("source",t.testTypes)("config",t.testTypeAutocompleteConfig),s(),i("source",t.laboratories)("config",t.transferOutLaboratorySelectConfig)("disabled",t.isTranferOutEnabled()),s(),i("actions",t.actions));},dependencies:[O,h,g,E,I,D,R,N,G,V,$,P,v,z],encapsulation:2});let m=r;return m;})();export{at as a};/**i18n:c3b29ff5cc4cd2282ed1d8279238b70e07f62d5d783657c17429f970eaf88c4f*/