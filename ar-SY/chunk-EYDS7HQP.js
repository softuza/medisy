import{a as P}from"./chunk-C3FWSXOI.js";import{a as le}from"./chunk-AYD4YNQF.js";import"./chunk-ZENDRPYK.js";import{b as Y}from"./chunk-BDAURDQS.js";import{a as te,b as ie,c as oe,e as re,o as ae,p as ne}from"./chunk-UWWSZ6EK.js";import{c as K,g as Q,h as W,i as v,j as R,l as Z,m as L,n as ee}from"./chunk-TZHDOS7D.js";import{a as h,b as y,d as H,e as D,g as I}from"./chunk-MLSRSUWT.js";import{q as X,s as k,t as q}from"./chunk-DPUIQT2Q.js";import"./chunk-32W7D3XL.js";import{d as M,g as E,h as A,l as C,n as O,o as T,p as g,s as b}from"./chunk-UZRVZSRL.js";import{c as F}from"./chunk-VXIMUH5R.js";import"./chunk-FVPLSC3A.js";import"./chunk-5YXUG2NC.js";import"./chunk-25UH3N2F.js";import{a as N}from"./chunk-ANLAVR6W.js";import{a as J}from"./chunk-O5KLIVQ3.js";import"./chunk-N2JBPDEJ.js";import{a as x}from"./chunk-HSBTPXYW.js";import{a as G,d as V,e as j}from"./chunk-7EL7DJOA.js";import"./chunk-YSHIJLQQ.js";import"./chunk-PHZ6OWUT.js";import{a as U,c as w}from"./chunk-45S7AHWB.js";import"./chunk-5YRGD4YU.js";import{$b as u,Ab as m,Bb as d,Cb as p,L as S,Mb as z,Ob as f,Vb as B,Wb as $,cb as s,db as r,kb as c,la as _,nb as l}from"./chunk-MK3KDUIH.js";var de=(()=>{let o=class o extends Q{constructor(t,e,i){super(e),this.fb=t,this.dialog=e,this.data=i,this.form=t.group({emailType:[i.emailType]});}submit(){this.IsValid()&&this.dialog.close(this.form.value);}};o.ɵfac=function(e){return new(e||o)(r(g),r(h),r(y));},o.ɵcmp=_({type:o,selectors:[["medisy-laboratory-emails-filter"]],standalone:!0,features:[c,u],decls:5,vars:3,consts:[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","emailType"],[3,"actions"]],template:function(e,i){e&1&&(p(0,"sz-ui-dialog-header",0),m(1,"mat-dialog-content")(2,"form",1),p(3,"medisy-form-field-email-type",2),d()(),p(4,"sz-ui-dialog-actions",3)),e&2&&(l("header",i.header),s(2),l("formGroup",i.form),s(2),l("actions",i.actions));},dependencies:[b,C,E,A,O,T,L,v,R,I,D,P],encapsulation:2});let n=o;return n;})();var pe=(()=>{let o=class o extends W{constructor(t,e,i,a){super(i),this.mlabService=t,this.fb=e,this.dialog=i,this.data=a,this.form=e.group({value:[a.laboratoryEmail?.value,[M.required,M.email]],description:[a.laboratoryEmail?.description,[]],emailType:[a.laboratoryEmail?.emailType??le.Public,[M.required]]});}submit(){this.IsValid()&&(this.data.laboratoryEmail?this.save(this.mlabService.laboratories.emails.update(this.data.laboratoryId,this.data.laboratoryEmail?.id,this.form.value)):this.save(this.mlabService.laboratories.emails.create(this.data.laboratoryId,this.form.value)));}};o.ɵfac=function(e){return new(e||o)(r(N),r(g),r(h),r(y));},o.ɵcmp=_({type:o,selectors:[["medisy-laboratory-emails-save"]],standalone:!0,features:[c,u],decls:7,vars:3,consts:()=>{let t;t="\u0627\u0644\u0648\u0635\u0641";let e;return e="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","description","label",t],["formControlName","value","label",e],["formControlName","emailType"],[3,"actions"]];},template:function(e,i){e&1&&(p(0,"sz-ui-dialog-header",0),m(1,"mat-dialog-content")(2,"form",1),p(3,"sz-ui-form-field-textarea",2)(4,"sz-ui-form-field-input",3)(5,"medisy-form-field-email-type",4),d()(),p(6,"sz-ui-dialog-actions",5)),e&2&&(l("header",i.header),s(2),l("formGroup",i.form),s(4),l("actions",i.actions));},dependencies:[b,C,E,A,O,T,L,v,R,I,D,q,X,k,P],encapsulation:2});let n=o;return n;})();var tt=(()=>{let o=class o{constructor(t,e,i){this.dialog=t,this.mlabService=e,this.route=i,this.dataSource=new ie(x.paged()),this.laboratory=this.route.snapshot.data.laboratory,this.dataSource.addRows(oe.default([te.text("value","\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),Y.createdAt(),Y.menu([F.edit(a=>{this.openSaveComponent(a);}),F.delete(a=>{this.openEmailDeleteComponent(a);})])])),this.get();}openSaveComponent(t){this.dialog.open(pe,{data:{laboratoryId:this.laboratory.id,laboratoryEmail:t}}).afterClosed().pipe(S(1)).subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}openFilterComponent(){this.dialog.open(de,{data:this.dataSource.filterModel}).afterClosed().pipe(S(1)).subscribe(t=>{this.dataSource.updateFilterModel(t),this.get();});}openEmailDeleteComponent(t){this.dialog.open(Z,{data:ee.delete(this.mlabService.laboratories.emails.delete(t.laboratoryId,t.id),t)}).afterClosed().pipe(S(1)).subscribe(e=>{this.dataSource.delete(e);});}get(){this.mlabService.laboratories.emails.get(this.laboratory.id,this.dataSource.filterModel).pipe(K(this.dataSource.indicator)).pipe(S(1)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};o.ɵfac=function(e){return new(e||o)(r(H),r(N),r(G));},o.ɵcmp=_({type:o,selectors:[["medisy-laboratory-emails"]],standalone:!0,features:[u],decls:11,vars:5,consts:()=>{let t;t="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let e;return e="\u0625\u0636\u0627\u0641\u0629",[["start",""],[1,"sz-h5"],t,["routerLink","../",1,"tw-underline","tw-text-sm"],[3,"dataSource","search","filter"],["title","","mat-flat-button","","color","primary","start","",3,"click"],e,[3,"paginationEnabled","stateEnabled","dataSource","update"]];},template:function(e,i){e&1&&(m(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),z(3,2),d(),m(4,"a",3),B(5),d()()(),m(6,"sz-ui-table-filter",4),f("search",function(){return i.get();})("filter",function(){return i.openFilterComponent();}),m(7,"button",5),f("click",function(){return i.openSaveComponent();}),m(8,"span"),z(9,6),d()()(),m(10,"sz-ui-table",7),f("update",function(){return i.get();}),d()),e&2&&(s(5),$(i.laboratory.name),s(1),l("dataSource",i.dataSource),s(4),l("paginationEnabled",!0)("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[j,V,w,U,J,ne,ae,re],encapsulation:2});let n=o;return n;})();export{tt as LaboratoryEmailsComponent};/**i18n:33360f080214f876987bd0ecc2f51b8308b133d904c534ef8c974004cf54d934*/