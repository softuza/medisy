import{a as O}from"./chunk-OHG6TNAY.js";import{a as C}from"./chunk-IS3QRY5O.js";import{a as c,b as oe,d as ne,f as ae,i as re,j as se}from"./chunk-J6NX7L25.js";import{e as Y,f as Z,g as x,i as ee,j as ie,k as te}from"./chunk-XDJM4TLA.js";import{e as W,h as M}from"./chunk-KETVIBDN.js";import{a as y,b as G,d as $,e as V,g as B}from"./chunk-GN22G4SF.js";import{c as k,n as H,o as Q,q as J,t as K}from"./chunk-ETC3GIY7.js";import{c as q}from"./chunk-NBT2Y5AZ.js";import{c as w}from"./chunk-IOIYKD5G.js";import{i as U}from"./chunk-6IO4H6KH.js";import{d as S,f as h,g as R,k as v,m as F,p as P,q as z,t as b}from"./chunk-UL3PDKVQ.js";import{a as D,e as L}from"./chunk-LNRIX3KX.js";import{ia as X,ka as j}from"./chunk-4SVPOG47.js";import{Db as r,Ma as g,Nb as s,Ob as m,Pb as p,Zb as u,_b as N,hb as _,ib as a,pc as T,qc as I,ta as E,ua as f,ub as A}from"./chunk-RFNNLBRH.js";var le=(()=>{let n=class n extends Y{constructor(e,i,t,o){super(t),this.sntiService=e,this.fb=i,this.dialog=t,this.data=o,this.notificationTypes=Object.keys(O).map(d=>O[d]),this.form=i.group({name:[o?.notificationRecipient?.name,[S.maxLength(4096)]],enabled:[o?.notificationRecipient?.enabled,[S.required]],identifier:[o?.notificationRecipient?.identifier,[S.required]],notificationType:[o?.notificationRecipient?.notificationType??!0,[S.required]]});}submit(){this.IsValid()&&(this.data&&this.data.notificationRecipient?this.save(this.sntiService.notifications.recipients.update(this.data.notificationId,this.data.notificationRecipient.id,this.form.value)):this.save(this.sntiService.notifications.recipients.create(this.data.notificationId,this.form.value)));}};n.ɵfac=function(i){return new(i||n)(a(C),a(z),a(y),a(G));},n.ɵcmp=f({type:n,selectors:[["sz-mgmt-notification-notification-recipients-save"]],standalone:!0,features:[T([]),A,I],decls:9,vars:6,consts:()=>{let e;e="\u0627\u0644\u0627\u0633\u0645";let i;i="\u0627\u0644\u0646\u0645\u0637";let t;t="Identifier";let o;return o="\u0645\u0641\u0639\u0644",[o,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","notificationType","label",i,3,"source"],["formControlName","identifier","label",t],["formControlName","enabled"],[3,"actions"]];},template:function(i,t){i&1&&(p(0,"sz-ui-dialog-header",1),s(1,"mat-dialog-content")(2,"form",2),p(3,"sz-ui-form-field-input",3)(4,"sz-ui-form-field-select",4)(5,"sz-ui-form-field-input",5),s(6,"mat-checkbox",6),u(7,0),m()()(),p(8,"sz-ui-dialog-actions",7)),i&2&&(r("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),_(2),r("formGroup",t.form),_(2),r("source",t.notificationTypes),_(4),r("actions",t.actions));},dependencies:[b,v,h,R,F,P,B,V,U,Q,H,ie,Z,x,K,k,J],encapsulation:2});let l=n;return l;})();var He=(()=>{let n=class n{constructor(e,i,t){this.route=e,this.dialog=i,this.sntiService=t,this.notification=g.required(),this.dataSource=new ne(),this.dataSource.columnDefs.push(c.uuid("id"),c.string("name"),c.string("identifier"),c.enum("notificationType").setName(w.type),c.date("createdAt").setVisible(!1),c.date("updatedAt").setVisible(!1),oe.menu([M.edit(o=>this.openSaveComponent(o)),W.divider(),M.delete(o=>this.openNotificationRecipientDeleteComponent(o))]));}ngOnInit(){this.get();}openNotificationRecipientDeleteComponent(e){this.dialog.open(ee,{data:te.delete(this.sntiService.notifications.recipients.delete(e.notificationId,e.id),e)}).afterClosed().subscribe(i=>{this.dataSource.delete(i);});}openSaveComponent(e){this.dialog.open(le,{data:{notificationId:this.notification().id,notificationRecipient:e}}).afterClosed().subscribe(i=>{this.dataSource.addOrUpdateItem(i);});}get(){this.sntiService.notifications.recipients.get(this.notification().id,this.dataSource.getQuery()).pipe(q(this.dataSource.indicator)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};n.ɵfac=function(i){return new(i||n)(a(D),a($),a(C));},n.ɵcmp=f({type:n,selectors:[["sz-mgmt-notification-notification-recipients"]],inputs:{notification:[E.SignalBased,"notification"]},standalone:!0,features:[T([]),I],decls:5,vars:3,consts:()=>{let e;return e="\u0625\u0636\u0627\u0641\u0629",[e,[3,"changed","dataSource"],["mat-flat-button","","color","primary","start","",3,"click"],[3,"update","stateEnabled","dataSource"]];},template:function(i,t){i&1&&(s(0,"sz-ui-table-search-filter",1),N("changed",function(){return t.get();}),s(1,"button",2),N("click",function(){return t.openSaveComponent();}),s(2,"span"),u(3,0),m()()(),s(4,"sz-ui-table",3),N("update",function(){return t.get();}),m()),i&2&&(r("dataSource",t.dataSource),_(4),r("stateEnabled",!0)("dataSource",t.dataSource));},dependencies:[L,se,re,ae,j,X],encapsulation:2});let l=n;return l;})();export{He as a};/**i18n:d5f080a533d2536b5185f7460d22416f9e1e4eff78d50a220d9f419171a66456*/