import{a as l}from"./chunk-ZG7GNX64.js";import{a as ne}from"./chunk-O5WFAVUH.js";import{a as p,b as de,d as Se,e as ue,j as ce,k as I}from"./chunk-HH4W2RNS.js";import"./chunk-UNDWM53F.js";import"./chunk-5CTNFTK3.js";import"./chunk-WGFGP2GP.js";import"./chunk-E6A2VOQM.js";import"./chunk-TZMDFE3V.js";import{e as ae,f as se,g as me,i as le,j as D,k as pe}from"./chunk-ZEWEZYAN.js";import{a as z}from"./chunk-WNLJV5B7.js";import{e as re,h as y,j as v}from"./chunk-5J5ALWGO.js";import{a as W,b as Z,d as O,e as x,g as T}from"./chunk-D7TIFE5S.js";import"./chunk-372FYOWX.js";import{A as ie,b as h,t as ee,v as te,x as oe}from"./chunk-DDWN6YZM.js";import"./chunk-73RSRG2A.js";import"./chunk-U3OTWMSS.js";import{c as L}from"./chunk-6IZ7J43J.js";import"./chunk-URGQL6CX.js";import{d as E,f as j,g as w,l as X,n as Y,q,r as k,u as H}from"./chunk-IPCWMQGS.js";import{t as J}from"./chunk-XF2T3ULC.js";import{a as M,c as Q,e as N}from"./chunk-K5X3KL34.js";import"./chunk-ZE4VN4BA.js";import{ia as K,la as g}from"./chunk-TLLH4UGB.js";import"./chunk-3NI2H4XP.js";import{Fa as V,Fc as G,Jb as S,Kb as c,Lb as m,Wb as U,bb as s,cb as _,ea as F,ja as a,na as u,nc as f,oa as b,ob as $,oc as C,qb as B,zb as n}from"./chunk-BYWA6FB7.js";import"./chunk-Z5BSIZPC.js";var fe=(()=>{let e=class e extends ae{constructor(i,o,t){super(o),this.fb=i,this.dialog=o,this.data=t,this.cstnService=a(l),this.employees=this.cstnService.employees.getAll({orderBy:["firstName","lastName"],filters:J.create().notAnyIf("teams.teamId",this.data?.teamId).filters()}),this.employeeFormatFn=d=>d?`${d.firstName} ${d.lastName}`:"",this.roles=this.cstnService.roles.getAll({orderBy:["name"]}),this.form=i.group({employeeId:[t?.teamEmployee?.employeeId,[E.required]],roleId:[t?.teamEmployee?.roleId,[E.required]],startDate:[t?.teamEmployee?.startDate??new Date(),[E.required]],endDate:[t?.teamEmployee?.endDate,[]]});}submit(){this.IsValid()&&(this.data?.teamEmployee?this.save(this.cstnService.teams.employees.update(this.data.teamId,this.data.teamEmployee.id,this.form.value)):this.save(this.cstnService.teams.employees.create(this.data.teamId,this.form.value)));}};e.ɵfac=function(o){return new(o||e)(_(k),_(W),_(Z));},e.ɵcmp=u({type:e,selectors:[["sz-constr-construction-zones-units-save"]],standalone:!0,features:[f([]),B,C],decls:9,vars:8,consts:()=>{let i;i="\u0627\u0644\u0645\u0648\u0638\u0641";let o;o="\u0627\u0644\u062F\u0648\u0631";let t;t="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629";let d;return d="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0646\u0647\u0627\u064A\u0629",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","employeeId","label",i,3,"source","szOptionContentFn"],["formControlName","roleId","label",o,3,"source"],[1,"sz-form-row"],["formControlName","startDate","label",t],["formControlName","endDate","label",d],[3,"actions"]];},template:function(o,t){o&1&&(m(0,"sz-ui-dialog-header",0),S(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3),S(5,"div",4),m(6,"sz-ui-form-field-date",5)(7,"sz-ui-form-field-date",6),c()()(),m(8,"sz-ui-dialog-actions",7)),o&2&&(n("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),s(2),n("formGroup",t.form),s(),n("source",t.employees)("szOptionContentFn",t.employeeFormatFn),s(),n("source",t.roles),s(4),n("actions",t.actions));},dependencies:[H,X,j,w,Y,q,T,x,te,D,se,me,ie,ee,oe],encapsulation:2});let r=e;return r;})();var A=(()=>{let e=class e{constructor(){this.route=a(M),this.router=a(Q),this.dialog=a(O),this.locale=a(G),this.cstnService=a(l),this.team=V.required(),this.dataSource=new Se([]),this.card={title:L.employees,menu:v.more([y.add(()=>this.openSaveComponent())])},this.dataSource.columnDefs.push(p.uuid("id"),p.string("employee.firstName"),p.string("employee.lastName"),p.string("role.name").setName(L.role),p.date("startDate").setVisible(!1),p.date("endDate").setVisible(!1),p.date("createdAt").setVisible(!1),p.date("updatedAt").setVisible(!1),de.menu([y.edit(i=>this.openSaveComponent(i)),re.divider(),y.delete(i=>this.openDeleteComponent(i))]));}ngOnInit(){this.get();}openSaveComponent(i){this.dialog.open(fe,{data:{teamId:this.team().id,teamEmployee:i}}).afterClosed().subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openDeleteComponent(i){this.dialog.open(le,{data:pe.delete(this.cstnService.teams.employees.delete(this.team().id,i.id),i)}).afterClosed().subscribe(o=>{this.dataSource.delete(o);});}get(){this.cstnService.teams.employees.get(this.team().id,this.dataSource.getQuery()).pipe(ue(this.dataSource.state)).subscribe(i=>{this.dataSource.set(i.items,i.count);});}};e.ɵfac=function(o){return new(o||e)();},e.ɵcmp=u({type:e,selectors:[["sz-constr-construction-team-employees"]],inputs:{team:[1,"team"]},standalone:!0,features:[f([l]),C],decls:2,vars:3,consts:[[3,"card"],["content","",3,"update","paginationEnabled","dataSource"]],template:function(o,t){o&1&&(S(0,"sz-ui-card",0)(1,"sz-ui-table",1),U("update",function(){return t.get();}),c()()),o&2&&(n("card",t.card),s(),n("paginationEnabled",!1)("dataSource",t.dataSource));},dependencies:[N,I,ce,g,ne],encapsulation:2});let r=e;return r;})();var _e=(()=>{let e=class e{constructor(){this.cstnService=a(l),this.route=a(M),this.dialog=a(O),this.alert=$(void 0),this.menu=v.more([]),this.team=this.route.snapshot.data.team;}};e.ɵfac=function(o){return new(o||e)();},e.ɵcmp=u({type:e,selectors:[["sz-constr-construction-team"]],features:[f([])],decls:5,vars:5,consts:[[3,"title","subtitle","menu"],[3,"alert"],[1,"tw-my-4"],[3,"team"]],template:function(o,t){o&1&&(m(0,"sz-ui-app-bar",0)(1,"sz-ui-alert",1),S(2,"div",2),m(3,"sz-constr-construction-team-employees",3),c(),m(4,"div",2)),o&2&&(n("title",t.team.name)("subtitle",t.team.description)("menu",t.menu),s(),n("alert",t.alert()),s(2),n("team",t.team));},dependencies:[h,z,A],encapsulation:2});let r=e;return r;})();var Mt=(()=>{let e=class e{};e.ɵfac=function(o){return new(o||e)();},e.ɵmod=b({type:e}),e.ɵinj=F({providers:[l],imports:[N.forChild([{path:"",component:_e}]),T,K,g,h,I,D,z,A]});let r=e;return r;})();export{Mt as TeamModule};/**i18n:6190c43da7a3fea028eb23fa927219ca31bd8cf379265ee8510873f87ba55ffe*/