import{a as Se,b as Te,c as Ee,d as Oe,e as de}from"./chunk-K2FREDCA.js";import{a as O,c as ae,d as ne,f as _e,i as se,j as le}from"./chunk-OK6H7VOQ.js";import"./chunk-OKGOWQL5.js";import"./chunk-5EXUXQW4.js";import{a as R}from"./chunk-EPDRH6CA.js";import"./chunk-R7Q5O5AK.js";import{b as Z,f as ee,g as te,h as oe,j as re,k as ie}from"./chunk-SIJZK5WC.js";import{a as W}from"./chunk-QOS5QV5A.js";import{h as C}from"./chunk-C6C6OTDR.js";import{a as X,b as k,d as j,e as q,g as w}from"./chunk-CX4ZIHUA.js";import{c as Q,p as J,q as N,r as K}from"./chunk-C6YXCRXQ.js";import"./chunk-TGE3ZRSX.js";import"./chunk-TL57E7RA.js";import"./chunk-GOMTDU6R.js";import"./chunk-HVAN3DT6.js";import"./chunk-PVO7NVMK.js";import{d as m,f as B,g as D,l as v,n as V,q as $,r as z,u as G}from"./chunk-MGV73Q32.js";import{Y as b,r as y,t as A}from"./chunk-4AO3EWIG.js";import{a as F,e as U}from"./chunk-5XANXOAJ.js";import"./chunk-N5JOJLCN.js";import{ja as x,la as H}from"./chunk-IM7EI72R.js";import"./chunk-327W6FQA.js";import{Kb as i,Lb as _,Mb as S,Wb as E,Xb as c,bb as s,cb as T,na as u,pc as f,qb as h,zb as n}from"./chunk-UELVXDXK.js";import"./chunk-2GMD7R3L.js";var pe=(()=>{let a=class a extends ee{constructor(e,r,o,t){super(o),this.mlabService=e,this.fb=r,this.dialog=o,this.data=t,this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"],filterBehavior:y.Or,filters:A.create().equalIf("id",this.data.laboratoryTestType?.testTypeId).notAny("laboratories.laboratoryId",[this.data.laboratoryId]).filters()}),this.laboratories=this.mlabService.laboratories.getAll({orderBy:["name"],filters:A.create().notEqual("id",this.data.laboratoryId).filters()}),this.referenceValueSelectConfig={emptyOption:!0,autoSelect:!0,optionContentFn:d=>d.testType.nameEn},this.testTypeSelectConfig={optionSelectedFn:this.testTypeChnaged.bind(this)},this.transferOutLaboratorySelectConfig={emptyOption:!0},this.referenceValues=null,this.form=r.group({enabled:[t.laboratoryTestType?.enabled??!0,[m.required]],transferInPrice:[t.laboratoryTestType?.transferInPrice??0,[]],transferInEnabled:[t.laboratoryTestType?.transferInEnabled??!0,[m.required]],transferOutEnabled:[t.laboratoryTestType?.transferOutEnabled??!0,[m.required]],transferOutLaboratoryId:[t.laboratoryTestType?.transferOutLaboratoryId,[]],price:[t.laboratoryTestType?.price??0,[]],isFavorite:[t.laboratoryTestType?.isFavorite??!1,[m.required]],testTypeId:[t.laboratoryTestType?.testTypeId,[m.required]],referenceValueId:[t.laboratoryTestType?.referenceValueId,[]]}),t.laboratoryTestType&&this.testTypeChnaged(t.laboratoryTestType.testTypeId);}testTypeChnaged(e){this.referenceValues=this.mlabService.referenceValues.getAll({orderBy:["testType.nameEn"],filterBehavior:y.And,filters:A.create().equalIf("testType.id",e).filters()});}submit(){this.IsValid()&&(this.data.laboratoryTestType?this.save(this.mlabService.laboratories.testTypes.update(this.data.laboratoryId,this.data.laboratoryTestType?.id,this.form.value)):this.save(this.mlabService.laboratories.testTypes.create(this.data.laboratoryId,this.form.value)));}};a.ɵfac=function(r){return new(r||a)(T(R),T(z),T(X),T(k));},a.ɵcmp=u({type:a,selectors:[["sz-medisy-laboratory-laboratory-test-types-save"]],standalone:!0,features:[h,f],decls:29,vars:13,consts:()=>{let e;e="\u0646\u0645\u0637 \u0627\u062E\u062A\u0628\u0627\u0631";let r;r="\u0627\u0644\u0642\u064A\u0645\u0629 \u0627\u0644\u0645\u0631\u062C\u0639\u064A\u0629";let o;o="\u0627\u0644\u0633\u0639\u0631";let t;t="\u0627\u0644\u0633\u0639\u0631";let d;d="\u0627\u0644\u0645\u062E\u0628\u0631";let M;M="\u0645\u0641\u0639\u0644";let L;L="\u0645\u0641\u0636\u0644\u0629";let g;g="\u062A\u062D\u0648\u064A\u0644 \u0625\u0644\u0649";let I;I="\u0645\u0641\u0639\u0644";let P;P="\u062A\u062D\u0648\u064A\u0644 \u0644\u0644\u062E\u0627\u0631\u062C";let Y;return Y="\u0645\u0641\u0639\u0644",[M,L,g,I,P,Y,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId","label",e,3,"source","config"],["formControlName","referenceValueId","label",r,3,"source","config"],[1,"sz-form-row"],["formControlName","enabled"],["formControlName","isFavorite"],["formControlName","price","label",o,3,"type"],["multi",""],["formControlName","transferInEnabled"],["formControlName","transferInPrice","label",t,3,"type"],["formControlName","transferOutEnabled"],["formControlName","transferOutLaboratoryId","label",d,3,"source","config"],[3,"actions"]];},template:function(r,o){r&1&&(S(0,"sz-ui-dialog-header",6),i(1,"mat-dialog-content")(2,"form",7),S(3,"sz-ui-form-field-select",8)(4,"sz-ui-form-field-select",9),i(5,"div",10)(6,"mat-checkbox",11),E(7,0),_(),i(8,"mat-checkbox",12),E(9,1),_()(),i(10,"div",10),S(11,"sz-ui-form-field-input",13),_(),S(12,"div",10),i(13,"mat-accordion",14)(14,"mat-expansion-panel")(15,"mat-expansion-panel-header")(16,"mat-panel-title"),E(17,2),_()(),i(18,"mat-checkbox",15),E(19,3),_(),S(20,"sz-ui-form-field-input",16),_(),i(21,"mat-expansion-panel")(22,"mat-expansion-panel-header")(23,"mat-panel-title"),E(24,4),_()(),i(25,"mat-checkbox",17),E(26,5),_(),S(27,"sz-ui-form-field-select",18),_()()()(),S(28,"sz-ui-dialog-actions",19)),r&2&&(n("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),s(2),n("formGroup",o.form),s(),n("source",o.testTypes)("config",o.testTypeSelectConfig),s(),n("source",o.referenceValues)("config",o.referenceValueSelectConfig),s(7),n("type","number"),s(9),n("type","number"),s(7),n("source",o.laboratories)("config",o.transferOutLaboratorySelectConfig),s(),n("actions",o.actions));},dependencies:[G,v,B,D,V,$,ie,te,oe,w,q,N,J,de,Oe,Se,Te,Ee,Q,K],encapsulation:2});let p=a;return p;})();var We=(()=>{let a=class a{constructor(e,r,o){this.dialog=e,this.mlabService=r,this.route=o,this.dataSource=new ae("testType.nameEn"),this.laboratory=this.route.snapshot.data.laboratory,this.appBarConfig={title:b.test_types,subtitle:this.laboratory.name,backEnabled:!0},this.dataSource.columnDefs.push(O.uuid("id"),O.uuid("testTypeId"),O.string("testType.nameEn"),O.date("createdAt").setVisible(!1),O.date("updatedAt").setVisible(!1),O.boolean("isFavorite",(t,d)=>{t.isFavorite=d,this.updateItem(t);}).setName(b.favorite).setResponsive(!0),O.boolean("enabled",(t,d)=>{t.enabled=d,this.mlabService.laboratories.testTypes.update(t.laboratoryId,t.id,t).subscribe(M=>{t=M;});}).setResponsive(!0),O.menu([C.edit(this.openSaveComponent.bind(this)),C.divider(),C.delete(this.openLaboratoryTestTypeDeleteComponent.bind(this))])),this.get();}openSaveComponent(e){this.dialog.open(pe,{data:{laboratoryId:this.laboratory.id,laboratoryTestType:e}}).afterClosed().subscribe(r=>{this.dataSource.addOrUpdateItem(r);});}openLaboratoryTestTypeDeleteComponent(e){this.dialog.open(re,{data:Z.delete(this.mlabService.laboratories.testTypes.delete(e.laboratoryId,e.id),e)}).afterClosed().subscribe(r=>{this.dataSource.delete(r);});}updateItem(e){this.mlabService.laboratories.testTypes.update(e.laboratoryId,e.id,e).subscribe(r=>{this.dataSource.update(r);});}get(){this.mlabService.laboratories.testTypes.get(this.laboratory.id,this.dataSource.getQuery()).pipe(ne(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};a.ɵfac=function(r){return new(r||a)(T(j),T(R),T(F));},a.ɵcmp=u({type:a,selectors:[["sz-medisy-laboratory-laboratory-test-types"]],standalone:!0,features:[f],decls:6,vars:3,consts:()=>{let e;return e="\u0625\u0636\u0627\u0641\u0629",[e,[3,"config"],[3,"changed","dataSource"],["title","","mat-flat-button","","color","primary","start","",3,"click"],[3,"update","dataSource"]];},template:function(r,o){r&1&&(S(0,"sz-ui-app-bar",1),i(1,"sz-ui-table-search-filter",2),c("changed",function(){return o.get();}),i(2,"button",3),c("click",function(){return o.openSaveComponent();}),i(3,"span"),E(4,0),_()()(),i(5,"sz-ui-table",4),c("update",function(){return o.get();}),_()),r&2&&(n("config",o.appBarConfig),s(),n("dataSource",o.dataSource),s(4),n("dataSource",o.dataSource));},dependencies:[U,W,le,se,_e,N,H,x],encapsulation:2});let p=a;return p;})();export{We as LaboratoryTestTypesComponent};/**i18n:fe59e4cec730fb22fcad5443103077b4b8cf7932d5cc1616a4c03edd493e1605*/