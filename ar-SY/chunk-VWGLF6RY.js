import{a as X}from"./chunk-C5SGPCFT.js";import{a as u}from"./chunk-SFWYMPLM.js";import{e as G,g as j,h as q,k as H}from"./chunk-UK5PWDVA.js";import{a as R,b as Y,e as z,g as B}from"./chunk-KGWKQ6FR.js";import{j as P,r as V,t as $}from"./chunk-7ITRZQIY.js";import{c as T}from"./chunk-TCCIVYCZ.js";import{d,f as O,g as h,l as L,n as C,q as M,r as N,u as F}from"./chunk-BHO3RGW2.js";import{t as v}from"./chunk-KYIHBKDH.js";import{Eb as A,Jb as E,Kb as g,Lb as m,Yb as b,ab as n,bb as l,mc as I,na as y,nc as D,pb as S,ub as c,yb as s}from"./chunk-2TFHNGIL.js";import{a as f,b as p}from"./chunk-IL567IQQ.js";function W(a,i){if(a&1&&m(0,"sz-ui-form-field-select",3),a&2){let _=b();s("source",_.laboratories)("config",_.transferOutLaboratorySelectConfig);}}var de=(()=>{let i=class i extends G{constructor(r,o,t,w){super(o),this.fb=r,this.dialog=o,this.mlabService=t,this.data=w,this.laboratories=null,this.laboratoryOptionValueFn=e=>e,this.testTypesFilters=[],this.laboratoryId=this.data,this.transferOutLaboratorySelectConfig={emptyOption:!0},this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,p(f({query:""},T.minimal()),{orderBy:["-isFavorite","testType.nameEn"]})),this.testTypeAutocompleteConfig={valueChangedFn:e=>{if(typeof e=="string")this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,p(f({query:e},T.minimal()),{orderBy:["-isFavorite","testType.nameEn"]}));else if(typeof e=="object"&&e)return!1;return!0;},optionSelectedFn:e=>{this.form.patchValue({transferOutLaboratoryId:null}),e.transferOutLaboratoryId?this.form.controls.transferOutLaboratoryId.addValidators(d.required):this.form.controls.transferOutLaboratoryId.removeValidators(d.required),e.transferOutEnabled&&(this.laboratories=this.mlabService.laboratories.getAll({orderBy:["name"],filters:v.create().notEqual("id",this.data).equalIf("id",e.transferOutLaboratoryId).any("testTypes.testTypeId",e.testTypeId).any("testTypes.enabled",!0).any("testTypes.transferInEnabled",!0).filters()}));},optionValueFn:e=>e,optionContentFn:e=>e.testType.nameEn,optionDisplayWithFn:e=>e.testType.nameEn},this.form=r.group({transferOutLaboratoryId:[null,[]],testType:r.control(null,[d.required,X()])});}isTranferOutEnabled(){return this.form.value?.testType?.transferOutEnabled;}submit(){this.IsValid()&&this.dialog.close({laboratoryTestType:this.form.value.testType,transferOutLaboratoryId:this.form.getRawValue().transferOutLaboratoryId});}};i.ɵfac=function(o){return new(o||i)(l(N),l(R),l(u),l(Y));},i.ɵcmp=y({type:i,selectors:[["sz-medisy-laboratory-analysis-test-type-add"]],standalone:!0,features:[I([u]),S,D],decls:6,vars:8,consts:()=>{let r;r="\u0646\u0645\u0637 \u0627\u062E\u062A\u0628\u0627\u0631";let o;return o="\u0627\u0644\u0645\u062E\u0628\u0631 \u0627\u0644\u062E\u0627\u0631\u062C\u064A \u0627\u0644\u0645\u062D\u0648\u0644 \u0644\u0647",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testType","label",r,3,"source","config"],["formControlName","transferOutLaboratoryId","label",o,3,"source","config"],[3,"actions"]];},template:function(o,t){o&1&&(m(0,"sz-ui-dialog-header",0),E(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-autocomplete",2),c(4,W,1,2,"sz-ui-form-field-select",3),g()(),m(5,"sz-ui-dialog-actions",4)),o&2&&(s("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),n(2),s("formGroup",t.form),n(),s("source",t.testTypes)("config",t.testTypeAutocompleteConfig),n(),A(t.isTranferOutEnabled()?4:-1),n(),s("actions",t.actions));},dependencies:[F,L,O,h,C,M,B,z,H,j,q,$,V,P],encapsulation:2});let a=i;return a;})();export{de as a};/**i18n:254aa6fe1cd18dc65995e6e9397465bfcd88a7e4c31f715b7e9eda5212bf646d*/