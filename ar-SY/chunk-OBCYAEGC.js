import{a as N,b as G,c as O}from"./chunk-YXSUZKKK.js";import{h as I}from"./chunk-JIYGV4IV.js";import{a as f}from"./chunk-LDBLW2WO.js";import{a as A}from"./chunk-VU3TSLPI.js";import{c as P,h as fe,i as he,j as Se,l as ve,m as Ce,n as ge}from"./chunk-L4BG3HL5.js";import{b as E}from"./chunk-4I5KZJNP.js";import{d as w}from"./chunk-EVZ4I5QA.js";import{a as pe,b as ce,d as M,e as de,g as ue}from"./chunk-VQ3CVIXE.js";import{A as le,v as se,z as me}from"./chunk-75XLR4TY.js";import{A as T,J as ae,d as x,f as W,g as Z,k as ee,m as te,p as ie,q as oe,t as re,w as C,y as ne}from"./chunk-VZUJMTKN.js";import{i as S,j as B}from"./chunk-HRBP5HZA.js";import{q as F}from"./chunk-OHNFTK26.js";import{Ja as g,r as Q}from"./chunk-TT7ZQ2V6.js";import{Bb as j,Cb as L,Db as $,Eb as c,Fb as d,Gb as s,Ub as b,a as H,bb as D,da as k,ea as U,fb as l,gb as n,gc as z,ja as X,jc as u,na as p,nb as v,oa as Y,pa as q,qb as J,ub as a,zb as K}from"./chunk-CQJO6ZYU.js";var h=(()=>{let e=class e{constructor(t){this.http=t,this.basePath="softuza-portal",this.tiles=new w(this.http,`${this.basePath}/v1/tiles`),this.tileGroups=new w(this.http,`${this.basePath}/v1/tile-groups`);}};e.ɵfac=function(o){return new(o||e)(X(Q));},e.ɵprov=k({token:e,factory:e.ɵfac});let i=e;return i;})();var R=(()=>{let e=class e{};e.ɵfac=function(o){return new(o||e)();},e.ɵdir=q({type:e,inputs:{id:"id"}});let i=e;return i;})();var _e=(()=>{let e=class e extends R{constructor(t,o,r){super(),this.mlabService=t,this.dialog=o,this.router=r,this.card={icon:"science",subtitle:f.analyses,clickFn:()=>this.navigate("/mlab/analyses"),actions:[O.action(f.add,()=>this.navigate("/mlab/analyses/create"))]},this.value=null,this.indicator=D(!1),this.get();}get(){this.mlabService.analyses.count({filters:[]}).pipe(P(this.indicator)).subscribe(t=>{this.value=t;});}navigate(t){this.router.navigate([t]);}};e.ɵfac=function(o){return new(o||e)(n(A),n(M),n(C));},e.ɵcmp=p({type:e,selectors:[["medisy-laboratory-tiles-analyses-count"]],standalone:!0,features:[v,u],decls:2,vars:3,consts:[[3,"card","indicator"],["title","",3,"value"]],template:function(o,r){o&1&&(c(0,"sz-ui-card",0),s(1,"sz-ui-counter",1),d()),o&2&&(a("card",r.card)("indicator",r.indicator),l(),a("value",r.value));},dependencies:[I,g,F,T,G,N],encapsulation:2});let i=e;return i;})();var De=(()=>{let e=class e extends R{constructor(t,o,r){super(),this.mlabService=t,this.dialog=o,this.router=r,this.card={icon:"label",subtitle:f.specimens,clickFn:()=>this.navigate("/mlab/specimens"),actions:[O.action(f.show,()=>this.navigate("/mlab/specimens"))]},this.value=null,this.indicator=D(!1),this.get();}get(){this.mlabService.specimens.count({filters:[]}).pipe(P(this.indicator)).subscribe(t=>{this.value=t;});}navigate(t){this.router.navigate([t]);}};e.ɵfac=function(o){return new(o||e)(n(A),n(M),n(C));},e.ɵcmp=p({type:e,selectors:[["medisy-laboratory-tiles-specimens-count"]],standalone:!0,features:[v,u],decls:2,vars:3,consts:[[3,"card","indicator"],["title","",3,"value"]],template:function(o,r){o&1&&(c(0,"sz-ui-card",0),s(1,"sz-ui-counter",1),d()),o&2&&(a("card",r.card)("indicator",r.indicator),l(),a("value",r.value));},dependencies:[I,g,F,T,G,N],encapsulation:2});let i=e;return i;})();var be=(()=>{let e=class e extends fe{constructor(t,o,r,_){super(r),this.sprtService=t,this.fb=o,this.dialog=r,this.data=_,this.form=o.group({name:[_?.name,[x.required,x.minLength(1)]],description:[_?.description,[]]});}submit(){this.IsValid()&&(this.data?this.save(this.sprtService.tileGroups.update(this.data.id,this.form.value)):this.save(this.sprtService.tileGroups.create(this.form.value)));}};e.ɵfac=function(o){return new(o||e)(n(h),n(oe),n(pe),n(ce));},e.ɵcmp=p({type:e,selectors:[["medisy-dashboard-save"]],standalone:!0,features:[z([h]),v,u],decls:6,vars:3,consts:()=>{let t;t="\u0627\u0644\u0627\u0633\u0645";let o;return o="\u0627\u0644\u0648\u0635\u0641",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",t],["formControlName","description","label",o],[3,"actions"]];},template:function(o,r){o&1&&(s(0,"sz-ui-dialog-header",0),c(1,"mat-dialog-content")(2,"form",1),s(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3),d()(),s(5,"sz-ui-dialog-actions",4)),o&2&&(a("header",r.header),l(2),a("formGroup",r.form),l(3),a("actions",r.actions));},dependencies:[re,ee,W,Z,te,ie,ue,de,Ce,he,Se,le,se,me],encapsulation:2});let i=e;return i;})();function Te(i,e){if(i&1&&s(0,"medisy-laboratory-tiles-analyses-count",3),i&2){let m=b().$implicit;a("id",m.id);}}function Ae(i,e){if(i&1&&s(0,"medisy-laboratory-tiles-specimens-count",3),i&2){let m=b().$implicit;a("id",m.id);}}function Ee(i,e){if(i&1&&J(0,Te,1,1,"medisy-laboratory-tiles-analyses-count",3)(1,Ae,1,1),i&2){let m=e.$implicit;K(0,m.tileType.identifier==="analyses-count"?0:m.tileType.identifier==="specimens-count"?1:-1);}}function Pe(i,e){if(i&1&&(s(0,"sz-ui-header-info",1),c(1,"div",2),L(2,Ee,2,1,null,null,j),d()),i&2){let m=e.$implicit,t=b();a("title",m.name)("subTitle",m.description)("menu",t.tileGroupMenu)("data",m),l(2),$(m.tiles);}}var ze=(()=>{let e=class e{constructor(t,o,r){this.sprtService=t,this.dialog=o,this.router=r,this.tileGroups=[],this.title=f.dashboard,this.manageTileGroups=!1,this.menu=B.more([S.add(()=>this.openSaveComponent()),S.divider(),S.show(()=>{this.manageTileGroups=!this.manageTileGroups,this.manageTileGroups?this.tileGroupMenu=B.more([S.add(()=>this.openSaveComponent()),S.divider(),S.delete(_=>this.openTileGroupDeleteComponent(_))]):this.tileGroupMenu=null;})]),this.tileGroupMenu=null,this.get();}openSaveComponent(){this.dialog.open(be,{data:null}).afterClosed().subscribe(t=>{t&&this.get();});}openTileGroupDeleteComponent(t){console.log(t),this.dialog.open(ve,{data:ge.delete(this.sprtService.tileGroups.delete(t.id),t)}).afterClosed().subscribe(o=>{o&&this.get();});}get(){this.sprtService.tileGroups.get(H({},ae.unpaged())).subscribe(t=>{this.tileGroups=t.items;});}};e.ɵfac=function(o){return new(o||e)(n(h),n(M),n(C));},e.ɵcmp=p({type:e,selectors:[["medisy-dashboard"]],standalone:!0,features:[z([h]),u],decls:3,vars:2,consts:[[3,"title","menu"],[3,"title","subTitle","menu","data"],[1,"sz-grid-card","tw-mb-2"],[3,"id"]],template:function(o,r){o&1&&(s(0,"sz-ui-header-info",0),L(1,Pe,4,4,null,null,j)),o&2&&(a("title",r.title)("menu",r.menu),l(),$(r.tileGroups));},dependencies:[E,_e,De],encapsulation:2});let i=e;return i;})();var Ie=[{path:"",component:ze}];var Xt=(()=>{let e=class e{};e.ɵfac=function(o){return new(o||e)();},e.ɵmod=Y({type:e}),e.ɵinj=U({imports:[ne.forChild(Ie),g,E]});let i=e;return i;})();export{Xt as DashboardModule};/**i18n:70191478f6ac7be8bdb3241746fcd9e1f236a6362603c105af1f0a7330a6840e*/