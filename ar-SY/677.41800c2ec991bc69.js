"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[677],{677:(D,p,s)=>{s.r(p),s.d(p,{AnalysisModule:()=>N});var a=s(6814),E=s(2296),h=s(7700),l=s(6385),S=s(617),r=s(7988),C=s(8109),A=s(5738),g=s(758),e=s(2595),O=s(5041),M=s(5807),t=s(5879),u=s(9060),y=s(2279),o=s(5348),d=s(2430),P=s(5703),v=s(2764),U=s(3572),f=s(9598),I=s(7398),z=s(8180),R=s(2516),L=s(6128);function Y(n,T){1&n&&t._UZ(0,"sz-ui-card",6),2&n&&t.Q6J("card",T.$implicit)}const B=[{path:"",component:(()=>{class n{constructor(i,m,c,$,F,Z){this.dialog=i,this.route=m,this.router=c,this.analysisService=$,this.personService=F,this.personNamePipe=Z,this.alert$=(0,t.tdS)(void 0),this.testsDataSource=new U.b2(f.J.pagedSorted("-createdAt")),this.tiles=[],this.analysisMenu=P.B.more([v.N.edit(()=>this.openEditComponent),v.N.print(()=>this.openEditComponent)]),this.analysis=this.route.snapshot.data.analysis,this.getPerson(),this.buildTiles()}buildTiles(){const i={icon:"science",subtitle:"\u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631\u0627\u062A",type:d.k.Counter,clickFn:()=>this.router.navigate(["tests"],{relativeTo:this.route})},m={icon:"label",subtitle:"\u0627\u0644\u0639\u064A\u0646\u0627\u062A",type:d.k.Counter,clickFn:()=>this.router.navigate(["specimens"],{relativeTo:this.route})};this.analysisService.getTests(this.analysis.id,f.J.count()).pipe((0,I.U)(c=>c.count),(0,z.q)(1)).subscribe(c=>{i.title=c}),this.analysisService.getSpecimens(this.analysis.id,f.J.count()).pipe((0,I.U)(c=>c.count),(0,z.q)(1)).subscribe(c=>{m.title=c}),this.tiles.push(i),this.tiles.push(m)}getPerson(){this.analysis.personId&&this.personService.getPerson(this.analysis.personId).pipe((0,z.q)(1)).subscribe(i=>{this.tiles.splice(0,0,{icon:"person",type:d.k.Text,subtitle:"\u0627\u0644\u0645\u0631\u064A\u0636",title:this.personNamePipe.transform(i),clickFn:()=>this.router.navigate([`mppl/persons/${i.id}`])})})}openEditComponent(){}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(h.uw),t.Y36(C.gz),t.Y36(C.F0),t.Y36(A.K),t.Y36(o.R),t.Y36(u.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["medisy-laboratory-analysis"]],features:[t._Bn([A.K,o.R,u.Y,y.C])],decls:9,vars:4,consts:[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["end","",3,"menu"],[1,"sz-grid-card"],[3,"card",4,"ngFor","ngForOf"],[3,"card"]],template:function(i,m){1&i&&(t.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),t._uU(3),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.qZA()(),t._UZ(6,"sz-ui-menu",3),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,Y,1,1,"sz-ui-card",5),t.qZA()),2&i&&(t.xp6(3),t.Oqu(m.analysis.code),t.xp6(2),t.Oqu(m.analysis.note),t.xp6(1),t.Q6J("menu",m.analysisMenu),t.xp6(2),t.Q6J("ngForOf",m.tiles))},dependencies:[a.sg,R.z,L.X,M.i],encapsulation:2}),n})()},{path:"tests",loadComponent:()=>Promise.resolve().then(s.bind(s,1947)).then(n=>n.AnalysisTestsComponent)},{path:"specimens",loadComponent:()=>Promise.all([s.e(592),s.e(380)]).then(s.bind(s,2380)).then(n=>n.AnalysisSpecimensComponent)}];var K=s(1947);let N=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[A.K],imports:[a.ez,C.Bz.forChild(B),h.Is,g.E3,r.Tx,S.Ps,E.ot,l.t,O.n,e.V,M.i,K.AnalysisTestsComponent]}),n})()},1947:(D,p,s)=>{s.r(p),s.d(p,{AnalysisTestsComponent:()=>t});var a=s(8109),E=s(2191),h=s(2279),l=s(5738),S=s(5041),r=s(3572),C=s(9598),A=s(8721),g=s(8180),e=s(5879),O=s(8359),M=s(2516);let t=(()=>{class u{constructor(o,d,P){this.route=o,this.analysisService=d,this.testStatei18nPipe=P,this.dataSource=new r.b2(C.J.pagedSorted("test.testClass")),this.analysis=this.route.snapshot.data.analysis,this.dataSource.columns=[r.UC.text("test.testclass","\u0635\u0646\u0641 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631",v=>v.test.testClass.name),r.UC.text("test.state","\u0627\u0644\u062D\u0627\u0644\u0629",v=>P.transform(v.test.state)),E.h.menu([])],this.get()}get(){this.analysisService.getTests(this.analysis.id,this.dataSource.filterModel).pipe((0,A.sU)(this.dataSource.indicator)).pipe((0,g.q)(1)).subscribe(o=>{this.dataSource.set(o.items,o.count)})}}return u.\u0275fac=function(o){return new(o||u)(e.Y36(a.gz),e.Y36(l.K),e.Y36(h.C))},u.\u0275cmp=e.Xpm({type:u,selectors:[["medisy-laboratory-analysis-tests"]],standalone:!0,features:[e._Bn([l.K,h.C]),e.jDz],decls:7,vars:4,consts:function(){let y;return y="\u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631\u0627\u062A",[["start",""],[1,"sz-h5"],y,["routerLink","../",1,"tw-underline","tw-text-sm"],[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(o,d){1&o&&(e.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),e.SDv(3,2),e.qZA(),e.TgZ(4,"a",3),e._uU(5),e.qZA()()(),e.TgZ(6,"sz-ui-table",4),e.NdJ("update",function(){return d.get()}),e.qZA()),2&o&&(e.xp6(5),e.Oqu(d.analysis.code),e.xp6(1),e.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",d.dataSource))},dependencies:[a.Bz,a.rH,r.Vn,O.K,S.n,M.z],encapsulation:2}),u})()},2279:(D,p,s)=>{s.d(p,{C:()=>h});var a=(()=>((a=a||{}).Created="Created",a.Pending="Pending",a.Started="Started",a.Finished="Finished",a))(),E=s(5879);let h=(()=>{class l{transform(r){switch(r){case a.Created:return "\u0645\u0646\u0634\u0623\u0629";case a.Started:return "\u0628\u062F\u0623";case a.Finished:return "\u0627\u0646\u062A\u0647\u062A";case a.Pending:return "\u0642\u064A\u062F \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631";default:return""}}}return l.\u0275fac=function(r){return new(r||l)},l.\u0275pipe=E.Yjl({name:"testStateI18n",type:l,pure:!0,standalone:!0}),l})()}}]);