import{a as De,b as ye,c as be}from"./chunk-QOCT5RXM.js";import{a as ce,c as Me,d as O,e as Pe,g as ge,s as Fe,t as he,u as f}from"./chunk-NX3LT2RV.js";import{a as fe}from"./chunk-ETF3CVHJ.js";import{c as de,h as Ie,i as pe,j as Ee,l as Ce,m as ue,n as Ae}from"./chunk-YIR7S7Z5.js";import{b as Ne,c as Oe}from"./chunk-E3FW4FG3.js";import{b as P}from"./chunk-G5ATBGNR.js";import{h as g}from"./chunk-DS5TYFF5.js";import{a as Se,b as le,d as me,e as Te,g as M}from"./chunk-P4QIA4WM.js";import{A as se,h as ne,v as _e,z as ae}from"./chunk-22KPLFGU.js";import{L as ee,N as oe,d as S,f as w,g as k,k as H,m as J,p as K,q as Q,t as W}from"./chunk-BWNHVGBM.js";import"./chunk-IWM4AFTB.js";import{Ea as te,Ga as ie,Ja as re,r as q}from"./chunk-I73ZQFGG.js";import{Eb as s,Fb as N,Gb as T,M as p,Qb as x,Sb as u,Ub as A,da as V,ea as G,fb as l,g as v,gb as m,gc as c,ja as X,jc as B,na as E,nb as Z,oa as Y,qb as j,ub as a,zb as C}from"./chunk-KN4PZLRS.js";var d=(()=>{let o=class o extends Oe{constructor(e){super(e,"softuza-notification"),this.notifications=new Ne(this.http,`${this.basePath}/v1/notifications`);}};o.ɵfac=function(t){return new(t||o)(X(q));},o.ɵprov=V({token:o,factory:o.ɵfac});let i=o;return i;})();function ve(i,o){if(i&1&&(s(0,"mat-tab",5),T(1,"sz-ui-form-field-input",9)(2,"sz-ui-form-field-input",10)(3,"sz-ui-form-field-input",11)(4,"sz-ui-form-field-textarea",12),N()),i&2){let I=A();a("formGroup",I.formEmail);}}function Ve(i,o){if(i&1&&(s(0,"mat-tab",6),T(1,"sz-ui-form-field-input",13)(2,"sz-ui-form-field-textarea",14),N()),i&2){let I=A();a("formGroup",I.formSms);}}function Ge(i,o){if(i&1&&(s(0,"mat-tab",7),T(1,"sz-ui-form-field-input",15)(2,"sz-ui-form-field-textarea",16),N()),i&2){let I=A();a("formGroup",I.formPush);}}var Re=(()=>{let o=class o extends Ie{constructor(e,t,n,r){super(n),this.sntiService=e,this.fb=t,this.dialog=n,this.data=r,this.notificationTypes=O,this.subscriptions=new v(),this.formEmail=t.group({subject:[r?.email?.subject,[S.required]],replyToEmail:[r?.email?.replyToEmail,[S.email]],replyToName:[r?.email?.replyToName,[]],body:[r?.email?.body,[S.required]]}),this.formSms=t.group({originator:[r?.sms?.originator,[S.required]],body:[r?.sms?.body,[S.required]]}),this.formPush=t.group({title:[r?.push?.title,[S.required]],body:[r?.push?.body,[S.required]]}),this.form=t.group({name:[r?.name,[S.required]],description:[r?.description,[S.maxLength(4096)]],types:[r?.types??[],[S.required]]}),this.subscribeChanges();}ngOnDestroy(){this.subscriptions.unsubscribe();}subscribeChanges(){this.subscriptions.add(this.form.controls.types.valueChanges.subscribe(e=>{this.form.contains("email")?e?.includes(O.Email)||this.form.removeControl("email"):e?.includes(O.Email)&&this.form.addControl("email",this.formEmail),this.form.contains("sms")?e?.includes(O.Sms)||this.form.removeControl("sms"):e?.includes(O.Sms)&&this.form.addControl("sms",this.formSms),this.form.contains("push")?e?.includes(O.Push)||this.form.removeControl("push"):e?.includes(O.Push)&&this.form.addControl("push",this.formPush);}));}hasChannelType(e){return this.form.value.types?.includes(e);}submit(){this.IsValid()&&(this.data?this.save(this.sntiService.notifications.update(this.data.id,this.form.value)):this.save(this.sntiService.notifications.create(this.form.value)));}};o.ɵfac=function(t){return new(t||o)(m(d),m(Q),m(Se),m(le));},o.ɵcmp=E({type:o,selectors:[["medisy-laboratory-reference-values-save"]],standalone:!0,features:[c([]),Z,B],decls:11,vars:7,consts:()=>{let e;e="\u0627\u0644\u0627\u0633\u0645";let t;t="\u0627\u0644\u0648\u0635\u0641";let n;n="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let r;r="\u0631\u0633\u0627\u0644\u0629 \u0646\u0635\u064A\u0629";let h;h="\u0627\u0634\u0639\u0627\u0631";let D;D="\u0627\u0644\u0645\u0648\u0636\u0648\u0639";let y;y="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let b;b="\u0627\u0644\u0627\u0633\u0645";let $;$="\u0627\u0644\u0645\u062D\u062A\u0648\u0649";let R;R="\u0627\u0644\u0645\u0631\u0633\u0644";let L;L="\u0627\u0644\u0645\u062D\u062A\u0648\u0649";let z;z="\u0627\u0644\u0644\u0642\u0628";let U;return U="\u0627\u0644\u0645\u062D\u062A\u0648\u0649",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",t],["formControlName","types",3,"multiple"],["label",n,3,"formGroup"],["label",r,3,"formGroup"],["label",h,3,"formGroup"],[3,"actions"],["formControlName","subject","label",D],["formControlName","replyToEmail","label",y],["formControlName","replyToName","label",b],["formControlName","body","label",$],["formControlName","originator","label",R],["formControlName","body","label",L],["formControlName","title","label",z],["formControlName","body","label",U]];},template:function(t,n){t&1&&(T(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),T(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"medisy-form-field-notification-type",4),s(6,"mat-tab-group"),j(7,ve,5,1,"mat-tab",5)(8,Ve,3,1,"mat-tab",6)(9,Ge,3,1,"mat-tab",7),N()()(),T(10,"sz-ui-dialog-actions",8)),t&2&&(a("header",n.header),l(2),a("formGroup",n.form),l(3),a("multiple",!0),l(2),C(7,n.hasChannelType(n.notificationTypes.Email)?7:-1),l(),C(8,n.hasChannelType(n.notificationTypes.Sms)?8:-1),l(),C(9,n.hasChannelType(n.notificationTypes.Push)?9:-1),l(),a("actions",n.actions));},dependencies:[W,H,w,k,J,K,M,Te,ne,be,De,ye,ue,pe,Ee,se,_e,ae,Pe],encapsulation:2});let i=o;return i;})();var Le=(()=>{let o=class o{constructor(e,t,n){this.dialog=e,this.sntiService=t,this.router=n,this.title=fe.notifications,this.dataSource=new Me(),this.dataSource.fields.push(f.string("id",!1),f.hyperlink("name",r=>this.router.navigate([`/mlab/notification/${r.id}`])),f.string("description"),f.string("types"),f.date("createdAt",!1),f.date("updatedAt",!1),ce.menu([g.edit(r=>this.openSaveComponent(r)),g.delete(r=>this.openNotificationDeleteComponent(r))])),this.get();}openSaveComponent(e){this.dialog.open(Re,{data:e}).afterClosed().pipe(p(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openNotificationDeleteComponent(e){this.dialog.open(Ce,{data:Ae.delete(this.sntiService.notifications.delete(e.id),e)}).afterClosed().pipe(p(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.sntiService.notifications.get(this.dataSource.buildRequest()).pipe(de(this.dataSource.indicator),p(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(t){return new(t||o)(m(me),m(d),m(ee));},o.ɵcmp=E({type:o,selectors:[["softuza-notification-notifications"]],features:[c([])],decls:6,vars:4,consts:()=>{let e;return e="\u0625\u0636\u0627\u0641\u0629",[[3,"title"],[3,"dataSource","changed"],["mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(t,n){t&1&&(T(0,"sz-ui-header-info",0),s(1,"sz-ui-table-search-filter",1),u("changed",function(){return n.get();}),s(2,"button",2),u("click",function(){return n.openSaveComponent();}),s(3,"span"),x(4,3),N()()(),s(5,"sz-ui-table",4),u("update",function(){return n.get();}),N()),t&2&&(a("title",n.title),l(),a("dataSource",n.dataSource),l(4),a("stateEnabled",!0)("dataSource",n.dataSource));},dependencies:[te,Fe,ge,P],encapsulation:2});let i=o;return i;})();var ze=[{path:"",component:Le}];var Vo=(()=>{let o=class o{};o.ɵfac=function(t){return new(t||o)();},o.ɵmod=Y({type:o}),o.ɵinj=G({providers:[d],imports:[oe.forChild(ze),M,ie,he,P,re]});let i=o;return i;})();export{Vo as NotificationsModule};/**i18n:5ad987f33fb36a4bb6d53ec4372590584614aa13df9413297fdfa1032f98b4a2*/