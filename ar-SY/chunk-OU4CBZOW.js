import{a as mt,b as ht,c as vt}from"./chunk-BJVDHX2A.js";import{a as ce}from"./chunk-EHYJE3OL.js";import{a as ne,d as E,e as D,f as nt,g as ve,h as oe,i as ye,j as ge,k as ot,l as it,m as at,n as we,o as ie,p as st,q as ct,r as ut,s as j,t as dt,u as lt,v as ft,w as T,x as ae,y as pt}from"./chunk-V2R2LNEO.js";import"./chunk-X2PVQHUM.js";import"./chunk-CHPZASVR.js";import"./chunk-D7QF6LJS.js";import{a as Je}from"./chunk-NE7X3SPH.js";import{a as Ke}from"./chunk-KYPQMVAD.js";import"./chunk-HGFYK4WW.js";import{a as se}from"./chunk-KKAVFGM3.js";import"./chunk-Z6KDOQJY.js";import{e as rt}from"./chunk-WAFKJ67S.js";import"./chunk-LUYVV6ZZ.js";import"./chunk-F67EX4OT.js";import{a as O}from"./chunk-4A4DWX3B.js";import{d as et,f as tt,g as ee,h as te,k as re}from"./chunk-QMA7Y45E.js";import"./chunk-WL4FKIHI.js";import"./chunk-CBIY2ZLG.js";import{b as K}from"./chunk-DVDPPXKO.js";import{g as k,h as qe,i as Ze,j as he,l as Xe}from"./chunk-7ZCIBZRX.js";import{a as Z,b as X,d as Ue,e as J,g as P}from"./chunk-UN7ZV7OU.js";import{l as Ye,r as $e}from"./chunk-M6JNFYJK.js";import"./chunk-L2KLTZKL.js";import{a as pe}from"./chunk-CJ662YDS.js";import"./chunk-RH3HJREX.js";import{c as me}from"./chunk-4U6LIYO2.js";import"./chunk-3MHW6B4E.js";import{f as Be,g as Ve,k as Pe,m as je,p as ze,q as $,t as q}from"./chunk-U3CUVO3E.js";import"./chunk-72GYWXTT.js";import{a as He,c as ke,e as Ge}from"./chunk-D3PLXWXH.js";import"./chunk-IFFAZPN3.js";import{c as Qe}from"./chunk-AHPLM44D.js";import{ia as We}from"./chunk-Y7MZZUBM.js";import{o as Fe}from"./chunk-AD74A3E4.js";import{Cb as xe,Hb as x,Ib as b,Jb as C,O as de,Xb as be,a as Ae,b as Ie,cc as De,dc as Le,ea as le,eb as Re,ec as Ne,ha as Oe,ib as F,jb as y,jc as V,mc as Y,pa as fe,qa as B,qb as W,ra as Te,tb as H,ub as U,vb as Q,xb as I}from"./chunk-MNGWH3SB.js";var It=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o;}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i]);},n(e,t);};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e;}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r());};}(),yt=function(n){It(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r;}return e.makeBufferFromCanvasImageData=function(t){var r=t.getContext("2d");if(!r)throw new Error("Couldn't get canvas context.");var o=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(o.data,t.width,t.height);},e.toGrayscaleBuffer=function(t,r,o){for(var i=new Uint8ClampedArray(r*o),a=0,c=0,u=t.length;a<u;a+=4,c++){var s=void 0,d=t[a+3];if(d===0)s=255;else{var f=t[a],l=t[a+1],g=t[a+2];s=306*f+601*l+117*g+512>>10;}i[c]=s;}return i;},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new D("Requested row is outside the image: "+t);var o=this.getWidth(),i=t*o;return r===null?r=this.buffer.slice(i,i+o):(r.length<o&&(r=new Uint8ClampedArray(o)),r.set(this.buffer.slice(i,i+o))),r;},e.prototype.getMatrix=function(){return this.buffer;},e.prototype.isCropSupported=function(){return!0;},e.prototype.crop=function(t,r,o,i){return n.prototype.crop.call(this,t,r,o,i),this;},e.prototype.isRotateSupported=function(){return!0;},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this;},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this;},e.prototype.invert=function(){return new at(this);},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t;}return this.tempCanvasElement;},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var o=t*e.DEGREE_TO_RADIANS,i=this.canvas.width,a=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(o))*i+Math.abs(Math.sin(o))*a),u=Math.ceil(Math.abs(Math.sin(o))*i+Math.abs(Math.cos(o))*a);r.width=c,r.height=u;var s=r.getContext("2d");if(!s)throw new Error("Could not create a Canvas Context element.");return s.translate(c/2,u/2),s.rotate(o),s.drawImage(this.canvas,i/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this;},e.DEGREE_TO_RADIANS=Math.PI/180,e;}(it);function Se(){return typeof navigator<"u";}function Ot(){return Se()&&!!navigator.mediaDevices;}function gt(){return!!(Ot()&&navigator.mediaDevices.enumerateDevices);}var z=function(){return z=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);}return n;},z.apply(this,arguments);},m=function(n,e,t,r){function o(i){return i instanceof t?i:new t(function(a){a(i);});}return new(t||(t=Promise))(function(i,a){function c(d){try{s(r.next(d));}catch(f){a(f);}}function u(d){try{s(r.throw(d));}catch(f){a(f);}}function s(d){d.done?i(d.value):o(d.value).then(c,u);}s((r=r.apply(n,e||[])).next());});},h=function(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1];},trys:[],ops:[]},r,o,i,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this;}),a;function c(s){return function(d){return u([s,d]);};}function u(s){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue;}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break;}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break;}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break;}i[2]&&t.ops.pop(),t.trys.pop();continue;}s=e.call(n,t);}catch(d){s=[6,d],o=0;}finally{r=i=0;}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0};}},Ce=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n};}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.");},Tt={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},M=function(){function n(e,t,r){t===void 0&&(t=new Map()),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=z(z({},Tt),r);}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(oe.POSSIBLE_FORMATS,e);},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t;}catch{console.error("got interrupted by new loading request");}},n.mediaStreamSetTorch=function(e,t){return m(this,void 0,void 0,function(){return h(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2];}});});},n.mediaStreamIsTorchCompatible=function(e){var t,r,o=e.getVideoTracks();try{for(var i=Ce(o),a=i.next();!a.done;a=i.next()){var c=a.value;if(n.mediaStreamIsTorchCompatibleTrack(c))return!0;}}catch(u){t={error:u};}finally{try{a&&!a.done&&(r=i.return)&&r.call(i);}finally{if(t)throw t.error;}}return!1;},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t;}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1;}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2;},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new E("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new E("element with id '".concat(e,"' must be an ").concat(t," element"));return r;},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t;}throw new Error("Couldn't get videoElement from videoSource!");},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t;}throw new Error("Couldn't get imageElement from imageSource!");},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t;},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0);},n.createBinaryBitmapFromCanvas=function(e){var t=new yt(e),r=new ot(t);return new nt(r);},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0);},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!");},n.createCaptureCanvas=function(e){if(!e)throw new E("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),o=r.width,i=r.height;return t.style.width=o+"px",t.style.height=i+"px",t.width=o,t.height=i,t;},n.tryPlayVideo=function(e){return m(this,void 0,void 0,function(){var t;return h(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2];}});});},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t;},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t);},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0;},n.listVideoInputDevices=function(){return m(this,void 0,void 0,function(){var e,t,r,o,i,a,c,u,s,d,f,l;return h(this,function(g){switch(g.label){case 0:if(!Se())throw new Error("Can't enumerate devices, navigator is not present.");if(!gt())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=g.sent(),t=[];try{for(r=Ce(e),o=r.next();!o.done;o=r.next())i=o.value,a=i.kind==="video"?"videoinput":i.kind,a==="videoinput"&&(c=i.deviceId||i.id,u=i.label||"Video device ".concat(t.length+1),s=i.groupId,d={deviceId:c,label:u,kind:a,groupId:s},t.push(d));}catch(A){f={error:A};}finally{try{o&&!o.done&&(l=r.return)&&l.call(r);}finally{if(f)throw f.error;}}return[2,t];}});});},n.findDeviceById=function(e){return m(this,void 0,void 0,function(){var t;return h(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(o){return o.deviceId===e;})]:[2];}});});},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null;}catch{e.src="";}e&&e.removeAttribute("src");}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop();});}),n.streamTracker=[];},n.playVideoOnLoadAsync=function(e,t){return m(this,void 0,void 0,function(){var r;return h(this,function(o){switch(o.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=o.sent(),r?[2,!0]:[2,new Promise(function(i,a){var c=setTimeout(function(){n.isVideoPlaying(e)||(a(!1),e.removeEventListener("canplay",u));},t),u=function(){n.tryPlayVideo(e).then(function(s){clearTimeout(c),e.removeEventListener("canplay",u),i(s);});};e.addEventListener("canplay",u);})];}});});},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),m(this,void 0,void 0,function(){var o;return h(this,function(i){switch(i.label){case 0:return o=n.prepareVideoElement(t),n.addVideoSource(o,e),[4,n.playVideoOnLoadAsync(o,r)];case 1:return i.sent(),[2,o];}});});},n._waitImageLoad=function(e){return new Promise(function(t,r){var o=1e4,i=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",a),r());},o),a=function(){clearTimeout(i),e.removeEventListener("load",a),t();};e.addEventListener("load",a);});},n.checkCallbackFnOrThrow=function(e){if(!e)throw new E("`callbackFn` is a required parameter, you cannot capture results without it.");},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop();}),e=void 0;},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t);},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints);},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t);},n.prototype.decodeFromImageElement=function(e){return m(this,void 0,void 0,function(){var t;return h(this,function(r){switch(r.label){case 0:if(!e)throw new E("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()];}});});},n.prototype.decodeFromImageUrl=function(e){return m(this,void 0,void 0,function(){var t;return h(this,function(r){switch(r.label){case 0:if(!e)throw new E("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2];}});});},n.prototype.decodeFromConstraints=function(e,t,r){return m(this,void 0,void 0,function(){var o,i;return h(this,function(a){switch(a.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:o=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.decodeFromStream(o,t,r)];case 3:return[2,a.sent()];case 4:throw i=a.sent(),n.disposeMediaStream(o),i;case 5:return[2];}});});},n.prototype.decodeFromStream=function(e,t,r){return m(this,void 0,void 0,function(){var o,i,a,c,u,s,d,f,l,g=this;return h(this,function(A){switch(A.label){case 0:return n.checkCallbackFnOrThrow(r),o=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,o)];case 1:return i=A.sent(),a=function(){n.disposeMediaStream(e),n.cleanVideoSource(i);},c=this.scan(i,r,a),u=e.getVideoTracks(),s=z(z({},c),{stop:function(){c.stop();},streamVideoConstraintsApply:function(p,w){return m(this,void 0,void 0,function(){var v,_,S,L,G,ue,Ee;return h(this,function(N){switch(N.label){case 0:v=w?u.filter(w):u,N.label=1;case 1:N.trys.push([1,6,7,8]),_=Ce(v),S=_.next(),N.label=2;case 2:return S.done?[3,5]:(L=S.value,[4,L.applyConstraints(p)]);case 3:N.sent(),N.label=4;case 4:return S=_.next(),[3,2];case 5:return[3,8];case 6:return G=N.sent(),ue={error:G},[3,8];case 7:try{S&&!S.done&&(Ee=_.return)&&Ee.call(_);}finally{if(ue)throw ue.error;}return[7];case 8:return[2];}});});},streamVideoConstraintsGet:function(p){return u.find(p).getConstraints();},streamVideoSettingsGet:function(p){return u.find(p).getSettings();},streamVideoCapabilitiesGet:function(p){return u.find(p).getCapabilities();}}),d=n.mediaStreamIsTorchCompatible(e),d&&(f=u?.find(function(p){return n.mediaStreamIsTorchCompatibleTrack(p);}),l=function(p){return m(g,void 0,void 0,function(){return h(this,function(w){switch(w.label){case 0:return[4,n.mediaStreamSetTorch(f,p)];case 1:return w.sent(),[2];}});});},s.switchTorch=l,s.stop=function(){return m(g,void 0,void 0,function(){return h(this,function(p){switch(p.label){case 0:return c.stop(),[4,l(!1)];case 1:return p.sent(),[2];}});});}),[2,s];}});});},n.prototype.decodeFromVideoDevice=function(e,t,r){return m(this,void 0,void 0,function(){var o,i;return h(this,function(a){switch(a.label){case 0:return n.checkCallbackFnOrThrow(r),e?o={deviceId:{exact:e}}:o={facingMode:"environment"},i={video:o},[4,this.decodeFromConstraints(i,t,r)];case 1:return[2,a.sent()];}});});},n.prototype.decodeFromVideoElement=function(e,t){return m(this,void 0,void 0,function(){var r,o;return h(this,function(i){switch(i.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new E("A video element must be provided.");return r=n.prepareVideoElement(e),o=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,o)];case 1:return i.sent(),[2,this.scan(r,t)];}});});},n.prototype.decodeFromVideoUrl=function(e,t){return m(this,void 0,void 0,function(){var r,o,i,a;return h(this,function(c){switch(c.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new E("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,o=function(){n.cleanVideoSource(r);},i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return c.sent(),a=this.scan(r,t,o),[2,a];}});});},n.prototype.decodeOnceFromConstraints=function(e,t){return m(this,void 0,void 0,function(){var r;return h(this,function(o){switch(o.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=o.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,o.sent()];}});});},n.prototype.decodeOnceFromStream=function(e,t){return m(this,void 0,void 0,function(){var r,o,i;return h(this,function(a){switch(a.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:o=a.sent(),a.label=2;case 2:return a.trys.push([2,,4,5]),[4,this.scanOneResult(o)];case 3:return i=a.sent(),[2,i];case 4:return r||n.cleanVideoSource(o),[7];case 5:return[2];}});});},n.prototype.decodeOnceFromVideoDevice=function(e,t){return m(this,void 0,void 0,function(){var r,o;return h(this,function(i){switch(i.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},o={video:r},[4,this.decodeOnceFromConstraints(o,t)];case 1:return[2,i.sent()];}});});},n.prototype.decodeOnceFromVideoElement=function(e){return m(this,void 0,void 0,function(){var t,r;return h(this,function(o){switch(o.label){case 0:if(!e)throw new E("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return o.sent(),[4,this.scanOneResult(t)];case 2:return[2,o.sent()];}});});},n.prototype.decodeOnceFromVideoUrl=function(e){return m(this,void 0,void 0,function(){var t,r;return h(this,function(o){switch(o.label){case 0:if(!e)throw new E("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,r];case 2:return[2,o.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2];}});});},n.prototype.scanOneResult=function(e,t,r,o){var i=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),new Promise(function(a,c){i.scan(e,function(u,s,d){if(u){a(u),d.stop();return;}if(s){if(s instanceof ge&&t||s instanceof ve&&r||s instanceof ye&&o)return;d.stop(),c(s);}});});},n.prototype.scan=function(e,t,r){var o=this;n.checkCallbackFnOrThrow(t);var i=n.createCaptureCanvas(e),a=i.getContext("2d");if(!a)throw new Error("Couldn't create canvas for visual element scan.");var c=function(){a=void 0,i=void 0;},u=!1,s,d=function(){u=!0,clearTimeout(s),c(),r&&r();},f={stop:d},l=function(){if(!u)try{n.drawImageOnCanvas(a,e);var g=o.decodeFromCanvas(i);t(g,void 0,f),s=setTimeout(l,o.options.delayBetweenScanSuccess);}catch(v){t(void 0,v,f);var A=v instanceof ve,p=v instanceof ye,w=v instanceof ge;if(A||p||w){s=setTimeout(l,o.options.delayBetweenScanAttempts);return;}c(),r&&r(v);}};return l(),f;},n.prototype._decodeOnLoadImage=function(e){return m(this,void 0,void 0,function(){var t;return h(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)];}});});},n.prototype.getUserMedia=function(e){return m(this,void 0,void 0,function(){var t;return h(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t];}});});},n.streamTracker=[],n;}();var Rt=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o;}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i]);},n(e,t);};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e;}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r());};}(),rr=function(n){Rt(e,n);function e(t,r){return n.call(this,new st(),t,r)||this;}return e;}(M);var xt=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o;}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i]);},n(e,t);};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e;}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r());};}(),ar=function(n){xt(e,n);function e(t,r){return n.call(this,new ct(t),t,r)||this;}return e;}(M);var bt=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o;}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i]);},n(e,t);};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e;}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r());};}(),dr=function(n){bt(e,n);function e(t,r){return n.call(this,new ut(),t,r)||this;}return e;}(M);var Dt=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o;}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i]);},n(e,t);};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e;}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r());};}(),mr=function(n){Dt(e,n);function e(t,r){var o=this,i=new ft();return i.setHints(t),o=n.call(this,i,t,r)||this,o.reader=i,o;}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(oe.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints);},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t);},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints);},e;}(M);var Lt=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o;}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i]);},n(e,t);};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e;}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r());};}(),gr=function(n){Lt(e,n);function e(t,r){return n.call(this,new lt(),t,r)||this;}return e;}(M);var Nt=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o;}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i]);},n(e,t);};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e;}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r());};}(),_r=function(n){Nt(e,n);function e(t,r){return n.call(this,new dt(),t,r)||this;}return e;}(M);var R="http://www.w3.org/2000/svg",wt=function(){function n(e){if(typeof e=="string"){var t=document.getElementById(e);if(!t)throw new Error("Could not find a Container element with '".concat(e,"'."));this.containerElement=t;}else this.containerElement=e;}return n.prototype.write=function(e,t,r,o){if(e.length===0)throw new D("Found empty contents");if(t<0||r<0)throw new D("Requested dimensions are too small: "+t+"x"+r);var i=o&&o.get(T.MARGIN)!==void 0?Number.parseInt(o.get(T.MARGIN).toString(),10):n.QUIET_ZONE_SIZE,a=this.encode(o,e);return this.renderResult(a,t,r,i);},n.prototype.createSVGElement=function(e,t){var r=document.createElementNS(n.SVG_NS,"svg");return r.setAttributeNS(R,"width",t.toString()),r.setAttributeNS(R,"height",e.toString()),r;},n.prototype.createSvgPathPlaceholderElement=function(e,t){var r=document.createElementNS(n.SVG_NS,"path");return r.setAttributeNS(R,"d","M0 0h".concat(e,"v").concat(t,"H0z")),r.setAttributeNS(R,"fill","none"),r;},n.prototype.createSvgRectElement=function(e,t,r,o){var i=document.createElementNS(n.SVG_NS,"rect");return i.setAttributeNS(R,"x",e.toString()),i.setAttributeNS(R,"y",t.toString()),i.setAttributeNS(R,"height",r.toString()),i.setAttributeNS(R,"width",o.toString()),i.setAttributeNS(R,"fill","#000000"),i;},n.prototype.encode=function(e,t){var r=j.L;if(e&&e.get(T.ERROR_CORRECTION)!==void 0){var o=e.get(T.ERROR_CORRECTION).toString();r=j.fromString(o);}var i=ae.encode(t,r,e);return i;},n.prototype.renderResult=function(e,t,r,o){var i=e.getMatrix();if(i===null)throw new ie();var a=i.getWidth(),c=i.getHeight(),u=a+o*2,s=c+o*2,d=Math.max(t,u),f=Math.max(r,s),l=Math.min(Math.floor(d/u),Math.floor(f/s)),g=Math.floor((d-a*l)/2),A=Math.floor((f-c*l)/2),p=this.createSVGElement(d,f),w=this.createSvgPathPlaceholderElement(t,r);p.appendChild(w),this.containerElement.appendChild(p);for(var v=0,_=A;v<c;v++,_+=l)for(var S=0,L=g;S<a;S++,L+=l)if(i.get(S,v)===1){var G=this.createSvgRectElement(L,_,l,l);p.appendChild(G);}return p;},n.QUIET_ZONE_SIZE=4,n.SVG_NS="http://www.w3.org/2000/svg",n;}();var St="http://www.w3.org/2000/svg",Or=function(){function n(){}return n.prototype.write=function(e,t,r,o){if(e.length===0)throw new D("Found empty contents");if(t<0||r<0)throw new D("Requested dimensions are too small: "+t+"x"+r);var i=j.L,a=n.QUIET_ZONE_SIZE;if(o){if(o.get(T.ERROR_CORRECTION)!==void 0){var c=o.get(T.ERROR_CORRECTION).toString();i=j.fromString(c);}o.get(T.MARGIN)!==void 0&&(a=Number.parseInt(o.get(T.MARGIN).toString(),10));}var u=ae.encode(e,i,o);return this.renderResult(u,t,r,a);},n.prototype.writeToDom=function(e,t,r,o,i){if(typeof e=="string"){var a=document.querySelector(e);if(!a)throw new Error("Could no find the target HTML element.");e=a;}var c=this.write(t,r,o,i);e instanceof HTMLElement&&e.appendChild(c);},n.prototype.renderResult=function(e,t,r,o){var i=e.getMatrix();if(i===null)throw new ie();for(var a=i.getWidth(),c=i.getHeight(),u=a+o*2,s=c+o*2,d=Math.max(t,u),f=Math.max(r,s),l=Math.min(Math.floor(d/u),Math.floor(f/s)),g=Math.floor((d-a*l)/2),A=Math.floor((f-c*l)/2),p=this.createSVGElement(d,f),w=0,v=A;w<c;w++,v+=l)for(var _=0,S=g;_<a;_++,S+=l)if(i.get(_,w)===1){var L=this.createSvgRectElement(S,v,l,l);p.appendChild(L);}return p;},n.prototype.createSVGElement=function(e,t){var r=document.createElementNS(St,"svg"),o=e.toString(),i=t.toString();return r.setAttribute("height",i),r.setAttribute("width",o),r.setAttribute("viewBox","0 0 "+o+" "+i),r;},n.prototype.createSvgRectElement=function(e,t,r,o){var i=document.createElementNS(St,"rect");return i.setAttribute("x",e.toString()),i.setAttribute("y",t.toString()),i.setAttribute("height",r.toString()),i.setAttribute("width",o.toString()),i.setAttribute("fill","#000000"),i;},n.QUIET_ZONE_SIZE=4,n;}();var Pt=["container"],_e=class extends wt{constructor(e){super(e.nativeElement);}},_t=(()=>{let e=class e extends et{constructor(r,o,i){super(o),this.fb=r,this.dialog=o,this.data=i,this.minHeight=le(200),this.minWidth=le(200);}ngAfterViewInit(){this.generate();}generate(){this.container||this.alert.set({message:"Container not found",type:pe.Error,timeout:5e3}),console.log(this.container.nativeElement);let r=new _e(this.container),o=new Map(),a=new pt().encode("Hello, World!",we.DATA_MATRIX,500,500);console.log(a);try{let c=r.write(this.data.id,200,200,o);}catch(c){this.alert.set({message:`${c}`,type:pe.Error,timeout:5e3});}}};e.ɵfac=function(o){return new(o||e)(y($),y(Z),y(X));},e.ɵcmp=B({type:e,selectors:[["sz-medisy-laboratory-analysis-qr"]],viewQuery:function(o,i){if(o&1&&De(Pt,5),o&2){let a;Le(a=Ne())&&(i.container=a.first);}},inputs:{minHeight:[fe.SignalBased,"minHeight"],minWidth:[fe.SignalBased,"minWidth"]},standalone:!0,features:[V([]),W,Y],decls:5,vars:2,consts:[[3,"header"],["container",""],[3,"actions"]],template:function(o,i){o&1&&(C(0,"sz-ui-dialog-header",0),x(1,"mat-dialog-content"),C(2,"div",null,1),b(),C(4,"sz-ui-dialog-actions",2)),o&2&&(I("header",i.header),F(4),I("actions",i.actions));},dependencies:[q,P,J,re,ee,te],encapsulation:2});let n=e;return n;})();var Mt=(()=>{let e=class e extends tt{constructor(r,o,i,a){super(i),this.mlabService=r,this.fb=o,this.dialog=i,this.data=a,this.form=o.group({note:[a?.note,[]]});}submit(){this.IsValid()&&this.data&&this.save(this.mlabService.analyses.update(this.data.id,Ie(Ae({},this.data),{note:this.form.value.note})));}};e.ɵfac=function(o){return new(o||e)(y(O),y($),y(Z),y(X));},e.ɵcmp=B({type:e,selectors:[["sz-medisy-laboratory-analysis-save"]],standalone:!0,features:[V([O]),W,Y],decls:5,vars:3,consts:()=>{let r;return r="\u0645\u0644\u0627\u062D\u0638\u0629",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","note","label",r],[3,"actions"]];},template:function(o,i){o&1&&(C(0,"sz-ui-dialog-header",0),x(1,"mat-dialog-content")(2,"form",1),C(3,"sz-ui-form-field-input",2),b()(),C(4,"sz-ui-dialog-actions",3)),o&2&&(I("header",i.header),F(2),I("formGroup",i.form),F(2),I("actions",i.actions));},dependencies:[q,Pe,Be,Ve,je,ze,P,J,re,ee,te,$e,Ye],encapsulation:2});let n=e;return n;})();var zt=()=>[se],Ht=()=>[ce],kt=()=>[ne];function Gt(n,e){if(n&1&&C(0,"sz-medisy-people-person-card",5),n&2){let t=be(2);I("personId",t.analysis.personId);}}function Wt(n,e){n&1&&(H(0,Gt,1,1),U(1,0,kt),Q());}function Ut(n,e){n&1&&C(0,"sz-medisy-laboratory-analysis-tests");}function Qt(n,e){n&1&&C(0,"sz-medisy-laboratory-analysis-specimens");}var Et=(()=>{let e=class e{constructor(r,o,i,a){this.dialog=r,this.route=o,this.router=i,this.mlabService=a,this.alert$=Re(void 0),this.tiles=[],this.analysisMenu=Xe.more([he.edit(()=>this.openSaveComponent()),k.divider(),he.print(()=>this.opendPrintComponent),k.item(me.publish,"publish",this.openPublishComponent),k.divider(),k.item(me.qr,Ze.qr,()=>this.openQRCodeComponent())]),this.analysis=this.route.snapshot.data.analysis;}openSaveComponent(){this.dialog.open(Mt,{data:this.analysis}).afterClosed().pipe(de(1)).subscribe(r=>{r&&(this.analysis=r);});}opendPrintComponent(){}openPublishComponent(){}openQRCodeComponent(){this.dialog.open(_t,{data:this.analysis}).afterClosed().pipe(de(1)).subscribe({});}};e.ɵfac=function(o){return new(o||e)(y(Ue),y(He),y(ke),y(O));},e.ɵcmp=B({type:e,selectors:[["sz-medisy-laboratory-analysis"]],features:[V([O,Je])],decls:12,vars:4,consts:()=>{let r;r="\u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631\u0627\u062A";let o;return o="\u0627\u0644\u0639\u064A\u0646\u0627\u062A",[[3,"title","subtitle","menu"],[1,"sz-grid-card","tw-my-4"],["mat-stretch-tabs","false"],["label",r],["label",o],[3,"personId"]];},template:function(o,i){o&1&&(C(0,"sz-ui-header-info",0),x(1,"div",1),H(2,Wt,3,0),b(),x(3,"mat-tab-group",2)(4,"mat-tab",3),H(5,Ut,1,0),U(6,5,zt),Q(),b(),x(8,"mat-tab",4),H(9,Qt,1,0),U(10,9,Ht),Q(),b()()),o&2&&(I("title",i.analysis.code)("subtitle",i.analysis.note)("menu",i.analysisMenu),F(2),xe(2,i.analysis.personId?2:-1));},dependencies:[mt,ht,K],encapsulation:2});let n=e;return n;})();var At=[{path:"",component:Et},{path:"tests",loadComponent:()=>import("./chunk-KUHLKWXK.js").then(n=>n.AnalysisTestsComponent)},{path:"specimens",loadComponent:()=>import("./chunk-A6KXAVOB.js").then(n=>n.AnalysisSpecimensComponent)}];var Xn=(()=>{let e=class e{};e.ɵfac=function(o){return new(o||e)();},e.ɵmod=Te({type:e}),e.ɵinj=Oe({providers:[O],imports:[Fe,Ge.forChild(At),P,We,Qe,rt,vt,K,Ke,qe,se,ce,ne]});let n=e;return n;})();export{Et as AnalysisComponent,Xn as AnalysisModule};/**i18n:93110c93724266b1c17cde4cedf877a4f3393465ad71eafcdf9d2e9828471749*/