import{a as Oe,b as pe,c as me,d as Me,e as ue}from"./chunk-H4K2CSXH.js";import{a as le,b as Se,c as T,f as Te,g as Ee,h as de}from"./chunk-QSKC3G63.js";import"./chunk-2KPNCTCB.js";import"./chunk-S7INMPNY.js";import"./chunk-25IBV356.js";import{b as re,f as ae,g as ie,h as ne,j as se,k as _e}from"./chunk-SQCF3S47.js";import{a as N}from"./chunk-XY5F7KAL.js";import"./chunk-RSYANUDV.js";import{b as K}from"./chunk-CFSVEDI7.js";import{a as q,b as w,d as j,e as H,g as Q}from"./chunk-FRBT2WCB.js";import{c as W,p as Z,q as A,r as ee}from"./chunk-ZTT2CFXD.js";import"./chunk-HLTWUKSH.js";import"./chunk-276RQCOC.js";import"./chunk-2IPEL4E4.js";import{d as p,f as v,g as $,l as z,n as V,q as F,r as G,t as U}from"./chunk-FY76SKRQ.js";import{a as te,b as O,c as oe}from"./chunk-IDQKS733.js";import"./chunk-RCHOHS2G.js";import"./chunk-W75G3ZKH.js";import"./chunk-5MQKWJS4.js";import{a as f}from"./chunk-N4MQQJHL.js";import"./chunk-FJ4IFQWV.js";import{p as X,s as k,v as x,x as b}from"./chunk-4I74CWZL.js";import"./chunk-LLSKOB3G.js";import"./chunk-OWRQBV6B.js";import{Ma as J}from"./chunk-3AQJ5CSK.js";import{G as B,Jb as i,Kb as a,Lb as E,Vb as d,Wb as C,bb as S,ja as s,mb as D,n as Y,na as u,nc as c,yb as n}from"./chunk-YAUSGWXJ.js";import{i as h}from"./chunk-QXHRBTK3.js";var ce=_=>r=>r.pipe(B(m=>{let e="";if(m.error instanceof ErrorEvent)e=m.error.message;else if(m){let t=m;e=t.error.message??t.message??t.statusText,console.log(t.error.code);}return _.open(e,f.close),Y(()=>e);}));var fe=(()=>{let r=class r extends ae{constructor(){let e=s(q);super(e),this.mlabService=s(N),this.fb=s(G),this.data=s(w),this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"],filterBehavior:x.Or,filters:b.create().equalIf("id",this.data.laboratoryTestType?.testTypeId).notAny("laboratories.laboratoryId",[this.data.laboratoryId]).filters()}),this.laboratories=this.mlabService.laboratories.getAll({orderBy:["name"],filters:b.create().notEqual("id",this.data.laboratoryId).filters()}),this.testTypeSelectConfig={},this.transferOutLaboratorySelectConfig={emptyOption:!0};let t=this.fb;this.dialog=e;let o=this.data;this.form=t.group({enabled:[o.laboratoryTestType?.enabled??!0,[p.required]],transferInPrice:[o.laboratoryTestType?.transferInPrice??0,[]],transferInEnabled:[o.laboratoryTestType?.transferInEnabled??!0,[p.required]],transferOutEnabled:[o.laboratoryTestType?.transferOutEnabled??!0,[p.required]],transferOutLaboratoryId:[o.laboratoryTestType?.transferOutLaboratoryId,[]],price:[o.laboratoryTestType?.price??0,[]],isFavorite:[o.laboratoryTestType?.isFavorite??!1,[p.required]],testTypeId:[o.laboratoryTestType?.testTypeId,[p.required]]});}submit(){this.IsValid()&&(this.data.laboratoryTestType?this.save(this.mlabService.laboratories.testTypes.update(this.data.laboratoryId,this.data.laboratoryTestType?.id,this.form.value)):this.save(this.mlabService.laboratories.testTypes.create(this.data.laboratoryId,this.form.value)));}};r.ɵfac=function(t){return new(t||r)();},r.ɵcmp=u({type:r,selectors:[["sz-medisy-laboratory-laboratory-test-types-save"]],standalone:!0,features:[D,c],decls:28,vars:11,consts:()=>{let e;e="\u0646\u0645\u0637 \u0627\u062E\u062A\u0628\u0627\u0631";let t;t="\u0627\u0644\u0633\u0639\u0631";let o;o="\u0627\u0644\u0633\u0639\u0631";let M;M="\u0627\u0644\u0645\u062E\u0628\u0631";let R;R="\u0645\u0641\u0639\u0644";let y;y="\u0645\u0641\u0636\u0644\u0629";let L;L="\u062A\u062D\u0648\u064A\u0644 \u0625\u0644\u0649";let g;g="\u0645\u0641\u0639\u0644";let I;I="\u062A\u062D\u0648\u064A\u0644 \u0644\u0644\u062E\u0627\u0631\u062C";let P;return P="\u0645\u0641\u0639\u0644",[R,y,L,g,I,P,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testTypeId","label",e,3,"source","config"],[1,"sz-form-row"],["formControlName","enabled"],["formControlName","isFavorite"],["formControlName","price","label",t,3,"type"],["multi","",1,"tw-mb-4"],["formControlName","transferInEnabled"],["formControlName","transferInPrice","label",o,3,"type"],["formControlName","transferOutEnabled"],["formControlName","transferOutLaboratoryId","label",M,3,"source","config"],[3,"actions"]];},template:function(t,o){t&1&&(E(0,"sz-ui-dialog-header",6),i(1,"mat-dialog-content")(2,"form",7),E(3,"sz-ui-form-field-select",8),i(4,"div",9)(5,"mat-checkbox",10),d(6,0),a(),i(7,"mat-checkbox",11),d(8,1),a()(),i(9,"div",9),E(10,"sz-ui-form-field-input",12),a(),E(11,"div",9),i(12,"mat-accordion",13)(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title"),d(16,2),a()(),i(17,"mat-checkbox",14),d(18,3),a(),E(19,"sz-ui-form-field-input",15),a(),i(20,"mat-expansion-panel")(21,"mat-expansion-panel-header")(22,"mat-panel-title"),d(23,4),a()(),i(24,"mat-checkbox",16),d(25,5),a(),E(26,"sz-ui-form-field-select",17),a()()()(),E(27,"sz-ui-dialog-actions",18)),t&2&&(n("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),S(2),n("formGroup",o.form),S(),n("source",o.testTypes)("config",o.testTypeSelectConfig),S(7),n("type","number"),S(9),n("type","number"),S(7),n("source",o.laboratories)("config",o.transferOutLaboratorySelectConfig),S(),n("actions",o.actions));},dependencies:[U,z,v,$,V,F,_e,ie,ne,Q,H,A,Z,ue,Me,Oe,pe,me,W,ee],encapsulation:2});let _=r;return _;})();var lt=(()=>{let r=class r{constructor(){this.dialog=s(j),this.mlabService=s(N),this.route=s(X),this.snackbar=s(K),this.dataSource=new Te("testType.nameEn"),this.laboratory=this.route.snapshot.data.laboratory,this.appBarConfig={title:f.test_types,subtitle:this.laboratory.name,backEnabled:!0,menu:oe.default().setItems([O.add(this.openSaveComponent.bind(this)),O.menu([O.search()])])},this.dataSource.columnDefs.push(T.uuid("id"),T.uuid("testTypeId"),T.icon("isFavorite").setValueGetter(te.star).setValueStyle(e=>e.isFavorite?"font-variation-settings: 'FILL' 1":"font-variation-settings: 'FILL' 0").addClassClickable().setClickFn(e=>{e.isFavorite=!e.isFavorite,this.updateItem(e);}).setResponsive(!0),T.string("testType.nameEn"),T.date("createdAt").setResponsive(!0),T.date("updatedAt").setVisible(!1),T.boolean("enabled").setChangeFn((e,t)=>h(this,null,function*(){e.enabled=t,this.updateItem(e);})).setResponsive(!0),T.menu([O.edit(this.openSaveComponent.bind(this)),O.divider(),O.delete(this.openLaboratoryTestTypeDeleteComponent.bind(this))])),this.get();}openSaveComponent(e){this.dialog.open(fe,{data:{laboratoryId:this.laboratory.id,laboratoryTestType:e}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openLaboratoryTestTypeDeleteComponent(e){this.dialog.open(se,{data:re.delete(this.mlabService.laboratories.testTypes.delete(e.laboratoryId,e.id),e)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}updateItem(e){this.mlabService.laboratories.testTypes.update(e.laboratoryId,e.id,e).pipe(ce(this.snackbar)).subscribe(t=>{this.dataSource.update(t);});}get(){this.mlabService.laboratories.testTypes.get(this.laboratory.id,this.dataSource.getQuery()).pipe(Ee(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};r.ɵfac=function(t){return new(t||r)();},r.ɵcmp=u({type:r,selectors:[["sz-medisy-laboratory-laboratory-test-types"]],standalone:!0,features:[c],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(t,o){t&1&&(i(0,"sz-ui-table-bar",0),C("changed",function(){return o.get();}),a(),i(1,"sz-ui-table",1),C("update",function(){return o.get();}),a()),t&2&&(n("config",o.appBarConfig)("dataSource",o.dataSource),S(),n("dataSource",o.dataSource));},dependencies:[k,de,Se,le,A,J],encapsulation:2});let _=r;return _;})();export{lt as LaboratoryTestTypesComponent};/**i18n:359c45a37699f2cf41ff2ce7681094fb8642750bd9400ade44324692d4b7d733*/