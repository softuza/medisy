import{a as H}from"./chunk-SNXVHJPL.js";import{a as u}from"./chunk-L32DGXVR.js";import{d as $,f as G,g as j,j as q}from"./chunk-PZKBJF27.js";import{a as R,b as Y,e as z,g as B}from"./chunk-XVBW2NXQ.js";import{j as P,s as V}from"./chunk-3TS2FCSR.js";import{b as T}from"./chunk-NKNPU2OE.js";import{d as m,f as O,g as h,l as L,n as C,q as M,r as N,u as F}from"./chunk-FZWGPJMH.js";import{t as v}from"./chunk-XJIHXQS5.js";import{Eb as A,Jb as E,Kb as g,Lb as d,Yb as b,bb as s,cb as l,na as y,nc as I,oc as D,qb as S,vb as c,zb as n}from"./chunk-PYVMXLJZ.js";import{a as f,b as p}from"./chunk-JEP22SXD.js";function w(a,i){if(a&1&&d(0,"sz-ui-form-field-select",3),a&2){let _=b();n("source",_.laboratories)("config",_.transferOutLaboratorySelectConfig);}}var le=(()=>{let i=class i extends ${constructor(o,r,t,X){super(r),this.fb=o,this.dialog=r,this.mlabService=t,this.data=X,this.laboratories=null,this.laboratoryOptionValueFn=e=>e,this.testTypesFilters=[],this.laboratoryId=this.data,this.transferOutLaboratorySelectConfig={emptyOption:!0},this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,p(f({query:""},T.minimal()),{orderBy:["-isFavorite","testType.nameEn"]})),this.testTypeAutocompleteConfig={valueChangedFn:e=>{if(typeof e=="string")this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,p(f({query:e},T.minimal()),{orderBy:["-isFavorite","testType.nameEn"]}));else if(typeof e=="object"&&e)return!1;return!0;},optionSelectedFn:e=>{this.form.patchValue({transferOutLaboratoryId:null}),e.transferOutLaboratoryId?this.form.controls.transferOutLaboratoryId.addValidators(m.required):this.form.controls.transferOutLaboratoryId.removeValidators(m.required),e.transferOutEnabled&&(this.laboratories=this.mlabService.laboratories.getAll({orderBy:["name"],filters:v.create().notEqual("id",this.data).equalIf("id",e.transferOutLaboratoryId).any("testTypes.testTypeId",e.testTypeId).any("testTypes.enabled",!0).any("testTypes.transferInEnabled",!0).filters()}));},optionValueFn:e=>e,optionContentFn:e=>e.testType.nameEn,optionDisplayWithFn:e=>e.testType.nameEn},this.form=o.group({transferOutLaboratoryId:[null,[]],testType:o.control(null,[m.required,H()])});}isTranferOutEnabled(){return this.form.value?.testType?.transferOutEnabled;}submit(){this.IsValid()&&this.dialog.close({laboratoryTestType:this.form.value.testType,transferOutLaboratoryId:this.form.getRawValue().transferOutLaboratoryId});}};i.ɵfac=function(r){return new(r||i)(l(N),l(R),l(u),l(Y));},i.ɵcmp=y({type:i,selectors:[["sz-medisy-laboratory-analysis-test-type-add"]],standalone:!0,features:[I([u]),S,D],decls:6,vars:8,consts:()=>{let o;o="\u0646\u0645\u0637 \u0627\u062E\u062A\u0628\u0627\u0631";let r;return r="\u0627\u0644\u0645\u062E\u0628\u0631 \u0627\u0644\u062E\u0627\u0631\u062C\u064A \u0627\u0644\u0645\u062D\u0648\u0644 \u0644\u0647",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testType","label",o,3,"source","config"],["formControlName","transferOutLaboratoryId","label",r,3,"source","config"],[3,"actions"]];},template:function(r,t){r&1&&(d(0,"sz-ui-dialog-header",0),E(1,"mat-dialog-content")(2,"form",1),d(3,"sz-ui-form-field-autocomplete",2),c(4,w,1,2,"sz-ui-form-field-select",3),g()(),d(5,"sz-ui-dialog-actions",4)),r&2&&(n("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),s(2),n("formGroup",t.form),s(),n("source",t.testTypes)("config",t.testTypeAutocompleteConfig),s(),A(t.isTranferOutEnabled()?4:-1),s(),n("actions",t.actions));},dependencies:[F,L,O,h,C,M,B,z,q,G,j,V,P],encapsulation:2});let a=i;return a;})();export{le as a};/**i18n:9a231b4582429c944649e8e63178e27ef5affdefd33047215a35f6d5720bbd24*/