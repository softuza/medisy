import{a as Se}from"./chunk-PZYEH7BU.js";import"./chunk-XPKR54HE.js";import"./chunk-Q5UQMEQ3.js";import{a as E}from"./chunk-A4SLM5BL.js";import{a as p,b as Ne,d as ge,f as Ae,i as Te,j as Le}from"./chunk-BHRUDZVP.js";import"./chunk-QGCND4BW.js";import"./chunk-GG3YYMUI.js";import"./chunk-K6SJQ5CU.js";import{a as S}from"./chunk-UPED42KZ.js";import{e as Ee,f as Me,g as Re,i as Ce,j as L,k as Oe}from"./chunk-TEJYWJVO.js";import"./chunk-JVYAAVKL.js";import{a as T}from"./chunk-QQTY7BQF.js";import{d as fe,h as I}from"./chunk-BZYUV3OB.js";import{a as ee,b as te,d as N,e as oe,g}from"./chunk-JTU2TQPP.js";import"./chunk-X5AOE4DT.js";import{a as le,b as se,o as A,q as _e,s as pe,t as de}from"./chunk-3LAMONKN.js";import{c as me}from"./chunk-E4OGVLDJ.js";import"./chunk-44LIDNAH.js";import"./chunk-3SHS3FQH.js";import{d as ue}from"./chunk-ZPWMR5AU.js";import{h as re,i as ie,k as ce}from"./chunk-2ENG53AX.js";import{b as Y,d as C,f as j,g as X,j as w,k,m as q,p as x,q as H,s as W,t as Q}from"./chunk-DF4JKNTM.js";import{t as K}from"./chunk-EGVPX6ID.js";import{a as O,e as J}from"./chunk-SJINDKNX.js";import"./chunk-MHEQHB7U.js";import{ha as Z,ia as ne,ka as ae}from"./chunk-J4WSEAYB.js";import"./chunk-LVWMBWQL.js";import{Db as s,Hc as G,Ib as V,Ma as F,Nb as u,Ob as _,Pb as c,Zb as B,_b as R,hb as m,ib as l,ka as b,l as D,pc as f,qc as $,ta as y,ua as d,ub as U,va as z,zb as P}from"./chunk-E7ZYNPHN.js";function ye(i,t){i&1&&(u(0,"div",4)(1,"mat-form-field",5)(2,"label"),c(3,"input",8),_()(),u(4,"mat-form-field",5)(5,"label"),c(6,"input",9),_()()());}function ze(i,t){i&1&&(u(0,"mat-form-field",5)(1,"label"),c(2,"input",10),_()());}var Ie=(()=>{let t=class t extends Ee{constructor(o,e,r,n){super(r),this.mlabService=o,this.fb=e,this.dialog=r,this.data=n,this.referenceGroups=this.mlabService.referenceGroups.getAll({orderBy:["nameEn"],filters:K.create().notAny("referenceValueRules.referenceValueId",[this.data.referenceValueId]).filters()}),this.comparisonOperators=Object.keys(E).map(a=>E[a]),this.form=e.group({description:[n.referenceValueRule?.description,[C.maxLength(4096)]],comparisonOperator:new w(n.referenceValueRule?.comparisonOperator??E.Equal,[C.required]),referenceGroupId:[n.referenceValueRule?.referenceGroupId,[C.required]],value:[n.referenceValueRule?.value,[]],start:[n.referenceValueRule?.start,[]],end:[n.referenceValueRule?.end,[]]});}isRange(){return this.form.value.comparisonOperator===E.RangeWithBoundaries||this.form.value.comparisonOperator===E.RangeWithoutBoundaries;}submit(){this.IsValid()&&(this.data.referenceValueRule?this.save(this.mlabService.referenceValues.rules.update(this.data.referenceValueId,this.data.referenceValueRule.id,this.form.value)):this.save(this.mlabService.referenceValues.rules.create(this.data.referenceValueId,this.form.value)));}};t.ɵfac=function(e){return new(e||t)(l(S),l(H),l(ee),l(te));},t.ɵcmp=d({type:t,selectors:[["sz-medisy-laboratory-reference-value-rules-save"]],standalone:!0,features:[f([]),U,$],decls:9,vars:10,consts:()=>{let o;o="\u0627\u0644\u0641\u0626\u0629 \u0627\u0644\u0645\u0631\u062C\u0639\u064A\u0629";let e;e="\u0627\u0644\u0639\u0645\u0644\u064A\u0629";let r;r="\u0627\u0644\u0648\u0635\u0641";let n;n="\u0628\u062F\u0627\u064A\u0629";let a;a="\u0646\u0647\u0627\u064A\u0629";let v;return v="\u0642\u064A\u0645\u0629",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","referenceGroupId","label",o,3,"source"],["formControlName","comparisonOperator","label",e,3,"source","localizedValue"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["formControlName","description","label",r],[3,"actions"],["autocomplete","off","formControlName","start","matInput","","placeholder",n],["autocomplete","off","formControlName","end","matInput","","placeholder",a],["autocomplete","off","formControlName","value","matInput","","placeholder",v]];},template:function(e,r){e&1&&(c(0,"sz-ui-dialog-header",0),u(1,"mat-dialog-content")(2,"form",1),c(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3),P(5,ye,7,0,"div",4)(6,ze,3,0,"mat-form-field",5),c(7,"sz-ui-form-field-textarea",6),_()(),c(8,"sz-ui-dialog-actions",7)),e&2&&(s("title",r.title)("subtitle",r.subtitle)("alert",r.alert()),m(2),s("formGroup",r.form),m(),s("source",r.referenceGroups),m(),s("source",r.comparisonOperators)("localizedValue",!0),m(),V(5,r.isRange()?5:-1),m(),V(6,r.isRange()?-1:6),m(2),s("actions",r.actions));},dependencies:[Q,k,Y,j,X,q,x,se,le,re,g,oe,ie,A,L,Me,Re,de,pe,_e],encapsulation:2});let i=t;return i;})();var he=(()=>{let t=class t{constructor(o,e,r,n){this.dialog=o,this.route=e,this.mlabService=r,this.locale=n,this.dataSource=new ge(),this.referenceValueId=F.required(),this.dataSource.columnDefs.push(p.uuid("id"),p.string("referenceGroup.nameEn").setValueClassFontBold().setStacked(p.string("referenceGroup.description").setStyleSmall()),p.enum("comparisonOperator").setValueGetter(a=>ue(a.comparisonOperator)),p.number("_value").setValueGetter(a=>a.value!==null?a.value:`${a.start} - ${a.end}`).setHeaderSortable(!1),p.date("createdAt").setVisible(!1),p.date("updatedAt").setVisible(!1),Ne.menu([I.edit(a=>this.openSaveComponent(a)),I.delete(a=>{this.openReferenceValueRuleDeleteComponent(a);})]));}ngOnInit(){this.get();}openSaveComponent(o){this.dialog.open(Ie,{data:{referenceValueId:this.referenceValueId(),referenceValueRule:o}}).afterClosed().subscribe(e=>{this.dataSource.addOrUpdateItem(e);});}openReferenceValueRuleDeleteComponent(o){this.dialog.open(Ce,{data:Oe.delete(this.mlabService.referenceValues.rules.delete(o.referenceValueId,o.id),o)}).afterClosed().subscribe(e=>{this.dataSource.delete(e);});}get(){this.mlabService.referenceValues.rules.get(this.referenceValueId(),this.dataSource.getQuery()).pipe(me(this.dataSource.indicator)).subscribe(o=>{this.dataSource.set(o.items,o.count);});}};t.ɵfac=function(e){return new(e||t)(l(N),l(O),l(S),l(G));},t.ɵcmp=d({type:t,selectors:[["sz-medisy-laboratory-reference-value-rules"]],inputs:{referenceValueId:[y.SignalBased,"referenceValueId"]},features:[f([])],decls:5,vars:3,consts:()=>{let o;return o="\u0625\u0636\u0627\u0641\u0629",[o,[3,"changed","dataSource"],["mat-flat-button","","color","primary","start","",3,"click"],[3,"update","stateEnabled","dataSource"]];},template:function(e,r){e&1&&(u(0,"sz-ui-table-search-filter",1),R("changed",function(){return r.get();}),u(1,"button",2),R("click",function(){return r.openSaveComponent();}),u(2,"span"),B(3,0),_()()(),u(4,"sz-ui-table",3),R("update",function(){return r.get();}),_()),e&2&&(s("dataSource",r.dataSource),m(4),s("stateEnabled",!0)("dataSource",r.dataSource));},dependencies:[ne,Te,Ae],encapsulation:2});let i=t;return i;})();var ve=(()=>{let t=class t{constructor(o,e){this.dialog=o,this.route=e,this.alert$=new D(),this.referenceValue=this.route.snapshot.data.referenceValue;}};t.ɵfac=function(e){return new(e||t)(l(N),l(O));},t.ɵcmp=d({type:t,selectors:[["sz-medisy-laboratory-reference-value"]],features:[f([])],decls:2,vars:4,consts:[[3,"title","subtitle","backEnabled"],[3,"referenceValueId"]],template:function(e,r){e&1&&c(0,"sz-ui-app-bar",0)(1,"sz-medisy-laboratory-reference-value-rules",1),e&2&&(s("title",r.referenceValue.testType.nameEn)("subtitle",r.referenceValue.description)("backEnabled",!0),m(),s("referenceValueId",r.referenceValue.id));},dependencies:[T,he],encapsulation:2});let i=t;return i;})();var De=[{path:"",component:ve}];var jt=(()=>{let t=class t{};t.ɵfac=function(e){return new(e||t)();},t.ɵmod=z({type:t}),t.ɵinj=b({providers:[S],imports:[W,J.forChild(De),g,A,fe,Z,ae,ce,Le,Se,L,T]});let i=t;return i;})();export{jt as ReferenceValueModule};/**i18n:4432d5f57c128b53336b8fd28b2fbe1004e12689cc8828aeca1747c1f33ed32a*/