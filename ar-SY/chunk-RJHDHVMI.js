import{a as Le,b as ye,c as $e}from"./chunk-JEUTT6H6.js";import{a as A,b as Me,d as ge,f as Fe,k as he,l as Re}from"./chunk-FWC3CCRR.js";import"./chunk-AY7PXSCZ.js";import"./chunk-E7V2G3VZ.js";import{e as Ce,f as pe,g as Ie,i as ce,j as Ee,k as Pe}from"./chunk-EZC2CU7X.js";import{b as de,c as ue}from"./chunk-OA72TFHI.js";import"./chunk-RACJZOAS.js";import{b as g}from"./chunk-HKZIVJYM.js";import{g as F}from"./chunk-PNII32UO.js";import{a as ne,b as _e,d as re,e as ae,g as M}from"./chunk-V6ACGGWJ.js";import{l as me,p as Ne,q as Ae,r as fe}from"./chunk-VBUQVK7Q.js";import{c as Te}from"./chunk-IYSGQK54.js";import"./chunk-D4OS2O7B.js";import"./chunk-QTM2YACZ.js";import{c as Oe}from"./chunk-2W3OIU7Y.js";import{i as se}from"./chunk-OIFHB67M.js";import{d as S,f as H,g as J,k as K,m as Q,p as W,q as Y,t as ee}from"./chunk-H52WVCBC.js";import"./chunk-4HG3UR3K.js";import{c as oe,e as te}from"./chunk-YYZRSXTZ.js";import"./chunk-TZDP466F.js";import{a as Se,c as le}from"./chunk-B3RLTRYJ.js";import{ha as ie}from"./chunk-PMB5EPNY.js";import{s as w}from"./chunk-2HDHH4PW.js";import{Ab as I,Fb as s,Gb as N,Hb as m,M as C,Rb as q,Tb as c,Vb as E,ea as G,fa as X,g as D,gb as T,hb as O,hc as P,ka as Z,kc as k,oa as p,ob as x,pa as j,rb as B,vb as a}from"./chunk-UDYUYOMJ.js";var f=(()=>{let o=class o extends ue{constructor(e){super(e,"softuza-notification"),this.notifications=new de(this.http,`${this.basePath}/v1/notifications`);}};o.ɵfac=function(i){return new(i||o)(Z(w));},o.ɵprov=G({token:o,factory:o.ɵfac});let t=o;return t;})();var l=function(t){return t.Email="Email",t.Sms="Sms",t.Push="Push",t;}(l||{});function De(t,o){if(t&1&&(s(0,"mat-tab",5),m(1,"sz-ui-form-field-input",9)(2,"sz-ui-form-field-input",10)(3,"sz-ui-form-field-input",11)(4,"sz-ui-form-field-textarea",12),N()),t&2){let d=E();a("formGroup",d.formEmail);}}function Ge(t,o){if(t&1&&(s(0,"mat-tab",6),m(1,"sz-ui-form-field-input",13)(2,"sz-ui-form-field-textarea",14),N()),t&2){let d=E();a("formGroup",d.formSms);}}function Xe(t,o){if(t&1&&(s(0,"mat-tab",7),m(1,"sz-ui-form-field-input",15)(2,"sz-ui-form-field-textarea",16),N()),t&2){let d=E();a("formGroup",d.formPush);}}var ze=(()=>{let o=class o extends Ce{constructor(e,i,n,_){super(n),this.sntiService=e,this.fb=i,this.dialog=n,this.data=_,this.notificationType=l,this.subscriptions=new D(),this.notificationTypes=Object.keys(l).map(u=>l[u]),this.formEmail=i.group({subject:[_?.email?.subject,[S.required]],replyToEmail:[_?.email?.replyToEmail,[S.email]],replyToName:[_?.email?.replyToName,[]],body:[_?.email?.body,[S.required]]}),this.formSms=i.group({originator:[_?.sms?.originator,[S.required]],body:[_?.sms?.body,[S.required]]}),this.formPush=i.group({title:[_?.push?.title,[S.required]],body:[_?.push?.body,[S.required]]}),this.form=i.group({name:[_?.name,[S.required]],description:[_?.description,[S.maxLength(4096)]],types:[_?.types??[],[S.required]]}),this.subscribeChanges();}ngOnDestroy(){this.subscriptions.unsubscribe();}subscribeChanges(){this.subscriptions.add(this.form.controls.types.valueChanges.subscribe(e=>{this.form.contains("email")?e?.includes(l.Email)||this.form.removeControl("email"):e?.includes(l.Email)&&this.form.addControl("email",this.formEmail),this.form.contains("sms")?e?.includes(l.Sms)||this.form.removeControl("sms"):e?.includes(l.Sms)&&this.form.addControl("sms",this.formSms),this.form.contains("push")?e?.includes(l.Push)||this.form.removeControl("push"):e?.includes(l.Push)&&this.form.addControl("push",this.formPush);}));}hasChannelType(e){return this.form.value.types?.includes(e);}submit(){this.IsValid()&&(this.data?this.save(this.sntiService.notifications.update(this.data.id,this.form.value)):this.save(this.sntiService.notifications.create(this.form.value)));}};o.ɵfac=function(i){return new(i||o)(O(f),O(Y),O(ne),O(_e));},o.ɵcmp=p({type:o,selectors:[["medisy-laboratory-reference-values-save"]],standalone:!0,features:[P([]),x,k],decls:11,vars:9,consts:()=>{let e;e="\u0627\u0644\u0627\u0633\u0645";let i;i="\u0627\u0644\u0648\u0635\u0641";let n;n="\u0627\u0644\u0623\u0646\u0645\u0627\u0637";let _;_="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let u;u="\u0631\u0633\u0627\u0644\u0629 \u0646\u0635\u064A\u0629";let R;R="\u0627\u0634\u0639\u0627\u0631";let L;L="\u0627\u0644\u0645\u0648\u0636\u0648\u0639";let y;y="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let $;$="\u0627\u0644\u0627\u0633\u0645";let b;b="\u0627\u0644\u0645\u062D\u062A\u0648\u0649";let z;z="\u0627\u0644\u0645\u0631\u0633\u0644";let U;U="\u0627\u0644\u0645\u062D\u062A\u0648\u0649";let V;V="\u0627\u0644\u0644\u0642\u0628";let v;return v="\u0627\u0644\u0645\u062D\u062A\u0648\u0649",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",i],["formControlName","types","label",n,3,"source","localizedValue","multiple"],["label",_,3,"formGroup"],["label",u,3,"formGroup"],["label",R,3,"formGroup"],[3,"actions"],["formControlName","subject","label",L],["formControlName","replyToEmail","label",y],["formControlName","replyToName","label",$],["formControlName","body","label",b],["formControlName","originator","label",z],["formControlName","body","label",U],["formControlName","title","label",V],["formControlName","body","label",v]];},template:function(i,n){i&1&&(m(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"sz-ui-form-field-select",4),s(6,"mat-tab-group"),B(7,De,5,1,"mat-tab",5)(8,Ge,3,1,"mat-tab",6)(9,Xe,3,1,"mat-tab",7),N()()(),m(10,"sz-ui-dialog-actions",8)),i&2&&(a("header",n.header),T(2),a("formGroup",n.form),T(3),a("source",n.notificationTypes)("localizedValue",!0)("multiple",!0),T(2),I(7,n.hasChannelType(n.notificationType.Email)?7:-1),T(),I(8,n.hasChannelType(n.notificationType.Sms)?8:-1),T(),I(9,n.hasChannelType(n.notificationType.Push)?9:-1),T(),a("actions",n.actions));},dependencies:[ee,K,H,J,Q,W,M,ae,se,$e,Le,ye,Ee,pe,Ie,fe,me,Ae,Ne],encapsulation:2});let t=o;return t;})();var Ue=(()=>{let o=class o{constructor(e,i,n){this.dialog=e,this.sntiService=i,this.router=n,this.title=Oe.notifications,this.dataSource=new ge(),this.dataSource.columns.push(A.uuid("id"),A.hyperlink("name",_=>this.router.navigate([`/mlab/notification/${_.id}`])),A.string("description"),A.string("types"),A.date("createdAt",!1),A.date("updatedAt",!1),Me.menu([F.edit(_=>this.openSaveComponent(_)),F.delete(_=>this.openNotificationDeleteComponent(_))])),this.get();}openSaveComponent(e){this.dialog.open(ze,{data:e}).afterClosed().pipe(C(1)).subscribe(i=>{this.dataSource.addOrUpdateItem(i);});}openNotificationDeleteComponent(e){this.dialog.open(ce,{data:Pe.delete(this.sntiService.notifications.delete(e.id),e)}).afterClosed().pipe(C(1)).subscribe(i=>{this.dataSource.delete(i);});}get(){this.sntiService.notifications.get(this.dataSource.buildRequest()).pipe(Te(this.dataSource.indicator),C(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(i){return new(i||o)(O(re),O(f),O(oe));},o.ɵcmp=p({type:o,selectors:[["softuza-notification-notifications"]],features:[P([])],decls:6,vars:4,consts:()=>{let e;return e="\u0625\u0636\u0627\u0641\u0629",[[3,"title"],[3,"dataSource","changed"],["mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(i,n){i&1&&(m(0,"sz-ui-header-info",0),s(1,"sz-ui-table-search-filter",1),c("changed",function(){return n.get();}),s(2,"button",2),c("click",function(){return n.openSaveComponent();}),s(3,"span"),q(4,3),N()()(),s(5,"sz-ui-table",4),c("update",function(){return n.get();}),N()),i&2&&(a("title",n.title),T(),a("dataSource",n.dataSource),T(4),a("stateEnabled",!0)("dataSource",n.dataSource));},dependencies:[Se,he,Fe,g],encapsulation:2});let t=o;return t;})();var Ve=[{path:"",component:Ue}];var Do=(()=>{let o=class o{};o.ɵfac=function(i){return new(i||o)();},o.ɵmod=j({type:o}),o.ɵinj=X({providers:[f],imports:[te.forChild(Ve),M,le,Re,g,ie]});let t=o;return t;})();export{Do as NotificationsModule};/**i18n:441d79d171ba4e8fb8b617de1ef68214357f23bb2b2895fddc1630aee38796c8*/