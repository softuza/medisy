import{a as q}from"./chunk-Q7YRED3C.js";import{a as d}from"./chunk-BC6TH3PO.js";import{d as G,f as V,g as j,j as H}from"./chunk-TIPWNHVX.js";import{a as Y,b as v,e as z,g as B}from"./chunk-Z2LVGH3F.js";import{j as P,s as $}from"./chunk-7O3A3MFP.js";import{b as u}from"./chunk-KCMCGJDS.js";import{d as D,f as O,g as h,l as L,n as C,q as M,r as N,u as F}from"./chunk-WH3JX6YX.js";import{t as R}from"./chunk-HWVQOC2X.js";import{Eb as c,Jb as A,Kb as E,Lb as m,Yb as b,bb as s,cb as l,na as _,nc as g,oc as I,qb as y,vb as S,zb as n}from"./chunk-ID6V6OOS.js";import{a as f,b as p}from"./chunk-YPLVL3HC.js";function w(a,i){if(a&1&&m(0,"sz-ui-form-field-select",3),a&2){let T=b();n("source",T.laboratories)("config",T.transferOutLaboratorySelectConfig);}}var le=(()=>{let i=class i extends G{constructor(r,o,t,X){super(o),this.fb=r,this.dialog=o,this.mlabService=t,this.data=X,this.laboratories=null,this.laboratoryOptionValueFn=e=>e,this.testTypesFilters=[],this.laboratoryId=this.data,this.transferOutLaboratorySelectConfig={emptyOption:!0},this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,p(f({query:""},u.minimal()),{orderBy:["-isFavorite","testType.nameEn"]})),this.testTypeAutocompleteConfig={valueChangedFn:e=>{if(typeof e=="string")this.testTypes=this.mlabService.laboratories.testTypes.get(this.laboratoryId,p(f({query:e},u.minimal()),{orderBy:["-isFavorite","testType.nameEn"]}));else if(typeof e=="object"&&e)return!1;return!0;},optionSelectedFn:e=>{this.form.patchValue({transferOutLaboratoryId:e.transferOutLaboratoryId}),e.transferOutLaboratoryId?this.form.controls.transferOutLaboratoryId.disable():this.form.controls.transferOutLaboratoryId.enable(),e.transferOutEnabled&&(this.laboratories=this.mlabService.laboratories.getAll({orderBy:["name"],filters:R.create().notEqual("id",this.data).any("testTypes.testTypeId",e.testTypeId).any("testTypes.enabled",!0).any("testTypes.transferInEnabled",!0).filters()}));},optionValueFn:e=>e,optionContentFn:e=>e.testType.nameEn,optionDisplayWithFn:e=>e.testType.nameEn},this.form=r.group({transferOutLaboratoryId:[null,[]],testType:r.control(null,[D.required,q()])});}isTranferOutEnabled(){return this.form.value?.testType?.transferOutEnabled;}submit(){this.IsValid()&&this.dialog.close({laboratoryTestType:this.form.value.testType,transferOutLaboratoryId:this.form.getRawValue().transferOutLaboratoryId});}};i.ɵfac=function(o){return new(o||i)(l(N),l(Y),l(d),l(v));},i.ɵcmp=_({type:i,selectors:[["sz-medisy-laboratory-analysis-test-type-add"]],standalone:!0,features:[g([d]),y,I],decls:6,vars:8,consts:()=>{let r;r="\u0646\u0645\u0637 \u0627\u062E\u062A\u0628\u0627\u0631";let o;return o="\u0627\u0644\u0645\u062E\u0628\u0631 \u0627\u0644\u062E\u0627\u0631\u062C\u064A \u0627\u0644\u0645\u062D\u0648\u0644 \u0644\u0647",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","testType","label",r,3,"source","config"],["formControlName","transferOutLaboratoryId","label",o,3,"source","config"],[3,"actions"]];},template:function(o,t){o&1&&(m(0,"sz-ui-dialog-header",0),A(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-autocomplete",2),S(4,w,1,2,"sz-ui-form-field-select",3),E()(),m(5,"sz-ui-dialog-actions",4)),o&2&&(n("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),s(2),n("formGroup",t.form),s(),n("source",t.testTypes)("config",t.testTypeAutocompleteConfig),s(),c(t.isTranferOutEnabled()?4:-1),s(),n("actions",t.actions));},dependencies:[F,L,O,h,C,M,B,z,H,V,j,$,P],encapsulation:2});let a=i;return a;})();export{le as a};/**i18n:4821e1b9962cdddbef9c2ff89937dbb197b2343c5ff627ac1e6724c8725e235e*/