import{a as E}from"./chunk-D2JYHEJT.js";import{a as d}from"./chunk-GK4LJXH7.js";import{a as _}from"./chunk-3B4R46GQ.js";import{a as P,b as V,c as r,f as w,g as A,h as k}from"./chunk-F37TLDOJ.js";import"./chunk-EI54IRV4.js";import"./chunk-XKXHDOYY.js";import"./chunk-CFNJPKH2.js";import{b as H,j as I,k as j}from"./chunk-ZUXIOQ5W.js";import"./chunk-BJI27WIG.js";import{d as T,g as D}from"./chunk-XPOR4ANW.js";import"./chunk-XJQPGDXO.js";import"./chunk-H6HLHFPT.js";import"./chunk-PYOUUVMA.js";import"./chunk-OLKWA3AP.js";import"./chunk-H2FFMEH6.js";import{b as i,c as F}from"./chunk-Y3WFFMAX.js";import{a as N}from"./chunk-HFWKIQYR.js";import"./chunk-NTRRBKKS.js";import"./chunk-AILLJ5BU.js";import"./chunk-QHVUL2KY.js";import{a as m}from"./chunk-TCPYXQGZ.js";import{r as v,s as M}from"./chunk-TW5J4YO6.js";import"./chunk-KRMUG4G6.js";import"./chunk-OEH6HIG5.js";import{Ia as y,La as B}from"./chunk-OIZYHDJE.js";import{Jb as u,Kb as l,Wb as c,bb as C,ea as S,ja as s,mc as b,na as h,nc as z,oa as g,yb as p}from"./chunk-GTR6A7KK.js";import"./chunk-NLUW4JS2.js";var f=(()=>{let t=class t{constructor(){this.cstnService=s(d),this.dialog=s(T),this.router=s(v),this.dataSource=new w("name"),this.appBarConfig={title:m.teams,menu:F.default().setItems([i.add(this.openSaveComponent.bind(this)),i.menu([i.search()])])},this.dataSource.columnDefs.push(r.uuid("id"),r.hyperlink("name").setClickFn(e=>this.router.navigate([_.Projects,e.id])).setHeaderSortable(!0),r.number("employeesCount").setValueGetter(e=>e.employees?.length).setHeaderName(m.employees).setHeaderSortable(!1),r.number("groupsCount").setValueGetter(e=>e.groups?.length).setHeaderName(m.groups).setHeaderSortable(!1),r.date("createdAt").setVisible(!1),r.date("updatedAt").setVisible(!1),r.menu([i.edit(this.openSaveComponent.bind(this)),i.divider(),i.delete(this.openTeamDeleteComponent.bind(this))])),this.get()}openSaveComponent(e){this.dialog.open(E,{data:e}).afterClosed().subscribe(o=>{this.dataSource.addOrUpdateItem(o)})}openTeamDeleteComponent(e){this.dialog.open(I,{data:H.delete(this.cstnService.teams.delete(e.id),e)}).afterClosed().subscribe(o=>{this.dataSource.delete(o)})}get(){this.cstnService.teams.get(this.dataSource.getQuery()).pipe(A(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count)})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=h({type:t,selectors:[["sz-constr-construction-teams"]],standalone:!0,features:[b([]),z],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(o,n){o&1&&(u(0,"sz-ui-table-bar",0),c("changed",function(){return n.get()}),l(),u(1,"sz-ui-table",1),c("update",function(){return n.get()}),l()),o&2&&(p("config",n.appBarConfig)("dataSource",n.dataSource),C(),p("dataSource",n.dataSource))},dependencies:[P,V],encapsulation:2});let a=t;return a})();var pe=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=g({type:t}),t.\u0275inj=S({providers:[d],imports:[M.forChild([{path:"",component:f}]),D,y,B,k,j,N,f]});let a=t;return a})();export{pe as TeamsModule};
/**i18n:71c33448fc84035c6ee56f25f20b16a3c311d1f911de884d4bce9857c4574a16*/
