import{a as Z}from"./chunk-7QAL6T4K.js";import{a as _}from"./chunk-OM2CZFHP.js";import{a,b as re,d as ne,e as ae,g as se,j as le,k as me}from"./chunk-UFZOVEXN.js";import"./chunk-KG52U4YG.js";import"./chunk-BVIAW6LA.js";import"./chunk-WB6GSLJI.js";import{e as x,f as ee,g as te,i as oe,j as M,k as ie}from"./chunk-ATQTF7V2.js";import{a as E}from"./chunk-XTD4P5RM.js";import{h as g}from"./chunk-SE7A63UJ.js";import{a as G,b as Q,d as q,e as X,g as T}from"./chunk-KXHITGXF.js";import{e as w,t as J,u as K,w as W,x as Y}from"./chunk-OTWXCUGL.js";import"./chunk-NUTQJXHI.js";import"./chunk-BVTPLI23.js";import{c as H}from"./chunk-MJ3OXUGM.js";import"./chunk-EFKI6RZJ.js";import{d as O,f as A,g as v,l as P,n as D,q as U,r as $,u as y}from"./chunk-4JGOPH4G.js";import"./chunk-UFIT6BFN.js";import{c as V,e as F}from"./chunk-MRA43Y7M.js";import"./chunk-47AE3CN4.js";import{ia as B,ja as j,la as k}from"./chunk-6PMHIRG3.js";import"./chunk-73YOCJBM.js";import{Jb as m,Kb as u,Lb as S,Vb as b,Wb as f,bb as s,cb as l,ea as h,ja as c,na as C,nc as N,oa as L,oc as z,qb as R,zb as n}from"./chunk-S5HBEIU3.js";import"./chunk-K67PUIM2.js";var _e=(()=>{let i=class i extends x{constructor(o,t,e){super(t),this.fb=o,this.dialog=t,this.data=e,this.cstnService=c(_),this.employees=this.cstnService.employees.getAll({orderBy:["name"]}),this.operatorSelectConfig={emptyOption:!0},this.form=o.group({name:[e?.name,[O.required,O.minLength(1)]],description:[e?.description,[]],plateNumber:[e?.plateNumber,[]],serialNumber:[e?.serialNumber,[]],operatorId:[e?.operatorId,[]]});}submit(){this.IsValid()&&(this.data?this.save(this.cstnService.equipment.update(this.data.id,this.form.value)):this.save(this.cstnService.equipment.create(this.form.value)));}};i.ɵfac=function(t){return new(t||i)(l($),l(G),l(Q));},i.ɵcmp=C({type:i,selectors:[["sz-constr-construction-projects-save"]],standalone:!0,features:[N([]),R,z],decls:9,vars:7,consts:()=>{let o;o="\u0627\u0644\u0627\u0633\u0645";let t;t="\u0627\u0644\u0648\u0635\u0641";let e;e="\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062A\u0633\u0644\u0633\u0644\u064A";let p;p="\u0631\u0642\u0645 \u0627\u0644\u0644\u0648\u062D\u0629";let I;return I="\u0627\u0644\u0639\u0627\u0645\u0644",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",o],["formControlName","description","label",t],["formControlName","serialNumber","label",e],["formControlName","plateNumber","label",p],["formControlName","operatorId","label",I,3,"source","config"],[3,"actions"]];},template:function(t,e){t&1&&(S(0,"sz-ui-dialog-header",0),m(1,"mat-dialog-content")(2,"form",1),S(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"sz-ui-form-field-input",4)(6,"sz-ui-form-field-input",5)(7,"sz-ui-form-field-select",6),u()(),S(8,"sz-ui-dialog-actions",7)),t&2&&(n("title",e.title)("subtitle",e.subtitle)("alert",e.alert()),s(2),n("formGroup",e.form),s(5),n("source",e.employees)("config",e.operatorSelectConfig),s(),n("actions",e.actions));},dependencies:[y,P,A,v,D,U,T,X,J,M,ee,te,Y,w,W,K],encapsulation:2});let r=i;return r;})();var pe=(()=>{let i=class i{constructor(o,t){this.dialog=o,this.router=t,this.cstnService=c(_),this.dataSource=new ne("name"),this.appBarConfig={title:H.equipment},this.dataSource.columnDefs.push(a.uuid("id"),a.hyperlink("name",e=>`${Z.EquipmentList}/${e.id}`).setHeaderSortable(!0).setStacked(a.string("plateNumber").setValueClassFontSmall()),a.string("operator.name").setHeaderSortable(!0).setStacked(a.string("operator.primaryPhone").setValueClassFontSmall()),a.string("serialNumber").setResponsive(!0),a.date("createdAt").setVisible(!1),a.date("updatedAt").setVisible(!1),re.menu([g.edit(e=>this.openSaveComponent(e)),g.delete(e=>this.openEquipmentDeleteComponent(e))])),this.get();}openSaveComponent(o){this.dialog.open(_e,{data:o}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openEquipmentDeleteComponent(o){this.dialog.open(oe,{data:ie.delete(this.cstnService.equipment.delete(o.id),o)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}get(){this.cstnService.equipment.get(this.dataSource.getQuery()).pipe(ae(this.dataSource.state)).subscribe(o=>{this.dataSource.set(o.items,o.count);});}};i.ɵfac=function(t){return new(t||i)(l(q),l(V));},i.ɵcmp=C({type:i,selectors:[["sz-constr-construction-equipment-list"]],features:[N([])],decls:6,vars:3,consts:()=>{let o;return o="\u0625\u0636\u0627\u0641\u0629",[o,[3,"config"],[3,"changed","dataSource"],["title","","mat-flat-button","","color","primary","start","",3,"click"],[3,"update","dataSource"]];},template:function(t,e){t&1&&(S(0,"sz-ui-app-bar",1),m(1,"sz-ui-table-search-filter",2),f("changed",function(){return e.get();}),m(2,"button",3),f("click",function(){return e.openSaveComponent();}),m(3,"span"),b(4,0),u()()(),m(5,"sz-ui-table",4),f("update",function(){return e.get();}),u()),t&2&&(n("config",e.appBarConfig),s(),n("dataSource",e.dataSource),s(4),n("dataSource",e.dataSource));},dependencies:[j,le,se,E],encapsulation:2});let r=i;return r;})();var nt=(()=>{let i=class i{};i.ɵfac=function(t){return new(t||i)();},i.ɵmod=L({type:i}),i.ɵinj=h({providers:[_],imports:[F.forChild([{path:"",component:pe}]),T,B,k,me,M,E]});let r=i;return r;})();export{nt as EquipmentListModule};/**i18n:3415fba6ca40c85db6a6c1f427335a940d891078c77c172d8c69b98bbabeac73*/