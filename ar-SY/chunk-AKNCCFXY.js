import{b as w}from"./chunk-EM6CCPUU.js";import{a as I}from"./chunk-PHBEQOP6.js";import{a as o,b as R,d as V,e as j,j as L,k as W}from"./chunk-BOUFJEHO.js";import{b as _,h as E}from"./chunk-ZMRTG2CO.js";import{a as T}from"./chunk-MTZWD4KU.js";import{i as B,k as F}from"./chunk-VSSKGV6R.js";import{e as D,h as s,j as A}from"./chunk-7LPVSDDF.js";import{d as C}from"./chunk-7V5K6Q5S.js";import{c as v,d as M}from"./chunk-MB66MPUF.js";import{a as h,e as z}from"./chunk-6WV2F64L.js";import{la as g}from"./chunk-RQYEI74F.js";import{Fa as l,Kb as u,Lb as S,Xb as f,bb as c,cb as r,na as p,oc as y,pc as b,zb as d}from"./chunk-6DKTNWLB.js";var ae=(()=>{let a=class a{constructor(e,t,n){this.route=e,this.dialog=t,this.mlabService=n,this.analysis=l.required(),this.dataSource=new V,this.card={header:{title:v.specimens},menu:A.more([s.add(()=>this.openCreateComponent())])},this.dataSource.columnDefs.push(o.uuid("id"),o.icon("specimen.state").setValueGetter(i=>w(i.specimen.state)).setValueTooltip(i=>M(i.specimen.state)),o.number("specimen.code").setStyleSmall(),o.string("specimen.type.nameEn"),o.date("createdAt").setVisible(!1),o.date("updatedAt").setVisible(!1),R.menu([s.barcode(i=>this.openBarcodeWriterComponent(i)),D.divider(),s.delete(i=>this.openAnalysisSpecimenDeleteComponent(i))]))}ngOnInit(){this.get()}openAnalysisSpecimenDeleteComponent(e){this.dialog.open(B,{data:F.delete(this.mlabService.analyses.specimens.delete(e.analysisId,e.id),e)}).afterClosed().subscribe(t=>{this.dataSource.delete(t)})}openBarcodeWriterComponent(e){this.dialog.open(E,{data:{format:_.DATA_MATRIX,msg:`specimenid.${e.id}`}}).afterClosed().subscribe({})}openCreateComponent(){}get(){this.mlabService.analyses.specimens.get(this.analysis().id,this.dataSource.getQuery()).pipe(j(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count)})}};a.\u0275fac=function(t){return new(t||a)(r(h),r(C),r(T))},a.\u0275cmp=p({type:a,selectors:[["sz-medisy-laboratory-analysis-specimens"]],inputs:{analysis:[1,"analysis"]},standalone:!0,features:[y([]),b],decls:2,vars:3,consts:[[3,"card"],["content","",3,"update","paginationEnabled","dataSource"]],template:function(t,n){t&1&&(u(0,"sz-ui-card",0)(1,"sz-ui-table",1),f("update",function(){return n.get()}),S()()),t&2&&(d("card",n.card),c(),d("paginationEnabled",!1)("dataSource",n.dataSource))},dependencies:[z,W,L,g,I],encapsulation:2});let m=a;return m})();export{ae as a};
/**i18n:cc8d0044d806093be808d6b8741d081bf6b6d1e6fbd0e894171d30a61993b6a3*/
