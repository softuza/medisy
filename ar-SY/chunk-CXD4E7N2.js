import{a as l}from"./chunk-F3T3HJ24.js";import{e as pe}from"./chunk-ODCPWW3L.js";import{a as u,d as ne,e as le,f as se,i as me,j as N}from"./chunk-XEULOFBS.js";import"./chunk-2QTMKERI.js";import"./chunk-IHQG5GMW.js";import"./chunk-IXZ6DQ7B.js";import{b as ee,f as te,g as ie,h as ae,j as oe,k as re}from"./chunk-WTX7CTBX.js";import{a as Z}from"./chunk-K4OUI2I7.js";import{j as d,k as Y}from"./chunk-56JEG75R.js";import{a as k,b as q,d as C,e as x,g as _}from"./chunk-HBLN4P7Q.js";import{c as Q,p as J,q as v,r as K,t as W}from"./chunk-7LMGUYSN.js";import"./chunk-O7K6RJUU.js";import"./chunk-SIEE5NVR.js";import"./chunk-JF3ETUTM.js";import"./chunk-C46I2LQQ.js";import"./chunk-SLUFCTGK.js";import{d as I,f as L,g as B,l as y,n as F,q as G,r as $,u as j}from"./chunk-MG47MIP7.js";import{Y as H,r as w,t as U}from"./chunk-4TPPKEJT.js";import{a as T,d as E}from"./chunk-LG4R76EB.js";import"./chunk-ZR32ULJR.js";import{ia as X,la as M}from"./chunk-X5U2H5U7.js";import"./chunk-2ETGTTNK.js";import{Jb as s,Kb as m,Lb as p,Vb as P,Wb as O,ab as c,bb as g,ea as z,ja as r,mc as h,na as f,nc as S,oa as R,pb as D,yb as n}from"./chunk-5WGYIALG.js";import"./chunk-URPFZQKB.js";var de=(()=>{let e=class e extends te{constructor(a,t,i){super(t),this.fb=a,this.dialog=t,this.data=i,this.srptService=r(l),this.baseTemplateVariables=this.srptService.baseTemplates.variables.getAll(this.data.baseTemplateId,{orderBy:["name"],filterBehavior:w.Or,filters:U.create().equalIf("id",this.data.templateVariable?.baseTemplateVariableId).notAny("templates.templateId",this.data.templateId).filters()}),this.form=a.group({enabled:[i.templateVariable?.enabled??!0,[I.required]],description:[i.templateVariable?.description,[]],baseTemplateVariableId:[i.templateVariable?.baseTemplateVariableId,[I.required]],value:[i.templateVariable?.value,[]]});}submit(){this.IsValid()&&(this.data.templateVariable?this.save(this.srptService.templates.variables.update(this.data.templateId,this.data.templateVariable?.id,this.form.value)):this.save(this.srptService.templates.variables.create(this.data.templateId,this.form.value)));}};e.ɵfac=function(t){return new(t||e)(g($),g(k),g(q));},e.ɵcmp=f({type:e,selectors:[["sz-mgmt-reporting-template-variables-save"]],standalone:!0,features:[h([l]),D,S],decls:9,vars:6,consts:()=>{let a;a="\u0627\u0644\u0645\u062A\u063A\u064A\u0631";let t;t="\u0642\u064A\u0645\u0629";let i;return i="\u0645\u0641\u0639\u0644",[i,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","baseTemplateVariableId","label",a,3,"source"],["formControlName","value","label",t],[1,"sz-form-row"],["formControlName","enabled"],[3,"actions"]];},template:function(t,i){t&1&&(p(0,"sz-ui-dialog-header",1),s(1,"mat-dialog-content")(2,"form",2),p(3,"sz-ui-form-field-select",3)(4,"sz-ui-form-field-input",4),s(5,"div",5)(6,"mat-checkbox",6),P(7,0),m()()()(),p(8,"sz-ui-dialog-actions",7)),t&2&&(n("title",i.title)("subtitle",i.subtitle)("alert",i.alert()),c(2),n("formGroup",i.form),c(),n("source",i.baseTemplateVariables),c(5),n("actions",i.actions));},dependencies:[j,y,L,B,F,G,re,ie,ae,_,x,v,J,pe,W,Q,K],encapsulation:2});let o=e;return o;})();var ue=(()=>{let e=class e{constructor(){this.dialog=r(C),this.srptService=r(l),this.route=r(T),this.dataSource=new ne("baseTemplateVariable.name"),this.template=this.route.snapshot.data.template,this.appBarConfig={title:H.variables,subtitle:this.template.name,menu:Y.default().setItems([d.add(this.openSaveComponent.bind(this)),d.menu([d.search()])])},this.dataSource.columnDefs.push(u.uuid("id"),u.string("baseTemplateVariable.name"),u.string("value"),u.date("createdAt").setVisible(!1),u.date("updatedAt").setVisible(!1),u.menu([d.edit(this.openSaveComponent.bind(this)),d.divider(),d.delete(this.openTemplateVariableDeleteComponent.bind(this))])),this.get();}openSaveComponent(a){this.dialog.open(de,{data:{templateId:this.template.id,baseTemplateId:this.template.baseTemplateId,templateVariable:a}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openTemplateVariableDeleteComponent(a){this.dialog.open(oe,{data:ee.delete(this.srptService.templates.variables.delete(a.templateId,a.id),a)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}get(){this.srptService.templates.variables.get(this.template.id,this.dataSource.getQuery()).pipe(le(this.dataSource.state)).subscribe(a=>{this.dataSource.set(a.items,a.count);});}};e.ɵfac=function(t){return new(t||e)();},e.ɵcmp=f({type:e,selectors:[["sz-mgmt-reporting-template-variables"]],standalone:!0,features:[S],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(t,i){t&1&&(s(0,"sz-ui-table-bar",0),O("changed",function(){return i.get();}),m(),s(1,"sz-ui-table",1),O("update",function(){return i.get();}),m()),t&2&&(n("config",i.appBarConfig)("dataSource",i.dataSource),c(),n("dataSource",i.dataSource));},dependencies:[E,N,me,se,v,M],encapsulation:2});let o=e;return o;})();var V=(()=>{let e=class e{constructor(){this.route=r(T),this.dialog=r(C),this.srptService=r(l),this.template=this.route.snapshot.data.template,this.appBarConfig={title:this.template.name,subtitle:this.template.description};}};e.ɵfac=function(t){return new(t||e)();},e.ɵcmp=f({type:e,selectors:[["sz-mgmt-reporting-template"]],standalone:!0,features:[h([]),S],decls:3,vars:1,consts:[[3,"config"],[1,"tw-my-4"]],template:function(t,i){t&1&&(p(0,"sz-ui-app-bar",0),s(1,"div",1),p(2,"sz-mgmt-reporting-template-variables"),m()),t&2&&n("config",i.appBarConfig);},dependencies:[_,M,N,Z,X,ue],encapsulation:2});let o=e;return o;})();var ft=(()=>{let e=class e{};e.ɵfac=function(t){return new(t||e)();},e.ɵmod=R({type:e}),e.ɵinj=z({providers:[l],imports:[E.forChild([{path:"",component:V}]),_,M,V]});let o=e;return o;})();export{ft as TemplatesModule};/**i18n:64f0a82fe8883fe2832a834cd098ce75d23bf770c70b5a88fbadf3a791ffdbcf*/