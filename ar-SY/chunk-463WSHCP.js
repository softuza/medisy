import{a as nt}from"./chunk-LC7R5JJV.js";import{a as P,b as at}from"./chunk-VWXBHWSP.js";import{a as rt}from"./chunk-LYHIR24B.js";import{d as Ue,f as Xe,g as je,j as k}from"./chunk-HLLQHMN3.js";import{a as Te,b as Ie,c as Re,d as De,e as ye,f as Fe,j as Le,k as ve,l as be,m as ze,n as Ye,o as $e}from"./chunk-7LSJKDZJ.js";import{a as A}from"./chunk-BG2A7CNR.js";import{a as G}from"./chunk-MDSSYVUI.js";import{a as Ge,b as we,d as Be,e as ke,g as Y}from"./chunk-XVVRHKJW.js";import"./chunk-5FPHEJQ4.js";import{b as j}from"./chunk-FW5ZUJKN.js";import{a as Ve,b as qe,c as Ke,d as Qe,g as We,i as Je,k as Ze,l as et,m as tt,n as it,o as ot}from"./chunk-FFJZ25PW.js";import"./chunk-CP6SNK6A.js";import{d as He}from"./chunk-S2JVRKMZ.js";import{b as B,c as xe}from"./chunk-OI3RYSYI.js";import{D as v,E as b,b as D,f as me,g as y,h as pe,l as de,m as _e,n as ce,o as ue,p as Se,s as F,t as ge,v as Pe,w as L,x as Ae,z as Oe}from"./chunk-WLSYRODT.js";import{a as $}from"./chunk-YF2PEFAH.js";import"./chunk-424JH55D.js";import{a as g}from"./chunk-OFOYSQTQ.js";import{a as w}from"./chunk-6S4N3MHV.js";import{E as fe,H as Me,I as Ee,La as Ce,Oa as he,Ta as Ne,Ua as z,m as R}from"./chunk-2EUQTENK.js";import{$b as N,Ab as s,Bb as f,Fb as oe,L as E,Lb as _,Ob as u,Qb as re,Ub as C,Vb as h,Wb as X,Xb as ne,Yb as M,_a as ee,da as Q,db as l,dc as T,eb as p,ec as I,ic as ae,jc as se,la as S,lb as O,lc as le,ma as W,ob as m,qa as J,ra as Z,ub as te,vb as ie,wb as H,xb as x,yb as U,zb as a}from"./chunk-5RJFZK6E.js";var ct=["input"];function ut(r,o){if(r&1){let d=oe();a(0,"mat-chip-row",7),u("removed",function(){let i=J(d).$implicit,n=re();return Z(n.remove(i));}),h(1),T(2,"personName"),a(3,"button",8)(4,"mat-icon"),h(5,"cancel"),s()()();}if(r&2){let d=o.$implicit;l(1),ne(" ",I(2,1,d)," ");}}function St(r,o){if(r&1&&(a(0,"mat-option",9)(1,"div",10)(2,"span"),h(3),T(4,"personName"),s(),a(5,"small"),h(6),T(7,"personAge"),s()()()),r&2){let d=o.$implicit;m("value",d),l(3),X(I(4,3,d)),l(3),X(I(7,5,d==null?null:d.birthDate));}}function ft(r,o){r&1&&(a(0,"mat-error"),_(1,11),s());}var st=(()=>{let o=class o extends Fe{constructor(t,e,i,n){super(t),this.ngControl=t,this.mpplService=e,this.personNamePipe=i,this.personAgePipe=n,this.items=[],this.selections=[],this.separatorKeysCodes=[13,188],this.indicator=ee(!0),this.filter=g.paged(1,10),this.totalPages=-1,this.displayFn=c=>{if(!c)return"";let q=this.personNamePipe.transform(c),K=this.personAgePipe.transform(c?.birthDate);return K?`${q}, ${K}`:`${q}`;};}ngOnInit(){this.control=this.ngControl.control,this.listenChanges();}listenChanges(){this.control.valueChanges.pipe(xe(400)).subscribe(t=>{this.handleValueChanged(t);});}handleValueChanged(t){if(this.reset(),typeof t=="string"){let e=t.split(" ");e.length===2?(this.filter.query=e[0],this.filter.lastName=e[1]):this.filter.query=e[0];}this.get();}add(){this.control.setValue(this.selections.map(t=>t.id));}remove(t){let e=this.selections.indexOf(t);e>=0&&this.selections.splice(e,1);}optionSelected(t){this.selections.push(t.option.value),this.input.nativeElement.value="",this.control.setValue(this.selections.map(e=>e.id));}scroll(){this.filter.pageIndex<this.totalPages&&(++this.filter.pageIndex,this.get());}reset(){this.filter=g.paged(1,10),this.totalPages=-1,this.items=[];}get(){this.mpplService.persons.get(this.filter).pipe(E(1),B(this.indicator)).subscribe(t=>{this.items.push(...t.items),this.totalPages=t.totalPages;});}};o.ɵfac=function(e){return new(e||o)(p(me,10),p(G),p(A),p(P));},o.ɵcmp=S({type:o,selectors:[["medisy-form-field-persons-search"]],viewQuery:function(e,i){if(e&1&&se(ct,5),e&2){let n;ae(n=le())&&(i.input=n.first);}},standalone:!0,features:[M([G,P,A]),O,N],decls:14,vars:7,consts:()=>{let t;t="\u0627\u0644\u0627\u0633\u0645 \u0627\u0648 \u0627\u0644\u0647\u0627\u062A\u0641 \u0627\u0648 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let e;return e="\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628",[t,["aria-label","Fruit selection"],["chipGrid",""],["matInput","",3,"matAutocomplete","formControl","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["input",""],[3,"displayWith","szOptionsScrollIgnored","optionSelected","optionsScroll"],["auto","matAutocomplete"],[3,"removed"],["matChipRemove",""],[3,"value"],[1,"sz-form"],e];},template:function(e,i){if(e&1&&(a(0,"mat-form-field")(1,"mat-label"),_(2,0),s(),a(3,"mat-chip-grid",1,2),x(5,ut,6,3,"mat-chip-row",null,H),s(),a(7,"input",3,4),u("matChipInputTokenEnd",function(){return i.add();}),s(),a(9,"mat-autocomplete",5,6),u("optionSelected",function(c){return i.optionSelected(c);})("optionsScroll",function(){return i.scroll();}),x(11,St,8,7,"mat-option",9,H),s(),te(13,ft,2,0,"mat-error"),s()),e&2){let n=C(4),c=C(10);U(5,i.selections),l(7),m("matAutocomplete",c)("formControl",i.control)("matChipInputFor",n)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes),l(2),m("displayWith",i.displayFn)("szOptionsScrollIgnored",i.indicator()),U(11,i.items),l(4),ie(13,i.control.hasError("required")?13:-1);}},dependencies:[R,F,D,y,_e,b,v,L,Ae,Re,Te,Ce,Ie,ye,De,he,tt,Ze,et,We,Je,z,Ne,at,P,A],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]});let r=o;return r;})();var lt=(()=>{let o=class o extends Ue{constructor(t,e,i){super(e),this.fb=t,this.dialog=e,this.data=i,this.form=t.group({testGroupIds:[i.testGroupIds],laboratoryIds:[i.laboratoryIds],personIds:[i.personIds],startDate:[i.startDate],endDate:[i.endDate]});}submit(){this.IsValid()&&this.dialog?.close(this.form.value);}};o.ɵfac=function(e){return new(e||o)(p(Se),p(Ge),p(we));},o.ɵcmp=S({type:o,selectors:[["medisy-laboratory-analyses-filter"]],standalone:!0,features:[M([]),O,N],decls:16,vars:9,consts:()=>{let t;t="\u0627\u0644\u062A\u0627\u0631\u064A\u062E";let e;e="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629";let i;return i="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0646\u0647\u0627\u064A\u0629",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","testGroupIds",3,"multiple"],["formControlName","laboratoryIds",3,"multiple"],["formControlName","personIds"],[1,"tw-flex-1"],t,["startView","year",3,"rangePicker","comparisonStart","comparisonEnd"],["matStartDate","","placeholder",e,"formControlName","startDate"],["matEndDate","","placeholder",i,"formControlName","endDate"],["matSuffix","",3,"for"],["datePicker",""],[3,"actions"]];},template:function(e,i){if(e&1&&(f(0,"sz-ui-dialog-header",0),a(1,"mat-dialog-content")(2,"form",1),f(3,"medisy-form-field-test-group-select",2)(4,"medisy-form-field-laboratory",3)(5,"medisy-form-field-persons-search",4),a(6,"mat-form-field",5)(7,"mat-label"),_(8,6),s(),a(9,"mat-date-range-input",7),f(10,"input",8)(11,"input",9),s(),f(12,"mat-datepicker-toggle",10)(13,"mat-date-range-picker",null,11),s()()(),f(15,"sz-ui-dialog-actions",12)),e&2){let n=C(14);m("header",i.header),l(2),m("formGroup",i.form),l(1),m("multiple",!0),l(1),m("multiple",!0),l(5),m("rangePicker",n)("comparisonStart",i.form.controls.startDate.value)("comparisonEnd",i.form.controls.endDate.value),l(3),m("for",n),l(3),m("actions",i.actions);}},dependencies:[R,F,de,D,y,pe,ce,ue,Y,ke,b,v,L,Oe,k,Xe,je,nt,rt,st,$e,Le,ze,ve,be,Ye],encapsulation:2});let r=o;return r;})();var mt=(()=>{let o=class o{constructor(t,e,i){this.dialog=t,this.mlabService=e,this.route=i,this.dataSource=new qe(g.pagedSorted("-createdAt")),this.dataSource.addRows([Ke.default([Ve.hyperlink("code","\u0627\u0644\u0631\u0645\u0632",n=>n.id),j.createdAt(),j.menu([])])]),this.dataSource.updateFilterModel(this.route.snapshot.queryParams),this.get();}openFilterComponent(){this.dialog.open(lt,{data:this.dataSource.filterModel}).afterClosed().pipe(E(1)).subscribe(t=>{this.dataSource.updateFilterModel(t),this.get();});}get(){this.mlabService.analyses.get(this.dataSource.filterModel).pipe(B(this.dataSource.indicator),E(1)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};o.ɵfac=function(e){return new(e||o)(p(Be),p($),p(fe));},o.ɵcmp=S({type:o,selectors:[["medisy-laboratory-analyses"]],features:[M([])],decls:8,vars:4,consts:()=>{let t;t="\u0627\u0644\u062A\u062D\u0627\u0644\u064A\u0644";let e;return e="\u0625\u0636\u0627\u0641\u0629",[["start","",1,"sz-h5"],t,[3,"dataSource","search","filter"],["title","","mat-flat-button","","routerLink","create","color","primary","start",""],e,[3,"paginationEnabled","stateEnabled","dataSource","update"]];},template:function(e,i){e&1&&(a(0,"sz-ui-header-basic")(1,"h5",0),_(2,1),s()(),a(3,"sz-ui-table-filter",2),u("search",function(){return i.get();})("filter",function(){return i.openFilterComponent();}),a(4,"button",3)(5,"span"),_(6,4),s()()(),a(7,"sz-ui-table",5),u("update",function(){return i.get();}),s()),e&2&&(l(3),m("dataSource",i.dataSource),l(4),m("paginationEnabled",!0)("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[Me,it,Qe,w,ge],styles:[".column-status[_ngcontent-%COMP%], .mat-column-detail-status[_ngcontent-%COMP%], .mat-column-status[_ngcontent-%COMP%]:not(mat-header-cell){max-width:4px;margin-left:24px}.mat-column-status[_ngcontent-%COMP%]:not(mat-header-cell){background-color:#13a311}.mat-column-detail-status[_ngcontent-%COMP%]{background-color:#13a311}.mat-cell[_ngcontent-%COMP%]   .mat-column-status[_ngcontent-%COMP%]{padding-left:0}"]});let r=o;return r;})();var pt=[{path:"",component:mt},{path:"create",loadComponent:()=>import("./chunk-YKIQ3H5N.js").then(r=>r.CreateComponent)}];var Hi=(()=>{let o=class o{};o.ɵfac=function(e){return new(e||o)();},o.ɵmod=W({type:o}),o.ɵinj=Q({providers:[$],imports:[Ee.forChild(pt),Y,ot,k,w,He,z,Pe]});let r=o;return r;})();export{Hi as AnalysesModule};/**i18n:c47ea6c8e33fa0c222c20e616e96e45afbcc3267e1e4f83fbed9283c01f003ba*/