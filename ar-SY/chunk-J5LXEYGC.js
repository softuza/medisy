import{c}from"./chunk-L27VMUFG.js";import{a as te,b as ie,c as h,f as oe,g as re,h as ae}from"./chunk-NZKJWXZK.js";import"./chunk-MASQLJY7.js";import"./chunk-WBSZT2I7.js";import"./chunk-H5EQGLIB.js";import{b as Q,f as W,g as Y,h as Z,j as x,k as ee}from"./chunk-64Z6XY25.js";import{a as B,b as $,d as V,e as w,g as j}from"./chunk-EUNYKPOC.js";import"./chunk-FG3AVAWO.js";import"./chunk-KMCQXCO3.js";import"./chunk-C4J5TBOU.js";import{b as q,h as X,j as H,k as J}from"./chunk-ZOB3V3TQ.js";import{d as N,f as O,g as A,l as y,n as I,q as F,r as R,t as U}from"./chunk-USQL5QQD.js";import{b as g,c as K}from"./chunk-C5EOLJOL.js";import"./chunk-7K7VA33R.js";import"./chunk-WOJM3U6K.js";import"./chunk-O4KNQSPV.js";import"./chunk-744UEIY4.js";import"./chunk-RSBGIIQJ.js";import{s as P}from"./chunk-HLIBWIZS.js";import"./chunk-RQBT3Y2P.js";import"./chunk-NUYQF36V.js";import{Ba as L,Ma as k}from"./chunk-AQ5S2ZT4.js";import{Fb as b,Hb as D,Ia as M,Ib as v,Jb as u,Kb as l,Lb as f,Vb as G,Wb as S,bb as m,gc as z,hc as T,ja as a,mb as C,mc as E,na as p,nc as d,yb as n}from"./chunk-AV7NLUC7.js";import"./chunk-KTHPDEKM.js";function me(r,i){if(r&1&&(u(0,"mat-option",4),z(1),l()),r&2){let _=i.$implicit;n("value",_.id),m(),T(_.name);}}var ne=(()=>{let i=class i extends W{constructor(){let e=a(B);super(e),this.accessManagementService=a(c),this.fb=a(R),this.user=a($),this.groups=[];let t=this.fb;this.dialog=e,this.form=t.group({groupId:[null,[N.required]]}),this.getGroups();}flattenGroups(e){let t=[];function o(s){t.push({id:s.id,name:s.name,path:s.path,subGroups:[]}),s.subGroups&&s.subGroups.forEach(o);}return e.forEach(o),t;}getGroups(){this.accessManagementService.getGroups().subscribe(e=>{this.groups=this.flattenGroups(e);});}submit(){this.IsValid()&&this.accessManagementService.addUserGroup(this.user.id,this.form.value.groupId).subscribe(()=>{this.dialog.close(!0);});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=p({type:i,selectors:[["sz-iam-users-user-group-add"]],standalone:!0,features:[C,d],decls:10,vars:5,consts:()=>{let e;return e="\u0627\u0644\u0645\u062C\u0645\u0648\u0639\u0627\u062A",[e,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","groupId"],[3,"value"],[3,"actions"]];},template:function(t,o){t&1&&(f(0,"sz-ui-dialog-header",1),u(1,"mat-dialog-content")(2,"form",2)(3,"mat-form-field")(4,"mat-label"),G(5,0),l(),u(6,"mat-select",3),D(7,me,2,2,"mat-option",4,b),l()()()(),f(9,"sz-ui-dialog-actions",5)),t&2&&(n("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),m(2),n("formGroup",o.form),m(5),v(o.groups),m(2),n("actions",o.actions));},dependencies:[U,y,O,A,I,F,j,w,ee,Y,Z,J,X,q,H,L],encapsulation:2});let r=i;return r;})();var Pe=(()=>{let i=class i{constructor(){this.dialog=a(V),this.adminService=a(c),this.user=M.required(),this.dataSource=new oe(),this.appBarConfig={title:"Groups",menu:K.default().setItems([g.add(this.openAddComponent.bind(this))])},this.dataSource.columnDefs.push(h.string("name").setValueGetter(e=>e.name),h.menu([g.delete(e=>this.openDeleteComponent(e))]));}ngOnInit(){this.get();}openDeleteComponent(e){this.dialog.open(x,{data:Q.delete(this.adminService.deleteUserGroup(this.user().id,e.id),e)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}openAddComponent(){this.dialog.open(ne,{data:this.user()}).afterClosed().subscribe(e=>{e&&this.get();});}get(){this.adminService.getUserGroups(this.user().id).pipe(re(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e,e.length);});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=p({type:i,selectors:[["sz-iam-users-user-groups"]],inputs:{user:[1,"user"]},standalone:!0,features:[E([]),d],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(t,o){t&1&&(u(0,"sz-ui-table-bar",0),S("changed",function(){return o.get();}),l(),u(1,"sz-ui-table",1),S("update",function(){return o.get();}),l()),t&2&&(n("config",o.appBarConfig)("dataSource",o.dataSource),m(),n("dataSource",o.dataSource));},dependencies:[P,ae,ie,te,k],encapsulation:2});let r=i;return r;})();export{Pe as UserGroupsComponent};/**i18n:50ea3fe509cd17fae4b4f2681518d0e2046a1e8153a99e97d70deb94a19aa4b2*/