import{a as $e,b as be,c as Ge}from"./chunk-BJVDHX2A.js";import{a as I,b as ge,d as he,f as Le,k as Fe,l as ye}from"./chunk-WAFKJ67S.js";import"./chunk-LUYVV6ZZ.js";import"./chunk-F67EX4OT.js";import{f as Ce,g as pe,h as ue,j as ce,k as Ee,l as Ae}from"./chunk-QMA7Y45E.js";import{b as Me,c as de}from"./chunk-WL4FKIHI.js";import"./chunk-CBIY2ZLG.js";import{b as h}from"./chunk-DVDPPXKO.js";import{j as L}from"./chunk-7ZCIBZRX.js";import{a as ne,b as re,d as _e,e as ae,g}from"./chunk-UN7ZV7OU.js";import{l as Ne,p as Oe,q as Ie,r as fe}from"./chunk-M6JNFYJK.js";import{c as me}from"./chunk-L2KLTZKL.js";import"./chunk-CJ662YDS.js";import"./chunk-RH3HJREX.js";import{c as Te}from"./chunk-4U6LIYO2.js";import{i as se}from"./chunk-3MHW6B4E.js";import{d as l,f as Q,g as J,k as K,m as W,p as Y,q as Z,t as ee}from"./chunk-U3CUVO3E.js";import"./chunk-72GYWXTT.js";import{c as oe,e as te}from"./chunk-D3PLXWXH.js";import"./chunk-IFFAZPN3.js";import{a as le,c as Se}from"./chunk-AHPLM44D.js";import{ia as ie}from"./chunk-Y7MZZUBM.js";import{s as H}from"./chunk-AD74A3E4.js";import{Cb as u,Hb as s,Ib as O,Jb as N,O as C,Tb as k,Vb as c,Xb as E,g as v,ga as B,ha as U,ib as m,jb as T,jc as A,ma as X,mc as w,qa as p,qb as x,ra as j,tb as q,xb as a}from"./chunk-MNGWH3SB.js";var f=(()=>{let o=class o extends de{constructor(e){super(e,"softuza-notification"),this.notifications=new Me(this.http,`${this.basePath}/v1/notifications`);}};o.ɵfac=function(i){return new(i||o)(X(H));},o.ɵprov=B({token:o,factory:o.ɵfac});let t=o;return t;})();var S=function(t){return t.Email="Email",t.Sms="Sms",t.Push="Push",t;}(S||{});function ve(t,o){if(t&1&&(s(0,"mat-tab",5),N(1,"sz-ui-form-field-input",9)(2,"sz-ui-form-field-input",10)(3,"sz-ui-form-field-input",11)(4,"sz-ui-form-field-textarea",12),O()),t&2){let M=E();a("formGroup",M.formEmail);}}function Be(t,o){if(t&1&&(s(0,"mat-tab",6),N(1,"sz-ui-form-field-input",13)(2,"sz-ui-form-field-textarea",14),O()),t&2){let M=E();a("formGroup",M.formSms);}}function Ue(t,o){if(t&1&&(s(0,"mat-tab",7),N(1,"sz-ui-form-field-input",15)(2,"sz-ui-form-field-textarea",16),O()),t&2){let M=E();a("formGroup",M.formPush);}}var Re=(()=>{let o=class o extends Ce{constructor(e,i,n,r){super(n),this.sntiService=e,this.fb=i,this.dialog=n,this.data=r,this.notificationType=S,this.subscriptions=new v(),this.notificationTypes=Object.keys(S).map(d=>S[d]),this.formEmail=i.group({subject:[r?.email?.subject,[l.required]],replyToEmail:[r?.email?.replyToEmail,[l.email]],replyToName:[r?.email?.replyToName,[]],body:[r?.email?.body,[l.required]]}),this.formSms=i.group({originator:[r?.sms?.originator,[l.required]],body:[r?.sms?.body,[l.required]]}),this.formPush=i.group({title:[r?.push?.title,[l.required]],body:[r?.push?.body,[l.required]]}),this.form=i.group({name:[r?.name,[l.required]],description:[r?.description,[l.maxLength(4096)]],types:[r?.types??[],[l.required]]}),this.subscribeChanges();}ngOnDestroy(){this.subscriptions.unsubscribe();}subscribeChanges(){this.subscriptions.add(this.form.controls.types.valueChanges.subscribe(e=>{this.form.contains("email")?e?.includes(S.Email)||this.form.removeControl("email"):e?.includes(S.Email)&&this.form.addControl("email",this.formEmail),this.form.contains("sms")?e?.includes(S.Sms)||this.form.removeControl("sms"):e?.includes(S.Sms)&&this.form.addControl("sms",this.formSms),this.form.contains("push")?e?.includes(S.Push)||this.form.removeControl("push"):e?.includes(S.Push)&&this.form.addControl("push",this.formPush);}));}hasChannelType(e){return this.form.value.types?.includes(e);}submit(){this.IsValid()&&(this.data?this.save(this.sntiService.notifications.update(this.data.id,this.form.value)):this.save(this.sntiService.notifications.create(this.form.value)));}};o.ɵfac=function(i){return new(i||o)(T(f),T(Z),T(ne),T(re));},o.ɵcmp=p({type:o,selectors:[["sz-mgmt-notification-ntofication-save"]],standalone:!0,features:[A([]),x,w],decls:11,vars:9,consts:()=>{let e;e="\u0627\u0644\u0627\u0633\u0645";let i;i="\u0627\u0644\u0648\u0635\u0641";let n;n="\u0627\u0644\u0623\u0646\u0645\u0627\u0637";let r;r="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let d;d="\u0631\u0633\u0627\u0644\u0629 \u0646\u0635\u064A\u0629";let y;y="\u0627\u0634\u0639\u0627\u0631";let $;$="\u0627\u0644\u0645\u0648\u0636\u0648\u0639";let b;b="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let G;G="\u0627\u0644\u0627\u0633\u0645";let P;P="\u0627\u0644\u0645\u062D\u062A\u0648\u0649";let R;R="\u0627\u0644\u0645\u0631\u0633\u0644";let z;z="\u0627\u0644\u0645\u062D\u062A\u0648\u0649";let V;V="\u0627\u0644\u0644\u0642\u0628";let D;return D="\u0627\u0644\u0645\u062D\u062A\u0648\u0649",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",i],["formControlName","types","label",n,3,"source","localizedValue","multiple"],["label",r,3,"formGroup"],["label",d,3,"formGroup"],["label",y,3,"formGroup"],[3,"actions"],["formControlName","subject","label",$],["formControlName","replyToEmail","label",b],["formControlName","replyToName","label",G],["formControlName","body","label",P],["formControlName","originator","label",R],["formControlName","body","label",z],["formControlName","title","label",V],["formControlName","body","label",D]];},template:function(i,n){i&1&&(N(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),N(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"sz-ui-form-field-select",4),s(6,"mat-tab-group"),q(7,ve,5,1,"mat-tab",5)(8,Be,3,1,"mat-tab",6)(9,Ue,3,1,"mat-tab",7),O()()(),N(10,"sz-ui-dialog-actions",8)),i&2&&(a("header",n.header),m(2),a("formGroup",n.form),m(3),a("source",n.notificationTypes)("localizedValue",!0)("multiple",!0),m(2),u(7,n.hasChannelType(n.notificationType.Email)?7:-1),m(),u(8,n.hasChannelType(n.notificationType.Sms)?8:-1),m(),u(9,n.hasChannelType(n.notificationType.Push)?9:-1),m(),a("actions",n.actions));},dependencies:[ee,K,Q,J,W,Y,g,ae,se,Ge,$e,be,Ee,pe,ue,fe,Ne,Ie,Oe],encapsulation:2});let t=o;return t;})();var ze=(()=>{let o=class o{constructor(e,i,n){this.dialog=e,this.sntiService=i,this.router=n,this.title=Te.notifications,this.dataSource=new he(),this.dataSource.columns.push(I.uuid("id"),I.hyperlink("name",r=>this.router.navigate([`/mlab/notification/${r.id}`])),I.string("description"),I.string("types"),I.date("createdAt",!1),I.date("updatedAt",!1),ge.menu([L.edit(r=>this.openSaveComponent(r)),L.delete(r=>this.openNotificationDeleteComponent(r))])),this.get();}openSaveComponent(e){this.dialog.open(Re,{data:e}).afterClosed().pipe(C(1)).subscribe(i=>{this.dataSource.addOrUpdateItem(i);});}openNotificationDeleteComponent(e){this.dialog.open(ce,{data:Ae.delete(this.sntiService.notifications.delete(e.id),e)}).afterClosed().pipe(C(1)).subscribe(i=>{this.dataSource.delete(i);});}get(){this.sntiService.notifications.get(this.dataSource.getQuery()).pipe(me(this.dataSource.indicator),C(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(i){return new(i||o)(T(_e),T(f),T(oe));},o.ɵcmp=p({type:o,selectors:[["sz-mgmt-notification-notifications"]],features:[A([])],decls:6,vars:4,consts:()=>{let e;return e="\u0625\u0636\u0627\u0641\u0629",[[3,"title"],[3,"dataSource","changed"],["mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(i,n){i&1&&(N(0,"sz-ui-header-info",0),s(1,"sz-ui-table-search-filter",1),c("changed",function(){return n.get();}),s(2,"button",2),c("click",function(){return n.openSaveComponent();}),s(3,"span"),k(4,3),O()()(),s(5,"sz-ui-table",4),c("update",function(){return n.get();}),O()),i&2&&(a("title",n.title),m(),a("dataSource",n.dataSource),m(4),a("stateEnabled",!0)("dataSource",n.dataSource));},dependencies:[le,Fe,Le,h],encapsulation:2});let t=o;return t;})();var Ve=[{path:"",component:ze}];var jo=(()=>{let o=class o{};o.ɵfac=function(i){return new(i||o)();},o.ɵmod=j({type:o}),o.ɵinj=U({providers:[f],imports:[te.forChild(Ve),g,Se,ye,h,ie]});let t=o;return t;})();export{jo as NotificationsModule};/**i18n:93110c93724266b1c17cde4cedf877a4f3393465ad71eafcdf9d2e9828471749*/