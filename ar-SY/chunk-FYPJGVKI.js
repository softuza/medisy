import{a as Ye}from"./chunk-SW4R72AD.js";import{a as G}from"./chunk-G23S7KR7.js";import"./chunk-YBO26YAR.js";import{a as ve,b as Pe,c as De,d as ze,e as Be}from"./chunk-4L4BSYOP.js";import{b as T}from"./chunk-UM6DLUL2.js";import{a as J}from"./chunk-3XAUHWRU.js";import{d as j,e as _,g as le,h as Ve,i as W,j as _e}from"./chunk-A7RH7OPD.js";import"./chunk-3XITI2X4.js";import"./chunk-T5KD46MG.js";import{a as Ie,b as k}from"./chunk-STLANFKR.js";import"./chunk-PMBSWADS.js";import{b as X,f as w,g as x,h as q,j as Q,k as H}from"./chunk-T7CKDNTJ.js";import{a as u}from"./chunk-TOLTCDO5.js";import"./chunk-RYW6V3XT.js";import{a as B,b as Y,d as A,e as $,g as F}from"./chunk-RTVNYXWL.js";import{b as Re,c as ae,h as Ae,p as he,q as se,r as ye,t as Le}from"./chunk-JISNI6UW.js";import"./chunk-KZ4HRNEG.js";import"./chunk-35KTI77E.js";import{i as Ne}from"./chunk-NH65D6KA.js";import{d as O,f as b,g as I,k as Ce,l as V,o as v,r as P,s as D,u as z}from"./chunk-JYFN7PWQ.js";import{b as d,c as M}from"./chunk-D7AVAVW4.js";import{a as be}from"./chunk-TK4ACOOT.js";import"./chunk-3MDGZ77A.js";import"./chunk-HH25H44W.js";import{a as U,b as ge}from"./chunk-2XUUKOI3.js";import"./chunk-7KVBI3NK.js";import{p as R,r as oe,s as ie,x as ne}from"./chunk-XAXL5TDT.js";import"./chunk-JV5UM3RQ.js";import"./chunk-FDTCNKZ7.js";import{Na as re}from"./chunk-AMW4KFWB.js";import{Fb as N,Kb as p,Lb as S,Mb as l,Wb as te,Xb as L,Zb as ee,cb as s,hc as Oe,ja as r,jc as Me,na as m,nb as h,qc as f,rc as E,sb as y,zb as a}from"./chunk-3LNQK4XY.js";import"./chunk-4GJ5P7OP.js";function je(n,i){if(n&1&&l(0,"sz-ui-form-field-select",7),n&2){let Z=ee();a("source",Z.testTypeResultOptions);}}function We(n,i){n&1&&(p(0,"div",4),l(1,"sz-ui-form-field-input-number",18)(2,"sz-ui-form-field-input-number",19),S());}function Je(n,i){n&1&&l(0,"sz-ui-form-field-input-number",15);}function Ke(n,i){if(n&1&&(y(0,We,3,0,"div",4)(1,Je,1,0,"sz-ui-form-field-input-number",15),p(2,"div",4),l(3,"sz-ui-form-field-input-number",16)(4,"sz-ui-form-field-input-number",17),S()),n&2){let Z=ee();N(Z.isRange()?0:1);}}var Xe=(()=>{let i=class i extends w{constructor(){let e=r(B);super(e),this.mlabService=r(u),this.fb=r(D),this.data=r(Y),this.units=[],this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"]}),this.unitSelectConfig={autoSelect:!0},this.referenceGroups=this.mlabService.referenceGroups.getAll({orderBy:["nameEn"]}),this.testTypeResultOptions=[],this.comparisonOperators=[],this.isQuantitative=!1;let o=this.fb;this.dialog=e;let t=this.data;console.log(t),this.form=o.group({description:[t.referenceValue?.description,[O.maxLength(4096)]],testTypeId:[t.testType.id,[O.required]],unitId:[t.referenceValue?.unitId,[]],comparisonOperator:new Ce(t.referenceValue?.comparisonOperator??T.Range,[O.required]),referenceGroupId:[t.referenceValue?.referenceGroupId,[O.required]],value:[t.referenceValue?.value,[]],lowerBound:o.control(t.referenceValue?.lowerBound,[]),upperBound:o.control(t.referenceValue?.upperBound,[]),minValue:o.control(t.referenceValue?.minValue,[]),maxValue:o.control(t.referenceValue?.maxValue,[]),testTypeResultOptionId:[t.referenceValue?.testTypeResultOptionId,[]],aboveUpperBoundStatus:[t.referenceValue?.aboveUpperBoundStatus,[]],belowLowerBoundStatus:[t.referenceValue?.belowLowerBoundStatus,[]],withinBoundsStatus:[t.referenceValue?.withinBoundsStatus,[]]}),this.testTypeSelected(t.testType);}testTypeSelected(e){e.unitId&&e.unit?this.getUnits(e.unit):this.units=[],e.testResultType===J.Quantitative?(this.comparisonOperators=[T.Range,T.Equal,T.NotEqual,T.GreaterThan,T.GreaterThanOrEqual,T.LessThan,T.LessThanOrEqual],this.form.patchValue({comparisonOperator:this.data.referenceValue?.comparisonOperator??T.Range})):(this.comparisonOperators=[T.Equal,T.NotEqual],this.form.patchValue({comparisonOperator:this.data.referenceValue?.comparisonOperator??T.Equal})),this.testTypeResultOptions=[],e.testResultType===J.Qualitative&&this.mlabService.testTypes.resultOptions.getAllItems(e.id,{orderBy:["nameEn"]}).pipe(Ae(this.indicator)).subscribe(o=>{o&&(this.testTypeResultOptions=o);}),this.isQuantitative=e.testResultType===J.Quantitative;}getUnits(e){this.units=[e],this.form.patchValue({unitId:e?.id}),this.mlabService.unitConverters.getAllItems({filters:ne.create().equal("toUnitId",e.id).filters()}).subscribe(o=>{this.units.push(...o.map(t=>t.fromUnit));});}isRange(){return this.form.value.comparisonOperator===T.Range;}submit(){if(!this.IsValid())return;let e=this.form.value;if(e.minValue){if(e.lowerBound&&e.minValue>e.lowerBound){this.form.controls.minValue.setErrors({incorrect:!0});return;}if(e.value&&typeof e.value=="number"&&e.minValue>e.value){this.form.controls.minValue.setErrors({incorrect:!0});return;}}if(e.maxValue){if(e.upperBound&&e.maxValue<e.upperBound){this.form.controls.maxValue.setErrors({incorrect:!0});return;}if(e.value&&typeof e.value=="number"&&e.maxValue<e.value){this.form.controls.maxValue.setErrors({incorrect:!0});return;}}this.data.referenceValue?this.save(this.mlabService.referenceValues.update(this.data.referenceValue.id,this.form.value)):this.save(this.mlabService.referenceValues.create(this.form.value));}};i.ɵfac=function(o){return new(o||i)();},i.ɵcmp=m({type:i,selectors:[["sz-medisy-laboratory-reference-values-save"]],standalone:!0,features:[f([u]),h,E],decls:20,vars:11,consts:()=>{let e;e="\u0627\u0644\u0641\u0626\u0629 \u0627\u0644\u0645\u0631\u062C\u0639\u064A\u0629";let o;o="\u0648\u0627\u062D\u062F\u0629";let t;t="\u0627\u0644\u0639\u0645\u0644\u064A\u0629";let C;C="\u0642\u064A\u0645\u0629";let g;g="\u0623\u0639\u0644\u0649 \u0645\u0646 \u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0639\u0644\u0649";let pe;pe="\u0623\u0642\u0644 \u0645\u0646 \u0627\u0644\u062D\u062F \u0627\u0644\u0623\u062F\u0646\u0649";let Se;Se="\u0636\u0645\u0646 \u0627\u0644\u062D\u062F\u0648\u062F";let ue;ue="\u0627\u0644\u0648\u0635\u0641";let de;de="\u0627\u0644\u062D\u0627\u0644\u0629";let me;me="\u0642\u064A\u0645\u0629";let Ee;Ee="\u0627\u0642\u0644 \u0642\u064A\u0645\u0629";let Te;Te="\u0627\u0639\u0644\u0649 \u0642\u064A\u0645\u0629";let ce;ce="\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u062F\u0646\u0649";let fe;return fe="\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0639\u0644\u0649",[de,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","referenceGroupId","label",e,3,"source"],[1,"sz-form-row"],["formControlName","unitId","label",o,3,"source","config"],["formControlName","comparisonOperator","label",t,3,"source","localizedValue"],["formControlName","testTypeResultOptionId","label",C,3,"source"],[1,"tw-mb-4"],["multi",""],["formControlName","aboveUpperBoundStatus","label",g],["formControlName","belowLowerBoundStatus","label",pe],["formControlName","withinBoundsStatus","label",Se],["formControlName","description","label",ue],[3,"actions"],["formControlName","value","label",me],["formControlName","minValue","label",Ee],["formControlName","maxValue","label",Te],["formControlName","lowerBound","label",ce],["formControlName","upperBound","label",fe]];},template:function(o,t){o&1&&(l(0,"sz-ui-dialog-header",1),p(1,"mat-dialog-content")(2,"form",2),l(3,"sz-ui-form-field-select",3),p(4,"div",4),l(5,"sz-ui-form-field-select",5)(6,"sz-ui-form-field-select",6),S(),y(7,je,1,1,"sz-ui-form-field-select",7)(8,Ke,5,1,"div",4),p(9,"div",8)(10,"mat-accordion",9)(11,"mat-expansion-panel")(12,"mat-expansion-panel-header")(13,"mat-panel-title"),te(14,0),S()(),l(15,"sz-ui-form-field-input-text",10)(16,"sz-ui-form-field-input-text",11)(17,"sz-ui-form-field-input-text",12),S()()(),l(18,"sz-ui-form-field-textarea",13),S()(),l(19,"sz-ui-dialog-actions",14)),o&2&&(a("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),s(2),a("formGroup",t.form),s(),a("source",t.referenceGroups),s(2),a("source",t.units)("config",t.unitSelectConfig),s(),a("source",t.comparisonOperators)("localizedValue",!0),s(),N(t.isQuantitative?8:7),s(12),a("actions",t.actions));},dependencies:[z,V,b,I,v,P,F,$,Ne,k,Be,ze,ve,Pe,De,H,x,q,Re,Le,ae,he,ye,se],encapsulation:2});let n=i;return n;})();var we=(()=>{let i=class i{constructor(){this.dialog=r(A),this.mlabService=r(u),this.router=r(oe),this.route=r(R),this.testType=this.route.snapshot.data.testType,this.dataSource=new Ve(),this.card={header:{title:U.reference_values},menu:M.more([d.add(this.openSaveComponent.bind(this))])},this.dataSource.columnDefs.push(_.uuid("id"),_.string("referenceGroup.nameEn").setStacked(_.string("referenceGroup.nameAr").setValueClassFontSmall()),_.string("unit").setValueGetter(e=>e.unit?.symbol),_.enum("comparisonOperator").setValueGetter(e=>ge(e.comparisonOperator)),_.number("_value").setValueGetter(e=>e.testTypeResultOption?e.testTypeResultOption.nameEn:e.value!==null?e.value:`${e.lowerBound} - ${e.upperBound}`).setHeaderSortable(!1),_.date("createdAt").setVisible(!1),_.date("updatedAt").setVisible(!1),_.menu(M.more([d.edit(this.openSaveComponent.bind(this)),d.divider(),d.delete(this.openReferenceValueDeleteComponent.bind(this))]))),this.dataSource.filtration?.equal("testTypeId",this.testType.id),this.get();}openSaveComponent(e){this.dialog.open(Xe,{data:{testType:this.testType,referenceValue:e}}).afterClosed().subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openReferenceValueDeleteComponent(e){this.dialog.open(Q,{data:X.delete(this.mlabService.referenceValues.delete(e.id),e)}).afterClosed().subscribe(o=>{this.dataSource.delete(o);});}get(){this.mlabService.referenceValues.get(this.dataSource.getQuery()).pipe(W(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(o){return new(o||i)();},i.ɵcmp=m({type:i,selectors:[["sz-medisy-laboratory-test-type-reference-values"]],standalone:!0,features:[f([u]),E],decls:2,vars:2,consts:[[3,"card"],["content","",3,"update","dataSource"]],template:function(o,t){o&1&&(p(0,"sz-ui-card",0)(1,"sz-ui-table",1),L("update",function(){return t.get();}),S()()),o&2&&(a("card",t.card),s(),a("dataSource",t.dataSource));},dependencies:[j,G],encapsulation:2});let n=i;return n;})();var xe=(()=>{let i=class i extends w{constructor(){let e=r(B);super(e),this.mlabService=r(u),this.fb=r(D),this.data=r(Y),this.testTypes=this.mlabService.testTypes.getAll({orderBy:["nameEn"],filters:ne.create().equal("isGroup",!1).filters()});let o=this.fb;this.dialog=e;let t=this.data;this.form=o.group({relatedTestTypeId:[t.testTypeRelationship?.relatedTestTypeId,[O.required]],enabled:[t.testTypeRelationship?.enabled??!0]});}submit(){this.IsValid()&&(this.data.testTypeRelationship?this.save(this.mlabService.testTypes.relationships.update(this.data.testTypeId,this.data.testTypeRelationship?.id,this.form.value)):this.save(this.mlabService.testTypes.relationships.create(this.data.testTypeId,this.form.value)));}};i.ɵfac=function(o){return new(o||i)();},i.ɵcmp=m({type:i,selectors:[["sz-medisy-laboratory-test-type-specimen-types-save"]],standalone:!0,features:[f([u]),h,E],decls:7,vars:6,consts:()=>{let e;e="\u0627\u0644\u0646\u0645\u0637";let o;return o="\u0645\u0641\u0639\u0644",[o,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","relatedTestTypeId","label",e,3,"source"],["formControlName","enabled"],[3,"actions"]];},template:function(o,t){o&1&&(l(0,"sz-ui-dialog-header",1),p(1,"mat-dialog-content")(2,"form",2),l(3,"sz-ui-form-field-select",3),p(4,"mat-checkbox",4),te(5,0),S()()(),l(6,"sz-ui-dialog-actions",5)),o&2&&(a("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),s(2),a("formGroup",t.form),s(),a("source",t.testTypes),s(3),a("actions",t.actions));},dependencies:[z,V,b,I,v,P,F,$,k,Ie,H,x,q,se],encapsulation:2});let n=i;return n;})();var qe=(()=>{let i=class i{constructor(){this.dialog=r(A),this.mlabService=r(u),this.route=r(R),this.testType=this.route.snapshot.data.testType,this.dataSource=new le(),this.card={header:{title:U.test_types},menu:M.more([d.add(()=>this.openSaveComponent())])},this.dataSource.columnDefs.push(_.uuid("id"),_.string("relatedTestType.nameEn"),_.date("createdAt").setVisible(!1),_.date("updatedAt").setVisible(!1),_.menu(M.more([d.edit(this.openSaveComponent.bind(this)),d.divider(),d.delete(this.openTestTypeRelationshipDeleteComponent.bind(this))])));}ngOnInit(){this.get();}openSaveComponent(e){this.dialog.open(xe,{data:{testTypeId:this.testType.id,testTypeRelationship:e}}).afterClosed().subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openTestTypeRelationshipDeleteComponent(e){this.dialog.open(Q,{data:X.delete(this.mlabService.testTypes.relationships.delete(e.testTypeId,e.id),e)}).afterClosed().subscribe(o=>{this.dataSource.delete(o);});}updateItem(e){this.mlabService.testTypes.relationships.update(e.testTypeId,e.id,e).subscribe(o=>{this.dataSource.update(o);});}get(){this.mlabService.testTypes.relationships.get(this.testType.id,this.dataSource.getQuery()).pipe(W(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(o){return new(o||i)();},i.ɵcmp=m({type:i,selectors:[["sz-medisy-laboratory-test-type-relationships"]],standalone:!0,features:[E],decls:2,vars:2,consts:[[3,"card"],["content","",3,"update","dataSource"]],template:function(o,t){o&1&&(p(0,"sz-ui-card",0)(1,"sz-ui-table",1),L("update",function(){return t.get();}),S()()),o&2&&(a("card",t.card),s(),a("dataSource",t.dataSource));},dependencies:[ie,re,_e,j,G],encapsulation:2});let n=i;return n;})();var Qe=(()=>{let i=class i extends w{constructor(){let e=r(B);super(e),this.mlabService=r(u),this.fb=r(D),this.data=r(Y);let o=this.fb;this.dialog=e;let t=this.data;this.form=o.group({nameEn:[t.testTypeResultOption?.nameEn,[O.required]],description:[t.testTypeResultOption?.description,[]],abbreviation:[t.testTypeResultOption?.abbreviation,[]],nameAr:[t.testTypeResultOption?.nameAr,[]]});}submit(){this.IsValid()&&(this.data.testTypeResultOption?this.save(this.mlabService.testTypes.resultOptions.update(this.data.testTypeId,this.data.testTypeResultOption?.id,this.form.value)):this.save(this.mlabService.testTypes.resultOptions.create(this.data.testTypeId,this.form.value)));}};i.ɵfac=function(o){return new(o||i)();},i.ɵcmp=m({type:i,selectors:[["sz-medisy-laboratory-test-type-result-options-save"]],standalone:!0,features:[f([u]),h,E],decls:8,vars:5,consts:()=>{let e;e="\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0627\u0646\u0643\u0644\u064A\u0632\u064A\u0629";let o;o="\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629";let t;t="\u0627\u0644\u0648\u0635\u0641";let C;return C="\u0623\u062E\u062A\u0635\u0627\u0631",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","nameEn","label",e],["formControlName","nameAr","label",o],["formControlName","description","label",t],["formControlName","abbreviation","label",C],[3,"actions"]];},template:function(o,t){o&1&&(l(0,"sz-ui-dialog-header",0),p(1,"mat-dialog-content")(2,"form",1),l(3,"sz-ui-form-field-input-text",2)(4,"sz-ui-form-field-input-text",3)(5,"sz-ui-form-field-input-text",4)(6,"sz-ui-form-field-input-text",5),S()(),l(7,"sz-ui-dialog-actions",6)),o&2&&(a("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),s(2),a("formGroup",t.form),s(5),a("actions",t.actions));},dependencies:[z,V,b,I,v,P,F,$,k,H,x,q,ae],encapsulation:2});let n=i;return n;})();var He=(()=>{let i=class i{constructor(){this.dialog=r(A),this.mlabService=r(u),this.route=r(R),this.testType=this.route.snapshot.data.testType,this.dataSource=new le(),this.card={header:{title:U.result_options},menu:M.more([d.add(()=>this.openSaveComponent())])},this.dataSource.columnDefs.push(_.uuid("id"),_.string("nameEn").setStacked(_.string("nameAr").setValueClassFontSmall()),_.string("abbreviation"),_.date("createdAt").setVisible(!1),_.date("updatedAt").setVisible(!1),_.menu(M.more([d.edit(this.openSaveComponent.bind(this)),d.divider(),d.delete(this.openTestTypeResultOptionDeleteComponent.bind(this))])));}ngOnInit(){this.get();}openSaveComponent(e){this.dialog.open(Qe,{data:{testTypeId:this.testType.id,testTypeResultOption:e}}).afterClosed().subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openTestTypeResultOptionDeleteComponent(e){this.dialog.open(Q,{data:X.delete(this.mlabService.testTypes.resultOptions.delete(e.testTypeId,e.id),e)}).afterClosed().subscribe(o=>{this.dataSource.delete(o);});}updateItem(e){this.mlabService.testTypes.resultOptions.update(e.testTypeId,e.id,e).subscribe(o=>{this.dataSource.update(o);});}get(){this.mlabService.testTypes.resultOptions.get(this.testType.id,this.dataSource.getQuery()).pipe(W(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(o){return new(o||i)();},i.ɵcmp=m({type:i,selectors:[["sz-medisy-laboratory-test-type-result-options"]],standalone:!0,features:[E],decls:2,vars:2,consts:[[3,"card"],["content","",3,"update","dataSource"]],template:function(o,t){o&1&&(p(0,"sz-ui-card",0)(1,"sz-ui-table",1),L("update",function(){return t.get();}),S()()),o&2&&(a("card",t.card),s(),a("dataSource",t.dataSource));},dependencies:[ie,re,_e,j,G],encapsulation:2});let n=i;return n;})();function et(n,i){if(n&1&&(p(0,"p"),Oe(1),S()),n&2){let Z=ee();s(),Me(" ",Z.testType.description,`
`);}}function tt(n,i){n&1&&l(0,"sz-medisy-laboratory-test-type-result-options");}function ot(n,i){n&1&&l(0,"sz-medisy-laboratory-test-type-reference-values");}function it(n,i){n&1&&l(0,"sz-medisy-laboratory-test-type-relationships");}var ke=(()=>{let i=class i{constructor(){this.dialog=r(A),this.mlabService=r(u),this.route=r(R),this.router=r(oe),this.testType=this.route.snapshot.data.testType,this.appBarConfig={title:this.testType.nameEn,backEnabled:!0},this.isQualitative=this.testType.testResultType===J.Qualitative;}};i.ɵfac=function(o){return new(o||i)();},i.ɵcmp=m({type:i,selectors:[["sz-medisy-laboratory-test-type"]],standalone:!0,features:[f([]),E],decls:7,vars:6,consts:[[3,"config"],[1,"tw-grid","lg:tw-grid-cols-2","tw-gap-2","tw-mb-2"],[3,"testTypeId"]],template:function(o,t){o&1&&(l(0,"sz-ui-app-bar",0),y(1,et,2,1,"p"),p(2,"div",1),l(3,"sz-medisy-laboratory-test-type-specimen-types",2),y(4,tt,1,0,"sz-medisy-laboratory-test-type-result-options")(5,ot,1,0,"sz-medisy-laboratory-test-type-reference-values")(6,it,1,0,"sz-medisy-laboratory-test-type-relationships"),S()),o&2&&(a("config",t.appBarConfig),s(),N(t.testType.description?1:-1),s(2),a("testTypeId",t.testType.id),s(),N(t.isQualitative?4:-1),s(),N(t.testType.isGroup?-1:5),s(),N(t.testType.isGroup?6:-1));},dependencies:[be,Ye,He,we,qe],encapsulation:2});let n=i;return n;})();var ko=[{path:"",component:ke},{path:"specimen-types",loadComponent:()=>import("./chunk-3CVKWT6D.js").then(n=>n.TestTypeSpecimenTypesComponent)}];export{ko as default};/**i18n:240fd72ac85948f7f82c5874ad40d30b083c4df6b346146b5f51aef2bd6e49f2*/