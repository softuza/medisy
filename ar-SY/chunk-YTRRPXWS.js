import{a as Ce}from"./chunk-H5WXAZIY.js";import"./chunk-EYGAI5PJ.js";import{a as Ae,c as he,e as Te,g as D,j as Ne,k as ge,l as u}from"./chunk-L43EK5YJ.js";import"./chunk-DSE2GSX7.js";import"./chunk-K2XOOBCU.js";import{a as E}from"./chunk-R4S6SLRU.js";import{e as Se,f as Ee,g as Re,i as Me,j as I,k as Oe}from"./chunk-XT4WDJL3.js";import"./chunk-TFYVSOED.js";import{b as V}from"./chunk-V2CHWC5A.js";import{e as _e,g as b}from"./chunk-OBKQZSX2.js";import{a as pe,b as de,d as L,e as fe,g as v}from"./chunk-BICV37VP.js";import{A as ce,g as oe,h as re,l as ne,m as ae,n as se,x as me,y as P,z as ue}from"./chunk-3D6BRKHU.js";import{J as g,N as Z,b as q,d as h,e as j,f as T,g as X,j as x,k as W,l as k,m as H,p as J,q as K,s as Q,t as N,za as le}from"./chunk-CN6PMKF6.js";import"./chunk-QYJYVPVW.js";import{Ea as ee,Ga as te,Ja as ie}from"./chunk-NQOK3G2M.js";import{Ab as z,Bc as w,Fb as c,Gb as _,Hb as m,M,Rb as Y,Tb as C,fa as U,gb as f,hb as l,hc as S,kc as A,l as $,oa as d,ob as O,pa as G,rb as B,vb as s}from"./chunk-XEAZENSO.js";var n=function(o){return o.Equal="Equal",o.GreaterThan="GreaterThan",o.GreaterThanOrEqual="GreaterThanOrEqual",o.LessThan="LessThan",o.LessThanOrEqual="LessThanOrEqual",o.NotEqual="Not Equal",o.RangeWithBoundaries="RangeWithBoundaries",o.RangeWithoutBoundaries="RangeWithoutBoundaries",o;}(n||{});function y(o,e){switch(o){case n.Equal:return e?"==":"\u062A\u0633\u0627\u0648\u064A";case n.GreaterThan:return e?">":"\u0623\u0643\u0628\u0631 \u0645\u0646";case n.GreaterThanOrEqual:return e?">=":"\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0648 \u064A\u0633\u0627\u0648\u064A";case n.LessThan:return e?"<":"\u0623\u0635\u063A\u0631 \u0645\u0646";case n.LessThanOrEqual:return e?"<=":"\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0648 \u064A\u0633\u0627\u0648\u064A";case n.RangeWithBoundaries:return e?"<==>":"\u0645\u062C\u0627\u0644 \u0645\u0639 \u0627\u0644\u062D\u062F\u0648\u062F";case n.RangeWithoutBoundaries:return e?"<>":"\u0645\u062C\u0627\u0644 \u0628\u062F\u0648\u0646 \u0627\u0644\u062D\u062F\u0648\u062F";case n.NotEqual:return e?"!=":"\u0644\u0627 \u062A\u0633\u0627\u0648\u064A";default:return"";}}var Pe=(()=>{let e=class e extends se{constructor(r){super(r),this.ngControl=r,this.options=Object.keys(n).map(t=>n[t]),this.label="\u0627\u0644\u0639\u0645\u0644\u064A\u0629",this.optionContent=t=>y(t,!1);}ngOnInit(){this.control=this.ngControl.control;}};e.ɵfac=function(t){return new(t||e)(l(j,10));},e.ɵcmp=d({type:e,selectors:[["medisy-form-field-comparison-operator"]],standalone:!0,features:[S([]),O,A],decls:1,vars:7,consts:[[3,"formControl","options","label","placeholder","emptyOption","multiple","szOptionContentFn"]],template:function(t,i){t&1&&m(0,"sz-ui-form-field-select",0),t&2&&s("formControl",i.control)("options",i.options)("label",i.label)("placeholder",i.placeholder)("emptyOption",i.emptyOption)("multiple",i.multiple)("szOptionContentFn",i.optionContent);},dependencies:[N,T,k,P],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:relative}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:20px}"]});let o=e;return o;})();function ze(o,e){o&1&&(c(0,"div",8)(1,"mat-form-field",9)(2,"label"),m(3,"input",10),_()(),c(4,"mat-form-field",9)(5,"label"),m(6,"input",11),_()()());}function be(o,e){o&1&&(c(0,"mat-form-field",9)(1,"label"),m(2,"input",12),_()());}var ve=(()=>{let e=class e extends Se{constructor(r,t,i,a){super(i),this.mlabService=r,this.fb=t,this.dialog=i,this.data=a,this.referenceGroups=this.mlabService.referenceGroups.getAll({orderBy:["name"]}),this.form=t.group({description:[a.referenceValueRule?.description,[h.maxLength(4096)]],comparisonOperator:new x(a.referenceValueRule?.comparisonOperator??n.Equal,[h.required]),referenceGroupId:[a.referenceValueRule?.referenceGroupId,[h.required]],value:[a.referenceValueRule?.value,[]],start:[a.referenceValueRule?.start,[]],end:[a.referenceValueRule?.end,[]]});}isRange(){return this.form.value.comparisonOperator===n.RangeWithBoundaries||this.form.value.comparisonOperator===n.RangeWithoutBoundaries;}submit(){this.IsValid()&&(this.data.referenceValueRule?this.save(this.mlabService.referenceValues.rules.update(this.data.referenceValueId,this.data.referenceValueRule.id,this.form.value)):this.save(this.mlabService.referenceValues.rules.create(this.data.referenceValueId,this.form.value)));}};e.ɵfac=function(t){return new(t||e)(l(E),l(K),l(pe),l(de));},e.ɵcmp=d({type:e,selectors:[["medisy-laboratory-reference-value-rules-save"]],standalone:!0,features:[S([]),O,A],decls:9,vars:6,consts:()=>{let r;r="\u0627\u0644\u0641\u0626\u0629 \u0627\u0644\u0645\u0631\u062C\u0639\u064A\u0629";let t;t="\u0627\u0644\u0648\u0635\u0641";let i;i="\u0628\u062F\u0627\u064A\u0629";let a;a="\u0646\u0647\u0627\u064A\u0629";let p;return p="\u0642\u064A\u0645\u0629",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","referenceGroupId","label",r,3,"source"],["formControlName","comparisonOperator"],["class","tw-flex md:tw-flex-row tw-flex-col md:tw-gap-4"],["class","tw-flex-1"],["formControlName","description","label",t],[3,"actions"],[1,"tw-flex","md:tw-flex-row","tw-flex-col","md:tw-gap-4"],[1,"tw-flex-1"],["autocomplete","off","formControlName","start","matInput","","placeholder",i],["autocomplete","off","formControlName","end","matInput","","placeholder",a],["autocomplete","off","formControlName","value","matInput","","placeholder",p]];},template:function(t,i){t&1&&(m(0,"sz-ui-dialog-header",0),c(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-select",2)(4,"medisy-form-field-comparison-operator",3),B(5,ze,7,0,"div",4)(6,be,3,0,"mat-form-field",5),m(7,"sz-ui-form-field-textarea",6),_()(),m(8,"sz-ui-dialog-actions",7)),t&2&&(s("header",i.header),f(2),s("formGroup",i.form),f(),s("source",i.referenceGroups),f(2),z(5,i.isRange()?5:-1),f(),z(6,i.isRange()?-1:6),f(2),s("actions",i.actions));},dependencies:[N,W,q,T,X,H,J,ae,ne,oe,v,fe,re,D,I,Ee,Re,ce,ue,P,Pe],encapsulation:2});let o=e;return o;})();var Ve=(()=>{let e=class e{constructor(r,t,i,a){this.dialog=r,this.route=t,this.mlabService=i,this.locale=a,this.dataSource=new he(),this.referenceValue=this.route.snapshot.data.referenceValue,this.dataSource.fields.push(u.uuid("id"),u.uuid("referenceValueId"),u.uuid("referenceGroupId"),u.string("referenceGroup.name"),u.enum("comparisonOperator").setContentFormat(p=>y(p.comparisonOperator,!1)),u.number("value"),u.number("start"),u.number("end"),u.string("description"),u.date("createdAt",!1),u.date("updatedAt",!1),Ae.menu([b.edit(p=>this.openSaveComponent(p)),b.delete(p=>{this.openReferenceValueRuleDeleteComponent(p);})])),this.get();}openSaveComponent(r){this.dialog.open(ve,{data:{referenceValueId:this.referenceValue.id,referenceValueRule:r}}).afterClosed().pipe(M(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openReferenceValueRuleDeleteComponent(r){this.dialog.open(Me,{data:Oe.delete(this.mlabService.referenceValues.rules.delete(r.referenceValueId,r.id),r)}).afterClosed().pipe(M(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.mlabService.referenceValues.rules.get(this.referenceValue.id,this.dataSource.buildRequest()).pipe(le(this.dataSource.indicator),M(1)).subscribe(r=>{this.dataSource.set(r.items,r.count);});}};e.ɵfac=function(t){return new(t||e)(l(L),l(g),l(E),l(w));},e.ɵcmp=d({type:e,selectors:[["medisy-laboratory-reference-value-rules"]],features:[S([])],decls:5,vars:3,consts:()=>{let r;return r="\u0625\u0636\u0627\u0641\u0629",[[3,"dataSource","changed"],["mat-flat-button","","color","primary","start","",3,"click"],r,[3,"stateEnabled","dataSource","update"]];},template:function(t,i){t&1&&(c(0,"sz-ui-table-search-filter",0),C("changed",function(){return i.get();}),c(1,"button",1),C("click",function(){return i.openSaveComponent();}),c(2,"span"),Y(3,2),_()()(),c(4,"sz-ui-table",3),C("update",function(){return i.get();}),_()),t&2&&(s("dataSource",i.dataSource),f(4),s("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[ee,Ne,Te],encapsulation:2});let o=e;return o;})();var Ie=(()=>{let e=class e{constructor(r,t){this.dialog=r,this.route=t,this.alert$=new $(),this.referenceValue=this.route.snapshot.data.referenceValue;}};e.ɵfac=function(t){return new(t||e)(l(L),l(g));},e.ɵcmp=d({type:e,selectors:[["medisy-laboratory-reference-value"]],features:[S([])],decls:2,vars:2,consts:[[3,"title","subtitle"]],template:function(t,i){t&1&&m(0,"sz-ui-header-info",0)(1,"medisy-laboratory-reference-value-rules"),t&2&&s("title",i.referenceValue.testType.name)("subtitle",i.referenceValue.description);},dependencies:[V,Ve],encapsulation:2});let o=e;return o;})();var De=[{path:"",component:Ie}];var Kt=(()=>{let e=class e{};e.ɵfac=function(t){return new(t||e)();},e.ɵmod=G({type:e}),e.ɵinj=U({providers:[E],imports:[Q,Z.forChild(De),v,D,_e,ie,te,me,ge,Ce,I,V]});let o=e;return o;})();export{Kt as ReferenceValueModule};/**i18n:f1993a9d8de25a460a4edd4e25b48862b3dd863aec93a795c43b451741326090*/