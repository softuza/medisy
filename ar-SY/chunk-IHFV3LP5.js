import{a as Me}from"./chunk-JSSXXJMQ.js";import{a as l}from"./chunk-CGXIYALH.js";import{a as Se}from"./chunk-JH2MCPWB.js";import{a as d,b as _e,d as fe,e as Ce,j as Ee,k as q}from"./chunk-SCEYJWUH.js";import"./chunk-TQMMS6EB.js";import"./chunk-TDPMUOHH.js";import"./chunk-H7NG3CYC.js";import"./chunk-EIEESADP.js";import"./chunk-XAJI6S7M.js";import{e as X,f as Y,g as w,i as ue,j as N,k as ce}from"./chunk-23TTDEMB.js";import{a as j}from"./chunk-CBX6HOLO.js";import{e as U,h as C,j as B}from"./chunk-N5GRIQDY.js";import{a as P,b as L,d as F,e as b,g as M}from"./chunk-DIXRY2BM.js";import"./chunk-SH6LLNPF.js";import{A as de,b as V,e as ae,t as se,v as me,x as le,z as pe}from"./chunk-Z5BIE7AQ.js";import"./chunk-Q6LA27NV.js";import"./chunk-TKDGFNHB.js";import{c as $}from"./chunk-3KNY5WBW.js";import"./chunk-4IQAUZQG.js";import{d as f,f as T,g as h,l as v,n as I,q as A,r as y,u as R}from"./chunk-CBNQJNHR.js";import{r as ie,t as re}from"./chunk-TW7AXWBO.js";import{a as D,c as oe,e as z}from"./chunk-3IXDZKQC.js";import"./chunk-UJD4II27.js";import{ia as ne,la as G}from"./chunk-YM6Z3W7O.js";import"./chunk-G4CXIA4B.js";import{Fa as Z,Fc as te,Jb as p,Kb as c,Lb as m,Wb as ee,bb as s,cb as u,ea as K,ja as a,na as S,nc as _,oa as W,ob as x,oc as E,qb as g,zb as n}from"./chunk-2CGEOOG5.js";import"./chunk-FJU4DKT4.js";var Ne=(()=>{let i=class i extends X{constructor(o,t,e){super(t),this.fb=o,this.dialog=t,this.data=e,this.cstnService=a(l),this.employees=this.cstnService.employees.getAll({orderBy:["name"],filterBehavior:ie.Or,filters:re.create().equalIf("id",this.data?.teamEmployee?.employeeId).notAnyIf("teams.teamId",this.data?.teamId).filters()}),this.designations=this.cstnService.designations.getAll({orderBy:["name"]}),this.groups=this.cstnService.teams.groups.getAll(this.data.teamId,{orderBy:["group.name"]}),console.log(e),this.form=o.group({employeeId:[e?.teamEmployee?.employeeId,[f.required]],designationId:[e?.teamEmployee?.designationId,[f.required]],groupId:[e?.teamEmployee?.groupId,[]],startDate:[e?.teamEmployee?.startDate??new Date(),[f.required]],endDate:[e?.teamEmployee?.endDate,[]]});}submit(){this.IsValid()&&(this.data?.teamEmployee?this.save(this.cstnService.teams.employees.update(this.data.teamId,this.data.teamEmployee.id,this.form.value)):this.save(this.cstnService.teams.employees.create(this.data.teamId,this.form.value)));}};i.ɵfac=function(t){return new(t||i)(u(y),u(P),u(L));},i.ɵcmp=S({type:i,selectors:[["sz-constr-construction-zones-units-save"]],standalone:!0,features:[_([]),g,E],decls:10,vars:9,consts:()=>{let o;o="\u0627\u0644\u0645\u0648\u0638\u0641";let t;t="\u0627\u0644\u062A\u0639\u064A\u064A\u0646";let e;e="\u0645\u062C\u0645\u0648\u0639\u0629";let Q;Q="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629";let J;return J="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0646\u0647\u0627\u064A\u0629",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","employeeId","label",o,3,"source"],["formControlName","designationId","label",t,3,"source"],["formControlName","groupId","label",e,3,"source","emptyOption"],[1,"sz-form-row"],["formControlName","startDate","label",Q],["formControlName","endDate","label",J],[3,"actions"]];},template:function(t,e){t&1&&(m(0,"sz-ui-dialog-header",0),p(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3)(5,"sz-ui-form-field-select",4),p(6,"div",5),m(7,"sz-ui-form-field-date",6)(8,"sz-ui-form-field-date",7),c()()(),m(9,"sz-ui-dialog-actions",8)),t&2&&(n("title",e.title)("subtitle",e.subtitle)("alert",e.alert()),s(2),n("formGroup",e.form),s(),n("source",e.employees),s(),n("source",e.designations),s(),n("source",e.groups)("emptyOption",!0),s(4),n("actions",e.actions));},dependencies:[R,v,T,h,I,A,M,b,me,N,Y,w,de,se,le],encapsulation:2});let r=i;return r;})();var k=(()=>{let i=class i{constructor(){this.route=a(D),this.router=a(oe),this.dialog=a(F),this.locale=a(te),this.cstnService=a(l),this.team=Z.required(),this.dataSource=new fe([]),this.card={title:$.employees,menu:B.more([C.add(()=>this.openSaveComponent())])},this.dataSource.columnDefs.push(d.uuid("id"),d.string("employee.name"),d.string("employee.primaryPhone"),d.string("designation.name").setName($.designation),d.date("startDate").setVisible(!1),d.date("endDate").setVisible(!1),d.date("createdAt").setVisible(!1),d.date("updatedAt").setVisible(!1),_e.menu([C.edit(o=>this.openSaveComponent(o)),U.divider(),C.delete(o=>this.openDeleteComponent(o))])),this.dataSource.groupDefs={key:"groupId",name:$.test_group,nameGetterFn:o=>o.group?.name??""};}ngOnInit(){this.get();}openSaveComponent(o){this.dialog.open(Ne,{data:{teamId:this.team().id,teamEmployee:o}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openDeleteComponent(o){this.dialog.open(ue,{data:ce.delete(this.cstnService.teams.employees.delete(this.team().id,o.id),o)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}get(){this.cstnService.teams.employees.get(this.team().id,this.dataSource.getQuery()).pipe(Ce(this.dataSource.state)).subscribe(o=>{this.dataSource.set(o.items,o.count);});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-constr-construction-team-employees"]],inputs:{team:[1,"team"]},standalone:!0,features:[_([l]),E],decls:2,vars:3,consts:[[3,"card"],["content","",3,"update","paginationEnabled","dataSource"]],template:function(t,e){t&1&&(p(0,"sz-ui-card",0)(1,"sz-ui-table",1),ee("update",function(){return e.get();}),c()()),t&2&&(n("card",e.card),s(),n("paginationEnabled",!1)("dataSource",e.dataSource));},dependencies:[z,q,Ee,G,Se],encapsulation:2});let r=i;return r;})();var Oe=(()=>{let i=class i extends X{constructor(o,t,e){super(t),this.fb=o,this.dialog=t,this.data=e,this.cstnService=a(l),this.form=o.group({name:[e?.group?.name,[f.required,f.minLength(1)]],description:[e?.group?.description,[]],teamId:[e?.teamId,[]]});}submit(){this.IsValid()&&(this.data.group?this.save(this.cstnService.groups.update(this.data.group.id,this.form.value)):this.save(this.cstnService.groups.create(this.form.value)));}};i.ɵfac=function(t){return new(t||i)(u(y),u(P),u(L));},i.ɵcmp=S({type:i,selectors:[["sz-constr-groups-save"]],standalone:!0,features:[_([l]),g,E],decls:6,vars:5,consts:()=>{let o;o="\u0627\u0644\u0627\u0633\u0645";let t;return t="\u0627\u0644\u0648\u0635\u0641",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",o],["formControlName","description","label",t],[3,"actions"]];},template:function(t,e){t&1&&(m(0,"sz-ui-dialog-header",0),p(1,"mat-dialog-content")(2,"form",1),m(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3),c()(),m(5,"sz-ui-dialog-actions",4)),t&2&&(n("title",e.title)("subtitle",e.subtitle)("alert",e.alert()),s(2),n("formGroup",e.form),s(3),n("actions",e.actions));},dependencies:[R,v,T,h,I,A,M,b,N,Y,w,ae,pe],encapsulation:2});let r=i;return r;})();var ge=(()=>{let i=class i{constructor(){this.cstnService=a(l),this.route=a(D),this.dialog=a(F),this.alert=x(void 0),this.menu=B.more([C.edit(()=>this.openSaveComponent(this.team)),U.divider(),C.add(()=>this.openGroupSaveComponent())]),this.team=this.route.snapshot.data.team;}openSaveComponent(o){this.dialog.open(Me,{data:o}).afterClosed().subscribe(t=>{this.team=t;});}openGroupSaveComponent(){this.dialog.open(Oe,{data:{teamId:this.team.id}}).afterClosed().subscribe(o=>{});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-constr-construction-team"]],features:[_([])],decls:5,vars:5,consts:[[3,"title","subtitle","menu"],[3,"alert"],[1,"tw-my-4"],[3,"team"]],template:function(t,e){t&1&&(m(0,"sz-ui-app-bar",0)(1,"sz-ui-alert",1),p(2,"div",2),m(3,"sz-constr-construction-team-employees",3),c(),m(4,"div",2)),t&2&&(n("title",e.team.name)("subtitle",e.team.description)("menu",e.menu),s(),n("alert",e.alert()),s(2),n("team",e.team));},dependencies:[V,j,k],encapsulation:2});let r=i;return r;})();var Ut=(()=>{let i=class i{};i.ɵfac=function(t){return new(t||i)();},i.ɵmod=W({type:i}),i.ɵinj=K({providers:[l],imports:[z.forChild([{path:"",component:ge}]),M,ne,G,V,q,N,j,k]});let r=i;return r;})();export{Ut as TeamModule};/**i18n:74c2b26e2511915b63b53dced5a329acbedd3101dfbc00b668fe6d77d7375591*/