import{a as Re}from"./chunk-YYXHZAKN.js";import{a as s}from"./chunk-UO5FO3BK.js";import{a as y}from"./chunk-JUFGPHOQ.js";import{a as m,b as te,d as oe,e as ie,j as re,k as A}from"./chunk-2YGVT6CP.js";import"./chunk-EXWDE473.js";import"./chunk-TDPMUOHH.js";import"./chunk-H7NG3CYC.js";import"./chunk-EIEESADP.js";import"./chunk-XAJI6S7M.js";import{e as D,f as z,g as P,i as x,j as M,k as ee}from"./chunk-OEZSCWYE.js";import{a as Z}from"./chunk-3HBZIUOG.js";import{e as N,g as ue,h as c,j as W}from"./chunk-F7XMWDSV.js";import{a as H,b as Q,d as I,e as J,g as R}from"./chunk-DIXRY2BM.js";import"./chunk-SH6LLNPF.js";import{A as pe,b as K,e as Te,t as le,u as ge,v as he,x as de,z as Ie}from"./chunk-WJGQ5B6R.js";import"./chunk-Q6LA27NV.js";import"./chunk-TKDGFNHB.js";import{c as O}from"./chunk-ZMXGCFXS.js";import"./chunk-4IQAUZQG.js";import{d as E,f as B,g as X,l as j,n as w,q,r as k,u as Y}from"./chunk-CBNQJNHR.js";import{r as se,t as me}from"./chunk-TW7AXWBO.js";import{a as T,c as g,e as h}from"./chunk-3IXDZKQC.js";import"./chunk-UJD4II27.js";import{ia as Me,la as v}from"./chunk-YM6Z3W7O.js";import"./chunk-G4CXIA4B.js";import{Fa as F,Fc as $,Gb as fe,Hb as Ee,Ib as Oe,Jb as p,Kb as u,Lb as d,Wb as V,bb as l,cb as C,ea as _e,hc as Ne,ja as n,na as S,nc as _,oa as ce,ob as Ce,oc as f,qb as U,zb as a}from"./chunk-2CGEOOG5.js";import"./chunk-FJU4DKT4.js";var Ae=(()=>{let i=class i extends D{constructor(e,t,o){super(t),this.fb=e,this.dialog=t,this.data=o,this.cstnService=n(s),this.employees=this.cstnService.employees.getAll({orderBy:["name"],filterBehavior:se.Or,filters:me.create().equalIf("id",this.data?.teamEmployee?.employeeId).notAnyIf("teams.teamId",this.data?.teamId).filters()}),this.designations=this.cstnService.designations.getAll({orderBy:["name"]}),this.groups=this.cstnService.teams.groups.getAll(this.data.teamId,{orderBy:["name"]}),this.form=e.group({employeeId:[o?.teamEmployee?.employeeId,[E.required]],designationId:[o?.teamEmployee?.designationId,[E.required]],groupId:[o?.teamEmployee?.groupId,[]],isGroupLeader:[o?.teamEmployee?.isGroupLeader??!1,[E.required]],startDate:[o?.teamEmployee?.startDate??new Date(),[E.required]],endDate:[o?.teamEmployee?.endDate,[]]});}submit(){this.IsValid()&&(this.data?.teamEmployee?this.save(this.cstnService.teams.employees.update(this.data.teamId,this.data.teamEmployee.id,this.form.value)):this.save(this.cstnService.teams.employees.create(this.data.teamId,this.form.value)));}};i.ɵfac=function(t){return new(t||i)(C(k),C(H),C(Q));},i.ɵcmp=S({type:i,selectors:[["sz-constr-construction-zones-units-save"]],standalone:!0,features:[_([]),U,f],decls:12,vars:9,consts:()=>{let e;e="\u0627\u0644\u0645\u0648\u0638\u0641";let t;t="\u0627\u0644\u062A\u0639\u064A\u064A\u0646";let o;o="\u0645\u062C\u0645\u0648\u0639\u0629";let L;L="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629";let Se;return Se="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0646\u0647\u0627\u064A\u0629",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","employeeId","label",e,3,"source"],["formControlName","designationId","label",t,3,"source"],["formControlName","groupId","label",o,3,"source","emptyOption"],["formControlName","isGroupLeader"],[1,"sz-form-row"],["formControlName","startDate","label",L],["formControlName","endDate","label",Se],[3,"actions"]];},template:function(t,o){t&1&&(d(0,"sz-ui-dialog-header",0),p(1,"mat-dialog-content")(2,"form",1),d(3,"sz-ui-form-field-select",2)(4,"sz-ui-form-field-select",3)(5,"sz-ui-form-field-select",4),p(6,"mat-checkbox",5),Ne(7,"Group Leader"),u(),p(8,"div",6),d(9,"sz-ui-form-field-date",7)(10,"sz-ui-form-field-date",8),u()()(),d(11,"sz-ui-dialog-actions",9)),t&2&&(a("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),l(2),a("formGroup",o.form),l(),a("source",o.employees),l(),a("source",o.designations),l(),a("source",o.groups)("emptyOption",!0),l(6),a("actions",o.actions));},dependencies:[Y,j,B,X,w,q,R,J,he,ge,M,z,P,pe,le,de],encapsulation:2});let r=i;return r;})();var ne=(()=>{let i=class i{constructor(){this.route=n(T),this.router=n(g),this.dialog=n(I),this.locale=n($),this.cstnService=n(s),this.team=F.required(),this.dataSource=new oe([]),this.card={title:O.employees,menu:W.more([c.add(()=>this.openSaveComponent()),N.divider()])},this.dataSource.columnDefs.push(m.uuid("id"),m.icon("group").setHeaderSortable(!1).setStyleSmall().setValueTooltip(e=>e.group&&e.isGroupLeader?O.group_leader:"").setValueGetter(e=>e.group&&e.isGroupLeader?"engineering":""),m.string("employee.name").setStacked(m.string("designation.name").setValueClassFontSmall()),m.string("employee.primaryPhone"),m.date("startDate").setVisible(!1),m.date("endDate").setVisible(!1),m.date("createdAt").setVisible(!1),m.date("updatedAt").setVisible(!1),te.menu([c.edit(e=>this.openSaveComponent(e)),N.divider(),c.delete(e=>this.openDeleteComponent(e))])),this.dataSource.groupDefs={key:"groupId",name:O.test_group,nameGetterFn:e=>e.group?.name??""};}ngOnInit(){this.get();}openSaveComponent(e){this.dialog.open(Ae,{data:{teamId:this.team().id,teamEmployee:e}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openDeleteComponent(e){this.dialog.open(x,{data:ee.delete(this.cstnService.teams.employees.delete(this.team().id,e.id),e)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}get(){this.cstnService.teams.employees.get(this.team().id,this.dataSource.getQuery()).pipe(ie(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-constr-construction-team-employees-groups"]],inputs:{team:[1,"team"]},standalone:!0,features:[_([s]),f],decls:2,vars:3,consts:[[3,"card"],["content","",3,"update","paginationEnabled","dataSource"]],template:function(t,o){t&1&&(p(0,"sz-ui-card",0)(1,"sz-ui-table",1),V("update",function(){return o.get();}),u()()),t&2&&(a("card",o.card),l(),a("paginationEnabled",!1)("dataSource",o.dataSource));},dependencies:[h,A,re,v,y],encapsulation:2});let r=i;return r;})();var ae=(()=>{let i=class i extends D{constructor(e,t,o){super(t),this.fb=e,this.dialog=t,this.data=o,this.cstnService=n(s),this.form=e.group({name:[o?.teamGroup?.name,[E.required,E.minLength(1)]],description:[o?.teamGroup?.description,[]]});}submit(){this.IsValid()&&(this.data.teamGroup?this.save(this.cstnService.teams.groups.update(this.data.teamId,this.data.teamGroup.id,this.form.value)):this.save(this.cstnService.teams.groups.create(this.data.teamId,this.form.value)));}};i.ɵfac=function(t){return new(t||i)(C(k),C(H),C(Q));},i.ɵcmp=S({type:i,selectors:[["sz-constr-groups-save"]],standalone:!0,features:[_([s]),U,f],decls:6,vars:5,consts:()=>{let e;e="\u0627\u0644\u0627\u0633\u0645";let t;return t="\u0627\u0644\u0648\u0635\u0641",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",t],[3,"actions"]];},template:function(t,o){t&1&&(d(0,"sz-ui-dialog-header",0),p(1,"mat-dialog-content")(2,"form",1),d(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3),u()(),d(5,"sz-ui-dialog-actions",4)),t&2&&(a("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),l(2),a("formGroup",o.form),l(3),a("actions",o.actions));},dependencies:[Y,j,B,X,w,q,R,J,M,z,P,Te,Ie],encapsulation:2});let r=i;return r;})();var De=(()=>{let i=class i{constructor(){this.route=n(T),this.router=n(g),this.dialog=n(I),this.locale=n($),this.cstnService=n(s),this.team=F.required(),this.dataSource=new oe([]),this.dataSource.columnDefs.push(m.uuid("id"),m.string("name").setStacked(m.string("description").setValueClassFontSmall()),m.date("createdAt").setVisible(!1),m.date("updatedAt").setVisible(!1),te.menu([c.edit(e=>this.openSaveComponent(e)),N.divider(),c.delete(e=>this.openDeleteComponent(e))]));}ngOnInit(){this.get();}openSaveComponent(e){this.dialog.open(ae,{data:{teamId:this.team().id,group:e}}).afterClosed().subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openDeleteComponent(e){this.dialog.open(x,{data:ee.delete(this.cstnService.teams.groups.delete(this.team().id,e.id),e)}).afterClosed().subscribe(t=>{this.dataSource.delete(t);});}get(){this.cstnService.teams.groups.get(this.team().id,this.dataSource.getQuery()).pipe(ie(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-constr-construction-team-groups"]],inputs:{team:[1,"team"]},standalone:!0,features:[_([s]),f],decls:1,vars:2,consts:[["content","",3,"update","paginationEnabled","dataSource"]],template:function(t,o){t&1&&(p(0,"sz-ui-table",0),V("update",function(){return o.get();}),u()),t&2&&a("paginationEnabled",!1)("dataSource",o.dataSource);},dependencies:[h,A,re,v],encapsulation:2});let r=i;return r;})();function $e(r,i){if(r&1&&d(0,"sz-ui-card",3),r&2){let Pe=i.$implicit;a("card",Pe);}}var ze=(()=>{let i=class i{constructor(){this.cstnService=n(s),this.router=n(g),this.route=n(T),this.dialog=n(I),this.alert=Ce(void 0),this.menu=W.more([c.edit(()=>this.openSaveComponent(this.team)),N.divider(),c.groups(()=>this.router.navigate(["groups"],{relativeTo:this.route}))]),this.cards=[],this.team=this.route.snapshot.data.team;}addEmployeesCountCard(){let e={title:0,icon:ue.person,subtitle:O.employees,indicator:!0};this.cards.push(e),this.cstnService.teams.employees.count(this.team.id).subscribe(t=>{e.title=t;});}addGroupsCountCard(){let e={title:0,icon:ue.group,subtitle:O.groups,indicator:!0};this.cards.push(e),this.cstnService.teams.groups.count(this.team.id).subscribe(t=>{e.title=t;});}openSaveComponent(e){this.dialog.open(Re,{data:e}).afterClosed().subscribe(t=>{t&&(this.team=t);});}openGroupSaveComponent(){this.dialog.open(ae,{data:{teamId:this.team.id}}).afterClosed().subscribe(e=>{});}};i.ɵfac=function(t){return new(t||i)();},i.ɵcmp=S({type:i,selectors:[["sz-constr-construction-team"]],features:[_([])],decls:8,vars:5,consts:[[3,"title","subtitle","menu"],[3,"alert"],[1,"sz-grid-card"],[3,"card"],[1,"tw-my-4"],[3,"team"]],template:function(t,o){t&1&&(d(0,"sz-ui-app-bar",0)(1,"sz-ui-alert",1),p(2,"div",2),Ee(3,$e,1,1,"sz-ui-card",3,fe),u(),p(5,"div",4),d(6,"sz-constr-construction-team-employees-groups",5),u(),d(7,"div",4)),t&2&&(a("title",o.team.name)("subtitle",o.team.description)("menu",o.menu),l(),a("alert",o.alert()),l(2),Oe(o.cards),l(3),a("team",o.team));},dependencies:[K,Z,y,ne],encapsulation:2});let r=i;return r;})();var To=(()=>{let i=class i{};i.ɵfac=function(t){return new(t||i)();},i.ɵmod=ce({type:i}),i.ɵinj=_e({providers:[s],imports:[h.forChild([{path:"",component:ze},{path:"groups",component:De}]),R,Me,v,K,A,M,Z,y,ne]});let r=i;return r;})();export{To as TeamModule};/**i18n:74c2b26e2511915b63b53dced5a329acbedd3101dfbc00b668fe6d77d7375591*/