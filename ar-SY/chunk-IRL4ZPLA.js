import{a as De}from"./chunk-K4OOKUQ2.js";import{a as h}from"./chunk-HLRWMEWV.js";import{b as y}from"./chunk-L4YNU5ME.js";import{a as Ue,b as Xe,c as Ye,d as xe,e as je}from"./chunk-VDRIOQRH.js";import{b as $}from"./chunk-LXK4YWXJ.js";import{a as ke}from"./chunk-2IH6W6RH.js";import{a as I}from"./chunk-JDLKSXQ6.js";import{b as Fe,h as Ge}from"./chunk-K7QJU5W4.js";import"./chunk-K6V7CDNO.js";import{a as L}from"./chunk-ORS2JBK4.js";import"./chunk-HDESHI6J.js";import{e as Ve,f as be,g as Be,j as R}from"./chunk-FU2YQI4O.js";import{a as A}from"./chunk-RZMF5OBM.js";import{d as ye,e as g,f as $e,g as T,h as ve,j as ze}from"./chunk-2H57PQRQ.js";import{a as de,b as Me,d as ue,e as fe,g as P}from"./chunk-5Z2AVCMQ.js";import{c as Pe,d as ge,h as Te,j as Le,p as Ie,s as Ae,t as he,v as Re}from"./chunk-OTQOREXX.js";import"./chunk-ZFDGA7FN.js";import{c as D}from"./chunk-RVYZ6BY4.js";import{h as ce}from"./chunk-WSRIOYTJ.js";import{b as Ce,c as d}from"./chunk-4NIIIJVR.js";import"./chunk-NSDPW5NR.js";import{d as M,f as Z,g as ee,k as u,l as oe,n as ie,q as te,r as ne,t as re,u as _e}from"./chunk-HCMVICB7.js";import{p as me,t as Se}from"./chunk-6FRRGOY6.js";import{a as ae,c as se,e as le}from"./chunk-OML62A3D.js";import{ha as Ee,ia as pe,ka as Oe,la as Ne}from"./chunk-YDNNJYIT.js";import"./chunk-7BDCTZU5.js";import{Hb as q,Ib as H,Jb as W,Kb as E,Lb as s,Mb as l,Wb as c,Xb as Q,bb as p,cb as S,ea as Y,ic as J,ja as x,na as N,oa as j,ob as k,oc as C,pc as K,qb as w,zb as m}from"./chunk-5JWJCQP4.js";import{a as f,b as O}from"./chunk-E7WAML37.js";var qe=(()=>{let e=class e extends Ve{constructor(t,i,o,n){super(o),this.mpplService=t,this.fb=i,this.dialog=o,this.data=n,this.nationalities=this.mpplService.nationalities.getAll({orderBy:["name"]}),this.languages=this.mpplService.languages.getAll({orderBy:["name"]}),this.sexes=Object.keys(y).map(_=>y[_]),this.titles=this.mpplService.titles.get(O(f({},D.unpaged()),{orderBy:"name"})),this.titleAutoCompleteConfig={valueChangedFn:_=>(typeof _=="string"&&(this.titles=this.mpplService.titles.get(O(f({query:_},D.default()),{orderBy:"name"}))),!1),optionDisplayWithFn:_=>_.name,optionValueFn:_=>_,suffixes:[{icon:T.save,tooltip:d.save,hideOnLoading:!0,hideOnValid:!0,hideOnEmpty:!0,clickFn:_=>this.mpplService.titles.create({name:_}).pipe(Te(this.indicator))}]},this.form=i.group({sex:[n.sex,[M.required]],languageId:[n.languageId,[M.required]],title:[n.title,[ke()]],ssn:[n.ssn,[]],nationalityId:[n.nationalityId,[]],birthDate:[n.birthDate,[]],primaryEmail:[n?.primaryEmail,[M.email]],secondaryEmail:[n?.secondaryEmail,[M.email]],mobilePhone:new u(n?.mobilePhone),homePhone:new u(n?.homePhone),workPhone:new u(n?.workPhone),homeAddress:new u(n?.homeAddress)});}submit(){this.IsValid()&&this.save(this.mpplService.persons.update(this.data.id,O(f({},this.form.value),{titleId:this.form.value.title?.id})));}};e.ɵfac=function(i){return new(i||e)(S(I),S(ne),S(de),S(Me));},e.ɵcmp=N({type:e,selectors:[["sz-medisy-people-person-save"]],standalone:!0,features:[C([]),w,K],decls:32,vars:11,consts:()=>{let t;t="\u0627\u0644\u062C\u0646\u0633\u064A\u0629";let i;i="\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0637\u0646\u064A";let o;o="\u0627\u0644\u0644\u063A\u0629";let n;n="\u0627\u0644\u062C\u0646\u0633";let _;_="\u0627\u0644\u0644\u0642\u0628";let v;v="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0648\u0644\u0627\u062F\u0629";let z;z="\u0627\u0644\u062C\u0648\u0627\u0644";let V;V="\u0627\u0644\u0645\u0646\u0632\u0644";let b;b="\u0627\u0644\u0639\u0645\u0644";let B;B="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0627\u0644\u0627\u0633\u0627\u0633\u064A";let F;F="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0627\u0644\u062B\u0627\u0646\u0648\u064A";let G;G="\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0646\u0632\u0644";let U;U="\u0627\u0644\u0647\u0648\u0627\u062A\u0641";let X;return X="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A",[G,U,X,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],[1,"sz-form-row"],["formControlName","nationalityId","label",t,3,"source"],["formControlName","ssn","label",i],["formControlName","languageId","label",o,3,"source"],["formControlName","sex","label",n,3,"source","localizedValue"],["formControlName","title","label",_,3,"config","source"],["formControlName","birthDate","label",v],[1,"tw-mb-4"],["multi",""],["formControlName","homeAddress"],["formControlName","mobilePhone","label",z],["formControlName","homePhone","label",V],["formControlName","workPhone","label",b],["formControlName","primaryEmail","label",B],["formControlName","secondaryEmail","label",F],[3,"actions"]];},template:function(i,o){i&1&&(l(0,"sz-ui-dialog-header",3),E(1,"mat-dialog-content")(2,"form",4)(3,"div",5),l(4,"sz-ui-form-field-select",6)(5,"sz-ui-form-field-input",7),s(),l(6,"sz-ui-form-field-select",8),E(7,"div",5),l(8,"sz-ui-form-field-select",9)(9,"sz-ui-form-field-autocomplete",10),s(),l(10,"sz-ui-form-field-date",11),E(11,"div",12)(12,"mat-accordion",13)(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title"),c(16,0),s()(),l(17,"sz-ui-form-field-address",14),s(),E(18,"mat-expansion-panel")(19,"mat-expansion-panel-header")(20,"mat-panel-title"),c(21,1),s()(),l(22,"sz-ui-form-field-phone-number",15)(23,"sz-ui-form-field-phone-number",16)(24,"sz-ui-form-field-phone-number",17),s(),E(25,"mat-expansion-panel")(26,"mat-expansion-panel-header")(27,"mat-panel-title"),c(28,2),s()(),l(29,"sz-ui-form-field-input",18)(30,"sz-ui-form-field-input",19),s()()()()(),l(31,"sz-ui-dialog-actions",20)),i&2&&(m("title",o.title)("subtitle",o.subtitle)("alert",o.alert()),p(2),m("formGroup",o.form),p(2),m("source",o.nationalities),p(2),m("source",o.languages),p(2),m("source",o.sexes)("localizedValue",!0),p(),m("config",o.titleAutoCompleteConfig)("source",o.titles),p(22),m("actions",o.actions));},dependencies:[_e,oe,Z,ee,ie,te,R,be,Be,Re,Pe,Ie,Ae,Le,P,fe,je,xe,Ue,Xe,Ye,ge,he],encapsulation:2});let r=e;return r;})();function Ke(r,e){if(r&1&&l(0,"sz-ui-card",3),r&2){let Qe=e.$implicit;m("card",Qe);}}var He=(()=>{let e=class e{constructor(t,i,o,n){this.dialog=t,this.mlabService=i,this.route=o,this.router=n,this.personNamePipe=x($),this.items=[],this.person=this.route.snapshot.data.person,this.appBarConfig={title:this.personNamePipe.transform(this.person),menu:ze.more([ve.edit(()=>this.openSaveComponent()),g.divider(),g.item(d.names,"info",()=>this.navigate("names")),g.item(d.documents,"badge",()=>this.navigate("documents"))])},this.items.push(this.buildAnalysesCard());}buildAnalysesCard(){let t={icon:T.science,header:{title:0,subtitle:d.analyses},indicator:k(!0),clickFn:()=>this.router.navigate([De.Analyses],{state:{filter:{field:"personId",op:me.Equal,value:this.person.id}}})};return this.mlabService.analyses.count({filters:Se.create().equal("personId",this.person.id).filters()}).subscribe(i=>{t.header&&(t.header.title=i);}),t;}navigate(t){this.router.navigate([t],{relativeTo:this.route});}openSaveComponent(){this.dialog.open(qe,{data:this.person}).afterClosed().subscribe(t=>{t&&(this.person=t);});}openBarcodeWriterComponent(){this.dialog.open(Ge,{data:{format:Fe.QR_CODE,msg:`personid.${this.person.id}`}}).afterClosed().subscribe({});}};e.ɵfac=function(i){return new(i||e)(S(ue),S(L),S(ae),S(se));},e.ɵcmp=N({type:e,selectors:[["sz-medisy-people-person"]],features:[C([L,$])],decls:7,vars:1,consts:[[3,"config"],["end","","mat-icon-button","",3,"click"],[1,"sz-grid-card"],[3,"card"]],template:function(i,o){i&1&&(E(0,"sz-ui-app-bar",0)(1,"button",1),Q("click",function(){return o.openBarcodeWriterComponent();}),E(2,"mat-icon"),J(3,"qr_code"),s()()(),E(4,"div",2),H(5,Ke,1,1,"sz-ui-card",3,q),s()),i&2&&(m("config",o.appBarConfig),p(5),W(o.items));},dependencies:[Ee,h,A,Oe],encapsulation:2});let r=e;return r;})();var We=[{path:"",component:He},{path:"names",loadComponent:()=>import("./chunk-7RSXCU42.js").then(r=>r.PersonNamesComponent)},{path:"documents",loadComponent:()=>import("./chunk-2CKOHFH6.js").then(r=>r.PersonDocumentsComponent)}];var Si=(()=>{let e=class e{};e.ɵfac=function(i){return new(i||e)();},e.ɵmod=j({type:e}),e.ɵinj=Y({providers:[I],imports:[re,le.forChild(We),ce,pe,h,R,A,ye,Ce,P,Ne,$e]});let r=e;return r;})();export{Si as PersonModule};/**i18n:0723fdc6bb4a61bdf6e4521b7e87431ed83fc9fa1984f79dc75da1b4dd886659*/