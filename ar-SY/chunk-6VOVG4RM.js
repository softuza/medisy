import{a as u}from"./chunk-LYLLKFDL.js";import{a as q}from"./chunk-YCRED7JA.js";import{a as re,d as se,e as n,h as le,i as Se,j as de}from"./chunk-AJ53IAOZ.js";import"./chunk-YSNB3P37.js";import"./chunk-QVKWJFRG.js";import{b as ee,f as te,g as oe,h as ie,j as ae,k as T}from"./chunk-ZQ3WWH5V.js";import"./chunk-AJFWP4NB.js";import{a as j,b as J,d as X,e as w,g as N}from"./chunk-IVPZHVY6.js";import{c as Q,o as x,q as K,s as W,t as Y}from"./chunk-SXZECFKA.js";import"./chunk-YMAJIOBZ.js";import"./chunk-PYOUUVMA.js";import"./chunk-YLO36JWT.js";import{d as g,f as L,g as b,l as v,n as V,q as $,r as U,t as F}from"./chunk-4DSQMHTF.js";import{b as S,c as Z}from"./chunk-UEBI7D6A.js";import{a as ne}from"./chunk-5RP6DSGT.js";import"./chunk-B2AKHGYH.js";import"./chunk-ODIMT2GD.js";import"./chunk-NBE6QGAD.js";import{a as H}from"./chunk-TCPYXQGZ.js";import"./chunk-BBLNUGHS.js";import{c as B,d as y}from"./chunk-WMCOMOML.js";import"./chunk-HNENNTVD.js";import"./chunk-V2COJPJH.js";import{ia as G,la as k}from"./chunk-H2OL5IOU.js";import{m as E}from"./chunk-CYOOLWM5.js";import{Jb as l,Kb as m,Lb as _,Wb as M,bb as p,ea as A,ja as r,mb as z,mc as f,na as c,nc as O,oa as I,yb as s}from"./chunk-6EDHPT3A.js";import"./chunk-NLUW4JS2.js";var _e=(()=>{let o=class o extends te{constructor(){let e=r(j);super(e),this.fb=r(U),this.data=r(J),this.cstnService=r(u);let i=this.fb;this.dialog=e;let t=this.data;this.form=i.group({name:[t?.name,[g.required,g.minLength(1)]],description:[t?.description,[]],code:[t?.code,[]],actualStartDate:[t?.actualStartDate,[]],actualEndDate:[t?.actualEndDate,[]],plannedStartDate:[t?.plannedStartDate,[]],plannedEndDate:[t?.plannedEndDate,[]]});}submit(){this.IsValid()&&(this.data?this.save(this.cstnService.projects.update(this.data.id,this.form.value)):this.save(this.cstnService.projects.create(this.form.value)));}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=c({type:o,selectors:[["sz-constr-construction-projects-save"]],standalone:!0,features:[f([]),z,O],decls:13,vars:5,consts:()=>{let e;e="\u0627\u0644\u0627\u0633\u0645";let i;i="\u0627\u0644\u0648\u0635\u0641";let t;t="\u0627\u0644\u0631\u0645\u0632";let C;C="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629 \u0627\u0644\u0645\u062E\u0637\u0637";let D;D="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0646\u0647\u0627\u064A\u0629 \u0627\u0644\u0645\u062E\u0637\u0637";let h;h="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629 \u0627\u0644\u0641\u0639\u0644\u064A";let P;return P="\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0646\u0647\u0627\u064A\u0629 \u0627\u0644\u0641\u0639\u0644\u064A",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",i],["formControlName","code","label",t],[1,"sz-form-row"],["formControlName","plannedStartDate","label",C],["formControlName","plannedEndDate","label",D],["formControlName","actualStartDate","label",h],["formControlName","actualEndDate","label",P],[3,"actions"]];},template:function(i,t){i&1&&(_(0,"sz-ui-dialog-header",0),l(1,"mat-dialog-content")(2,"form",1),_(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"sz-ui-form-field-input",4),l(6,"div",5),_(7,"sz-ui-form-field-date",6)(8,"sz-ui-form-field-date",7),m(),l(9,"div",5),_(10,"sz-ui-form-field-date",8)(11,"sz-ui-form-field-date",9),m()()(),_(12,"sz-ui-dialog-actions",10)),i&2&&(s("title",t.title)("subtitle",t.subtitle)("alert",t.alert()),p(2),s("formGroup",t.form),p(10),s("actions",t.actions));},dependencies:[F,v,L,b,V,$,N,w,K,T,oe,ie,Y,Q,W,x],encapsulation:2});let a=o;return a;})();var R=(()=>{let o=class o{constructor(){this.cstnService=r(u),this.dialog=r(X),this.router=r(B),this.datePipe=r(E),this.dataSource=new le("name"),this.appBarConfig={title:H.projects,menu:Z.default().setItems([S.add(this.openSaveComponent.bind(this)),S.menu([S.search()])])},this.dataSource.columnDefs.push(n.uuid("id"),n.hyperlink("name").setClickFn(e=>this.router.navigate([q.Projects,e.id])).setHeaderSortable(!0),n.string("code"),n.date("actualStartDate").setVisible(!1).setValueFormatter(e=>this.datePipe.transform(e,"mediumDate")),n.date("actualEndDate").setVisible(!1).setValueFormatter(e=>this.datePipe.transform(e,"mediumDate")),n.date("plannedStartDate").setVisible(!0).setValueFormatter(e=>this.datePipe.transform(e,"mediumDate")).setResponsive(!0),n.date("plannedEndDate").setVisible(!0).setValueFormatter(e=>this.datePipe.transform(e,"mediumDate")).setResponsive(!0),n.date("createdAt").setVisible(!1),n.date("updatedAt").setVisible(!1),n.menu([S.edit(this.openSaveComponent.bind(this)),S.divider(),S.delete(this.openProjectDeleteComponent.bind(this))])),this.get();}openSaveComponent(e){this.dialog.open(_e,{data:e}).afterClosed().subscribe(i=>{this.dataSource.addOrUpdateItem(i);});}openProjectDeleteComponent(e){this.dialog.open(ae,{data:ee.delete(this.cstnService.projects.delete(e.id),e)}).afterClosed().subscribe(i=>{this.dataSource.delete(i);});}get(){this.cstnService.projects.get(this.dataSource.getQuery()).pipe(Se(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(i){return new(i||o)();},o.ɵcmp=c({type:o,selectors:[["sz-constr-construction-projects"]],standalone:!0,features:[f([]),O],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(i,t){i&1&&(l(0,"sz-ui-table-bar",0),M("changed",function(){return t.get();}),m(),l(1,"sz-ui-table",1),M("update",function(){return t.get();}),m()),i&2&&(s("config",t.appBarConfig)("dataSource",t.dataSource),p(),s("dataSource",t.dataSource));},dependencies:[re,se],encapsulation:2});let a=o;return a;})();var tt=(()=>{let o=class o{};o.ɵfac=function(i){return new(i||o)();},o.ɵmod=I({type:o}),o.ɵinj=A({providers:[u,E],imports:[y.forChild([{path:"",component:R}]),N,G,k,de,T,ne,R]});let a=o;return a;})();export{tt as ProjectsModule};/**i18n:71c33448fc84035c6ee56f25f20b16a3c311d1f911de884d4bce9857c4574a16*/