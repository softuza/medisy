"use strict";(self.webpackChunkmedisy=self.webpackChunkmedisy||[]).push([[677],{677:(U,y,s)=>{s.r(y),s.d(y,{AnalysisModule:()=>K});var c=s(6814),M=s(2296),v=s(7700),S=s(6385),P=s(617),u=s(7988),E=s(8109),T=s(5738),O=s(758),n=s(2595),g=s(5041),C=s(5807),t=s(5879),d=s(9060),r=s(5348),o=s(2430),m=s(5703),p=s(2764),A=s(3572),f=s(9598),z=s(7398),D=s(8180),I=s(2516),R=s(6128);function L(e,h){1&e&&t._UZ(0,"sz-ui-card",6),2&e&&t.Q6J("card",h.$implicit)}const B=[{path:"",component:(()=>{class e{constructor(a,i,l,N,Z,$){this.dialog=a,this.route=i,this.router=l,this.analysisService=N,this.personService=Z,this.personNamePipe=$,this.alert$=(0,t.tdS)(void 0),this.testsDataSource=new A.b2(f.J.pagedSorted("-createdAt")),this.tiles=[],this.analysisMenu=m.B.more([p.N.edit(()=>this.openEditComponent),p.N.print(()=>this.openEditComponent)]),this.analysis=this.route.snapshot.data.analysis,this.getPerson(),this.buildTiles()}buildTiles(){const a={icon:"science",subtitle:"\u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631\u0627\u062A",type:o.k.Counter,clickFn:()=>this.router.navigate(["tests"],{relativeTo:this.route})},i={icon:"label",subtitle:"\u0627\u0644\u0639\u064A\u0646\u0627\u062A",type:o.k.Counter,clickFn:()=>this.router.navigate(["specimens"],{relativeTo:this.route})};this.analysisService.getTests(this.analysis.id,f.J.count()).pipe((0,z.U)(l=>l.count),(0,D.q)(1)).subscribe(l=>{a.title=l}),this.analysisService.getSpecimens(this.analysis.id,f.J.count()).pipe((0,z.U)(l=>l.count),(0,D.q)(1)).subscribe(l=>{i.title=l}),this.tiles.push(a),this.tiles.push(i)}getPerson(){this.analysis.personId&&this.personService.getPerson(this.analysis.personId).pipe((0,D.q)(1)).subscribe(a=>{this.tiles.splice(0,0,{icon:"person",type:o.k.Text,subtitle:"\u0627\u0644\u0645\u0631\u064A\u0636",title:this.personNamePipe.transform(a),clickFn:()=>this.router.navigate([`mppl/persons/${a.id}`])})})}openEditComponent(){}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(v.uw),t.Y36(E.gz),t.Y36(E.F0),t.Y36(T.K),t.Y36(r.R),t.Y36(d.Y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["medisy-laboratory-analysis"]],features:[t._Bn([T.K,r.R,d.Y])],decls:9,vars:4,consts:[["start",""],[1,"sz-h5"],[1,"tw-text-sm"],["end","",3,"menu"],[1,"sz-grid-card"],[3,"card",4,"ngFor","ngForOf"],[3,"card"]],template:function(a,i){1&a&&(t.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),t._uU(3),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.qZA()(),t._UZ(6,"sz-ui-menu",3),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,L,1,1,"sz-ui-card",5),t.qZA()),2&a&&(t.xp6(3),t.Oqu(i.analysis.code),t.xp6(2),t.Oqu(i.analysis.note),t.xp6(1),t.Q6J("menu",i.analysisMenu),t.xp6(2),t.Q6J("ngForOf",i.tiles))},dependencies:[c.sg,I.z,R.X,C.i],encapsulation:2}),e})()},{path:"tests",loadComponent:()=>Promise.resolve().then(s.bind(s,1947)).then(e=>e.AnalysisTestsComponent)},{path:"specimens",loadComponent:()=>s.e(380).then(s.bind(s,2380)).then(e=>e.AnalysisSpecimensComponent)}];var Y=s(1947);let K=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[T.K],imports:[c.ez,E.Bz.forChild(B),v.Is,O.E3,u.Tx,P.Ps,M.ot,S.t,g.n,n.V,C.i,Y.AnalysisTestsComponent]}),e})()},1947:(U,y,s)=>{s.r(y),s.d(y,{AnalysisTestsComponent:()=>t});var c=s(8109),M=s(2191),v=s(592),S=s(5738),P=s(5041),u=s(3572),E=s(9598),T=s(8721),O=s(8180),n=s(5879),g=s(8359),C=s(2516);let t=(()=>{class d{constructor(o,m,p){this.route=o,this.analysisService=m,this.laboratoryI18nPipe=p,this.dataSource=new u.b2(E.J.pagedSorted("test.testClass")),this.analysis=this.route.snapshot.data.analysis,this.dataSource.columns=[u.UC.text("test.testclass","\u0635\u0646\u0641 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631",A=>A.test.testClass.name),u.UC.text("test.state","\u0627\u0644\u062D\u0627\u0644\u0629",A=>p.transform(A.test.state)),M.h.menu([])],this.get()}get(){this.analysisService.getTests(this.analysis.id,this.dataSource.filterModel).pipe((0,T.sU)(this.dataSource.indicator)).pipe((0,O.q)(1)).subscribe(o=>{this.dataSource.set(o.items,o.count)})}}return d.\u0275fac=function(o){return new(o||d)(n.Y36(c.gz),n.Y36(S.K),n.Y36(v.M))},d.\u0275cmp=n.Xpm({type:d,selectors:[["medisy-laboratory-analysis-tests"]],standalone:!0,features:[n._Bn([S.K,v.M]),n.jDz],decls:7,vars:4,consts:function(){let r;return r="\u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631\u0627\u062A",[["start",""],[1,"sz-h5"],r,["routerLink","../",1,"tw-underline","tw-text-sm"],[3,"paginationEnabled","stateEnabled","dataSource","update"]]},template:function(o,m){1&o&&(n.TgZ(0,"sz-ui-header-basic")(1,"div",0)(2,"h5",1),n.SDv(3,2),n.qZA(),n.TgZ(4,"a",3),n._uU(5),n.qZA()()(),n.TgZ(6,"sz-ui-table",4),n.NdJ("update",function(){return m.get()}),n.qZA()),2&o&&(n.xp6(5),n.Oqu(m.analysis.code),n.xp6(1),n.Q6J("paginationEnabled",!0)("stateEnabled",!0)("dataSource",m.dataSource))},dependencies:[c.Bz,c.rH,u.Vn,g.K,P.n,C.z],encapsulation:2}),d})()}}]);