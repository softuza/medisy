import{c as S,g as E}from"./chunk-IDDVMHHY.js";import{a as re}from"./chunk-IRYXR6JI.js";import{b as u,c as Z,e as ee,g as te,s as oe,t as ie}from"./chunk-ECNTNMPY.js";import{a as g}from"./chunk-SUUMCV2R.js";import{c as q,h as x,i as H,j as J,l as K,m as Q,n as W}from"./chunk-TXP6BBJB.js";import{a as j,b as w,d as V,e as k,g as U}from"./chunk-BVSJJDLC.js";import{D as B,y as $}from"./chunk-EBF4GIWM.js";import{g as v,h as D,l as O,n as I,o as P,p as R,s as z}from"./chunk-2OZGA6L4.js";import{a as X}from"./chunk-KMOC5U6F.js";import{a as p}from"./chunk-CESDGIU3.js";import{a as L,e as F}from"./chunk-IMYK7VY7.js";import{i as T}from"./chunk-Y2P4J75K.js";import{Pa as Y,Ra as G}from"./chunk-KZIHA7KF.js";import{$b as N,Bb as s,Cb as d,Db as M,L as f,Nb as y,Rb as h,cb as l,cc as C,db as m,ja as n,kb as A,la as _,nb as a,sc as b}from"./chunk-6MBKLWBV.js";var ae=(()=>{let o=class o extends x{constructor(e,t,i,c){super(i),this.mlabService=e,this.fb=t,this.dialog=i,this.data=c,this.form=t.group({note:[c?.note,[]]});}submit(){this.IsValid()&&this.data&&this.save(this.mlabService.analyses.tests.update(this.data.analysisId,this.data.id,this.form.value));}};o.ɵfac=function(t){return new(t||o)(m(p),m(R),m(j),m(w));},o.ɵcmp=_({type:o,selectors:[["medisy-laboratory-analysis-tests-save"]],standalone:!0,features:[A,C],decls:5,vars:3,consts:()=>{let e;return e="\u0645\u0644\u0627\u062D\u0638\u0629",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","note","label",e],[3,"actions"]];},template:function(t,i){t&1&&(M(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),M(3,"sz-ui-form-field-input",2),d()(),M(4,"sz-ui-dialog-actions",3)),t&2&&(a("header",i.header),l(2),a("formGroup",i.form),l(2),a("actions",i.actions));},dependencies:[z,O,v,D,I,P,U,k,Q,H,J,B,$],encapsulation:2});let r=o;return r;})();var Ve=(()=>{let o=class o{constructor(){this.route=n(L),this.dialog=n(V),this.locale=n(b),this.mlabService=n(p),this.typeI18nPipe=n(E),this.dataSource=new ee(),this.analysis=this.route.snapshot.data.analysis,this.dataSource.addRows(Z.default([u.icon("test.state",X.state,e=>{switch(e.test.state){case S.Created:return"description";case S.Pending:return"pending";case S.Started:return"sync";case S.Finished:return"done";default:return"";}}).makeCompact(),u.text("test.testclass",g.testClass,e=>e.test.testClass.name),u.text("test.referenceGroup",g.referenceGroup,e=>e.test.referenceGroup.name),u.text("test.testResult",g.testResult,e=>e.test.referenceGroup.name),re.menu([T.edit(e=>this.openSaveComponent(e)),T.divider(),T.delete(e=>this.openDeleteComponent(e))])])),this.get();}openCreateComponent(){}openSaveComponent(e){this.dialog.open(ae,{data:e}).afterClosed().pipe(f(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openDeleteComponent(e){this.dialog.open(K,{data:W.delete(this.mlabService.analyses.tests.delete(e.analysisId,e.id),e)}).afterClosed().pipe(f(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.mlabService.analyses.tests.get(this.analysis.id,this.dataSource.buildRequest()).pipe(q(this.dataSource.indicator)).pipe(f(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(t){return new(t||o)();},o.ɵcmp=_({type:o,selectors:[["medisy-laboratory-analysis-tests"]],standalone:!0,features:[N([p,E]),C],decls:5,vars:3,consts:()=>{let e;return e="\u0625\u0636\u0627\u0641\u0629",[[3,"filter"],["mat-flat-button","","color","primary","start","",3,"click"],e,[3,"stateEnabled","dataSource","update"]];},template:function(t,i){t&1&&(s(0,"sz-ui-table-filter",0)(1,"button",1),h("click",function(){return i.openCreateComponent();}),s(2,"span"),y(3,2),d()()(),s(4,"sz-ui-table",3),h("update",function(){return i.get();}),d()),t&2&&(a("filter",i.dataSource.filter),l(4),a("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[F,ie,oe,te,G,Y],encapsulation:2});let r=o;return r;})();export{Ve as a};/**i18n:5ebc65b24f90b78d556a3a8c188ab6405e20b5534cf6eb00a5dd3e44f73f97d4*/