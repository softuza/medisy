import{a as k}from"./chunk-NSRTWGZ5.js";import{a as d}from"./chunk-LYLLKFDL.js";import{a as _}from"./chunk-YCRED7JA.js";import{a as V,d as w,e as r,h as A,i as P,j as R}from"./chunk-AJ53IAOZ.js";import"./chunk-YSNB3P37.js";import"./chunk-QVKWJFRG.js";import{b as H,j as I,k as j}from"./chunk-ZQ3WWH5V.js";import"./chunk-AJFWP4NB.js";import{d as T,g as D}from"./chunk-IVPZHVY6.js";import"./chunk-SXZECFKA.js";import"./chunk-YMAJIOBZ.js";import"./chunk-PYOUUVMA.js";import"./chunk-YLO36JWT.js";import"./chunk-4DSQMHTF.js";import{b as i,c as F}from"./chunk-UEBI7D6A.js";import{a as N}from"./chunk-5RP6DSGT.js";import"./chunk-B2AKHGYH.js";import"./chunk-ODIMT2GD.js";import"./chunk-NBE6QGAD.js";import{a as m}from"./chunk-TCPYXQGZ.js";import"./chunk-BBLNUGHS.js";import{c as v,d as M}from"./chunk-WMCOMOML.js";import"./chunk-HNENNTVD.js";import"./chunk-V2COJPJH.js";import{ia as y,la as B}from"./chunk-H2OL5IOU.js";import"./chunk-CYOOLWM5.js";import{Jb as u,Kb as l,Wb as c,bb as C,ea as S,ja as s,mc as b,na as h,nc as z,oa as g,yb as p}from"./chunk-6EDHPT3A.js";import"./chunk-NLUW4JS2.js";var f=(()=>{let t=class t{constructor(){this.cstnService=s(d),this.dialog=s(T),this.router=s(v),this.dataSource=new A("name"),this.appBarConfig={title:m.teams,menu:F.default().setItems([i.add(this.openSaveComponent.bind(this)),i.menu([i.search()])])},this.dataSource.columnDefs.push(r.uuid("id"),r.hyperlink("name").setClickFn(e=>this.router.navigate([_.Projects,e.id])).setHeaderSortable(!0),r.number("employeesCount").setValueGetter(e=>e.employees?.length).setHeaderName(m.employees).setHeaderSortable(!1),r.number("groupsCount").setValueGetter(e=>e.groups?.length).setHeaderName(m.groups).setHeaderSortable(!1),r.date("createdAt").setVisible(!1),r.date("updatedAt").setVisible(!1),r.menu([i.edit(this.openSaveComponent.bind(this)),i.divider(),i.delete(this.openTeamDeleteComponent.bind(this))])),this.get()}openSaveComponent(e){this.dialog.open(k,{data:e}).afterClosed().subscribe(o=>{this.dataSource.addOrUpdateItem(o)})}openTeamDeleteComponent(e){this.dialog.open(I,{data:H.delete(this.cstnService.teams.delete(e.id),e)}).afterClosed().subscribe(o=>{this.dataSource.delete(o)})}get(){this.cstnService.teams.get(this.dataSource.getQuery()).pipe(P(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e.items,e.count)})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=h({type:t,selectors:[["sz-constr-construction-teams"]],standalone:!0,features:[b([]),z],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(o,n){o&1&&(u(0,"sz-ui-table-bar",0),c("changed",function(){return n.get()}),l(),u(1,"sz-ui-table",1),c("update",function(){return n.get()}),l()),o&2&&(p("config",n.appBarConfig)("dataSource",n.dataSource),C(),p("dataSource",n.dataSource))},dependencies:[V,w],encapsulation:2});let a=t;return a})();var pe=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=g({type:t}),t.\u0275inj=S({providers:[d],imports:[M.forChild([{path:"",component:f}]),D,y,B,R,j,N,f]});let a=t;return a})();export{pe as TeamsModule};
/**i18n:71c33448fc84035c6ee56f25f20b16a3c311d1f911de884d4bce9857c4574a16*/
