import{a as j}from"./chunk-F65AH2SL.js";import{a as $e,b as ze,c as Re}from"./chunk-YBGEX7AS.js";import{f,g as be}from"./chunk-ZUTEIW3L.js";import"./chunk-PPO5LMMV.js";import"./chunk-6VMEWVPH.js";import"./chunk-JI5I5E7Z.js";import{a as Z}from"./chunk-NOAPOEUB.js";import{a as ge,b as he,c as w,e as Fe,o as De,p as ye}from"./chunk-FYVWUY5J.js";import"./chunk-BDKYF43S.js";import{c as Ie,g as Ee,h as Ae,i as G,j as X,l as Me,m as Y,n as Pe}from"./chunk-JUKWJGHA.js";import{a as v,b as L,d as Oe,e as U,g as O}from"./chunk-LR6DSKQQ.js";import{D as Ne,E as R,i as z,x as fe,z as de}from"./chunk-CJ3L35E7.js";import{d as T,g,h,l as F,n as D,o as y,p as b,s as $}from"./chunk-FZFNR6NR.js";import{a as Ce}from"./chunk-5MX2FBOB.js";import{b as V}from"./chunk-V2YTYBA6.js";import{a as ue,e as ce}from"./chunk-AQB7U7BU.js";import{e as Se}from"./chunk-4G55JY3H.js";import{i as B}from"./chunk-5QJH45WQ.js";import"./chunk-AWHXYS7Y.js";import"./chunk-EBVBFE7W.js";import{Pa as me,Ra as Te,Ua as pe,r as le}from"./chunk-W55BWEJG.js";import{Bb as s,Cb as p,Db as l,L as C,Nb as se,Pb as A,Rb as M,Zb as N,ac as P,ca as ie,cb as a,da as ne,db as m,f as te,ia as re,kb as I,la as d,ma as _e,nb as _,tb as ae,ub as E}from"./chunk-3QIFGVJ6.js";var u=(()=>{let o=class o{constructor(e){this.http=e,this.basePath="softuza-notification",this.notifications=new ce(this.http,`${this.basePath}/v1/notifications`);}};o.ɵfac=function(t){return new(t||o)(re(le));},o.ɵprov=ie({token:o,factory:o.ɵfac});let n=o;return n;})();var Ue=(()=>{let o=class o extends Ee{constructor(e,t,i){super(t),this.fb=e,this.dialog=t,this.data=i,this.form=e.group({channelType:[i?.channelType]});}submit(){this.IsValid()&&this.dialog.close(this.form.value);}};o.ɵfac=function(t){return new(t||o)(m(b),m(v),m(L));},o.ɵcmp=d({type:o,selectors:[["softuza-notification-notifications-filter"]],standalone:!0,features:[N([]),I,P],decls:5,vars:3,consts:[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","channelType"],[3,"actions"]],template:function(t,i){t&1&&(l(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),l(3,"medisy-form-field-channel-type",2),p()(),l(4,"sz-ui-dialog-actions",3)),t&2&&(_("header",i.header),a(2),_("formGroup",i.form),a(2),_("actions",i.actions));},dependencies:[$,F,g,h,D,y,Y,G,X,R,z,fe,O,U,j],encapsulation:2});let n=o;return n;})();function xe(n,o){if(n&1&&(s(0,"mat-tab",5),l(1,"sz-ui-form-field-input",9)(2,"sz-ui-form-field-input",10)(3,"sz-ui-form-field-input",11)(4,"sz-ui-form-field-textarea",12),p()),n&2){let c=M();_("formGroup",c.formEmail);}}function Be(n,o){if(n&1&&(s(0,"mat-tab",6),l(1,"sz-ui-form-field-input",13)(2,"sz-ui-form-field-textarea",14),p()),n&2){let c=M();_("formGroup",c.formSms);}}function we(n,o){if(n&1&&(s(0,"mat-tab",7),l(1,"sz-ui-form-field-input",15)(2,"sz-ui-form-field-textarea",16),p()),n&2){let c=M();_("formGroup",c.formPush);}}var Ve=(()=>{let o=class o extends Ae{constructor(e,t,i,r){super(i),this.sntiService=e,this.fb=t,this.dialog=i,this.data=r,this.channelTypes=f,this.subscriptions=new te(),this.formEmail=t.group({subject:[r?.email?.subject,[T.required]],replyToEmail:[r?.email?.replyToEmail,[T.email]],replyToName:[r?.email?.replyToName,[]],body:[r?.email?.body,[T.required]]}),this.formSms=t.group({originator:[r?.sms?.originator,[T.required]],body:[r?.sms?.body,[T.required]]}),this.formPush=t.group({title:[r?.push?.title,[T.required]],body:[r?.push?.body,[T.required]]}),this.form=t.group({name:[r?.name,[T.required]],description:[r?.description,[T.maxLength(4096)]],channelTypes:[r?.channelTypes??[],[T.required]]}),this.subscribeChanges();}ngOnDestroy(){this.subscriptions.unsubscribe();}subscribeChanges(){this.subscriptions.add(this.form.controls.channelTypes.valueChanges.subscribe(e=>{this.form.contains("email")?e?.includes(f.Email)||this.form.removeControl("email"):e?.includes(f.Email)&&this.form.addControl("email",this.formEmail),this.form.contains("sms")?e?.includes(f.Sms)||this.form.removeControl("sms"):e?.includes(f.Sms)&&this.form.addControl("sms",this.formSms),this.form.contains("push")?e?.includes(f.Push)||this.form.removeControl("push"):e?.includes(f.Push)&&this.form.addControl("push",this.formPush);}));}hasChannelType(e){return this.form.value.channelTypes?.includes(e);}submit(){this.IsValid()&&(this.data?this.save(this.sntiService.notifications.update(this.data.id,this.form.value)):this.save(this.sntiService.notifications.create(this.form.value)));}};o.ɵfac=function(t){return new(t||o)(m(u),m(b),m(v),m(L));},o.ɵcmp=d({type:o,selectors:[["medisy-laboratory-reference-values-save"]],standalone:!0,features:[N([]),I,P],decls:11,vars:7,consts:()=>{let e;e="\u0627\u0644\u0627\u0633\u0645";let t;t="\u0627\u0644\u0648\u0635\u0641";let i;i="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let r;r="\u0631\u0633\u0627\u0644\u0629 \u0646\u0635\u064A\u0629";let q;q="\u0627\u0634\u0639\u0627\u0631";let k;k="\u0627\u0644\u0645\u0648\u0636\u0648\u0639";let H;H="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A";let J;J="\u0627\u0644\u0627\u0633\u0645";let K;K="\u0627\u0644\u0645\u062D\u062A\u0648\u0649";let Q;Q="\u0627\u0644\u0645\u0631\u0633\u0644";let W;W="\u0627\u0644\u0645\u062D\u062A\u0648\u0649";let ee;ee="\u0627\u0644\u0644\u0642\u0628";let oe;return oe="\u0627\u0644\u0645\u062D\u062A\u0648\u0649",[[3,"header"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",e],["formControlName","description","label",t],["formControlName","channelTypes",3,"multiple"],["label",i,3,"formGroup"],["label",r,3,"formGroup"],["label",q,3,"formGroup"],[3,"actions"],["formControlName","subject","label",k],["formControlName","replyToEmail","label",H],["formControlName","replyToName","label",J],["formControlName","body","label",K],["formControlName","originator","label",Q],["formControlName","body","label",W],["formControlName","title","label",ee],["formControlName","body","label",oe]];},template:function(t,i){t&1&&(l(0,"sz-ui-dialog-header",0),s(1,"mat-dialog-content")(2,"form",1),l(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-textarea",3)(5,"medisy-form-field-channel-type",4),s(6,"mat-tab-group"),ae(7,xe,5,1,"mat-tab",5)(8,Be,3,1,"mat-tab",6)(9,we,3,1,"mat-tab",7),p()()(),l(10,"sz-ui-dialog-actions",8)),t&2&&(_("header",i.header),a(2),_("formGroup",i.form),a(3),_("multiple",!0),a(2),E(7,i.hasChannelType(i.channelTypes.Email)?7:-1),a(1),E(8,i.hasChannelType(i.channelTypes.Sms)?8:-1),a(1),E(9,i.hasChannelType(i.channelTypes.Push)?9:-1),a(1),_("actions",i.actions));},dependencies:[$,F,g,h,D,y,O,U,z,Re,$e,ze,Y,G,X,R,de,Ne,j],encapsulation:2});let n=o;return n;})();var Ge=(()=>{let o=class o{constructor(e,t){this.dialog=e,this.sntiService=t,this.title=Ce.notifications,this.dataSource=new he(ue.paged()),this.dataSource.addRows([w.borderless([Z.nameText(),Z.createdAt(),Z.menu([B.edit(i=>this.openSaveComponent(i)),B.delete(i=>this.openNotificationDeleteComponent(i))])]),w.headerless([ge.text("description")])]),this.get();}openFilterComponent(){this.dialog.open(Ue,{data:this.dataSource.filterModel}).afterClosed().pipe(C(1)).subscribe(e=>{this.dataSource.updateFilterModel(e),this.get();});}openSaveComponent(e){this.dialog.open(Ve,{data:e}).afterClosed().pipe(C(1)).subscribe(t=>{this.dataSource.addOrUpdateItem(t);});}openNotificationDeleteComponent(e){this.dialog.open(Me,{data:Pe.delete(this.sntiService.notifications.delete(e.id),e)}).afterClosed().pipe(C(1)).subscribe(t=>{this.dataSource.delete(t);});}get(){this.sntiService.notifications.get(this.dataSource.filterModel).pipe(Ie(this.dataSource.indicator),C(1)).subscribe(e=>{this.dataSource.set(e.items,e.count);});}};o.ɵfac=function(t){return new(t||o)(m(Oe),m(u));},o.ɵcmp=d({type:o,selectors:[["softuza-notification-notifications"]],features:[N([be])],decls:6,vars:5,consts:()=>{let e;return e="\u0625\u0636\u0627\u0641\u0629",[[3,"title"],[3,"dataSource","search","filter"],["mat-flat-button","","color","primary","start","",3,"click"],e,[3,"paginationEnabled","stateEnabled","dataSource","update"]];},template:function(t,i){t&1&&(l(0,"sz-ui-header-info",0),s(1,"sz-ui-table-filter",1),A("search",function(){return i.get();})("filter",function(){return i.openFilterComponent();}),s(2,"button",2),A("click",function(){return i.openSaveComponent();}),s(3,"span"),se(4,3),p()()(),s(5,"sz-ui-table",4),A("update",function(){return i.get();}),p()),t&2&&(_("title",i.title),a(1),_("dataSource",i.dataSource),a(4),_("paginationEnabled",!0)("stateEnabled",!0)("dataSource",i.dataSource));},dependencies:[me,De,Fe,V],encapsulation:2});let n=o;return n;})();var Xe=[{path:"",component:Ge}];var Wo=(()=>{let o=class o{};o.ɵfac=function(t){return new(t||o)();},o.ɵmod=_e({type:o}),o.ɵinj=ne({providers:[u],imports:[Se.forChild(Xe),O,Te,ye,V,pe]});let n=o;return n;})();export{Wo as NotificationsModule};/**i18n:419148c294ae56579e504a43f00a8e71eb3633c9912a0864afd0e0662e47e985*/