import{a as S}from"./chunk-V2VLUTSY.js";import{a as H}from"./chunk-TTT2H4BY.js";import{a,b as ie,d as re,e as ne,g as ae,j as se,k as me}from"./chunk-BOUFJEHO.js";import"./chunk-24XGG4IH.js";import"./chunk-5YQEEO6I.js";import{h as oe}from"./chunk-ZMRTG2CO.js";import"./chunk-M7XY5KNE.js";import"./chunk-DQUH2PQY.js";import{e as K,f as Z,g as x,i as ee,j as g,k as te}from"./chunk-VSSKGV6R.js";import{a as O}from"./chunk-EWFXGOX4.js";import{e as h,h as N}from"./chunk-7LPVSDDF.js";import{a as G,b as j,d as Y,e as X,g as M}from"./chunk-7V5K6Q5S.js";import{c as W,q as Q,u as J}from"./chunk-NGJJQGF7.js";import"./chunk-GZ5ZSNUH.js";import"./chunk-7ZI3SE3B.js";import"./chunk-OKA2GXHQ.js";import{c as q}from"./chunk-MB66MPUF.js";import"./chunk-EJLXBSOC.js";import{d as E,f as z,g as P,l as y,n as A,q as D,r as $,u as B}from"./chunk-6ZNCB6JN.js";import"./chunk-QKCTAPNJ.js";import{c as U,e as V}from"./chunk-6WV2F64L.js";import"./chunk-IZT57WL7.js";import{ia as F,ja as w,la as k}from"./chunk-RQYEI74F.js";import"./chunk-ZXXDKFNJ.js";import{Kb as m,Lb as u,Mb as p,Wb as L,Xb as f,bb as l,cb as s,ea as R,ja as _,na as c,oa as I,oc as C,pc as v,qb as b,zb as n}from"./chunk-6DKTNWLB.js";import"./chunk-6HJHW4I2.js";var pe=(()=>{let i=class i extends K{constructor(t,o,e){super(o),this.fb=t,this.dialog=o,this.data=e,this.cstnService=_(S),this.form=t.group({name:[e?.name,[E.required,E.minLength(1)]],number:[e?.number,[E.maxLength(24)]],primaryEmail:[e?.primaryEmail,[]],primaryPhone:[e?.primaryPhone,[]]});}submit(){this.IsValid()&&(this.data?this.save(this.cstnService.employees.update(this.data.id,this.form.value)):this.save(this.cstnService.employees.create(this.form.value)));}};i.ɵfac=function(o){return new(o||i)(s($),s(G),s(j));},i.ɵcmp=c({type:i,selectors:[["sz-constr-construction-projects-save"]],standalone:!0,features:[C([]),b,v],decls:8,vars:5,consts:()=>{let t;t="\u0627\u0644\u0627\u0633\u0645";let o;o="\u0627\u0644\u0631\u0642\u0645";let e;e="\u0627\u0644\u0647\u0627\u062A\u0641";let d;return d="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A",[[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","name","label",t],["formControlName","number","label",o],["formControlName","primaryPhone","label",e],["formControlName","primaryEmail","label",d],[3,"actions"]];},template:function(o,e){o&1&&(p(0,"sz-ui-dialog-header",0),m(1,"mat-dialog-content")(2,"form",1),p(3,"sz-ui-form-field-input",2)(4,"sz-ui-form-field-input",3)(5,"sz-ui-form-field-input",4)(6,"sz-ui-form-field-input",5),u()(),p(7,"sz-ui-dialog-actions",6)),o&2&&(n("title",e.title)("subtitle",e.subtitle)("alert",e.alert()),l(2),n("formGroup",e.form),l(5),n("actions",e.actions));},dependencies:[B,y,z,P,A,D,M,X,Q,g,Z,x,J,W],encapsulation:2});let r=i;return r;})();var Se=(()=>{let i=class i{constructor(t,o){this.dialog=t,this.router=o,this.cstnService=_(S),this.dataSource=new re(),this.appBarConfig={title:q.employees},this.dataSource.columnDefs.push(a.uuid("id"),a.string("name").setHeaderSortable(!0),a.string("number"),a.string("primaryEmail").setVisible(!1),a.string("primaryPhone").setHeaderSortable(!1),a.date("createdAt").setVisible(!1),a.date("updatedAt").setVisible(!1),ie.menu([N.edit(e=>this.openSaveComponent(e)),h.divider(),N.barcode(e=>this.openBarcodeWriterComponent(e)),h.divider(),N.delete(e=>this.openProjectDeleteComponent(e))])),this.get();}openSaveComponent(t){this.dialog.open(pe,{data:t}).afterClosed().subscribe(o=>{this.dataSource.addOrUpdateItem(o);});}openBarcodeWriterComponent(t){let o=`${document.baseURI}${H.PageEmployee.replace(":employeeId",t.id)}`;this.dialog.open(oe,{data:{msg:o,share:{title:t.name,enabled:!0},download:{filename:t.name},copyToClipboard:!0}}).afterClosed().subscribe(e=>{});}openProjectDeleteComponent(t){this.dialog.open(ee,{data:te.delete(this.cstnService.employees.delete(t.id),t)}).afterClosed().subscribe(o=>{this.dataSource.delete(o);});}get(){this.cstnService.employees.get(this.dataSource.getQuery()).pipe(ne(this.dataSource.state)).subscribe(t=>{this.dataSource.set(t.items,t.count);});}};i.ɵfac=function(o){return new(o||i)(s(Y),s(U));},i.ɵcmp=c({type:i,selectors:[["sz-constr-construction-employees"]],features:[C([])],decls:6,vars:3,consts:()=>{let t;return t="\u0625\u0636\u0627\u0641\u0629",[t,[3,"config"],[3,"changed","dataSource"],["title","","mat-flat-button","","color","primary","start","",3,"click"],[3,"update","dataSource"]];},template:function(o,e){o&1&&(p(0,"sz-ui-app-bar",1),m(1,"sz-ui-table-search-filter",2),f("changed",function(){return e.get();}),m(2,"button",3),f("click",function(){return e.openSaveComponent();}),m(3,"span"),L(4,0),u()()(),m(5,"sz-ui-table",4),f("update",function(){return e.get();}),u()),o&2&&(n("config",e.appBarConfig),l(),n("dataSource",e.dataSource),l(4),n("dataSource",e.dataSource));},dependencies:[w,se,ae,O],encapsulation:2});let r=i;return r;})();var it=(()=>{let i=class i{};i.ɵfac=function(o){return new(o||i)();},i.ɵmod=I({type:i}),i.ɵinj=R({providers:[S],imports:[V.forChild([{path:"",component:Se}]),M,F,k,me,g,O]});let r=i;return r;})();export{it as EmployeesModule};/**i18n:cc8d0044d806093be808d6b8741d081bf6b6d1e6fbd0e894171d30a61993b6a3*/