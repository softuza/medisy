import{a as Te}from"./chunk-MW54QL2V.js";import{a as ve,b as De,c as ze}from"./chunk-U6VB2DHS.js";import{c as d}from"./chunk-FWQBPBHJ.js";import{a as E}from"./chunk-7W4DPCX5.js";import{a as A,d as he,e as Me,f as _e,i as Ce,j as be}from"./chunk-OX75U6S7.js";import"./chunk-YSNB3P37.js";import"./chunk-M6VFFTL7.js";import{b as de,f as ce,g as fe,h as Se,j as ge,k as G}from"./chunk-JDBQ45YP.js";import{a as T}from"./chunk-ZGUTF2MC.js";import{d as ue,i as le,j as S,k as z}from"./chunk-53DZ6NLX.js";import{a as oe,b as ie,d as b,e as re,g as v}from"./chunk-7B3GMYBR.js";import"./chunk-NKLFXX3X.js";import"./chunk-VPIQ5RG6.js";import"./chunk-PYOUUVMA.js";import{h as pe}from"./chunk-ODIMT2GD.js";import"./chunk-NBE6QGAD.js";import{b as ne,h as ae,j as se,k as me}from"./chunk-IT3CNXEP.js";import{d as k,f as q,g as H,l as J,n as K,q as Q,r as W,u as Y}from"./chunk-QZRJHJEV.js";import"./chunk-4QPQ7IQ3.js";import{a as Z,c as ee,d as C}from"./chunk-WMCOMOML.js";import"./chunk-V2COJPJH.js";import{aa as te,la as D}from"./chunk-H2OL5IOU.js";import"./chunk-CYOOLWM5.js";import{Fb as $,Gb as j,Hb as g,Ia as B,Ib as h,Jb as s,Kb as m,Lb as l,Vb as w,Wb as N,Yb as x,bb as p,ea as y,gc as V,hc as X,ja as n,mb as R,mc as M,na as f,nc as _,oa as U,rb as F,vb as L,wb as P,yb as a}from"./chunk-6EDHPT3A.js";import"./chunk-NLUW4JS2.js";function Ne(i,t){if(i&1&&(s(0,"mat-option",4),V(1),m()),i&2){let c=t.$implicit;a("value",c.id),p(),X(c.name);}}var Ee=(()=>{let t=class t extends ce{constructor(){let e=n(oe);super(e),this.accessManagementService=n(d),this.fb=n(W),this.user=n(ie),this.groups=[];let o=this.fb;this.dialog=e,this.form=o.group({groupId:[null,[k.required]]}),this.getGroups();}flattenGroups(e){let o=[];function r(u){o.push({id:u.id,name:u.name,path:u.path,subGroups:[]}),u.subGroups&&u.subGroups.forEach(r);}return e.forEach(r),o;}getGroups(){this.accessManagementService.getGroups().subscribe(e=>{this.groups=this.flattenGroups(e);});}submit(){this.IsValid()&&this.accessManagementService.addUserGroup(this.user.id,this.form.value.groupId).subscribe(()=>{this.dialog.close(!0);});}};t.ɵfac=function(o){return new(o||t)();},t.ɵcmp=f({type:t,selectors:[["sz-iam-users-user-group-add"]],standalone:!0,features:[R,_],decls:10,vars:5,consts:()=>{let e;return e="\u0627\u0644\u0645\u062C\u0645\u0648\u0639\u0627\u062A",[e,[3,"title","subtitle","alert"],[1,"sz-form",3,"formGroup"],["formControlName","groupId"],[3,"value"],[3,"actions"]];},template:function(o,r){o&1&&(l(0,"sz-ui-dialog-header",1),s(1,"mat-dialog-content")(2,"form",2)(3,"mat-form-field")(4,"mat-label"),w(5,0),m(),s(6,"mat-select",3),g(7,Ne,2,2,"mat-option",4,$),m()()()(),l(9,"sz-ui-dialog-actions",5)),o&2&&(a("title",r.title)("subtitle",r.subtitle)("alert",r.alert()),p(2),a("formGroup",r.form),p(5),h(r.groups),p(2),a("actions",r.actions));},dependencies:[Y,J,q,H,K,Q,v,re,G,fe,Se,me,ae,ne,se,te],encapsulation:2});let i=t;return i;})();var I=(()=>{let t=class t{constructor(){this.dialog=n(b),this.adminService=n(d),this.user=B.required(),this.dataSource=new he(),this.appBarConfig={title:"Groups",menu:z.default().setItems([S.add(this.openAddComponent.bind(this))])},this.dataSource.columnDefs.push(A.string("name").setValueGetter(e=>e.name),A.menu([S.delete(e=>this.openDeleteComponent(e))]));}ngOnInit(){this.get();}openDeleteComponent(e){this.dialog.open(ge,{data:de.delete(this.adminService.deleteUserGroup(this.user().id,e.id),e)}).afterClosed().subscribe(o=>{this.dataSource.delete(o);});}openAddComponent(){this.dialog.open(Ee,{data:this.user()}).afterClosed().subscribe(e=>{e&&this.get();});}get(){this.adminService.getUserGroups(this.user().id).pipe(Me(this.dataSource.state)).subscribe(e=>{this.dataSource.set(e,e.length);});}};t.ɵfac=function(o){return new(o||t)();},t.ɵcmp=f({type:t,selectors:[["sz-iam-users-user-groups"]],inputs:{user:[1,"user"]},standalone:!0,features:[M([]),_],decls:2,vars:3,consts:[[3,"changed","config","dataSource"],[3,"update","dataSource"]],template:function(o,r){o&1&&(s(0,"sz-ui-table-bar",0),N("changed",function(){return r.get();}),m(),s(1,"sz-ui-table",1),N("update",function(){return r.get();}),m()),o&2&&(a("config",r.appBarConfig)("dataSource",r.dataSource),p(),a("dataSource",r.dataSource));},dependencies:[C,be,Ce,_e,D],encapsulation:2});let i=t;return i;})();var Oe=()=>[I];function ye(i,t){if(i&1&&l(0,"sz-ui-card",2),i&2){let c=t.$implicit;a("card",c);}}function Ue(i,t){if(i&1&&l(0,"sz-iam-users-user-groups",5),i&2){let c=x();a("user",c.user);}}var Ge=(()=>{let t=class t{constructor(){this.dialog=n(b),this.accessManagementService=n(d),this.route=n(Z),this.router=n(ee),this.items=[],this.user=this.route.snapshot.data.user,this.appBarConfig={title:this.user.username,menu:z.default().setItems([S.menu([S.edit(this.openSaveComponent.bind(this))])])};}openSaveComponent(){this.dialog.open(Te,{data:this.user}).afterClosed().subscribe(()=>{this.getUser();});}getUser(){this.accessManagementService.getUserById(this.user.id).subscribe(e=>{this.user=e;});}navigate(e){this.router.navigate([e],{relativeTo:this.route});}};t.ɵfac=function(o){return new(o||t)();},t.ɵcmp=f({type:t,selectors:[["sz-iam-users-user"]],features:[M([d])],decls:9,vars:1,consts:()=>{let e;return e="\u0627\u0644\u0645\u062C\u0645\u0648\u0639\u0627\u062A",[[3,"config"],[1,"sz-grid-card"],[3,"card"],["mat-stretch-tabs","false"],["label",e],[3,"user"]];},template:function(o,r){o&1&&(l(0,"sz-ui-app-bar",0),s(1,"div",1),g(2,ye,1,1,"sz-ui-card",2,j),m(),s(4,"mat-tab-group",3)(5,"mat-tab",4),F(6,Ue,1,1),L(7,6,Oe),P(),m()()),o&2&&(a("config",r.appBarConfig),p(2),h(r.items));},dependencies:[E,T,ve,De],encapsulation:2});let i=t;return i;})();var Ie=[{path:"",component:Ge}];var Bt=(()=>{let t=class t{};t.ɵfac=function(o){return new(o||t)();},t.ɵmod=U({type:t}),t.ɵinj=y({imports:[C.forChild(Ie),pe,E,G,T,ue,v,D,le,ze,I]});let i=t;return i;})();export{Bt as UserModule};/**i18n:71c33448fc84035c6ee56f25f20b16a3c311d1f911de884d4bce9857c4574a16*/